!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).VERTC=t()}(this,(function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g,y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},y.apply(this,arguments)};function E(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function S(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function b(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function T(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function C(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function R(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}!function(e){e[e.VIDEO_SOURCE_TYPE_EXTERNAL=0]="VIDEO_SOURCE_TYPE_EXTERNAL",e[e.VIDEO_SOURCE_TYPE_INTERNAL=1]="VIDEO_SOURCE_TYPE_INTERNAL"}(r||(r={})),function(e){e[e.AUDIO_SOURCE_TYPE_EXTERNAL=0]="AUDIO_SOURCE_TYPE_EXTERNAL",e[e.AUDIO_SOURCE_TYPE_INTERNAL=1]="AUDIO_SOURCE_TYPE_INTERNAL"}(i||(i={})),function(e){e[e.CHANNEL_PROFILE_COMMUNICATION=0]="CHANNEL_PROFILE_COMMUNICATION",e[e.CHANNEL_PROFILE_LIVE_BROADCASTING=1]="CHANNEL_PROFILE_LIVE_BROADCASTING"}(o||(o={})),function(e){e[e.AUTO_SUBSCRIBE_MODE=0]="AUTO_SUBSCRIBE_MODE",e[e.MANUAL_SUBSCRIBE_MODE=1]="MANUAL_SUBSCRIBE_MODE"}(a||(a={})),function(e){e[e.MUTE_STATE_OFF=0]="MUTE_STATE_OFF",e[e.MUTE_STATE_ON=1]="MUTE_STATE_ON"}(s||(s={})),function(e){e[e.SUBSCRIBE_SUCC=0]="SUBSCRIBE_SUCC",e[e.SUBSCRIBE_FAIL=1]="SUBSCRIBE_FAIL"}(c||(c={})),function(e){e[e.PUBLISH_SUCC=0]="PUBLISH_SUCC",e[e.PUBLISH_FAIL=1]="PUBLISH_FAIL"}(u||(u={})),function(e){e[e.MIRROR_MODE_OFF=0]="MIRROR_MODE_OFF",e[e.MIRROR_MODE_ON=1]="MIRROR_MODE_ON"}(d||(d={})),function(e){e[e.RTC_PAUSE_RESUME_CONTROL_AUDIO=0]="RTC_PAUSE_RESUME_CONTROL_AUDIO",e[e.RTC_PAUSE_RESUME_CONTROL_VIDEO=1]="RTC_PAUSE_RESUME_CONTROL_VIDEO",e[e.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO=2]="RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO"}(l||(l={})),function(e){e[e.RENDER_MODE_HIDDEN=0]="RENDER_MODE_HIDDEN",e[e.RENDER_MODE_FIT=1]="RENDER_MODE_FIT"}(f||(f={})),function(e){e[e.STREAM_INDEX_MAIN=0]="STREAM_INDEX_MAIN",e[e.STREAM_INDEX_SCREEN=1]="STREAM_INDEX_SCREEN"}(h||(h={})),function(e){e[e.AUDIO_ONLY=0]="AUDIO_ONLY",e[e.VIDEO_ONLY=1]="VIDEO_ONLY",e[e.AUDIO_AND_VIDEO=2]="AUDIO_AND_VIDEO",e[e.NONE=3]="NONE"}(p||(p={})),function(e){e[e.STREAM_REMOVE_REASON_UNPUBLISH=0]="STREAM_REMOVE_REASON_UNPUBLISH",e[e.STREAM_REMOVE_REASON_PUBLISH_FAILED=1]="STREAM_REMOVE_REASON_PUBLISH_FAILED",e[e.STREAM_REMOVE_REASON_KEEP_LIVE_FAILED=2]="STREAM_REMOVE_REASON_KEEP_LIVE_FAILED",e[e.STREAM_REMOVE_REASON_CLIENT_DISCONNECTED=3]="STREAM_REMOVE_REASON_CLIENT_DISCONNECTED",e[e.STREAM_REMOVE_REASON_REPUBLISH=4]="STREAM_REMOVE_REASON_REPUBLISH",e[e.STREAM_REMOVE_REASON_OTHER=5]="STREAM_REMOVE_REASON_OTHER"}(_||(_={})),function(e){e[e.CONNECTION_START=0]="CONNECTION_START",e[e.CONNECTION_STATE_DISCONNECTED=1]="CONNECTION_STATE_DISCONNECTED",e[e.CONNECTION_STATE_CONNECTING=2]="CONNECTION_STATE_CONNECTING",e[e.CONNECTION_STATE_CONNECTED=3]="CONNECTION_STATE_CONNECTED",e[e.CONNECTION_STATE_RECONNECTING=4]="CONNECTION_STATE_RECONNECTING",e[e.CONNECTION_STATE_RECONNECTED=5]="CONNECTION_STATE_RECONNECTED"}(v||(v={})),function(e){e[e.MIRROR_TYPE_NONE=0]="MIRROR_TYPE_NONE",e[e.MIRROR_TYPE_RENDER=1]="MIRROR_TYPE_RENDER"}(m||(m={})),function(e){e[e.domestic=0]="domestic",e[e.overseas=1]="overseas"}(g||(g={}));var I,A,w=Object.freeze({__proto__:null,get VideoSourceType(){return r},get AudioSourceType(){return i},get ChannelProfile(){return o},get SubscribeMode(){return a},get MuteState(){return s},get SubscribeState(){return c},get PublishState(){return u},get MirrorMode(){return d},get PauseResumeControlMediaType(){return l},get VideoRenderMode(){return f},get StreamIndex(){return h},get SubscribeMediaType(){return p},get StreamRemoveReason(){return _},get ConnectionState(){return v},get MirrorType(){return m},get LogChannel(){return g}});!function(e){e[e.AUTO=0]="AUTO",e[e.MODE_L=1]="MODE_L",e[e.MODE_R=2]="MODE_R",e[e.MODE_MIX=3]="MODE_MIX"}(I||(I={})),function(e){e[e.PLAYOUT=0]="PLAYOUT",e[e.PUBLISH=1]="PUBLISH",e[e.PLAYOUT_AND_PUBLISH=2]="PLAYOUT_AND_PUBLISH"}(A||(A={}));var O,N=Object.freeze({__proto__:null,get AudioMixingDualMonoMode(){return I},get AudioMixingType(){return A}});!function(e){e.onTrackEnded="onTrackEnded",e.onPlayerEvent="onPlayerEvent",e.onAutoplayFailed="onAutoplayFailed",e.onUserJoined="onUserJoined",e.onUserLeave="onUserLeave",e.onConnectionStateChanged="onConnectionStateChanged",e.onStreamAdd="onStreamAdd",e.onStreamRemove="onStreamRemove",e.onRoomMessageReceived="onRoomMessageReceived",e.onRoomBinaryMessageReceived="onRoomBinaryMessageReceived",e.onUserMessageReceived="onUserMessageReceived",e.onUserBinaryMessageReceived="onUserBinaryMessageReceived",e.onUserMuteAudio="onUserMuteAudio",e.onUserMuteVideo="onUserMuteVideo",e.onVideoFirstFrameRendered="onVideoFirstFrameRendered",e.onVideoFirstFrameDecoded="onVideoFirstFrameDecoded",e.onAudioFirstFrameDecoded="onAudioFirstFrameDecoded",e.onMediaDeviceStateChanged="onMediaDeviceStateChanged",e.onRemoteStreamStats="onRemoteStreamStats",e.onLocalStreamStats="onLocalStreamStats",e.onAudioVolumeIndication="onAudioVolumeIndication",e.onAudioPlaybackDeviceChanged="onAudioPlaybackDeviceChanged",e.onUserStartVideoCapture="onUserStartVideoCapture",e.onUserStopVideoCapture="onUserStopVideoCapture",e.onUserStartAudioCapture="onUserStartAudioCapture",e.onUserStopAudioCapture="onUserStopAudioCapture",e.onAutoPublishResult="onAutoPublishResult",e.onAutoSubscribeResult="onAutoSubscribeResult",e.onLiveTranscodingResult="onLiveTranscodingResult",e.onSEIMessageReceived="onSEIMessageReceived",e.onError="onError"}(O||(O={}));var k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},D=function(e){return e&&e.Math==Math&&e},P=D("object"==typeof globalThis&&globalThis)||D("object"==typeof window&&window)||D("object"==typeof self&&self)||D("object"==typeof k&&k)||function(){return this}()||Function("return this")(),M={},L=function(e){try{return!!e()}catch(e){return!0}},U=!L((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),x=!L((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),V=x,B=Function.prototype.call,j=V?B.bind(B):function(){return B.apply(B,arguments)},F={},z={}.propertyIsEnumerable,H=Object.getOwnPropertyDescriptor,G=H&&!z.call({1:2},1);F.f=G?function(e){var t=H(this,e);return!!t&&t.enumerable}:z;var W,Y,K=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},q=x,X=Function.prototype,J=X.bind,Z=X.call,$=q&&J.bind(Z,Z),Q=q?function(e){return e&&$(e)}:function(e){return e&&function(){return Z.apply(e,arguments)}},ee=Q,te=ee({}.toString),ne=ee("".slice),re=function(e){return ne(te(e),8,-1)},ie=Q,oe=L,ae=re,se=P.Object,ce=ie("".split),ue=oe((function(){return!se("z").propertyIsEnumerable(0)}))?function(e){return"String"==ae(e)?ce(e,""):se(e)}:se,de=P.TypeError,le=function(e){if(null==e)throw de("Can't call method on "+e);return e},fe=ue,he=le,pe=function(e){return fe(he(e))},_e=function(e){return"function"==typeof e},ve=_e,me=function(e){return"object"==typeof e?null!==e:ve(e)},ge=P,ye=_e,Ee=function(e){return ye(e)?e:void 0},Se=function(e,t){return arguments.length<2?Ee(ge[e]):ge[e]&&ge[e][t]},be=Q({}.isPrototypeOf),Te=Se("navigator","userAgent")||"",Ce=P,Re=Te,Ie=Ce.process,Ae=Ce.Deno,we=Ie&&Ie.versions||Ae&&Ae.version,Oe=we&&we.v8;Oe&&(Y=(W=Oe.split("."))[0]>0&&W[0]<4?1:+(W[0]+W[1])),!Y&&Re&&(!(W=Re.match(/Edge\/(\d+)/))||W[1]>=74)&&(W=Re.match(/Chrome\/(\d+)/))&&(Y=+W[1]);var Ne=Y,ke=Ne,De=L,Pe=!!Object.getOwnPropertySymbols&&!De((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ke&&ke<41})),Me=Pe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Le=Se,Ue=_e,xe=be,Ve=Me,Be=P.Object,je=Ve?function(e){return"symbol"==typeof e}:function(e){var t=Le("Symbol");return Ue(t)&&xe(t.prototype,Be(e))},Fe=P.String,ze=function(e){try{return Fe(e)}catch(e){return"Object"}},He=_e,Ge=ze,We=P.TypeError,Ye=function(e){if(He(e))return e;throw We(Ge(e)+" is not a function")},Ke=Ye,qe=function(e,t){var n=e[t];return null==n?void 0:Ke(n)},Xe=j,Je=_e,Ze=me,$e=P.TypeError,Qe={exports:{}},et=P,tt=Object.defineProperty,nt=function(e,t){try{tt(et,e,{value:t,configurable:!0,writable:!0})}catch(n){et[e]=t}return t},rt=nt,it="__core-js_shared__",ot=P[it]||rt(it,{}),at=ot;(Qe.exports=function(e,t){return at[e]||(at[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.0",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE",source:"https://github.com/zloirock/core-js"});var st=le,ct=P.Object,ut=function(e){return ct(st(e))},dt=ut,lt=Q({}.hasOwnProperty),ft=Object.hasOwn||function(e,t){return lt(dt(e),t)},ht=Q,pt=0,_t=Math.random(),vt=ht(1..toString),mt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+vt(++pt+_t,36)},gt=P,yt=Qe.exports,Et=ft,St=mt,bt=Pe,Tt=Me,Ct=yt("wks"),Rt=gt.Symbol,It=Rt&&Rt.for,At=Tt?Rt:Rt&&Rt.withoutSetter||St,wt=function(e){if(!Et(Ct,e)||!bt&&"string"!=typeof Ct[e]){var t="Symbol."+e;bt&&Et(Rt,e)?Ct[e]=Rt[e]:Ct[e]=Tt&&It?It(t):At(t)}return Ct[e]},Ot=j,Nt=me,kt=je,Dt=qe,Pt=function(e,t){var n,r;if("string"===t&&Je(n=e.toString)&&!Ze(r=Xe(n,e)))return r;if(Je(n=e.valueOf)&&!Ze(r=Xe(n,e)))return r;if("string"!==t&&Je(n=e.toString)&&!Ze(r=Xe(n,e)))return r;throw $e("Can't convert object to primitive value")},Mt=wt,Lt=P.TypeError,Ut=Mt("toPrimitive"),xt=function(e,t){if(!Nt(e)||kt(e))return e;var n,r=Dt(e,Ut);if(r){if(void 0===t&&(t="default"),n=Ot(r,e,t),!Nt(n)||kt(n))return n;throw Lt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Pt(e,t)},Vt=xt,Bt=je,jt=function(e){var t=Vt(e,"string");return Bt(t)?t:t+""},Ft=me,zt=P.document,Ht=Ft(zt)&&Ft(zt.createElement),Gt=function(e){return Ht?zt.createElement(e):{}},Wt=Gt,Yt=!U&&!L((function(){return 7!=Object.defineProperty(Wt("div"),"a",{get:function(){return 7}}).a})),Kt=U,qt=j,Xt=F,Jt=K,Zt=pe,$t=jt,Qt=ft,en=Yt,tn=Object.getOwnPropertyDescriptor;M.f=Kt?tn:function(e,t){if(e=Zt(e),t=$t(t),en)try{return tn(e,t)}catch(e){}if(Qt(e,t))return Jt(!qt(Xt.f,e,t),e[t])};var nn={},rn=U&&L((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),on=P,an=me,sn=on.String,cn=on.TypeError,un=function(e){if(an(e))return e;throw cn(sn(e)+" is not an object")},dn=U,ln=Yt,fn=rn,hn=un,pn=jt,_n=P.TypeError,vn=Object.defineProperty,mn=Object.getOwnPropertyDescriptor,gn="enumerable",yn="configurable",En="writable";nn.f=dn?fn?function(e,t,n){if(hn(e),t=pn(t),hn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&En in n&&!n.writable){var r=mn(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:yn in n?n.configurable:r.configurable,enumerable:gn in n?n.enumerable:r.enumerable,writable:!1})}return vn(e,t,n)}:vn:function(e,t,n){if(hn(e),t=pn(t),hn(n),ln)try{return vn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw _n("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Sn=nn,bn=K,Tn=U?function(e,t,n){return Sn.f(e,t,bn(1,n))}:function(e,t,n){return e[t]=n,e},Cn={exports:{}},Rn=_e,In=ot,An=Q(Function.toString);Rn(In.inspectSource)||(In.inspectSource=function(e){return An(e)});var wn,On,Nn,kn=In.inspectSource,Dn=_e,Pn=kn,Mn=P.WeakMap,Ln=Dn(Mn)&&/native code/.test(Pn(Mn)),Un=Qe.exports,xn=mt,Vn=Un("keys"),Bn=function(e){return Vn[e]||(Vn[e]=xn(e))},jn={},Fn=Ln,zn=P,Hn=Q,Gn=me,Wn=Tn,Yn=ft,Kn=ot,qn=Bn,Xn=jn,Jn="Object already initialized",Zn=zn.TypeError,$n=zn.WeakMap;if(Fn||Kn.state){var Qn=Kn.state||(Kn.state=new $n),er=Hn(Qn.get),tr=Hn(Qn.has),nr=Hn(Qn.set);wn=function(e,t){if(tr(Qn,e))throw new Zn(Jn);return t.facade=e,nr(Qn,e,t),t},On=function(e){return er(Qn,e)||{}},Nn=function(e){return tr(Qn,e)}}else{var rr=qn("state");Xn[rr]=!0,wn=function(e,t){if(Yn(e,rr))throw new Zn(Jn);return t.facade=e,Wn(e,rr,t),t},On=function(e){return Yn(e,rr)?e[rr]:{}},Nn=function(e){return Yn(e,rr)}}var ir={set:wn,get:On,has:Nn,enforce:function(e){return Nn(e)?On(e):wn(e,{})},getterFor:function(e){return function(t){var n;if(!Gn(t)||(n=On(t)).type!==e)throw Zn("Incompatible receiver, "+e+" required");return n}}},or=U,ar=ft,sr=Function.prototype,cr=or&&Object.getOwnPropertyDescriptor,ur=ar(sr,"name"),dr={EXISTS:ur,PROPER:ur&&"something"===function(){}.name,CONFIGURABLE:ur&&(!or||or&&cr(sr,"name").configurable)},lr=P,fr=_e,hr=ft,pr=Tn,_r=nt,vr=kn,mr=dr.CONFIGURABLE,gr=ir.get,yr=ir.enforce,Er=String(String).split("String");(Cn.exports=function(e,t,n,r){var i,o=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet,c=r&&void 0!==r.name?r.name:t;fr(n)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!hr(n,"name")||mr&&n.name!==c)&&pr(n,"name",c),(i=yr(n)).source||(i.source=Er.join("string"==typeof c?c:""))),e!==lr?(o?!s&&e[t]&&(a=!0):delete e[t],a?e[t]=n:pr(e,t,n)):a?e[t]=n:_r(t,n)})(Function.prototype,"toString",(function(){return fr(this)&&gr(this).source||vr(this)}));var Sr={},br=Math.ceil,Tr=Math.floor,Cr=function(e){var t=+e;return t!=t||0===t?0:(t>0?Tr:br)(t)},Rr=Cr,Ir=Math.max,Ar=Math.min,wr=function(e,t){var n=Rr(e);return n<0?Ir(n+t,0):Ar(n,t)},Or=Cr,Nr=Math.min,kr=function(e){return e>0?Nr(Or(e),9007199254740991):0},Dr=kr,Pr=function(e){return Dr(e.length)},Mr=pe,Lr=wr,Ur=Pr,xr=function(e){return function(t,n,r){var i,o=Mr(t),a=Ur(o),s=Lr(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Vr={includes:xr(!0),indexOf:xr(!1)},Br=ft,jr=pe,Fr=Vr.indexOf,zr=jn,Hr=Q([].push),Gr=function(e,t){var n,r=jr(e),i=0,o=[];for(n in r)!Br(zr,n)&&Br(r,n)&&Hr(o,n);for(;t.length>i;)Br(r,n=t[i++])&&(~Fr(o,n)||Hr(o,n));return o},Wr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Yr=Gr,Kr=Wr.concat("length","prototype");Sr.f=Object.getOwnPropertyNames||function(e){return Yr(e,Kr)};var qr={};qr.f=Object.getOwnPropertySymbols;var Xr=Se,Jr=Sr,Zr=qr,$r=un,Qr=Q([].concat),ei=Xr("Reflect","ownKeys")||function(e){var t=Jr.f($r(e)),n=Zr.f;return n?Qr(t,n(e)):t},ti=ft,ni=ei,ri=M,ii=nn,oi=L,ai=_e,si=/#|\.prototype\./,ci=function(e,t){var n=di[ui(e)];return n==fi||n!=li&&(ai(t)?oi(t):!!t)},ui=ci.normalize=function(e){return String(e).replace(si,".").toLowerCase()},di=ci.data={},li=ci.NATIVE="N",fi=ci.POLYFILL="P",hi=ci,pi=P,_i=M.f,vi=Tn,mi=Cn.exports,gi=nt,yi=function(e,t,n){for(var r=ni(t),i=ii.f,o=ri.f,a=0;a<r.length;a++){var s=r[a];ti(e,s)||n&&ti(n,s)||i(e,s,o(t,s))}},Ei=hi,Si=function(e,t){var n,r,i,o,a,s=e.target,c=e.global,u=e.stat;if(n=c?pi:u?pi[s]||gi(s,{}):(pi[s]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(a=_i(n,r))&&a.value:n[r],!Ei(c?r:s+(u?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;yi(o,i)}(e.sham||i&&i.sham)&&vi(o,"sham",!0),mi(n,r,o,e)}},bi=Si,Ti=Q,Ci=P.Date,Ri=Ti(Ci.prototype.getTime);bi({target:"Date",stat:!0},{now:function(){return Ri(new Ci)}});var Ii=Q,Ai=Cn.exports,wi=Date.prototype,Oi="Invalid Date",Ni="toString",ki=Ii(wi.toString),Di=Ii(wi.getTime);String(new Date(NaN))!=Oi&&Ai(wi,Ni,(function(){var e=Di(this);return e==e?ki(this):Oi}));let Pi=!0,Mi=!0;function Li(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Ui(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function xi(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Pi=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Vi(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Mi=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Bi(){if("object"==typeof window){if(Pi)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function ji(e,t){Mi&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Fi(e){return"[object Object]"===Object.prototype.toString.call(e)}function zi(e){return Fi(e)?Object.keys(e).reduce((function(t,n){const r=Fi(e[n]),i=r?zi(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function Hi(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?Hi(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{Hi(e,e.get(t),n)}))})))}function Gi(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&Hi(e,n,i)}))})),i}const Wi=Bi;function Yi(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),Wi("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return Wi("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function Ki(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function qi(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Ui(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Xi(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Ji(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function Zi(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Gi(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Ui(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Gi(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function $i(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function Qi(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return $i(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function a(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find((e=>e.track===t));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function eo(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function to(e,t){Ui(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var no=Object.freeze({__proto__:null,shimMediaStream:Ki,shimOnTrack:qi,shimGetSendersWithDtmf:Xi,shimGetStats:Ji,shimSenderReceiverGetStats:Zi,shimAddTrackRemoveTrackWithNative:$i,shimAddTrackRemoveTrack:Qi,shimPeerConnection:eo,fixNegotiationNeeded:to,shimGetUserMedia:Yi,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function ro(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){ji("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function io(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function oo(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function ao(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function so(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Ui(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function co(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){ji("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function uo(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function lo(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function fo(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function ho(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function po(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var _o=Object.freeze({__proto__:null,shimOnTrack:io,shimPeerConnection:oo,shimSenderGetStats:ao,shimReceiverGetStats:so,shimRemoveStream:co,shimRTCDataChannel:uo,shimAddTransceiver:lo,shimGetParameters:fo,shimCreateOffer:ho,shimCreateAnswer:po,shimGetUserMedia:ro,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function vo(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function mo(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function go(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}function yo(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Eo(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Eo(e){return e&&void 0!==e.video?Object.assign({},e,{video:zi(e.video)}):e}function So(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(ji("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function bo(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function To(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Co(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Ro=Object.freeze({__proto__:null,shimLocalStreamsAPI:vo,shimRemoteStreamsAPI:mo,shimCallbacksAPI:go,shimGetUserMedia:yo,shimConstraints:Eo,shimRTCIceServerUrls:So,shimTrackEventTransceiver:bo,shimCreateOfferLegacy:To,shimAudioContext:Co}),Io={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":n.relatedAddress=t[e+1];break;case"rport":n.relatedPort=parseInt(t[e+1],10);break;case"tcptype":n.tcpType=t[e+1];break;case"ufrag":n.ufrag=t[e+1],n.usernameFragment=t[e+1];break;default:void 0===n[t[e]]&&(n[t[e]]=t[e+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){let t=e.substr(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substr(e.indexOf(" ")+1).split(";");for(let e=0;e<r.length;e++)n=r[e].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){const t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){const t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");for(let i=3;i<r.length;i++){const o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){const r=t.parseRtpMap(a),i=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(r.parameters=i.length?t.parseFmtp(i[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),s=a.length>0&&a[0].ssrc;let c;const u=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substr(17).split(" ").map((e=>parseInt(e,10)))));u.length>0&&u[0].length>1&&u[0][0]===s&&(c=u[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&c&&(t.rtx={ssrc:c}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&s&&n.push({ssrc:s});let d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=d}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substr(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substr(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:i};const a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){const e=a[0].substr(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;i=e||t.generateSessionId();return"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let e=0;e<r.length;e++)switch(r[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[e].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let e=0;e<n.length;e++)if(n[e].length<2||"="!==n[e].charAt(1))return!1;return!0},e.exports=t}(Io);var Ao=Io.exports,wo=Object.freeze(e({__proto__:null,default:Ao},[Io.exports]));function Oo(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=Ao.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Ui(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function No(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Ao.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Ao.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Ao.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let a;a=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function ko(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Ui(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Do(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Po(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Mo(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Lo(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);const t="offer"===e.type?this.createOffer:this.createAnswer;return t.apply(this).then((e=>n.apply(this,[e])))})}var Uo=Object.freeze({__proto__:null,shimRTCIceCandidate:Oo,shimMaxMessageSize:No,shimSendThrowTypeError:ko,shimConnectionState:Do,removeExtmapAllowMixed:Po,shimAddIceCandidateNullOrEmpty:Mo,shimParameterlessSetLocalDescription:Lo});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Bi,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Li(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=Li(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Li(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:Uo,extractVersion:Li,disableLog:xi,disableWarnings:Vi,sdp:wo};switch(r.browser){case"chrome":if(!no||!eo||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=no,Mo(e,r),Lo(e),Yi(e,r),Ki(e),eo(e,r),qi(e),Qi(e,r),Xi(e),Ji(e),Zi(e),to(e,r),Oo(e),Do(e),No(e,r),ko(e),Po(e,r);break;case"firefox":if(!_o||!oo||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=_o,Mo(e,r),Lo(e),ro(e,r),oo(e,r),io(e),co(e),ao(e),so(e),uo(e),lo(e),fo(e),ho(e),po(e),Oo(e),Do(e),No(e,r),ko(e);break;case"safari":if(!Ro||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Ro,Mo(e,r),Lo(e),So(e),To(e),go(e),vo(e),mo(e),bo(e),yo(e),Co(e),Oo(e),No(e,r),ko(e),Po(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var xo={},Vo=Gr,Bo=Wr,jo=Object.keys||function(e){return Vo(e,Bo)},Fo=U,zo=rn,Ho=nn,Go=un,Wo=pe,Yo=jo;xo.f=Fo&&!zo?Object.defineProperties:function(e,t){Go(e);for(var n,r=Wo(t),i=Yo(t),o=i.length,a=0;o>a;)Ho.f(e,n=i[a++],r[n]);return e};var Ko,qo=Se("document","documentElement"),Xo=un,Jo=xo,Zo=Wr,$o=jn,Qo=qo,ea=Gt,ta=Bn("IE_PROTO"),na=function(){},ra=function(e){return"<script>"+e+"</"+"script>"},ia=function(e){e.write(ra("")),e.close();var t=e.parentWindow.Object;return e=null,t},oa=function(){try{Ko=new ActiveXObject("htmlfile")}catch(e){}var e,t;oa="undefined"!=typeof document?document.domain&&Ko?ia(Ko):((t=ea("iframe")).style.display="none",Qo.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(ra("document.F=Object")),e.close(),e.F):ia(Ko);for(var n=Zo.length;n--;)delete oa.prototype[Zo[n]];return oa()};$o[ta]=!0;var aa=Object.create||function(e,t){var n;return null!==e?(na.prototype=Xo(e),n=new na,na.prototype=null,n[ta]=e):n=oa(),void 0===t?n:Jo.f(n,t)},sa=aa,ca=nn,ua=wt("unscopables"),da=Array.prototype;null==da[ua]&&ca.f(da,ua,{configurable:!0,value:sa(null)});var la,fa,ha,pa=function(e){da[ua][e]=!0},_a={},va=!L((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),ma=P,ga=ft,ya=_e,Ea=ut,Sa=va,ba=Bn("IE_PROTO"),Ta=ma.Object,Ca=Ta.prototype,Ra=Sa?Ta.getPrototypeOf:function(e){var t=Ea(e);if(ga(t,ba))return t[ba];var n=t.constructor;return ya(n)&&t instanceof n?n.prototype:t instanceof Ta?Ca:null},Ia=L,Aa=_e,wa=Ra,Oa=Cn.exports,Na=wt("iterator"),ka=!1;[].keys&&("next"in(ha=[].keys())?(fa=wa(wa(ha)))!==Object.prototype&&(la=fa):ka=!0);var Da=null==la||Ia((function(){var e={};return la[Na].call(e)!==e}));Da&&(la={}),Aa(la[Na])||Oa(la,Na,(function(){return this}));var Pa={IteratorPrototype:la,BUGGY_SAFARI_ITERATORS:ka},Ma=nn.f,La=ft,Ua=wt("toStringTag"),xa=function(e,t,n){e&&!n&&(e=e.prototype),e&&!La(e,Ua)&&Ma(e,Ua,{configurable:!0,value:t})},Va=Pa.IteratorPrototype,Ba=aa,ja=K,Fa=xa,za=_a,Ha=function(){return this},Ga=function(e,t,n,r){var i=t+" Iterator";return e.prototype=Ba(Va,{next:ja(+!r,n)}),Fa(e,i,!1),za[i]=Ha,e},Wa=P,Ya=_e,Ka=Wa.String,qa=Wa.TypeError,Xa=Q,Ja=un,Za=function(e){if("object"==typeof e||Ya(e))return e;throw qa("Can't set "+Ka(e)+" as a prototype")},$a=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Xa(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Ja(n),Za(r),t?e(n,r):n.__proto__=r,n}}():void 0),Qa=Si,es=j,ts=dr,ns=_e,rs=Ga,is=Ra,os=$a,as=xa,ss=Tn,cs=Cn.exports,us=_a,ds=ts.PROPER,ls=ts.CONFIGURABLE,fs=Pa.IteratorPrototype,hs=Pa.BUGGY_SAFARI_ITERATORS,ps=wt("iterator"),_s="keys",vs="values",ms="entries",gs=function(){return this},ys=function(e,t,n,r,i,o,a){rs(n,t,r);var s,c,u,d=function(e){if(e===i&&_)return _;if(!hs&&e in h)return h[e];switch(e){case _s:case vs:case ms:return function(){return new n(this,e)}}return function(){return new n(this)}},l=t+" Iterator",f=!1,h=e.prototype,p=h[ps]||h["@@iterator"]||i&&h[i],_=!hs&&p||d(i),v="Array"==t&&h.entries||p;if(v&&(s=is(v.call(new e)))!==Object.prototype&&s.next&&(is(s)!==fs&&(os?os(s,fs):ns(s[ps])||cs(s,ps,gs)),as(s,l,!0)),ds&&i==vs&&p&&p.name!==vs&&(ls?ss(h,"name",vs):(f=!0,_=function(){return es(p,this)})),i)if(c={values:d(vs),keys:o?_:d(_s),entries:d(ms)},a)for(u in c)(hs||f||!(u in h))&&cs(h,u,c[u]);else Qa({target:t,proto:!0,forced:hs||f},c);return h[ps]!==_&&cs(h,ps,_,{name:i}),us[t]=_,c},Es=pe,Ss=pa,bs=_a,Ts=ir,Cs=nn.f,Rs=ys,Is=U,As="Array Iterator",ws=Ts.set,Os=Ts.getterFor(As),Ns=Rs(Array,"Array",(function(e,t){ws(this,{type:As,target:Es(e),index:0,kind:t})}),(function(){var e=Os(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),ks=bs.Arguments=bs.Array;if(Ss("keys"),Ss("values"),Ss("entries"),Is&&"values"!==ks.name)try{Cs(ks,"name",{value:"values"})}catch(e){}var Ds={exports:{}},Ps={},Ms=jt,Ls=nn,Us=K,xs=function(e,t,n){var r=Ms(t);r in e?Ls.f(e,r,Us(0,n)):e[r]=n},Vs=wr,Bs=Pr,js=xs,Fs=P.Array,zs=Math.max,Hs=function(e,t,n){for(var r=Bs(e),i=Vs(t,r),o=Vs(void 0===n?r:n,r),a=Fs(zs(o-i,0)),s=0;i<o;i++,s++)js(a,s,e[i]);return a.length=s,a},Gs=re,Ws=pe,Ys=Sr.f,Ks=Hs,qs="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Ps.f=function(e){return qs&&"Window"==Gs(e)?function(e){try{return Ys(e)}catch(e){return Ks(qs)}}(e):Ys(Ws(e))};var Xs=L((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),Js=L,Zs=me,$s=re,Qs=Xs,ec=Object.isExtensible,tc=Js((function(){ec(1)}))||Qs?function(e){return!!Zs(e)&&((!Qs||"ArrayBuffer"!=$s(e))&&(!ec||ec(e)))}:ec,nc=!L((function(){return Object.isExtensible(Object.preventExtensions({}))})),rc=Si,ic=Q,oc=jn,ac=me,sc=ft,cc=nn.f,uc=Sr,dc=Ps,lc=tc,fc=nc,hc=!1,pc=mt("meta"),_c=0,vc=function(e){cc(e,pc,{value:{objectID:"O"+_c++,weakData:{}}})},mc=Ds.exports={enable:function(){mc.enable=function(){},hc=!0;var e=uc.f,t=ic([].splice),n={};n[pc]=1,e(n).length&&(uc.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===pc){t(r,i,1);break}return r},rc({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:dc.f}))},fastKey:function(e,t){if(!ac(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!sc(e,pc)){if(!lc(e))return"F";if(!t)return"E";vc(e)}return e[pc].objectID},getWeakData:function(e,t){if(!sc(e,pc)){if(!lc(e))return!0;if(!t)return!1;vc(e)}return e[pc].weakData},onFreeze:function(e){return fc&&hc&&lc(e)&&!sc(e,pc)&&vc(e),e}};oc[pc]=!0;var gc=Ye,yc=x,Ec=Q(Q.bind),Sc=function(e,t){return gc(e),void 0===t?e:yc?Ec(e,t):function(){return e.apply(t,arguments)}},bc=_a,Tc=wt("iterator"),Cc=Array.prototype,Rc=function(e){return void 0!==e&&(bc.Array===e||Cc[Tc]===e)},Ic={};Ic[wt("toStringTag")]="z";var Ac="[object z]"===String(Ic),wc=P,Oc=Ac,Nc=_e,kc=re,Dc=wt("toStringTag"),Pc=wc.Object,Mc="Arguments"==kc(function(){return arguments}()),Lc=Oc?kc:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Pc(e),Dc))?n:Mc?kc(t):"Object"==(r=kc(t))&&Nc(t.callee)?"Arguments":r},Uc=Lc,xc=qe,Vc=_a,Bc=wt("iterator"),jc=function(e){if(null!=e)return xc(e,Bc)||xc(e,"@@iterator")||Vc[Uc(e)]},Fc=j,zc=Ye,Hc=un,Gc=ze,Wc=jc,Yc=P.TypeError,Kc=function(e,t){var n=arguments.length<2?Wc(e):t;if(zc(n))return Hc(Fc(n,e));throw Yc(Gc(e)+" is not iterable")},qc=j,Xc=un,Jc=qe,Zc=function(e,t,n){var r,i;Xc(e);try{if(!(r=Jc(e,"return"))){if("throw"===t)throw n;return n}r=qc(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Xc(r),n},$c=Sc,Qc=j,eu=un,tu=ze,nu=Rc,ru=Pr,iu=be,ou=Kc,au=jc,su=Zc,cu=P.TypeError,uu=function(e,t){this.stopped=e,this.result=t},du=uu.prototype,lu=function(e,t,n){var r,i,o,a,s,c,u,d=n&&n.that,l=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),p=$c(t,d),_=function(e){return r&&su(r,"normal",e),new uu(!0,e)},v=function(e){return l?(eu(e),h?p(e[0],e[1],_):p(e[0],e[1])):h?p(e,_):p(e)};if(f)r=e;else{if(!(i=au(e)))throw cu(tu(e)+" is not iterable");if(nu(i)){for(o=0,a=ru(e);a>o;o++)if((s=v(e[o]))&&iu(du,s))return s;return new uu(!1)}r=ou(e,i)}for(c=r.next;!(u=Qc(c,r)).done;){try{s=v(u.value)}catch(e){su(r,"throw",e)}if("object"==typeof s&&s&&iu(du,s))return s}return new uu(!1)},fu=be,hu=P.TypeError,pu=function(e,t){if(fu(t,e))return e;throw hu("Incorrect invocation")},_u=wt("iterator"),vu=!1;try{var mu=0,gu={next:function(){return{done:!!mu++}},return:function(){vu=!0}};gu[_u]=function(){return this},Array.from(gu,(function(){throw 2}))}catch(e){}var yu=function(e,t){if(!t&&!vu)return!1;var n=!1;try{var r={};r[_u]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Eu=_e,Su=me,bu=$a,Tu=function(e,t,n){var r,i;return bu&&Eu(r=t.constructor)&&r!==n&&Su(i=r.prototype)&&i!==n.prototype&&bu(e,i),e},Cu=Si,Ru=P,Iu=Q,Au=hi,wu=Cn.exports,Ou=Ds.exports,Nu=lu,ku=pu,Du=_e,Pu=me,Mu=L,Lu=yu,Uu=xa,xu=Tu,Vu=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=Ru[e],s=a&&a.prototype,c=a,u={},d=function(e){var t=Iu(s[e]);wu(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!Pu(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!Pu(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!Pu(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(Au(e,!Du(a)||!(i||s.forEach&&!Mu((function(){(new a).entries().next()})))))c=n.getConstructor(t,e,r,o),Ou.enable();else if(Au(e,!0)){var l=new c,f=l[o](i?{}:-0,1)!=l,h=Mu((function(){l.has(1)})),p=Lu((function(e){new a(e)})),_=!i&&Mu((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));p||((c=t((function(e,t){ku(e,s);var n=xu(new a,e,c);return null!=t&&Nu(t,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=c),(h||_)&&(d("delete"),d("has"),r&&d("get")),(_||f)&&d(o),i&&s.clear&&delete s.clear}return u[e]=c,Cu({global:!0,forced:c!=a},u),Uu(c,e),i||n.setStrong(c,e,r),c},Bu=Cn.exports,ju=function(e,t,n){for(var r in t)Bu(e,r,t[r],n);return e},Fu=Se,zu=nn,Hu=U,Gu=wt("species"),Wu=function(e){var t=Fu(e),n=zu.f;Hu&&t&&!t[Gu]&&n(t,Gu,{configurable:!0,get:function(){return this}})},Yu=nn.f,Ku=aa,qu=ju,Xu=Sc,Ju=pu,Zu=lu,$u=ys,Qu=Wu,ed=U,td=Ds.exports.fastKey,nd=ir.set,rd=ir.getterFor,id={getConstructor:function(e,t,n,r){var i=e((function(e,i){Ju(e,o),nd(e,{type:t,index:Ku(null),first:void 0,last:void 0,size:0}),ed||(e.size=0),null!=i&&Zu(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=rd(t),s=function(e,t,n){var r,i,o=a(e),s=c(e,t);return s?s.value=n:(o.last=s={index:i=td(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),ed?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},c=function(e,t){var n,r=a(e),i=td(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return qu(o,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,ed?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=c(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),ed?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=Xu(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),qu(o,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),ed&&Yu(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=rd(t),o=rd(r);$u(e,t,(function(e,t){nd(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Qu(t)}};Vu("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),id);var od=Lc,ad=Ac?{}.toString:function(){return"[object "+od(this)+"]"},sd=Ac,cd=Cn.exports,ud=ad;sd||cd(Object.prototype,"toString",ud,{unsafe:!0});var dd=Lc,ld=P.String,fd=function(e){if("Symbol"===dd(e))throw TypeError("Cannot convert a Symbol value to a string");return ld(e)},hd=Q,pd=Cr,_d=fd,vd=le,md=hd("".charAt),gd=hd("".charCodeAt),yd=hd("".slice),Ed=function(e){return function(t,n){var r,i,o=_d(vd(t)),a=pd(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=gd(o,a))<55296||r>56319||a+1===s||(i=gd(o,a+1))<56320||i>57343?e?md(o,a):r:e?yd(o,a,a+2):i-56320+(r-55296<<10)+65536}},Sd={codeAt:Ed(!1),charAt:Ed(!0)},bd=Sd.charAt,Td=fd,Cd=ir,Rd=ys,Id="String Iterator",Ad=Cd.set,wd=Cd.getterFor(Id);Rd(String,"String",(function(e){Ad(this,{type:Id,string:Td(e),index:0})}),(function(){var e,t=wd(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=bd(n,r),t.index+=e.length,{value:e,done:!1})}));var Od={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Nd=Gt("span").classList,kd=Nd&&Nd.constructor&&Nd.constructor.prototype,Dd=kd===Object.prototype?void 0:kd,Pd=P,Md=Od,Ld=Dd,Ud=Ns,xd=Tn,Vd=wt,Bd=Vd("iterator"),jd=Vd("toStringTag"),Fd=Ud.values,zd=function(e,t){if(e){if(e[Bd]!==Fd)try{xd(e,Bd,Fd)}catch(t){e[Bd]=Fd}if(e[jd]||xd(e,jd,t),Md[t])for(var n in Ud)if(e[n]!==Ud[n])try{xd(e,n,Ud[n])}catch(t){e[n]=Ud[n]}}};for(var Hd in Md)zd(Pd[Hd]&&Pd[Hd].prototype,Hd);zd(Ld,"DOMTokenList");var Gd=Si,Wd=U,Yd=nn.f;Gd({target:"Object",stat:!0,forced:Object.defineProperty!==Yd,sham:!Wd},{defineProperty:Yd});var Kd=Q([].slice),qd=Q,Xd=Ye,Jd=me,Zd=ft,$d=Kd,Qd=x,el=P.Function,tl=qd([].concat),nl=qd([].join),rl={},il=function(e,t,n){if(!Zd(rl,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";rl[t]=el("C,a","return new C("+nl(r,",")+")")}return rl[t](e,n)},ol=Qd?el.bind:function(e){var t=Xd(this),n=t.prototype,r=$d(arguments,1),i=function(){var n=tl(r,$d(arguments));return this instanceof i?il(t,n.length,n):t.apply(e,n)};return Jd(n)&&(i.prototype=n),i},al=ol;Si({target:"Function",proto:!0,forced:Function.bind!==al},{bind:al});var sl=L,cl=function(e,t){var n=[][e];return!!n&&sl((function(){n.call(null,t||function(){throw 1},1)}))},ul=Si,dl=ue,ll=pe,fl=cl,hl=Q([].join),pl=dl!=Object,_l=fl("join",",");ul({target:"Array",proto:!0,forced:pl||!_l},{join:function(e){return hl(ll(this),void 0===e?",":e)}});var vl=re,ml=Array.isArray||function(e){return"Array"==vl(e)},gl=Q,yl=L,El=_e,Sl=Lc,bl=kn,Tl=function(){},Cl=[],Rl=Se("Reflect","construct"),Il=/^\s*(?:class|function)\b/,Al=gl(Il.exec),wl=!Il.exec(Tl),Ol=function(e){if(!El(e))return!1;try{return Rl(Tl,Cl,e),!0}catch(e){return!1}},Nl=function(e){if(!El(e))return!1;switch(Sl(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return wl||!!Al(Il,bl(e))}catch(e){return!0}};Nl.sham=!0;var kl=!Rl||yl((function(){var e;return Ol(Ol.call)||!Ol(Object)||!Ol((function(){e=!0}))||e}))?Nl:Ol,Dl=P,Pl=ml,Ml=kl,Ll=me,Ul=wt("species"),xl=Dl.Array,Vl=function(e){var t;return Pl(e)&&(t=e.constructor,(Ml(t)&&(t===xl||Pl(t.prototype))||Ll(t)&&null===(t=t[Ul]))&&(t=void 0)),void 0===t?xl:t},Bl=function(e,t){return new(Vl(e))(0===t?0:t)},jl=Sc,Fl=ue,zl=ut,Hl=Pr,Gl=Bl,Wl=Q([].push),Yl=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,d,l){for(var f,h,p=zl(c),_=Fl(p),v=jl(u,d),m=Hl(_),g=0,y=l||Gl,E=t?y(c,m):n||a?y(c,0):void 0;m>g;g++)if((s||g in _)&&(h=v(f=_[g],g,p),e))if(t)E[g]=h;else if(h)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:Wl(E,f)}else switch(e){case 4:return!1;case 7:Wl(E,f)}return o?-1:r||i?i:E}},Kl={forEach:Yl(0),map:Yl(1),filter:Yl(2),some:Yl(3),every:Yl(4),find:Yl(5),findIndex:Yl(6),filterReject:Yl(7)},ql=Kl.forEach,Xl=cl("forEach")?[].forEach:function(e){return ql(this,e,arguments.length>1?arguments[1]:void 0)};Si({target:"Array",proto:!0,forced:[].forEach!=Xl},{forEach:Xl});var Jl=P,Zl=Od,$l=Dd,Ql=Xl,ef=Tn,tf=function(e){if(e&&e.forEach!==Ql)try{ef(e,"forEach",Ql)}catch(t){e.forEach=Ql}};for(var nf in Zl)Zl[nf]&&tf(Jl[nf]&&Jl[nf].prototype);tf($l);var rf=Si,of=Kl.find,af=pa,sf="find",cf=!0;sf in[]&&Array(1).find((function(){cf=!1})),rf({target:"Array",proto:!0,forced:cf},{find:function(e){return of(this,e,arguments.length>1?arguments[1]:void 0)}}),af(sf);var uf=L,df=Ne,lf=wt("species"),ff=function(e){return df>=51||!uf((function(){var t=[];return(t.constructor={})[lf]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},hf=Si,pf=P,_f=L,vf=ml,mf=me,gf=ut,yf=Pr,Ef=xs,Sf=Bl,bf=ff,Tf=Ne,Cf=wt("isConcatSpreadable"),Rf=9007199254740991,If="Maximum allowed index exceeded",Af=pf.TypeError,wf=Tf>=51||!_f((function(){var e=[];return e[Cf]=!1,e.concat()[0]!==e})),Of=bf("concat"),Nf=function(e){if(!mf(e))return!1;var t=e[Cf];return void 0!==t?!!t:vf(e)};hf({target:"Array",proto:!0,forced:!wf||!Of},{concat:function(e){var t,n,r,i,o,a=gf(this),s=Sf(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Nf(o=-1===t?a:arguments[t])){if(c+(i=yf(o))>Rf)throw Af(If);for(n=0;n<i;n++,c++)n in o&&Ef(s,c,o[n])}else{if(c>=Rf)throw Af(If);Ef(s,c++,o)}return s.length=c,s}});var kf,Df,Pf,Mf,Lf=P.Promise,Uf=kl,xf=ze,Vf=P.TypeError,Bf=function(e){if(Uf(e))return e;throw Vf(xf(e)+" is not a constructor")},jf=un,Ff=Bf,zf=wt("species"),Hf=function(e,t){var n,r=jf(e).constructor;return void 0===r||null==(n=jf(r)[zf])?t:Ff(n)},Gf=x,Wf=Function.prototype,Yf=Wf.apply,Kf=Wf.call,qf="object"==typeof Reflect&&Reflect.apply||(Gf?Kf.bind(Yf):function(){return Kf.apply(Yf,arguments)}),Xf=P.TypeError,Jf=function(e,t){if(e<t)throw Xf("Not enough arguments");return e},Zf=/(?:ipad|iphone|ipod).*applewebkit/i.test(Te),$f="process"==re(P.process),Qf=P,eh=qf,th=Sc,nh=_e,rh=ft,ih=L,oh=qo,ah=Kd,sh=Gt,ch=Jf,uh=Zf,dh=$f,lh=Qf.setImmediate,fh=Qf.clearImmediate,hh=Qf.process,ph=Qf.Dispatch,_h=Qf.Function,vh=Qf.MessageChannel,mh=Qf.String,gh=0,yh={},Eh="onreadystatechange";try{kf=Qf.location}catch(e){}var Sh=function(e){if(rh(yh,e)){var t=yh[e];delete yh[e],t()}},bh=function(e){return function(){Sh(e)}},Th=function(e){Sh(e.data)},Ch=function(e){Qf.postMessage(mh(e),kf.protocol+"//"+kf.host)};lh&&fh||(lh=function(e){ch(arguments.length,1);var t=nh(e)?e:_h(e),n=ah(arguments,1);return yh[++gh]=function(){eh(t,void 0,n)},Df(gh),gh},fh=function(e){delete yh[e]},dh?Df=function(e){hh.nextTick(bh(e))}:ph&&ph.now?Df=function(e){ph.now(bh(e))}:vh&&!uh?(Mf=(Pf=new vh).port2,Pf.port1.onmessage=Th,Df=th(Mf.postMessage,Mf)):Qf.addEventListener&&nh(Qf.postMessage)&&!Qf.importScripts&&kf&&"file:"!==kf.protocol&&!ih(Ch)?(Df=Ch,Qf.addEventListener("message",Th,!1)):Df=Eh in sh("script")?function(e){oh.appendChild(sh("script")).onreadystatechange=function(){oh.removeChild(this),Sh(e)}}:function(e){setTimeout(bh(e),0)});var Rh,Ih,Ah,wh,Oh,Nh,kh,Dh,Ph={set:lh,clear:fh},Mh=P,Lh=/ipad|iphone|ipod/i.test(Te)&&void 0!==Mh.Pebble,Uh=/web0s(?!.*chrome)/i.test(Te),xh=P,Vh=Sc,Bh=M.f,jh=Ph.set,Fh=Zf,zh=Lh,Hh=Uh,Gh=$f,Wh=xh.MutationObserver||xh.WebKitMutationObserver,Yh=xh.document,Kh=xh.process,qh=xh.Promise,Xh=Bh(xh,"queueMicrotask"),Jh=Xh&&Xh.value;Jh||(Rh=function(){var e,t;for(Gh&&(e=Kh.domain)&&e.exit();Ih;){t=Ih.fn,Ih=Ih.next;try{t()}catch(e){throw Ih?wh():Ah=void 0,e}}Ah=void 0,e&&e.enter()},Fh||Gh||Hh||!Wh||!Yh?!zh&&qh&&qh.resolve?((kh=qh.resolve(void 0)).constructor=qh,Dh=Vh(kh.then,kh),wh=function(){Dh(Rh)}):Gh?wh=function(){Kh.nextTick(Rh)}:(jh=Vh(jh,xh),wh=function(){jh(Rh)}):(Oh=!0,Nh=Yh.createTextNode(""),new Wh(Rh).observe(Nh,{characterData:!0}),wh=function(){Nh.data=Oh=!Oh}));var Zh=Jh||function(e){var t={fn:e,next:void 0};Ah&&(Ah.next=t),Ih||(Ih=t,wh()),Ah=t},$h={},Qh=Ye,ep=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Qh(t),this.reject=Qh(n)};$h.f=function(e){return new ep(e)};var tp=un,np=me,rp=$h,ip=P,op=function(){this.head=null,this.tail=null};op.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var ap,sp,cp,up,dp=op,lp="object"==typeof window,fp=Si,hp=P,pp=Se,_p=j,vp=Lf,mp=Cn.exports,gp=ju,yp=$a,Ep=xa,Sp=Wu,bp=Ye,Tp=_e,Cp=me,Rp=pu,Ip=kn,Ap=lu,wp=yu,Op=Hf,Np=Ph.set,kp=Zh,Dp=function(e,t){if(tp(e),np(t)&&t.constructor===e)return t;var n=rp.f(e);return(0,n.resolve)(t),n.promise},Pp=function(e,t){var n=ip.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},Mp=$h,Lp=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Up=dp,xp=ir,Vp=hi,Bp=lp,jp=$f,Fp=Ne,zp=wt("species"),Hp="Promise",Gp=xp.getterFor(Hp),Wp=xp.set,Yp=xp.getterFor(Hp),Kp=vp&&vp.prototype,qp=vp,Xp=Kp,Jp=hp.TypeError,Zp=hp.document,$p=hp.process,Qp=Mp.f,e_=Qp,t_=!!(Zp&&Zp.createEvent&&hp.dispatchEvent),n_=Tp(hp.PromiseRejectionEvent),r_="unhandledrejection",i_=!1,o_=Vp(Hp,(function(){var e=Ip(qp),t=e!==String(qp);if(!t&&66===Fp)return!0;if(Fp>=51&&/native code/.test(e))return!1;var n=new qp((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[zp]=r,!(i_=n.then((function(){}))instanceof r)||!t&&Bp&&!n_})),a_=o_||!wp((function(e){qp.all(e).catch((function(){}))})),s_=function(e){var t;return!(!Cp(e)||!Tp(t=e.then))&&t},c_=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,d=e.domain;try{s?(a||(2===t.rejection&&h_(t),t.rejection=1),!0===s?n=o:(d&&d.enter(),n=s(o),d&&(d.exit(),i=!0)),n===e.promise?u(Jp("Promise-chain cycle")):(r=s_(n))?_p(r,n,c,u):c(n)):u(o)}catch(e){d&&!i&&d.exit(),u(e)}},u_=function(e,t){e.notified||(e.notified=!0,kp((function(){for(var n,r=e.reactions;n=r.get();)c_(n,e);e.notified=!1,t&&!e.rejection&&l_(e)})))},d_=function(e,t,n){var r,i;t_?((r=Zp.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),hp.dispatchEvent(r)):r={promise:t,reason:n},!n_&&(i=hp["on"+e])?i(r):e===r_&&Pp("Unhandled promise rejection",n)},l_=function(e){_p(Np,hp,(function(){var t,n=e.facade,r=e.value;if(f_(e)&&(t=Lp((function(){jp?$p.emit("unhandledRejection",r,n):d_(r_,n,r)})),e.rejection=jp||f_(e)?2:1,t.error))throw t.value}))},f_=function(e){return 1!==e.rejection&&!e.parent},h_=function(e){_p(Np,hp,(function(){var t=e.facade;jp?$p.emit("rejectionHandled",t):d_("rejectionhandled",t,e.value)}))},p_=function(e,t,n){return function(r){e(t,r,n)}},__=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,u_(e,!0))},v_=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Jp("Promise can't be resolved itself");var r=s_(t);r?kp((function(){var n={done:!1};try{_p(r,t,p_(v_,n,e),p_(__,n,e))}catch(t){__(n,t,e)}})):(e.value=t,e.state=1,u_(e,!1))}catch(t){__({done:!1},t,e)}}};if(o_&&(Xp=(qp=function(e){Rp(this,Xp),bp(e),_p(ap,this);var t=Gp(this);try{e(p_(v_,t),p_(__,t))}catch(e){__(t,e)}}).prototype,(ap=function(e){Wp(this,{type:Hp,done:!1,notified:!1,parent:!1,reactions:new Up,rejection:!1,state:0,value:void 0})}).prototype=gp(Xp,{then:function(e,t){var n=Yp(this),r=Qp(Op(this,qp));return n.parent=!0,r.ok=!Tp(e)||e,r.fail=Tp(t)&&t,r.domain=jp?$p.domain:void 0,0==n.state?n.reactions.add(r):kp((function(){c_(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),sp=function(){var e=new ap,t=Gp(e);this.promise=e,this.resolve=p_(v_,t),this.reject=p_(__,t)},Mp.f=Qp=function(e){return e===qp||e===cp?new sp(e):e_(e)},Tp(vp)&&Kp!==Object.prototype)){up=Kp.then,i_||(mp(Kp,"then",(function(e,t){var n=this;return new qp((function(e,t){_p(up,n,e,t)})).then(e,t)}),{unsafe:!0}),mp(Kp,"catch",Xp.catch,{unsafe:!0}));try{delete Kp.constructor}catch(e){}yp&&yp(Kp,Xp)}fp({global:!0,wrap:!0,forced:o_},{Promise:qp}),Ep(qp,Hp,!1),Sp(Hp),cp=pp(Hp),fp({target:Hp,stat:!0,forced:o_},{reject:function(e){var t=Qp(this);return _p(t.reject,void 0,e),t.promise}}),fp({target:Hp,stat:!0,forced:o_},{resolve:function(e){return Dp(this,e)}}),fp({target:Hp,stat:!0,forced:a_},{all:function(e){var t=this,n=Qp(t),r=n.resolve,i=n.reject,o=Lp((function(){var n=bp(t.resolve),o=[],a=0,s=1;Ap(e,(function(e){var c=a++,u=!1;s++,_p(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=Qp(t),r=n.reject,i=Lp((function(){var i=bp(t.resolve);Ap(e,(function(e){_p(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var m_=Si,g_=P,y_=ml,E_=kl,S_=me,b_=wr,T_=Pr,C_=pe,R_=xs,I_=wt,A_=Kd,w_=ff("slice"),O_=I_("species"),N_=g_.Array,k_=Math.max;m_({target:"Array",proto:!0,forced:!w_},{slice:function(e,t){var n,r,i,o=C_(this),a=T_(o),s=b_(e,a),c=b_(void 0===t?a:t,a);if(y_(o)&&(n=o.constructor,(E_(n)&&(n===N_||y_(n.prototype))||S_(n)&&null===(n=n[O_]))&&(n=void 0),n===N_||void 0===n))return A_(o,s,c);for(r=new(void 0===n?N_:n)(k_(c-s,0)),i=0;s<c;s++,i++)s in o&&R_(r,i,o[s]);return r.length=i,r}});var D_=Hs,P_=Math.floor,M_=function(e,t){var n=e.length,r=P_(n/2);return n<8?L_(e,t):U_(e,M_(D_(e,0,r),t),M_(D_(e,r),t),t)},L_=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},U_=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},x_=M_,V_=Te.match(/firefox\/(\d+)/i),B_=!!V_&&+V_[1],j_=/MSIE|Trident/.test(Te),F_=Te.match(/AppleWebKit\/(\d+)\./),z_=!!F_&&+F_[1],H_=Si,G_=Q,W_=Ye,Y_=ut,K_=Pr,q_=fd,X_=L,J_=x_,Z_=cl,$_=B_,Q_=j_,ev=Ne,tv=z_,nv=[],rv=G_(nv.sort),iv=G_(nv.push),ov=X_((function(){nv.sort(void 0)})),av=X_((function(){nv.sort(null)})),sv=Z_("sort"),cv=!X_((function(){if(ev)return ev<70;if(!($_&&$_>3)){if(Q_)return!0;if(tv)return tv<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)nv.push({k:t+r,v:n})}for(nv.sort((function(e,t){return t.v-e.v})),r=0;r<nv.length;r++)t=nv[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));H_({target:"Array",proto:!0,forced:ov||!av||!sv||!cv},{sort:function(e){void 0!==e&&W_(e);var t=Y_(this);if(cv)return void 0===e?rv(t):rv(t,e);var n,r,i=[],o=K_(t);for(r=0;r<o;r++)r in t&&iv(i,t[r]);for(J_(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:q_(t)>q_(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<o;)delete t[r++];return t}});var uv="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,dv=Cr,lv=kr,fv=P.RangeError,hv=function(e){if(void 0===e)return 0;var t=dv(e),n=lv(t);if(t!==n)throw fv("Wrong length or index");return n},pv=P.Array,_v=Math.abs,vv=Math.pow,mv=Math.floor,gv=Math.log,yv=Math.LN2,Ev={pack:function(e,t,n){var r,i,o,a=pv(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,d=23===t?vv(2,-24)-vv(2,-77):0,l=e<0||0===e&&1/e<0?1:0,f=0;for((e=_v(e))!=e||e===1/0?(i=e!=e?1:0,r=c):(r=mv(gv(e)/yv),e*(o=vv(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?d/o:d*vv(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*vv(2,t),r+=u):(i=e*vv(2,u-1)*vv(2,t),r=0));t>=8;)a[f++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)a[f++]=255&r,r/=256,s-=8;return a[--f]|=128*l,a},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,u=e[c--],d=127&u;for(u>>=7;s>0;)d=256*d+e[c--],s-=8;for(n=d&(1<<-s)-1,d>>=-s,s+=t;s>0;)n=256*n+e[c--],s-=8;if(0===d)d=1-a;else{if(d===o)return n?NaN:u?-1/0:1/0;n+=vv(2,t),d-=a}return(u?-1:1)*n*vv(2,d-t)}},Sv=ut,bv=wr,Tv=Pr,Cv=function(e){for(var t=Sv(this),n=Tv(t),r=arguments.length,i=bv(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:bv(o,n);a>i;)t[i++]=e;return t},Rv=P,Iv=Q,Av=U,wv=uv,Ov=dr,Nv=Tn,kv=ju,Dv=L,Pv=pu,Mv=Cr,Lv=kr,Uv=hv,xv=Ev,Vv=Ra,Bv=$a,jv=Sr.f,Fv=nn.f,zv=Cv,Hv=Hs,Gv=xa,Wv=Ov.PROPER,Yv=Ov.CONFIGURABLE,Kv=ir.get,qv=ir.set,Xv="ArrayBuffer",Jv="DataView",Zv="Wrong index",$v=Rv.ArrayBuffer,Qv=$v,em=Qv&&Qv.prototype,tm=Rv.DataView,nm=tm&&tm.prototype,rm=Object.prototype,im=Rv.Array,om=Rv.RangeError,am=Iv(zv),sm=Iv([].reverse),cm=xv.pack,um=xv.unpack,dm=function(e){return[255&e]},lm=function(e){return[255&e,e>>8&255]},fm=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},hm=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},pm=function(e){return cm(e,23,4)},_m=function(e){return cm(e,52,8)},vm=function(e,t){Fv(e.prototype,t,{get:function(){return Kv(this)[t]}})},mm=function(e,t,n,r){var i=Uv(n),o=Kv(e);if(i+t>o.byteLength)throw om(Zv);var a=Kv(o.buffer).bytes,s=i+o.byteOffset,c=Hv(a,s,s+t);return r?c:sm(c)},gm=function(e,t,n,r,i,o){var a=Uv(n),s=Kv(e);if(a+t>s.byteLength)throw om(Zv);for(var c=Kv(s.buffer).bytes,u=a+s.byteOffset,d=r(+i),l=0;l<t;l++)c[u+l]=d[o?l:t-l-1]};if(wv){var ym=Wv&&$v.name!==Xv;if(Dv((function(){$v(1)}))&&Dv((function(){new $v(-1)}))&&!Dv((function(){return new $v,new $v(1.5),new $v(NaN),ym&&!Yv})))ym&&Yv&&Nv($v,"name",Xv);else{(Qv=function(e){return Pv(this,em),new $v(Uv(e))}).prototype=em;for(var Em,Sm=jv($v),bm=0;Sm.length>bm;)(Em=Sm[bm++])in Qv||Nv(Qv,Em,$v[Em]);em.constructor=Qv}Bv&&Vv(nm)!==rm&&Bv(nm,rm);var Tm=new tm(new Qv(2)),Cm=Iv(nm.setInt8);Tm.setInt8(0,2147483648),Tm.setInt8(1,2147483649),!Tm.getInt8(0)&&Tm.getInt8(1)||kv(nm,{setInt8:function(e,t){Cm(this,e,t<<24>>24)},setUint8:function(e,t){Cm(this,e,t<<24>>24)}},{unsafe:!0})}else em=(Qv=function(e){Pv(this,em);var t=Uv(e);qv(this,{bytes:am(im(t),0),byteLength:t}),Av||(this.byteLength=t)}).prototype,nm=(tm=function(e,t,n){Pv(this,nm),Pv(e,em);var r=Kv(e).byteLength,i=Mv(t);if(i<0||i>r)throw om("Wrong offset");if(i+(n=void 0===n?r-i:Lv(n))>r)throw om("Wrong length");qv(this,{buffer:e,byteLength:n,byteOffset:i}),Av||(this.buffer=e,this.byteLength=n,this.byteOffset=i)}).prototype,Av&&(vm(Qv,"byteLength"),vm(tm,"buffer"),vm(tm,"byteLength"),vm(tm,"byteOffset")),kv(nm,{getInt8:function(e){return mm(this,1,e)[0]<<24>>24},getUint8:function(e){return mm(this,1,e)[0]},getInt16:function(e){var t=mm(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=mm(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return hm(mm(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return hm(mm(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return um(mm(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return um(mm(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){gm(this,1,e,dm,t)},setUint8:function(e,t){gm(this,1,e,dm,t)},setInt16:function(e,t){gm(this,2,e,lm,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){gm(this,2,e,lm,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){gm(this,4,e,fm,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){gm(this,4,e,fm,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){gm(this,4,e,pm,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){gm(this,8,e,_m,t,arguments.length>2?arguments[2]:void 0)}});Gv(Qv,Xv),Gv(tm,Jv);var Rm={ArrayBuffer:Qv,DataView:tm},Im=Si,Am=Q,wm=L,Om=un,Nm=wr,km=kr,Dm=Hf,Pm=Rm.ArrayBuffer,Mm=Rm.DataView,Lm=Mm.prototype,Um=Am(Pm.prototype.slice),xm=Am(Lm.getUint8),Vm=Am(Lm.setUint8);Im({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:wm((function(){return!new Pm(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(Um&&void 0===t)return Um(Om(this),e);for(var n=Om(this).byteLength,r=Nm(e,n),i=Nm(void 0===t?n:t,n),o=new(Dm(this,Pm))(km(i-r)),a=new Mm(this),s=new Mm(o),c=0;r<i;)Vm(s,c++,xm(a,r++));return o}});var Bm,jm,Fm,zm={exports:{}},Hm=uv,Gm=U,Wm=P,Ym=_e,Km=me,qm=ft,Xm=Lc,Jm=ze,Zm=Tn,$m=Cn.exports,Qm=nn.f,eg=be,tg=Ra,ng=$a,rg=wt,ig=mt,og=Wm.Int8Array,ag=og&&og.prototype,sg=Wm.Uint8ClampedArray,cg=sg&&sg.prototype,ug=og&&tg(og),dg=ag&&tg(ag),lg=Object.prototype,fg=Wm.TypeError,hg=rg("toStringTag"),pg=ig("TYPED_ARRAY_TAG"),_g=ig("TYPED_ARRAY_CONSTRUCTOR"),vg=Hm&&!!ng&&"Opera"!==Xm(Wm.opera),mg=!1,gg={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},yg={BigInt64Array:8,BigUint64Array:8},Eg=function(e){if(!Km(e))return!1;var t=Xm(e);return qm(gg,t)||qm(yg,t)};for(Bm in gg)(Fm=(jm=Wm[Bm])&&jm.prototype)?Zm(Fm,_g,jm):vg=!1;for(Bm in yg)(Fm=(jm=Wm[Bm])&&jm.prototype)&&Zm(Fm,_g,jm);if((!vg||!Ym(ug)||ug===Function.prototype)&&(ug=function(){throw fg("Incorrect invocation")},vg))for(Bm in gg)Wm[Bm]&&ng(Wm[Bm],ug);if((!vg||!dg||dg===lg)&&(dg=ug.prototype,vg))for(Bm in gg)Wm[Bm]&&ng(Wm[Bm].prototype,dg);if(vg&&tg(cg)!==dg&&ng(cg,dg),Gm&&!qm(dg,hg))for(Bm in mg=!0,Qm(dg,hg,{get:function(){return Km(this)?this[pg]:void 0}}),gg)Wm[Bm]&&Zm(Wm[Bm],pg,Bm);var Sg={NATIVE_ARRAY_BUFFER_VIEWS:vg,TYPED_ARRAY_CONSTRUCTOR:_g,TYPED_ARRAY_TAG:mg&&pg,aTypedArray:function(e){if(Eg(e))return e;throw fg("Target is not a typed array")},aTypedArrayConstructor:function(e){if(Ym(e)&&(!ng||eg(ug,e)))return e;throw fg(Jm(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(Gm){if(n)for(var i in gg){var o=Wm[i];if(o&&qm(o.prototype,e))try{delete o.prototype[e]}catch(n){try{o.prototype[e]=t}catch(e){}}}dg[e]&&!n||$m(dg,e,n?t:vg&&ag[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(Gm){if(ng){if(n)for(r in gg)if((i=Wm[r])&&qm(i,e))try{delete i[e]}catch(e){}if(ug[e]&&!n)return;try{return $m(ug,e,n?t:vg&&ug[e]||t)}catch(e){}}for(r in gg)!(i=Wm[r])||i[e]&&!n||$m(i,e,t)}},isView:function(e){if(!Km(e))return!1;var t=Xm(e);return"DataView"===t||qm(gg,t)||qm(yg,t)},isTypedArray:Eg,TypedArray:ug,TypedArrayPrototype:dg},bg=P,Tg=L,Cg=yu,Rg=Sg.NATIVE_ARRAY_BUFFER_VIEWS,Ig=bg.ArrayBuffer,Ag=bg.Int8Array,wg=!Rg||!Tg((function(){Ag(1)}))||!Tg((function(){new Ag(-1)}))||!Cg((function(e){new Ag,new Ag(null),new Ag(1.5),new Ag(e)}),!0)||Tg((function(){return 1!==new Ag(new Ig(2),1,void 0).length})),Og=me,Ng=Math.floor,kg=Number.isInteger||function(e){return!Og(e)&&isFinite(e)&&Ng(e)===e},Dg=Cr,Pg=P.RangeError,Mg=function(e){var t=Dg(e);if(t<0)throw Pg("The argument can't be less than 0");return t},Lg=P.RangeError,Ug=function(e,t){var n=Mg(e);if(n%t)throw Lg("Wrong offset");return n},xg=Sc,Vg=j,Bg=Bf,jg=ut,Fg=Pr,zg=Kc,Hg=jc,Gg=Rc,Wg=Sg.aTypedArrayConstructor,Yg=Si,Kg=P,qg=j,Xg=U,Jg=wg,Zg=Sg,$g=Rm,Qg=pu,ey=K,ty=Tn,ny=kg,ry=kr,iy=hv,oy=Ug,ay=jt,sy=ft,cy=Lc,uy=me,dy=je,ly=aa,fy=be,hy=$a,py=Sr.f,_y=function(e){var t,n,r,i,o,a,s=Bg(this),c=jg(e),u=arguments.length,d=u>1?arguments[1]:void 0,l=void 0!==d,f=Hg(c);if(f&&!Gg(f))for(a=(o=zg(c,f)).next,c=[];!(i=Vg(a,o)).done;)c.push(i.value);for(l&&u>2&&(d=xg(d,arguments[2])),n=Fg(c),r=new(Wg(s))(n),t=0;n>t;t++)r[t]=l?d(c[t],t):c[t];return r},vy=Kl.forEach,my=Wu,gy=nn,yy=M,Ey=Tu,Sy=ir.get,by=ir.set,Ty=gy.f,Cy=yy.f,Ry=Math.round,Iy=Kg.RangeError,Ay=$g.ArrayBuffer,wy=Ay.prototype,Oy=$g.DataView,Ny=Zg.NATIVE_ARRAY_BUFFER_VIEWS,ky=Zg.TYPED_ARRAY_CONSTRUCTOR,Dy=Zg.TYPED_ARRAY_TAG,Py=Zg.TypedArray,My=Zg.TypedArrayPrototype,Ly=Zg.aTypedArrayConstructor,Uy=Zg.isTypedArray,xy="BYTES_PER_ELEMENT",Vy="Wrong length",By=function(e,t){Ly(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},jy=function(e,t){Ty(e,t,{get:function(){return Sy(this)[t]}})},Fy=function(e){var t;return fy(wy,e)||"ArrayBuffer"==(t=cy(e))||"SharedArrayBuffer"==t},zy=function(e,t){return Uy(e)&&!dy(t)&&t in e&&ny(+t)&&t>=0},Hy=function(e,t){return t=ay(t),zy(e,t)?ey(2,e[t]):Cy(e,t)},Gy=function(e,t,n){return t=ay(t),!(zy(e,t)&&uy(n)&&sy(n,"value"))||sy(n,"get")||sy(n,"set")||n.configurable||sy(n,"writable")&&!n.writable||sy(n,"enumerable")&&!n.enumerable?Ty(e,t,n):(e[t]=n.value,e)};Xg?(Ny||(yy.f=Hy,gy.f=Gy,jy(My,"buffer"),jy(My,"byteOffset"),jy(My,"byteLength"),jy(My,"length")),Yg({target:"Object",stat:!0,forced:!Ny},{getOwnPropertyDescriptor:Hy,defineProperty:Gy}),zm.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,i=e+(n?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=Kg[i],c=s,u=c&&c.prototype,d={},l=function(e,t){Ty(e,t,{get:function(){return function(e,t){var n=Sy(e);return n.view[o](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var o=Sy(e);n&&(i=(i=Ry(i))<0?0:i>255?255:255&i),o.view[a](t*r+o.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};Ny?Jg&&(c=t((function(e,t,n,i){return Qg(e,u),Ey(uy(t)?Fy(t)?void 0!==i?new s(t,oy(n,r),i):void 0!==n?new s(t,oy(n,r)):new s(t):Uy(t)?By(c,t):qg(_y,c,t):new s(iy(t)),e,c)})),hy&&hy(c,Py),vy(py(s),(function(e){e in c||ty(c,e,s[e])})),c.prototype=u):(c=t((function(e,t,n,i){Qg(e,u);var o,a,s,d=0,f=0;if(uy(t)){if(!Fy(t))return Uy(t)?By(c,t):qg(_y,c,t);o=t,f=oy(n,r);var h=t.byteLength;if(void 0===i){if(h%r)throw Iy(Vy);if((a=h-f)<0)throw Iy(Vy)}else if((a=ry(i)*r)+f>h)throw Iy(Vy);s=a/r}else s=iy(t),o=new Ay(a=s*r);for(by(e,{buffer:o,byteOffset:f,byteLength:a,length:s,view:new Oy(o)});d<s;)l(e,d++)})),hy&&hy(c,Py),u=c.prototype=ly(My)),u.constructor!==c&&ty(u,"constructor",c),ty(u,ky,c),Dy&&ty(u,Dy,i),d[i]=c,Yg({global:!0,forced:c!=s,sham:!Ny},d),xy in c||ty(c,xy,r),xy in u||ty(u,xy,r),my(i)}):zm.exports=function(){},(0,zm.exports)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Wy=ut,Yy=wr,Ky=Pr,qy=Math.min,Xy=[].copyWithin||function(e,t){var n=Wy(this),r=Ky(n),i=Yy(e,r),o=Yy(t,r),a=arguments.length>2?arguments[2]:void 0,s=qy((void 0===a?r:Yy(a,r))-o,r-i),c=1;for(o<i&&i<o+s&&(c=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=c,o+=c;return n},Jy=Sg,Zy=Q(Xy),$y=Jy.aTypedArray;(0,Jy.exportTypedArrayMethod)("copyWithin",(function(e,t){return Zy($y(this),e,t,arguments.length>2?arguments[2]:void 0)}));var Qy=Kl.every,eE=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("every",(function(e){return Qy(eE(this),e,arguments.length>1?arguments[1]:void 0)}));var tE=j,nE=Cv,rE=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("fill",(function(e){var t=arguments.length;return tE(nE,rE(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}));var iE=Pr,oE=Hf,aE=Sg.TYPED_ARRAY_CONSTRUCTOR,sE=Sg.aTypedArrayConstructor,cE=function(e){return sE(oE(e,e[aE]))},uE=function(e,t){for(var n=0,r=iE(t),i=new e(r);r>n;)i[n]=t[n++];return i},dE=cE,lE=Kl.filter,fE=function(e,t){return uE(dE(e),t)},hE=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("filter",(function(e){var t=lE(hE(this),e,arguments.length>1?arguments[1]:void 0);return fE(this,t)}));var pE=Kl.find,_E=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("find",(function(e){return pE(_E(this),e,arguments.length>1?arguments[1]:void 0)}));var vE=Kl.findIndex,mE=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("findIndex",(function(e){return vE(mE(this),e,arguments.length>1?arguments[1]:void 0)}));var gE=Kl.forEach,yE=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("forEach",(function(e){gE(yE(this),e,arguments.length>1?arguments[1]:void 0)}));var EE=Vr.includes,SE=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("includes",(function(e){return EE(SE(this),e,arguments.length>1?arguments[1]:void 0)}));var bE=Vr.indexOf,TE=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("indexOf",(function(e){return bE(TE(this),e,arguments.length>1?arguments[1]:void 0)}));var CE=P,RE=L,IE=Q,AE=Sg,wE=Ns,OE=wt("iterator"),NE=CE.Uint8Array,kE=IE(wE.values),DE=IE(wE.keys),PE=IE(wE.entries),ME=AE.aTypedArray,LE=AE.exportTypedArrayMethod,UE=NE&&NE.prototype,xE=!RE((function(){UE[OE].call([1])})),VE=!!UE&&UE.values&&UE[OE]===UE.values&&"values"===UE.values.name,BE=function(){return kE(ME(this))};LE("entries",(function(){return PE(ME(this))}),xE),LE("keys",(function(){return DE(ME(this))}),xE),LE("values",BE,xE||!VE,{name:"values"}),LE(OE,BE,xE||!VE,{name:"values"});var jE=Sg.aTypedArray,FE=Sg.exportTypedArrayMethod,zE=Q([].join);FE("join",(function(e){return zE(jE(this),e)}));var HE=qf,GE=pe,WE=Cr,YE=Pr,KE=cl,qE=Math.min,XE=[].lastIndexOf,JE=!!XE&&1/[1].lastIndexOf(1,-0)<0,ZE=KE("lastIndexOf"),$E=JE||!ZE?function(e){if(JE)return HE(XE,this,arguments)||0;var t=GE(this),n=YE(t),r=n-1;for(arguments.length>1&&(r=qE(r,WE(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:XE,QE=qf,eS=$E,tS=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return QE(eS,tS(this),t>1?[e,arguments[1]]:[e])}));var nS=Kl.map,rS=cE,iS=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("map",(function(e){return nS(iS(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(rS(e))(t)}))}));var oS=Ye,aS=ut,sS=ue,cS=Pr,uS=P.TypeError,dS=function(e){return function(t,n,r,i){oS(n);var o=aS(t),a=sS(o),s=cS(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw uS("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},lS={left:dS(!1),right:dS(!0)},fS=lS.left,hS=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return fS(hS(this),e,t,t>1?arguments[1]:void 0)}));var pS=lS.right,_S=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return pS(_S(this),e,t,t>1?arguments[1]:void 0)}));var vS=Sg.aTypedArray,mS=Sg.exportTypedArrayMethod,gS=Math.floor;mS("reverse",(function(){for(var e,t=this,n=vS(t).length,r=gS(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t}));var yS=P,ES=j,SS=Sg,bS=Pr,TS=Ug,CS=ut,RS=L,IS=yS.RangeError,AS=yS.Int8Array,wS=AS&&AS.prototype,OS=wS&&wS.set,NS=SS.aTypedArray,kS=SS.exportTypedArrayMethod,DS=!RS((function(){var e=new Uint8ClampedArray(2);return ES(OS,e,{length:1,0:3},1),3!==e[1]})),PS=DS&&SS.NATIVE_ARRAY_BUFFER_VIEWS&&RS((function(){var e=new AS(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));kS("set",(function(e){NS(this);var t=TS(arguments.length>1?arguments[1]:void 0,1),n=CS(e);if(DS)return ES(OS,this,n,t);var r=this.length,i=bS(n),o=0;if(i+t>r)throw IS("Wrong length");for(;o<i;)this[t+o]=n[o++]}),!DS||PS);var MS=cE,LS=Kd,US=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("slice",(function(e,t){for(var n=LS(US(this),e,t),r=MS(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a}),L((function(){new Int8Array(1).slice()})));var xS=Kl.some,VS=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("some",(function(e){return xS(VS(this),e,arguments.length>1?arguments[1]:void 0)}));var BS=P,jS=Q,FS=L,zS=Ye,HS=x_,GS=Sg,WS=B_,YS=j_,KS=Ne,qS=z_,XS=BS.Array,JS=GS.aTypedArray,ZS=GS.exportTypedArrayMethod,$S=BS.Uint16Array,QS=$S&&jS($S.prototype.sort),eb=!(!QS||FS((function(){QS(new $S(2),null)}))&&FS((function(){QS(new $S(2),{})}))),tb=!!QS&&!FS((function(){if(KS)return KS<74;if(WS)return WS<67;if(YS)return!0;if(qS)return qS<602;var e,t,n=new $S(516),r=XS(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(QS(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));ZS("sort",(function(e){return void 0!==e&&zS(e),tb?QS(this,e):HS(JS(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!tb||eb);var nb=kr,rb=wr,ib=cE,ob=Sg.aTypedArray;(0,Sg.exportTypedArrayMethod)("subarray",(function(e,t){var n=ob(this),r=n.length,i=rb(e,r);return new(ib(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,nb((void 0===t?r:rb(t,r))-i))}));var ab=qf,sb=Sg,cb=L,ub=Kd,db=P.Int8Array,lb=sb.aTypedArray,fb=sb.exportTypedArrayMethod,hb=[].toLocaleString,pb=!!db&&cb((function(){hb.call(new db(1))}));fb("toLocaleString",(function(){return ab(hb,pb?ub(lb(this)):lb(this),ub(arguments))}),cb((function(){return[1,2].toLocaleString()!=new db([1,2]).toLocaleString()}))||!cb((function(){db.prototype.toLocaleString.call([1,2])})));var _b=Sg.exportTypedArrayMethod,vb=L,mb=Q,gb=P.Uint8Array,yb=gb&&gb.prototype||{},Eb=[].toString,Sb=mb([].join);vb((function(){Eb.call({})}))&&(Eb=function(){return Sb(this)});var bb=yb.toString!=Eb;_b("toString",Eb,bb);var Tb=Si,Cb=P,Rb=qf,Ib=_e,Ab=Kd,wb=Jf,Ob=/MSIE .\./.test(Te),Nb=Cb.Function,kb=function(e){return function(t,n){var r=wb(arguments.length,1)>2,i=Ib(t)?t:Nb(t),o=r?Ab(arguments,2):void 0;return e(r?function(){Rb(i,this,o)}:i,n)}};Tb({global:!0,bind:!0,forced:Ob},{setTimeout:kb(Cb.setTimeout),setInterval:kb(Cb.setInterval)});var Db=Si,Pb=Kl.findIndex,Mb=pa,Lb="findIndex",Ub=!0;Lb in[]&&Array(1).findIndex((function(){Ub=!1})),Db({target:"Array",proto:!0,forced:Ub},{findIndex:function(e){return Pb(this,e,arguments.length>1?arguments[1]:void 0)}}),Mb(Lb);var xb=Si,Vb=P,Bb=wr,jb=Cr,Fb=Pr,zb=ut,Hb=Bl,Gb=xs,Wb=ff("splice"),Yb=Vb.TypeError,Kb=Math.max,qb=Math.min,Xb=9007199254740991,Jb="Maximum allowed length exceeded";xb({target:"Array",proto:!0,forced:!Wb},{splice:function(e,t){var n,r,i,o,a,s,c=zb(this),u=Fb(c),d=Bb(e,u),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=u-d):(n=l-2,r=qb(Kb(jb(t),0),u-d)),u+n-r>Xb)throw Yb(Jb);for(i=Hb(c,r),o=0;o<r;o++)(a=d+o)in c&&Gb(i,o,c[a]);if(i.length=r,n<r){for(o=d;o<u-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:delete c[s];for(o=u;o>u-r+n;o--)delete c[o-1]}else if(n>r)for(o=u-r;o>d;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:delete c[s];for(o=0;o<n;o++)c[o+d]=arguments[o+2];return c.length=u-r+n,i}});var Zb=Vr.includes,$b=pa;Si({target:"Array",proto:!0},{includes:function(e){return Zb(this,e,arguments.length>1?arguments[1]:void 0)}}),$b("includes");var Qb=me,eT=re,tT=wt("match"),nT=function(e){var t;return Qb(e)&&(void 0!==(t=e[tT])?!!t:"RegExp"==eT(e))},rT=nT,iT=P.TypeError,oT=function(e){if(rT(e))throw iT("The method doesn't accept regular expressions");return e},aT=wt("match"),sT=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[aT]=!1,"/./"[e](t)}catch(e){}}return!1},cT=Si,uT=oT,dT=le,lT=fd,fT=sT,hT=Q("".indexOf);cT({target:"String",proto:!0,forced:!fT("includes")},{includes:function(e){return!!~hT(lT(dT(this)),lT(uT(e)),arguments.length>1?arguments[1]:void 0)}}),Si({target:"Array",stat:!0},{isArray:ml});var pT=Wu,_T="ArrayBuffer",vT=Rm.ArrayBuffer;Si({global:!0,forced:P.ArrayBuffer!==vT},{ArrayBuffer:vT}),pT(_T);var mT=ut,gT=jo;Si({target:"Object",stat:!0,forced:L((function(){gT(1)}))},{keys:function(e){return gT(mT(e))}});var yT,ET,ST=un,bT=function(){var e=ST(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},TT=L,CT=P.RegExp,RT=TT((function(){var e=CT("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),IT=RT||TT((function(){return!CT("a","y").sticky})),AT={BROKEN_CARET:RT||TT((function(){var e=CT("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:IT,UNSUPPORTED_Y:RT},wT=L,OT=P.RegExp,NT=wT((function(){var e=OT(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),kT=L,DT=P.RegExp,PT=kT((function(){var e=DT("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),MT=j,LT=Q,UT=fd,xT=bT,VT=AT,BT=Qe.exports,jT=aa,FT=ir.get,zT=NT,HT=PT,GT=BT("native-string-replace",String.prototype.replace),WT=RegExp.prototype.exec,YT=WT,KT=LT("".charAt),qT=LT("".indexOf),XT=LT("".replace),JT=LT("".slice),ZT=(ET=/b*/g,MT(WT,yT=/a/,"a"),MT(WT,ET,"a"),0!==yT.lastIndex||0!==ET.lastIndex),$T=VT.BROKEN_CARET,QT=void 0!==/()??/.exec("")[1];(ZT||QT||$T||zT||HT)&&(YT=function(e){var t,n,r,i,o,a,s,c=this,u=FT(c),d=UT(e),l=u.raw;if(l)return l.lastIndex=c.lastIndex,t=MT(YT,l,d),c.lastIndex=l.lastIndex,t;var f=u.groups,h=$T&&c.sticky,p=MT(xT,c),_=c.source,v=0,m=d;if(h&&(p=XT(p,"y",""),-1===qT(p,"g")&&(p+="g"),m=JT(d,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==KT(d,c.lastIndex-1))&&(_="(?: "+_+")",m=" "+m,v++),n=new RegExp("^(?:"+_+")",p)),QT&&(n=new RegExp("^"+_+"$(?!\\s)",p)),ZT&&(r=c.lastIndex),i=MT(WT,h?n:c,m),h?i?(i.input=JT(i.input,v),i[0]=JT(i[0],v),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:ZT&&i&&(c.lastIndex=c.global?i.index+i[0].length:r),QT&&i&&i.length>1&&MT(GT,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&f)for(i.groups=a=jT(null),o=0;o<f.length;o++)a[(s=f[o])[0]]=i[s[1]];return i});var eC,tC=YT;Si({target:"RegExp",proto:!0,forced:/./.exec!==tC},{exec:tC}),function(e){e.INVALID_ENGINE="INVALID_ENGINE",e.INVALID_PARAMS="INVALID_PARAMS",e.INVALID_TOKEN="INVALID_TOKEN",e.JOIN_ROOM_FAILED="JOIN_ROOM_FAILED",e.REPEAT_JOIN="REPEAT_JOIN",e.REPEAT_PUBLISH="REPEAT_PUBLISH",e.PUBLISH_BEFORE_JOIN="PUBLISH_BEFORE_JOIN",e.UNPUBLISH_BEFORE_JOIN="UNPUBLISH_BEFORE_JOIN",e.SUBSCRIBE_BEFORE_JOIN="SUBSCRIBE_BEFORE_JOIN",e.UNSUBSCRIBE_BEFORE_JOIN="UNSUBSCRIBE_BEFORE_JOIN",e.NO_PUBLISH_PERMISSION="NO_PUBLISH_PERMISSION",e.STREAM_NOT_EXIST="STREAM_NOT_EXIST",e.EMPTY_STREAM="EMPTY_STREAM",e.NOT_CONNECTED_YET="NOT_CONNECTED_YET",e.IM_BEFORE_JOIN="IM_BEFORE_JOIN",e.USER_NOT_EXIST="USER_NOT_EXIST",e.ALREADY_IN_ROOM="ALREADY_IN_ROOM",e.DUPLICATE_LOGIN="DUPLICATE_LOGIN",e.REPEAT_CAPTURE="REPEAT_CAPTURE",e.GET_VIDEO_TRACK_FAILED="GET_VIDEO_TRACK_FAILED",e.GET_AUDIO_TRACK_FAILED="GET_AUDIO_TRACK_FAILED",e.GET_SCREEN_TRACK_FAILED="GET_SCREEN_TRACK_FAILED",e.STREAM_TYPE_NOT_MATCH="STREAM_TYPE_NOT_MATCH",e.CANT_FIND_DOM="CANT_FIND_DOM",e.INVALID_DEVICE_ID="INVALID_DEVICE_ID",e.NO_PERMISSION="NO_PERMISSION",e.NOT_SUPPORTED="NOT_SUPPORTED",e.ICE_SERVER_WRONG="ICE_SERVER_WRONG",e.ESTABLISH_DATACHANNEL_FAILED="ESTABLISH_DATACHANNEL_FAILED",e.LOAD_RESOURCES_FAILED="LOAD_RESOURCES_FAILED",e.SIGNALING_CHANNEL_NOT_OPEN="SIGNALING_CHANNEL_NOT_OPEN",e.TIME_OUT="TIME_OUT",e.REFUSE_OPERATION_IN_DISCONNECT="REFUSE_OPERATION_IN_DISCONNECT",e.ADD_TRANSCEIVER_FAILED="ADD_TRANSCEIVER_FAILED",e.UPDATE_TRACK_FAILED="UPDATE_TRACK_FAILED",e.PUBLISH_FAILED="PUBLISH_FAILED",e.UNPUBLISH_FAILED="UNPUBLISH_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.OPERATION_CANCEL="OPERATION_CANCEL",e.UNEXPECTED_ERROR="UNEXPECTED_ERROR"}(eC||(eC={}));var nC=function(e,t,n){this.code=e,this.message=t,this.error=n};function rC(e,t){if("boolean"!=typeof e)throw new nC(eC.INVALID_PARAMS,"Invalid ".concat(t,": The value should be boolean type."))}function iC(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=1e4),e<n||e>r||"number"!=typeof e)throw new nC(eC.INVALID_PARAMS,"Invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}function oC(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=255),null==e)throw new nC(eC.INVALID_PARAMS,"".concat(t," cannot be empty"));if(!function(e,t,n){void 0===t&&(t=1);void 0===n&&(n=255);return"string"==typeof e&&e.length<=n&&e.length>=t}(e,n,r))throw new nC(eC.INVALID_PARAMS,"Invalid ".concat(t,": The value should be string type. Length of the string: [").concat(n,",").concat(r,"]"))}function aC(e,t,n){if(!n.includes(e))throw new nC(eC.INVALID_PARAMS,"Invalid ".concat(t,": The value can only be set as ").concat(JSON.stringify(n)))}function sC(e,t){if(uC(e))throw new nC(eC.INVALID_PARAMS,"Invalid ".concat(t,", should not be empty"))}function cC(e){var t,n;try{var r=navigator.mediaDevices.getSupportedConstraints();try{for(var i=T(Object.keys(e)),o=i.next();!o.done;o=i.next()){var a=o.value;r[a]||delete e[a]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}catch(e){}}function uC(e){return null==e}function dC(e){sC(e,"userInfo"),function(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \_\-\@]{1,128}$/.test(e))throw new nC(eC.INVALID_PARAMS,"The userId must be within 128 bytes. The supported characters: a-z,A-Z,0-9,@,-,_")}(e.userId),uC(e.extraInfo)||oC(e.extraInfo,"userInfo.extraInfo",1,200)}function lC(e){sC(e,"videoPlayerOption")}function fC(e,t){var n,r;if(void 0===t&&(t=64),!e||0===(null===(n=e)||void 0===n?void 0:n.byteLength))throw new nC(eC.INVALID_PARAMS,"The message cannot be empty");e instanceof ArrayBuffer?r=e:r=(new TextEncoder).encode(JSON.stringify(e));if((null==r?void 0:r.byteLength)>1e3*t)throw new nC(eC.INVALID_PARAMS,"The message length must be less than ".concat(t,"K"))}function hC(e){return![O.onRemoteStreamStats,O.onLocalStreamStats].includes(e)}var pC=Kl.filter;Si({target:"Array",proto:!0,forced:!ff("filter")},{filter:function(e){return pC(this,e,arguments.length>1?arguments[1]:void 0)}});var _C={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,o),!0;case 6:return d.fn.call(d.context,t,r,i,o,a),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var f,h=d.length;for(u=0;u<h;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),l){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,r);break;case 4:d[u].fn.call(d[u].context,t,r,i);break;default:if(!c)for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];d[u].fn.apply(d[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],d=s.length;c<d;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(_C);var vC="[VERTC]",mC=["#0050b3","#0050b3","#0050b3","#0050b3"],gC=function(){function e(e,t,n){this._module=e,this._indent=t}return e.prototype.print=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r="",i=0;i<this._indent;i++)r+="    ";console.log.apply(console,R(["%c".concat(vC).concat(r,"[").concat(this._module,".").concat(e,"] ").concat(t.shift()),"color:".concat(mC[this._indent],";")],C(t),!1))},e}(),yC=new gC("VERTC",0),EC=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype.safeEmit=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.listenerCount(t);try{return e.prototype.emit.apply(this,R([t],C(n),!1))}catch(e){return yC.print("safaEmit","safeEmit() | event listener threw an error [event:%s]:%o",t,e),Boolean(i)}},t.prototype.safeEmitAsPromise=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return S(this,void 0,void 0,(function(){var n=this;return b(this,(function(r){return[2,new Promise((function(r,i){try{n.emit.apply(n,R(R([e],C(t),!1),[r,i],!1))}catch(t){yC.print("safeEmitAsPromise","safeEmitAsPromise() | event listener threw an error [event:%s]:%o",e,t),i(t)}}))]}))}))},t}(_C.exports.EventEmitter),SC=U,bC=Q,TC=jo,CC=pe,RC=bC(F.f),IC=bC([].push),AC=function(e){return function(t){for(var n,r=CC(t),i=TC(r),o=i.length,a=0,s=[];o>a;)n=i[a++],SC&&!RC(r,n)||IC(s,e?[n,r[n]]:r[n]);return s}},wC={entries:AC(!0),values:AC(!1)}.entries;Si({target:"Object",stat:!0},{entries:function(e){return wC(e)}});var OC=ft,NC=function(e){return void 0!==e&&(OC(e,"value")||OC(e,"writable"))},kC=j,DC=me,PC=un,MC=NC,LC=M,UC=Ra;Si({target:"Reflect",stat:!0},{get:function e(t,n){var r,i,o=arguments.length<3?t:arguments[2];return PC(t)===o?t[n]:(r=LC.f(t,n))?MC(r)?r.value:void 0===r.get?void 0:kC(r.get,o):DC(i=UC(t))?e(i,n,o):void 0}});var xC=Si,VC=j,BC=un,jC=me,FC=NC,zC=nn,HC=M,GC=Ra,WC=K;var YC,KC=L((function(){var e=function(){},t=zC.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}));xC({target:"Reflect",stat:!0,forced:KC},{set:function e(t,n,r){var i,o,a,s=arguments.length<4?t:arguments[3],c=HC.f(BC(t),n);if(!c){if(jC(o=GC(t)))return e(o,n,r,s);c=WC(0)}if(FC(c)){if(!1===c.writable||!jC(s))return!1;if(i=HC.f(s,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,zC.f(s,n,i)}else zC.f(s,n,WC(0,r))}else{if(void 0===(a=c.set))return!1;VC(a,s,r)}return!0}});var qC=new Uint8Array(16);function XC(){if(!YC&&!(YC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return YC(qC)}var JC=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ZC(e){return"string"==typeof e&&JC.test(e)}for(var $C=[],QC=0;QC<256;++QC)$C.push((QC+256).toString(16).substr(1));function eR(e,t,n){var r=(e=e||{}).random||(e.rng||XC)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=($C[e[t+0]]+$C[e[t+1]]+$C[e[t+2]]+$C[e[t+3]]+"-"+$C[e[t+4]]+$C[e[t+5]]+"-"+$C[e[t+6]]+$C[e[t+7]]+"-"+$C[e[t+8]]+$C[e[t+9]]+"-"+$C[e[t+10]]+$C[e[t+11]]+$C[e[t+12]]+$C[e[t+13]]+$C[e[t+14]]+$C[e[t+15]]).toLowerCase();if(!ZC(n))throw TypeError("Stringified UUID is invalid");return n}(r)}var tR=Q,nR=Cn.exports,rR=tC,iR=L,oR=wt,aR=Tn,sR=oR("species"),cR=RegExp.prototype,uR=function(e,t,n,r){var i=oR(e),o=!iR((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!iR((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[sR]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||n){var s=tR(/./[i]),c=t(i,""[e],(function(e,t,n,r,i){var a=tR(e),c=t.exec;return c===rR||c===cR.exec?o&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));nR(String.prototype,e,c[0]),nR(cR,i,c[1])}r&&aR(cR[i],"sham",!0)},dR=Sd.charAt,lR=function(e,t,n){return t+(n?dR(e,t).length:1)},fR=j,hR=un,pR=_e,_R=re,vR=tC,mR=P.TypeError,gR=function(e,t){var n=e.exec;if(pR(n)){var r=fR(n,e,t);return null!==r&&hR(r),r}if("RegExp"===_R(e))return fR(vR,e,t);throw mR("RegExp#exec called on incompatible receiver")},yR=qf,ER=j,SR=Q,bR=uR,TR=nT,CR=un,RR=le,IR=Hf,AR=lR,wR=kr,OR=fd,NR=qe,kR=Hs,DR=gR,PR=tC,MR=L,LR=AT.UNSUPPORTED_Y,UR=4294967295,xR=Math.min,VR=[].push,BR=SR(/./.exec),jR=SR(VR),FR=SR("".slice),zR=!MR((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));bR("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=OR(RR(this)),i=void 0===n?UR:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!TR(e))return ER(t,r,e,i);for(var o,a,s,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,l=new RegExp(e.source,u+"g");(o=ER(PR,l,r))&&!((a=l.lastIndex)>d&&(jR(c,FR(r,d,o.index)),o.length>1&&o.index<r.length&&yR(VR,c,kR(o,1)),s=o[0].length,d=a,c.length>=i));)l.lastIndex===o.index&&l.lastIndex++;return d===r.length?!s&&BR(l,"")||jR(c,""):jR(c,FR(r,d)),c.length>i?kR(c,0,i):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:ER(t,this,e,n)}:t,[function(t,n){var i=RR(this),o=null==t?void 0:NR(t,e);return o?ER(o,t,i,n):ER(r,OR(i),t,n)},function(e,i){var o=CR(this),a=OR(e),s=n(r,o,a,i,r!==t);if(s.done)return s.value;var c=IR(o,RegExp),u=o.unicode,d=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(LR?"g":"y"),l=new c(LR?"^(?:"+o.source+")":o,d),f=void 0===i?UR:i>>>0;if(0===f)return[];if(0===a.length)return null===DR(l,a)?[a]:[];for(var h=0,p=0,_=[];p<a.length;){l.lastIndex=LR?0:p;var v,m=DR(l,LR?FR(a,p):a);if(null===m||(v=xR(wR(l.lastIndex+(LR?p:0)),a.length))===h)p=AR(a,p,u);else{if(jR(_,FR(a,h,p)),_.length===f)return _;for(var g=1;g<=m.length-1;g++)if(jR(_,m[g]),_.length===f)return _;p=h=v}}return jR(_,FR(a,h)),_}]}),!zR,LR);var HR,GR=Si,WR=Q,YR=M.f,KR=kr,qR=fd,XR=oT,JR=le,ZR=sT,$R=WR("".endsWith),QR=WR("".slice),eI=Math.min,tI=ZR("endsWith");GR({target:"String",proto:!0,forced:!!(tI||(HR=YR(String.prototype,"endsWith"),!HR||HR.writable))&&!tI},{endsWith:function(e){var t=qR(JR(this));XR(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,i=void 0===n?r:eI(KR(n),r),o=qR(e);return $R?$R(t,o,i):QR(t,i-o.length,i)===o}});var nI=Kl.map;Si({target:"Array",proto:!0,forced:!ff("map")},{map:function(e){return nI(this,e,arguments.length>1?arguments[1]:void 0)}});var rI="access.rtc.volcvideo.com,access2-hl.rtc.volcvideo.com,rtcg-access.volcvideos.com".split(",");function iI(e){return void 0===e&&(e=""),e.endsWith("com")||e.endsWith("net")||e.endsWith("org")?"https://".concat(e,"/dispatch/v1/AccessInfo?Action=GetAccessInfo"):e}var oI="https://web-log-report.rtc.volcvideo.com/video/v1/webrtc_log/",aI={VERSION:"4.0.0-alpha.0",ICE_CONFIG_REQUEST_URLS_INTERNAL:rI.map(iI),ICE_CONFIG_REQUEST_URLS:[],EXPECTED_ADDR:"",LOG_SERVER_URL:oI};function sI(e,t){if("VERSION"!==e)return"ICE_CONFIG_REQUEST_URLS"===e?("string"==typeof t&&(t=[t]),void(aI.ICE_CONFIG_REQUEST_URLS=t.map(iI))):void("LOG_SERVER_URL"!==e||t!==g.overseas?"LOG_SERVER_URL"!==e||t!==g.domestic?aI[e]=t:aI.LOG_SERVER_URL=oI:aI.LOG_SERVER_URL="https://web-log-report.volcvideos.com/video/v1/webrtc_log//")}function cI(e){return aI[e]}function uI(e,t){var n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g;return{type:"transcode",action:e,transcodeMeta:{transcode:{url:t.url},audio:{codec:(null===(n=t.audio)||void 0===n?void 0:n.codec)||"AAC",bitRate:1e3*((null===(r=t.audio)||void 0===r?void 0:r.kBitRate)||48),sampleRate:1e3*((null===(i=t.audio)||void 0===i?void 0:i.sampleRate)||44.1),channels:(null===(o=t.audio)||void 0===o?void 0:o.channels)||1,profile:(null===(a=t.audio)||void 0===a?void 0:a.AACProfile)||"LC"},video:{codec:(null===(s=t.video)||void 0===s?void 0:s.codec)||"H264",fps:(null===(c=t.video)||void 0===c?void 0:c.fps)||15,gop:(null===(u=t.video)||void 0===u?void 0:u.gop)||30,lowLatency:null===(l=null===(d=t.video)||void 0===d?void 0:d.lowLatency)||void 0===l||l,bitRate:1e3*((null===(f=t.video)||void 0===f?void 0:f.kBitRate)||40),width:(null===(h=t.video)||void 0===h?void 0:h.width)||640,height:(null===(p=t.video)||void 0===p?void 0:p.height)||360},layout:{canvas:{bgnd:(null===(_=t.layout)||void 0===_?void 0:_.backgroundColor)||"#000000"},regions:(null===(m=null===(v=t.layout)||void 0===v?void 0:v.regions)||void 0===m?void 0:m.map((function(e){return{alpha:Math.min(Math.max(+e.alpha,0),1),uid:e.userId,zorder:e.zorder,x:Math.min(Math.max(+e.x,0),1),y:Math.min(Math.max(+e.y,0),1),w:Math.min(Math.max(+e.w,0),1),h:Math.min(Math.max(+e.h,0),1),renderMode:e.renderMode||1,contentControl:e.contentControl||0,screen:e.isScreenStream,local_user:e.isLocalUser}})))||[],app_data:(null===(g=t.layout)||void 0===g?void 0:g.appData)||""}}}}var dI=Si,lI=Vr.indexOf,fI=cl,hI=Q([].indexOf),pI=!!hI&&1/hI([1],1,-0)<0,_I=fI("indexOf");dI({target:"Array",proto:!0,forced:pI||!_I},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return pI?hI(this,e,t)||0:lI(this,e,t)}});var vI={};!function(e){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},e.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},i={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)}(vI);var mI={},gI={},yI={},EI=vI;function SI(e){for(var t=e.length;--t>=0;)e[t]=0}var bI=256,TI=286,CI=30,RI=15,II=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],AI=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],wI=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],OI=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],NI=new Array(576);SI(NI);var kI=new Array(60);SI(kI);var DI=new Array(512);SI(DI);var PI=new Array(256);SI(PI);var MI=new Array(29);SI(MI);var LI,UI,xI,VI=new Array(CI);function BI(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function jI(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function FI(e){return e<256?DI[e]:DI[256+(e>>>7)]}function zI(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function HI(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,zI(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function GI(e,t,n){HI(e,n[2*t],n[2*t+1])}function WI(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function YI(e,t,n){var r,i,o=new Array(16),a=0;for(r=1;r<=RI;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=WI(o[s]++,s))}}function KI(e){var t;for(t=0;t<TI;t++)e.dyn_ltree[2*t]=0;for(t=0;t<CI;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function qI(e){e.bi_valid>8?zI(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function XI(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function JI(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&XI(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!XI(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function ZI(e,t,n){var r,i,o,a,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?GI(e,i,t):(GI(e,(o=PI[i])+bI+1,t),0!==(a=II[o])&&HI(e,i-=MI[o],a),GI(e,o=FI(--r),n),0!==(a=AI[o])&&HI(e,r-=VI[o],a))}while(s<e.last_lit);GI(e,256,t)}function $I(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)JI(e,o,n);i=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],JI(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,JI(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,c=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,l=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,_=0;for(o=0;o<=RI;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,_++),c[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=h&&(a=f[r-h]),s=c[2*r],e.opt_len+=s*(o+a),l&&(e.static_len+=s*(d[2*r+1]+a)));if(0!==_){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,_-=2}while(_>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,t),YI(o,u,e.bl_count)}function QI(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4))}function eA(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<u)do{GI(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(GI(e,i,e.bl_tree),s--),GI(e,16,e.bl_tree),HI(e,s-3,2)):s<=10?(GI(e,17,e.bl_tree),HI(e,s-3,3)):(GI(e,18,e.bl_tree),HI(e,s-11,7));s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4)}}SI(VI);var tA=!1;function nA(e,t,n,r){HI(e,0+(r?1:0),3),function(e,t,n,r){qI(e),r&&(zI(e,n),zI(e,~n)),EI.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}yI._tr_init=function(e){tA||(!function(){var e,t,n,r,i,o=new Array(16);for(n=0,r=0;r<28;r++)for(MI[r]=n,e=0;e<1<<II[r];e++)PI[n++]=r;for(PI[n-1]=r,i=0,r=0;r<16;r++)for(VI[r]=i,e=0;e<1<<AI[r];e++)DI[i++]=r;for(i>>=7;r<CI;r++)for(VI[r]=i<<7,e=0;e<1<<AI[r]-7;e++)DI[256+i++]=r;for(t=0;t<=RI;t++)o[t]=0;for(e=0;e<=143;)NI[2*e+1]=8,e++,o[8]++;for(;e<=255;)NI[2*e+1]=9,e++,o[9]++;for(;e<=279;)NI[2*e+1]=7,e++,o[7]++;for(;e<=287;)NI[2*e+1]=8,e++,o[8]++;for(YI(NI,287,o),e=0;e<CI;e++)kI[2*e+1]=5,kI[2*e]=WI(e,5);LI=new BI(NI,II,257,TI,RI),UI=new BI(kI,AI,0,CI,RI),xI=new BI(new Array(0),wI,0,19,7)}(),tA=!0),e.l_desc=new jI(e.dyn_ltree,LI),e.d_desc=new jI(e.dyn_dtree,UI),e.bl_desc=new jI(e.bl_tree,xI),e.bi_buf=0,e.bi_valid=0,KI(e)},yI._tr_stored_block=nA,yI._tr_flush_block=function(e,t,n,r){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<bI;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),$I(e,e.l_desc),$I(e,e.d_desc),a=function(e){var t;for(QI(e,e.dyn_ltree,e.l_desc.max_code),QI(e,e.dyn_dtree,e.d_desc.max_code),$I(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*OI[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?nA(e,t,n,r):4===e.strategy||o===i?(HI(e,2+(r?1:0),3),ZI(e,NI,kI)):(HI(e,4+(r?1:0),3),function(e,t,n,r){var i;for(HI(e,t-257,5),HI(e,n-1,5),HI(e,r-4,4),i=0;i<r;i++)HI(e,e.bl_tree[2*OI[i]+1],3);eA(e,e.dyn_ltree,t-1),eA(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),ZI(e,e.dyn_ltree,e.dyn_dtree)),KI(e),r&&qI(e)},yI._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(PI[n]+bI+1)]++,e.dyn_dtree[2*FI(t)]++),e.last_lit===e.lit_bufsize-1},yI._tr_align=function(e){HI(e,2,3),GI(e,256,NI),function(e){16===e.bi_valid?(zI(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)};var rA=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0};var iA=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();var oA,aA=function(e,t,n,r){var i=iA,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},sA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},cA=vI,uA=yI,dA=rA,lA=aA,fA=sA,hA=-2,pA=258,_A=262,vA=103,mA=113,gA=666;function yA(e,t){return e.msg=fA[t],t}function EA(e){return(e<<1)-(e>4?9:0)}function SA(e){for(var t=e.length;--t>=0;)e[t]=0}function bA(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(cA.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function TA(e,t){uA._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,bA(e.strm)}function CA(e,t){e.pending_buf[e.pending++]=t}function RA(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function IA(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-_A?e.strstart-(e.w_size-_A):0,u=e.window,d=e.w_mask,l=e.prev,f=e.strstart+pA,h=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===p&&u[n+a-1]===h&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<f);if(r=pA-(f-o),o=f-pA,r>a){if(e.match_start=t,a=r,r>=s)break;h=u[o+a-1],p=u[o+a]}}}while((t=l[t&d])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead}function AA(e){var t,n,r,i,o,a,s,c,u,d,l=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-_A)){cA.arraySet(e.window,e.window,l,l,0),e.match_start-=l,e.strstart-=l,e.block_start-=l,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=l?r-l:0}while(--n);t=n=l;do{r=e.prev[--t],e.prev[t]=r>=l?r-l:0}while(--n);i+=l}if(0===e.strm.avail_in)break;if(a=e.strm,s=e.window,c=e.strstart+e.lookahead,u=i,d=void 0,(d=a.avail_in)>u&&(d=u),n=0===d?0:(a.avail_in-=d,cA.arraySet(s,a.input,a.next_in,d,c),1===a.state.wrap?a.adler=dA(a.adler,s,d,c):2===a.state.wrap&&(a.adler=lA(a.adler,s,d,c)),a.next_in+=d,a.total_in+=d,d),e.lookahead+=n,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+3-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<_A&&0!==e.strm.avail_in)}function wA(e,t){for(var n,r;;){if(e.lookahead<_A){if(AA(e),e.lookahead<_A&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-_A&&(e.match_length=IA(e,n)),e.match_length>=3)if(r=uA._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=uA._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(TA(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(TA(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(TA(e,!1),0===e.strm.avail_out)?1:2}function OA(e,t){for(var n,r,i;;){if(e.lookahead<_A){if(AA(e),e.lookahead<_A&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-_A&&(e.match_length=IA(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=uA._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(TA(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=uA._tr_tally(e,0,e.window[e.strstart-1]))&&TA(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=uA._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(TA(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(TA(e,!1),0===e.strm.avail_out)?1:2}function NA(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function kA(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new cA.Buf16(1146),this.dyn_dtree=new cA.Buf16(122),this.bl_tree=new cA.Buf16(78),SA(this.dyn_ltree),SA(this.dyn_dtree),SA(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new cA.Buf16(16),this.heap=new cA.Buf16(573),SA(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new cA.Buf16(573),SA(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function DA(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:mA,e.adler=2===t.wrap?0:1,t.last_flush=0,uA._tr_init(t),0):yA(e,hA)}function PA(e){var t,n=DA(e);return 0===n&&((t=e.state).window_size=2*t.w_size,SA(t.head),t.max_lazy_match=oA[t.level].max_lazy,t.good_match=oA[t.level].good_length,t.nice_match=oA[t.level].nice_length,t.max_chain_length=oA[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function MA(e,t,n,r,i,o){if(!e)return hA;var a=1;if(-1===t&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||8!==n||r<8||r>15||t<0||t>9||o<0||o>4)return yA(e,hA);8===r&&(r=9);var s=new kA;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new cA.Buf8(2*s.w_size),s.head=new cA.Buf16(s.hash_size),s.prev=new cA.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new cA.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,PA(e)}oA=[new NA(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(AA(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,TA(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-_A&&(TA(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(TA(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(TA(e,!1),e.strm.avail_out),1)})),new NA(4,4,8,4,wA),new NA(4,5,16,8,wA),new NA(4,6,32,32,wA),new NA(4,4,16,16,OA),new NA(8,16,32,32,OA),new NA(8,16,128,128,OA),new NA(8,32,128,256,OA),new NA(32,128,258,1024,OA),new NA(32,258,258,4096,OA)],gI.deflateInit=function(e,t){return MA(e,t,8,15,8,0)},gI.deflateInit2=MA,gI.deflateReset=PA,gI.deflateResetKeep=DA,gI.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?hA:(e.state.gzhead=t,0):hA},gI.deflate=function(e,t){var n,r,i,o;if(!e||!e.state||t>5||t<0)return e?yA(e,hA):hA;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===gA&&4!==t)return yA(e,0===e.avail_out?-5:hA);if(r.strm=e,n=r.last_flush,r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,CA(r,31),CA(r,139),CA(r,8),r.gzhead?(CA(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),CA(r,255&r.gzhead.time),CA(r,r.gzhead.time>>8&255),CA(r,r.gzhead.time>>16&255),CA(r,r.gzhead.time>>24&255),CA(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),CA(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(CA(r,255&r.gzhead.extra.length),CA(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=lA(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(CA(r,0),CA(r,0),CA(r,0),CA(r,0),CA(r,0),CA(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),CA(r,3),r.status=mA);else{var a=8+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=mA,RA(r,a),0!==r.strstart&&(RA(r,e.adler>>>16),RA(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=lA(e.adler,r.pending_buf,r.pending-i,i)),bA(e),i=r.pending,r.pending!==r.pending_buf_size));)CA(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=lA(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=lA(e.adler,r.pending_buf,r.pending-i,i)),bA(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,CA(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=lA(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=lA(e.adler,r.pending_buf,r.pending-i,i)),bA(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,CA(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=lA(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=vA)}else r.status=vA;if(r.status===vA&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&bA(e),r.pending+2<=r.pending_buf_size&&(CA(r,255&e.adler),CA(r,e.adler>>8&255),e.adler=0,r.status=mA)):r.status=mA),0!==r.pending){if(bA(e),0===e.avail_out)return r.last_flush=-1,0}else if(0===e.avail_in&&EA(t)<=EA(n)&&4!==t)return yA(e,-5);if(r.status===gA&&0!==e.avail_in)return yA(e,-5);if(0!==e.avail_in||0!==r.lookahead||0!==t&&r.status!==gA){var s=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(AA(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=uA._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(TA(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(TA(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(TA(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=pA){if(AA(e),e.lookahead<=pA&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+pA;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=pA-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=uA._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=uA._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(TA(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(TA(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(TA(e,!1),0===e.strm.avail_out)?1:2}(r,t):oA[r.level].func(r,t);if(3!==s&&4!==s||(r.status=gA),1===s||3===s)return 0===e.avail_out&&(r.last_flush=-1),0;if(2===s&&(1===t?uA._tr_align(r):5!==t&&(uA._tr_stored_block(r,0,0,!1),3===t&&(SA(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),bA(e),0===e.avail_out))return r.last_flush=-1,0}return 4!==t?0:r.wrap<=0?1:(2===r.wrap?(CA(r,255&e.adler),CA(r,e.adler>>8&255),CA(r,e.adler>>16&255),CA(r,e.adler>>24&255),CA(r,255&e.total_in),CA(r,e.total_in>>8&255),CA(r,e.total_in>>16&255),CA(r,e.total_in>>24&255)):(RA(r,e.adler>>>16),RA(r,65535&e.adler)),bA(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},gI.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==vA&&t!==mA&&t!==gA?yA(e,hA):(e.state=null,t===mA?yA(e,-3):0):hA},gI.deflateSetDictionary=function(e,t){var n,r,i,o,a,s,c,u,d=t.length;if(!e||!e.state)return hA;if(2===(o=(n=e.state).wrap)||1===o&&42!==n.status||n.lookahead)return hA;for(1===o&&(e.adler=dA(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===o&&(SA(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new cA.Buf8(n.w_size),cA.arraySet(u,t,d-n.w_size,n.w_size,0),t=u,d=n.w_size),a=e.avail_in,s=e.next_in,c=e.input,e.avail_in=d,e.next_in=0,e.input=t,AA(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=2,AA(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=c,e.avail_in=a,n.wrap=o,0},gI.deflateInfo="pako deflate (from Nodeca project)";var LA={},UA=vI,xA=!0,VA=!0;try{String.fromCharCode.apply(null,[0])}catch(e){xA=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){VA=!1}for(var BA=new UA.Buf8(256),jA=0;jA<256;jA++)BA[jA]=jA>=252?6:jA>=248?5:jA>=240?4:jA>=224?3:jA>=192?2:1;function FA(e,t){if(t<65534&&(e.subarray&&VA||!e.subarray&&xA))return String.fromCharCode.apply(null,UA.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}BA[254]=BA[254]=1,LA.string2buf=function(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new UA.Buf8(s),o=0,i=0;o<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},LA.buf2binstring=function(e){return FA(e,e.length)},LA.binstring2buf=function(e){for(var t=new UA.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},LA.buf2string=function(e,t){var n,r,i,o,a=t||e.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)s[r++]=i;else if((o=BA[i])>4)s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return FA(s,r)},LA.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+BA[e[n]]>t?n:t};var zA=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},HA=gI,GA=vI,WA=LA,YA=sA,KA=zA,qA=Object.prototype.toString;function XA(e){if(!(this instanceof XA))return new XA(e);this.options=GA.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new KA,this.strm.avail_out=0;var n=HA.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(YA[n]);if(t.header&&HA.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?WA.string2buf(t.dictionary):"[object ArrayBuffer]"===qA.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=HA.deflateSetDictionary(this.strm,r)))throw new Error(YA[n]);this._dict_set=!0}}function JA(e,t){var n=new XA(t);if(n.push(e,!0),n.err)throw n.msg||YA[n.err];return n.result}XA.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=WA.string2buf(e):"[object ArrayBuffer]"===qA.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new GA.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=HA.deflate(i,r))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(WA.buf2binstring(GA.shrinkBuf(i.output,i.next_out))):this.onData(GA.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=HA.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),i.avail_out=0,!0)},XA.prototype.onData=function(e){this.chunks.push(e)},XA.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=GA.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},mI.Deflate=XA,mI.deflate=JA,mI.deflateRaw=function(e,t){return(t=t||{}).raw=!0,JA(e,t)},mI.gzip=function(e,t){return(t=t||{}).gzip=!0,JA(e,t)};var ZA={},$A={},QA=vI,ew=15,tw=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],nw=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],rw=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],iw=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],ow=vI,aw=rA,sw=aA,cw=function(e,t){var n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g,y,E,S,b,T,C,R,I;n=e.state,r=e.next_in,R=e.input,i=r+(e.avail_in-5),o=e.next_out,I=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),c=n.dmax,u=n.wsize,d=n.whave,l=n.wnext,f=n.window,h=n.hold,p=n.bits,_=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;e:do{p<15&&(h+=R[r++]<<p,p+=8,h+=R[r++]<<p,p+=8),y=_[h&m];t:for(;;){if(h>>>=E=y>>>24,p-=E,0===(E=y>>>16&255))I[o++]=65535&y;else{if(!(16&E)){if(0==(64&E)){y=_[(65535&y)+(h&(1<<E)-1)];continue t}if(32&E){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}S=65535&y,(E&=15)&&(p<E&&(h+=R[r++]<<p,p+=8),S+=h&(1<<E)-1,h>>>=E,p-=E),p<15&&(h+=R[r++]<<p,p+=8,h+=R[r++]<<p,p+=8),y=v[h&g];n:for(;;){if(h>>>=E=y>>>24,p-=E,!(16&(E=y>>>16&255))){if(0==(64&E)){y=v[(65535&y)+(h&(1<<E)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(b=65535&y,p<(E&=15)&&(h+=R[r++]<<p,(p+=8)<E&&(h+=R[r++]<<p,p+=8)),(b+=h&(1<<E)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=E,p-=E,b>(E=o-a)){if((E=b-E)>d&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(T=0,C=f,0===l){if(T+=u-E,E<S){S-=E;do{I[o++]=f[T++]}while(--E);T=o-b,C=I}}else if(l<E){if(T+=u+l-E,(E-=l)<S){S-=E;do{I[o++]=f[T++]}while(--E);if(T=0,l<S){S-=E=l;do{I[o++]=f[T++]}while(--E);T=o-b,C=I}}}else if(T+=l-E,E<S){S-=E;do{I[o++]=f[T++]}while(--E);T=o-b,C=I}for(;S>2;)I[o++]=C[T++],I[o++]=C[T++],I[o++]=C[T++],S-=3;S&&(I[o++]=C[T++],S>1&&(I[o++]=C[T++]))}else{T=o-b;do{I[o++]=I[T++],I[o++]=I[T++],I[o++]=I[T++],S-=3}while(S>2);S&&(I[o++]=I[T++],S>1&&(I[o++]=I[T++]))}break}}break}}while(r<i&&o<s);r-=S=p>>3,h&=(1<<(p-=S<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=h,n.bits=p},uw=function(e,t,n,r,i,o,a,s){var c,u,d,l,f,h,p,_,v,m=s.bits,g=0,y=0,E=0,S=0,b=0,T=0,C=0,R=0,I=0,A=0,w=null,O=0,N=new QA.Buf16(16),k=new QA.Buf16(16),D=null,P=0;for(g=0;g<=ew;g++)N[g]=0;for(y=0;y<r;y++)N[t[n+y]]++;for(b=m,S=ew;S>=1&&0===N[S];S--);if(b>S&&(b=S),0===S)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(E=1;E<S&&0===N[E];E++);for(b<E&&(b=E),R=1,g=1;g<=ew;g++)if(R<<=1,(R-=N[g])<0)return-1;if(R>0&&(0===e||1!==S))return-1;for(k[1]=0,g=1;g<ew;g++)k[g+1]=k[g]+N[g];for(y=0;y<r;y++)0!==t[n+y]&&(a[k[t[n+y]]++]=y);if(0===e?(w=D=a,h=19):1===e?(w=tw,O-=257,D=nw,P-=257,h=256):(w=rw,D=iw,h=-1),A=0,y=0,g=E,f=o,T=b,C=0,d=-1,l=(I=1<<b)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){p=g-C,a[y]<h?(_=0,v=a[y]):a[y]>h?(_=D[P+a[y]],v=w[O+a[y]]):(_=96,v=0),c=1<<g-C,E=u=1<<T;do{i[f+(A>>C)+(u-=c)]=p<<24|_<<16|v|0}while(0!==u);for(c=1<<g-1;A&c;)c>>=1;if(0!==c?(A&=c-1,A+=c):A=0,y++,0==--N[g]){if(g===S)break;g=t[n+a[y]]}if(g>b&&(A&l)!==d){for(0===C&&(C=b),f+=E,R=1<<(T=g-C);T+C<S&&!((R-=N[T+C])<=0);)T++,R<<=1;if(I+=1<<T,1===e&&I>852||2===e&&I>592)return 1;i[d=A&l]=b<<24|T<<16|f-o|0}}return 0!==A&&(i[f+A]=g-C<<24|64<<16|0),s.bits=b,0},dw=-2,lw=12,fw=30;function hw(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function pw(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ow.Buf16(320),this.work=new ow.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _w(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new ow.Buf32(852),t.distcode=t.distdyn=new ow.Buf32(592),t.sane=1,t.back=-1,0):dw}function vw(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,_w(e)):dw}function mw(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?dw:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,vw(e))):dw}function gw(e,t){var n,r;return e?(r=new pw,e.state=r,r.window=null,0!==(n=mw(e,t))&&(e.state=null),n):dw}var yw,Ew,Sw=!0;function bw(e){if(Sw){var t;for(yw=new ow.Buf32(512),Ew=new ow.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(uw(1,e.lens,0,288,yw,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;uw(2,e.lens,0,32,Ew,0,e.work,{bits:5}),Sw=!1}e.lencode=yw,e.lenbits=9,e.distcode=Ew,e.distbits=5}function Tw(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new ow.Buf8(o.wsize)),r>=o.wsize?(ow.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),ow.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(ow.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}$A.inflateReset=vw,$A.inflateReset2=mw,$A.inflateResetKeep=_w,$A.inflateInit=function(e){return gw(e,15)},$A.inflateInit2=gw,$A.inflate=function(e,t){var n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g,y,E,S,b,T,C,R,I=0,A=new ow.Buf8(4),w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return dw;(n=e.state).mode===lw&&(n.mode=13),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,d=n.bits,l=s,f=c,T=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(2&n.wrap&&35615===u){n.check=0,A[0]=255&u,A[1]=u>>>8&255,n.check=sw(n.check,A,2,0),u=0,d=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=fw;break}if(8!=(15&u)){e.msg="unknown compression method",n.mode=fw;break}if(d-=4,b=8+(15&(u>>>=4)),0===n.wbits)n.wbits=b;else if(b>n.wbits){e.msg="invalid window size",n.mode=fw;break}n.dmax=1<<b,e.adler=n.check=1,n.mode=512&u?10:lw,u=0,d=0;break;case 2:for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(n.flags=u,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=fw;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=fw;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(A[0]=255&u,A[1]=u>>>8&255,n.check=sw(n.check,A,2,0)),u=0,d=0,n.mode=3;case 3:for(;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.head&&(n.head.time=u),512&n.flags&&(A[0]=255&u,A[1]=u>>>8&255,A[2]=u>>>16&255,A[3]=u>>>24&255,n.check=sw(n.check,A,4,0)),u=0,d=0,n.mode=4;case 4:for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(A[0]=255&u,A[1]=u>>>8&255,n.check=sw(n.check,A,2,0)),u=0,d=0,n.mode=5;case 5:if(1024&n.flags){for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(A[0]=255&u,A[1]=u>>>8&255,n.check=sw(n.check,A,2,0)),u=0,d=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((h=n.length)>s&&(h=s),h&&(n.head&&(b=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),ow.arraySet(n.head.extra,r,o,h,b)),512&n.flags&&(n.check=sw(n.check,r,h,o)),s-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;h=0;do{b=r[o+h++],n.head&&b&&n.length<65536&&(n.head.name+=String.fromCharCode(b))}while(b&&h<s);if(512&n.flags&&(n.check=sw(n.check,r,h,o)),s-=h,o+=h,b)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;h=0;do{b=r[o+h++],n.head&&b&&n.length<65536&&(n.head.comment+=String.fromCharCode(b))}while(b&&h<s);if(512&n.flags&&(n.check=sw(n.check,r,h,o)),s-=h,o+=h,b)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=fw;break}u=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=lw;break;case 10:for(;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}e.adler=n.check=hw(u),u=0,d=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=d,2;e.adler=n.check=1,n.mode=lw;case lw:if(5===t||6===t)break e;case 13:if(n.last){u>>>=7&d,d-=7&d,n.mode=27;break}for(;d<3;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}switch(n.last=1&u,d-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(bw(n),n.mode=20,6===t){u>>>=2,d-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=fw}u>>>=2,d-=2;break;case 14:for(u>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=fw;break}if(n.length=65535&u,u=0,d=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(h=n.length){if(h>s&&(h=s),h>c&&(h=c),0===h)break e;ow.arraySet(i,r,o,h,a),s-=h,o+=h,c-=h,a+=h,n.length-=h;break}n.mode=lw;break;case 17:for(;d<14;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(n.nlen=257+(31&u),u>>>=5,d-=5,n.ndist=1+(31&u),u>>>=5,d-=5,n.ncode=4+(15&u),u>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=fw;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.lens[w[n.have++]]=7&u,u>>>=3,d-=3}for(;n.have<19;)n.lens[w[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},T=uw(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid code lengths set",n.mode=fw;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(I=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,g=65535&I,!((v=I>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(g<16)u>>>=v,d-=v,n.lens[n.have++]=g;else{if(16===g){for(R=v+2;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(u>>>=v,d-=v,0===n.have){e.msg="invalid bit length repeat",n.mode=fw;break}b=n.lens[n.have-1],h=3+(3&u),u>>>=2,d-=2}else if(17===g){for(R=v+3;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}d-=v,b=0,h=3+(7&(u>>>=v)),u>>>=3,d-=3}else{for(R=v+7;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}d-=v,b=0,h=11+(127&(u>>>=v)),u>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=fw;break}for(;h--;)n.lens[n.have++]=b}}if(n.mode===fw)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=fw;break}if(n.lenbits=9,C={bits:n.lenbits},T=uw(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid literal/lengths set",n.mode=fw;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},T=uw(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,T){e.msg="invalid distances set",n.mode=fw;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=d,cw(e,f),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,d=n.bits,n.mode===lw&&(n.back=-1);break}for(n.back=0;m=(I=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,g=65535&I,!((v=I>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(m&&0==(240&m)){for(y=v,E=m,S=g;m=(I=n.lencode[S+((u&(1<<y+E)-1)>>y)])>>>16&255,g=65535&I,!(y+(v=I>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}u>>>=y,d-=y,n.back+=y}if(u>>>=v,d-=v,n.back+=v,n.length=g,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=lw;break}if(64&m){e.msg="invalid literal/length code",n.mode=fw;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(R=n.extra;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(I=n.distcode[u&(1<<n.distbits)-1])>>>16&255,g=65535&I,!((v=I>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(0==(240&m)){for(y=v,E=m,S=g;m=(I=n.distcode[S+((u&(1<<y+E)-1)>>y)])>>>16&255,g=65535&I,!(y+(v=I>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}u>>>=y,d-=y,n.back+=y}if(u>>>=v,d-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=fw;break}n.offset=g,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(R=n.extra;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=fw;break}n.mode=25;case 25:if(0===c)break e;if(h=f-c,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=fw;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),_=n.window}else _=i,p=a-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do{i[a++]=_[p++]}while(--h);0===n.length&&(n.mode=21);break;case 26:if(0===c)break e;i[a++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;d<32;){if(0===s)break e;s--,u|=r[o++]<<d,d+=8}if(f-=c,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?sw(n.check,i,f,a-f):aw(n.check,i,f,a-f)),f=c,(n.flags?u:hw(u))!==n.check){e.msg="incorrect data check",n.mode=fw;break}u=0,d=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=fw;break}u=0,d=0}n.mode=29;case 29:T=1;break e;case fw:T=-3;break e;case 31:return-4;default:return dw}return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=d,(n.wsize||f!==e.avail_out&&n.mode<fw&&(n.mode<27||4!==t))&&Tw(e,e.output,e.next_out,f-e.avail_out),l-=e.avail_in,f-=e.avail_out,e.total_in+=l,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?sw(n.check,i,f,e.next_out-f):aw(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===lw?128:0)+(20===n.mode||15===n.mode?256:0),(0===l&&0===f||4===t)&&0===T&&(T=-5),T},$A.inflateEnd=function(e){if(!e||!e.state)return dw;var t=e.state;return t.window&&(t.window=null),e.state=null,0},$A.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?dw:(n.head=t,t.done=!1,0):dw},$A.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?dw:11===n.mode&&aw(1,t,r,0)!==n.check?-3:Tw(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):dw},$A.inflateInfo="pako inflate (from Nodeca project)";var Cw={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Rw=$A,Iw=vI,Aw=LA,ww=Cw,Ow=sA,Nw=zA,kw=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Dw=Object.prototype.toString;function Pw(e){if(!(this instanceof Pw))return new Pw(e);this.options=Iw.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Nw,this.strm.avail_out=0;var n=Rw.inflateInit2(this.strm,t.windowBits);if(n!==ww.Z_OK)throw new Error(Ow[n]);if(this.header=new kw,Rw.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Aw.string2buf(t.dictionary):"[object ArrayBuffer]"===Dw.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Rw.inflateSetDictionary(this.strm,t.dictionary))!==ww.Z_OK))throw new Error(Ow[n])}function Mw(e,t){var n=new Pw(t);if(n.push(e,!0),n.err)throw n.msg||Ow[n.err];return n.result}Pw.prototype.push=function(e,t){var n,r,i,o,a,s=this.strm,c=this.options.chunkSize,u=this.options.dictionary,d=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?ww.Z_FINISH:ww.Z_NO_FLUSH,"string"==typeof e?s.input=Aw.binstring2buf(e):"[object ArrayBuffer]"===Dw.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new Iw.Buf8(c),s.next_out=0,s.avail_out=c),(n=Rw.inflate(s,ww.Z_NO_FLUSH))===ww.Z_NEED_DICT&&u&&(n=Rw.inflateSetDictionary(this.strm,u)),n===ww.Z_BUF_ERROR&&!0===d&&(n=ww.Z_OK,d=!1),n!==ww.Z_STREAM_END&&n!==ww.Z_OK)return this.onEnd(n),this.ended=!0,!1;s.next_out&&(0!==s.avail_out&&n!==ww.Z_STREAM_END&&(0!==s.avail_in||r!==ww.Z_FINISH&&r!==ww.Z_SYNC_FLUSH)||("string"===this.options.to?(i=Aw.utf8border(s.output,s.next_out),o=s.next_out-i,a=Aw.buf2string(s.output,i),s.next_out=o,s.avail_out=c-o,o&&Iw.arraySet(s.output,s.output,i,o,0),this.onData(a)):this.onData(Iw.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(d=!0)}while((s.avail_in>0||0===s.avail_out)&&n!==ww.Z_STREAM_END);return n===ww.Z_STREAM_END&&(r=ww.Z_FINISH),r===ww.Z_FINISH?(n=Rw.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===ww.Z_OK):r!==ww.Z_SYNC_FLUSH||(this.onEnd(ww.Z_OK),s.avail_out=0,!0)},Pw.prototype.onData=function(e){this.chunks.push(e)},Pw.prototype.onEnd=function(e){e===ww.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Iw.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},ZA.Inflate=Pw,ZA.inflate=Mw,ZA.inflateRaw=function(e,t){return(t=t||{}).raw=!0,Mw(e,t)},ZA.ungzip=Mw;var Lw={};(0,vI.assign)(Lw,mI,ZA,Cw);var Uw=Lw,xw=Cr,Vw=fd,Bw=le,jw=P.RangeError,Fw=Q,zw=kr,Hw=fd,Gw=le,Ww=Fw((function(e){var t=Vw(Bw(this)),n="",r=xw(e);if(r<0||r==1/0)throw jw("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n})),Yw=Fw("".slice),Kw=Math.ceil,qw=function(e){return function(t,n,r){var i,o,a=Hw(Gw(t)),s=zw(n),c=a.length,u=void 0===r?" ":Hw(r);return s<=c||""==u?a:((o=Ww(u,Kw((i=s-c)/u.length))).length>i&&(o=Yw(o,0,i)),e?a+o:o+a)}},Xw={start:qw(!1),end:qw(!0)},Jw=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Te),Zw=Xw.end;Si({target:"String",proto:!0,forced:Jw},{padEnd:function(e){return Zw(this,e,arguments.length>1?arguments[1]:void 0)}});var $w=Q,Qw=dr.PROPER,eO=Cn.exports,tO=un,nO=be,rO=fd,iO=L,oO=bT,aO="toString",sO=RegExp.prototype,cO=sO.toString,uO=$w(oO),dO=iO((function(){return"/a/b"!=cO.call({source:"a",flags:"b"})})),lO=Qw&&cO.name!=aO;(dO||lO)&&eO(RegExp.prototype,aO,(function(){var e=tO(this),t=rO(e.source),n=e.flags;return"/"+t+"/"+rO(void 0===n&&nO(sO,e)&&!("flags"in sO)?uO(e):n)}),{unsafe:!0});var fO="\t\n\v\f\r                　\u2028\u2029\ufeff",hO=le,pO=fd,_O=Q("".replace),vO="[\t\n\v\f\r                　\u2028\u2029\ufeff]",mO=RegExp("^"+vO+vO+"*"),gO=RegExp(vO+vO+"*$"),yO=function(e){return function(t){var n=pO(hO(t));return 1&e&&(n=_O(n,mO,"")),2&e&&(n=_O(n,gO,"")),n}},EO={start:yO(1),end:yO(2),trim:yO(3)},SO=P,bO=L,TO=Q,CO=fd,RO=EO.trim,IO=fO,AO=SO.parseInt,wO=SO.Symbol,OO=wO&&wO.iterator,NO=/^[+-]?0x/i,kO=TO(NO.exec),DO=8!==AO(IO+"08")||22!==AO(IO+"0x16")||OO&&!bO((function(){AO(Object(OO))}))?function(e,t){var n=RO(CO(e));return AO(n,t>>>0||(kO(NO,n)?16:10))}:AO;Si({target:"Number",stat:!0,forced:Number.parseInt!=DO},{parseInt:DO});var PO=Q(1..valueOf),MO=U,LO=P,UO=Q,xO=hi,VO=Cn.exports,BO=ft,jO=Tu,FO=be,zO=je,HO=xt,GO=L,WO=Sr.f,YO=M.f,KO=nn.f,qO=PO,XO=EO.trim,JO="Number",ZO=LO.Number,$O=ZO.prototype,QO=LO.TypeError,eN=UO("".slice),tN=UO("".charCodeAt),nN=function(e){var t=HO(e,"number");return"bigint"==typeof t?t:rN(t)},rN=function(e){var t,n,r,i,o,a,s,c,u=HO(e,"number");if(zO(u))throw QO("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=XO(u),43===(t=tN(u,0))||45===t){if(88===(n=tN(u,2))||120===n)return NaN}else if(48===t){switch(tN(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=eN(u,2)).length,s=0;s<a;s++)if((c=tN(o,s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(xO(JO,!ZO(" 0o1")||!ZO("0b1")||ZO("+0x1"))){for(var iN,oN=function(e){var t=arguments.length<1?0:ZO(nN(e)),n=this;return FO($O,n)&&GO((function(){qO(n)}))?jO(Object(t),n,oN):t},aN=MO?WO(ZO):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),sN=0;aN.length>sN;sN++)BO(ZO,iN=aN[sN])&&!BO(oN,iN)&&KO(oN,iN,YO(ZO,iN));oN.prototype=$O,$O.constructor=oN,VO(LO,JO,oN)}function cN(){for(var e=(+"".concat(Math.random()).slice(-7).padEnd(7,"0")).toString(2).padEnd(28,"1").split(""),t=[];e.length;)t.push(e.splice(0,7));return t.map((function(e,n){var r=n===t.length-1?"0":"1";return Number.parseInt(r+e.join(""),2)}))}function uN(e){return new Promise((function(t,n){var r=new Blob([e]),i=new FileReader;i.readAsText(r,"utf-8"),i.onload=function(){t(i.result)}}))}var dN=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},lN=j,fN=un,hN=le,pN=dN,_N=fd,vN=qe,mN=gR;uR("search",(function(e,t,n){return[function(t){var n=hN(this),r=null==t?void 0:vN(t,e);return r?lN(r,t,n):new RegExp(t)[e](_N(n))},function(e){var r=fN(this),i=_N(e),o=n(t,r,i);if(o.done)return o.value;var a=r.lastIndex;pN(a,0)||(r.lastIndex=0);var s=mN(r,i);return pN(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]}));var gN,yN,EN,SN,bN,TN,CN,RN,IN,AN,wN,ON,NN,kN,DN,PN,MN,LN,UN,xN,VN,BN,jN,FN,zN,HN,GN,WN,YN,KN,qN,XN,JN,ZN,$N,QN,ek,tk,nk,rk,ik,ok,ak,sk,ck,uk,dk=U,lk=Q,fk=j,hk=L,pk=jo,_k=qr,vk=F,mk=ut,gk=ue,yk=Object.assign,Ek=Object.defineProperty,Sk=lk([].concat),bk=!yk||hk((function(){if(dk&&1!==yk({b:1},yk(Ek({},"a",{enumerable:!0,get:function(){Ek(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=yk({},e)[n]||pk(yk({},t)).join("")!=r}))?function(e,t){for(var n=mk(e),r=arguments.length,i=1,o=_k.f,a=vk.f;r>i;)for(var s,c=gk(arguments[i++]),u=o?Sk(pk(c),o(c)):pk(c),d=u.length,l=0;d>l;)s=u[l++],dk&&!fk(a,c,s)||(n[s]=c[s]);return n}:yk,Tk=bk;Si({target:"Object",stat:!0,forced:Object.assign!==Tk},{assign:Tk}),function(e){e.RTC_SDK_API_CALL="rtc_sdk_api_call",e.RTC_SDK_CALLBACK="rtc_sdk_callback",e.RTC_RECONNECT="rtc_reconnect",e.RTC_RECONNECTED="rtc_reconnected",e.RTC_GET_ACCESS="rtc_get_access",e.RTC_PRE_ICE_STATE="rtc_pre_ice_state",e.RTC_NODE_CHANGE="rtc_node_change",e.RTC_SIGNALING_MSG_ERROR="rtc_signaling_msg_error",e.RTC_SIGNALING="rtc_signaling",e.RTC_JOIN_ROOM="rtc_join_room",e.RTC_LEAVE_ROOM="rtc_leave_room",e.RTC_BEGIN_CREATE_OFFER="rtc_begin_create_offer",e.RTC_CREATE_OFFER="rtc_create_offer",e.RTC_SET_DESCRIPTION="rtc_set_description",e.RTC_RECV_ANSWER="rtc_recv_answer",e.FIRST_REMOTE_AUDIO_RENDER="first_remote_audio_render",e.FIRST_REMOTE_VIDEO_RENDER="first_remote_video_render",e.RTC_PUBLISH_STAT="rtc_publish_stat",e.RTC_SUBSCRIBE_STAT="rtc_subscribe_stat",e.RTC_AUDIO_DEVICE="rtc_audio_device",e.RTC_MEDIA_STATISTICS="rtc_media_statistics",e.RTC_MESSAGE_STATISTICS="rtc_message_statistics",e.RTC_ERROR="rtc_error",e.RTC_FIRST_FRAME="rtc_first_frame",e.RTC_MUTE_REMOTE="rtc_mute_remote",e.SDK_INIT_ENGINE="sdk_init_engine",e.JOIN_ROOM="join_room",e.P2P_CONNECTION_STATUS="p2p_connection_status",e.P2P_CONNECT_CLOSED="p2p_connect_closed",e.RTC_DEVICE_ERROR="rtc_device_error",e.RTC_VIDEO_DEVICE="rtc_video_device",e.RTC_VIDEO_CAPTURE_EVENT="rtc_video_capture_event",e.RTC_ENCODE_FIRST_FRAME="rtc_encode_first_frame",e.RTC_FIRST_FRAME_ENCODED="rtc_first_frame_encoded",e.RTC_SEND_FIRST_PACKET="rtc_send_first_packet",e.RTC_RECV_FIRST_PACKET="rtc_recv_first_packet",e.RTC_RECV_FIRST_FRAME="rtc_recv_first_frame",e.RTC_DECODE_FIRST_FRAME="rtc_decode_first_frame"}(gN||(gN={})),function(e){e.RTC="rtc"}(yN||(yN={})),function(e){e.W_5="5"}(EN||(EN={})),function(e){e.IOS="ios",e.ANDROID="android",e.WEB="web",e.WINDOWS="windows",e.MAC="mac",e.LINUX="linux"}(SN||(SN={})),function(e){e.UNKNOWN="unknown",e.DISCONNECTED="disconnected",e.LAN="lan",e.WIFI="wifi",e.W_2="2g",e.W_3="3g",e.W_4="4g",e.W_5="5g"}(bN||(bN={})),function(e){e.UNKNOWN="unknown",e.BROADCASTER="broadcaster",e.AUDIENCE="audience",e.SILENTAUDIENCE="silentAudience"}(TN||(TN={})),function(e){e.WEBSOCKET_RECONNECTING="websocket reconnecting",e.PEERCONNECTION_RECONNECTING="peerconnection reconnecting",e.DISCONNECTED="DISCONNECTED",e.LAN="LAN",e.WIFI="WIFI",e.W_2="2G",e.W_3="3G",e.W_4="4G",e.W_5="5G",e.UNKNOWN="UNKNOWN"}(CN||(CN={})),function(e){e.WEBSOCKET="websocket",e.NETWORKCHANGED="networkChanged",e.PEERCONNECTION="peerconnection"}(RN||(RN={})),function(e){e.WEBSOCKET_RECONNECTED="websocket reconnected",e.PEERCONNECTION_RECONNECTED="peerconnection reconnected"}(IN||(IN={})),function(e){e.WEBSOCKET="websocket",e.NETWORKCHANGED="networkChanged",e.PEERCONNECTION="peerconnection"}(AN||(AN={})),function(e){e.REQUEST="request",e.RESPONSE="response",e.KCP_REQUEST="kcp request",e.KCP_RESPONSE="kcp response",e.QUIC_REQUEST="quic request",e.QUIC_RESPONSE="quic response"}(wN||(wN={})),function(e){e.NEW="NEW",e.CHECKING="CHECKING",e.CONNECTED="CONNECTED",e.COMPLETED="COMPLETED",e.FAILED="FAILED",e.DISCONNECTED="DISCONNECTED",e.CLOSED="CLOSED",e.DATACHANNEL_CONNECTING="DATACHANNEL_CONNECTING",e.DATACHANNEL_OPEN="DATACHANNEL_OPEN",e.DATACHANNEL_CLOSING="DATACHANNEL_CLOSING",e.DATACHANNEL_CLOSED="DATACHANNEL_CLOSED"}(ON||(ON={})),function(e){e.SUCCEED="succeed",e.MESSAGE_ID_ERROR="message id error",e.ZIP_FAILED="zip failed",e.UNZIP_FAILED="unzip failed",e.MESSAGE_KEY_EMPTY="message key empty",e.MESSAGE_KEY_PARSE_FAILED="message key parse failed",e.MESSAGE_KEY_INVALID="message key invalid",e.ENCRYPT_FAILED="encrypt failed",e.DECRYPT_FAILED="decrypt failed",e.MESSAGE_TOO_BIG="message too big",e.INVALID_DATA="invalid data",e.MESSAGE_PARSE_FAILED="message parse failed"}(NN||(NN={})),function(e){e.CALL_JOINROOM="call-joinRoom",e.JOINROOM="joinRoom",e.CALL_RECONNECTED="call-reconnected",e.RECONNECTED="reconnected",e.CALL_PUBLISH="call-publish",e.PUBLISH="publish",e.CALL_UPDATESTREAMATTRIBUTES="call-updateStreamAttributes",e.UPDATESTREAMATTRIBUTES="updateStreamAttributes",e.CALL_UNPUBLISH="call-unpublish",e.UNPUBLISH="unpublish",e.CALL_SUBSCRIBE="call-subscribe",e.SUBSCRIBE="subscribe",e.CALL_UPDATESUBSCRIBE="call-updateSubscribe",e.UPDATESUBSCRIBE="updateSubscribe",e.CALL_UNSUBSCRIBE="call-unsubscribe",e.UNSUBSCRIBE="unsubscribe",e.CALL_UPDATEUSERATTRIBUTES="call-updateUserAttributes",e.UPDATEUSERATTRIBUTES="updateUserAttributes",e.CALL_LEAVEROOM="call-leaveRoom",e.LEAVEROOM="leaveRoom",e.ON_USERCONNECTION="on-userConnection",e.ON_USERDISCONNECTION="on-userDisconnection",e.ON_ONADDSTREAM="on-onAddStream",e.ON_ONPUSHSTREAM="on-onPushStream",e.ON_ONREMOVESTREAM="on-onRemoveStream",e.ON_ONPUSHTRACK="on-onPushTrack",e.ON_ONREMOVETRACK="on-onRemoveTrack",e.ON_ONUPDATEUSERATTRIBUTES="on-onUpdateUserAttributes",e.ON_ONUPDATEROOMATTRIBUTES="on-onUpdateRoomAttributes",e.ON_ONUPDATESTREAMATTRIBUTES="on-onUpdateStreamAttributes",e.ON_STREAMFAILED="on-streamFailed",e.ON_POSTPROCESSINGMESSAGE="on-postProcessingMessage",e.ON_ENGINECONTROLMESSAGE="on-engineControlMessage",e.ON_WEBSOCKETENGINECUSTOMMESSAGE="on-websocketEngineCustomMessage",e.UNKNOWN="unknown",e.CALL_UPDATEPUBLISHSTREAMCHANNEL="call-updatePublishStreamChannel",e.UPDATEPUBLISHSTREAMCHANNEL="updatePublishStreamChannel",e.CALL_UPDATESUBSCRIBESTREAMCHANNEL="call-updateSubscribeStreamChannel",e.UPDATESUBSCRIBESTREAMCHANNEL="updateSubscribeStreamChannel",e.ON_ONSTREAMCHANNELCHANGE="on-onStreamChannelChange",e.P2PDIRECT="p2pdirect",e.INTERNAL_CUSTOM="internal_custom",e.REPORT="report",e.CONNECTION_CONTROL="connection_control",e.ON_INTERNAL_CUSTOM="on_internal_custom",e.CONTROLMESSAGE="controlMessage",e.CALL_LOGIN="call-login",e.LOGIN="login",e.CALL_RECONNECTLOGIN="call-reconnectLogin",e.RECONNECTLOGIN="reconnectLogin",e.CALL_LOGOUT="call-logout",e.LOGOUT="logout",e.CALL_UPDATELOGINTOKEN="call-updateLoginToken",e.UPDATELOGINTOKEN="updateLoginToken",e.CALL_SETSERVERPARAMS="call-setServerParams",e.SETSERVERPARAMS="setServerParams",e.CALL_GETPEERONLINESTATUS="call-getPeerOnlineStatus",e.GETPEERONLINESTATUS="getPeerOnlineStatus",e.ON_ONSCENECONFIG="on-onSceneConfig",e.ON_STREAMCONTROLMESSAGE="on-streamControlMessage",e.CALL_STARTPUSHSTREAM="call-startPushStream",e.STARTPUSHSTREAM="startPushStream",e.CALL_STOPPUSHSTREAM="call-stopPushStream",e.STOPPUSHSTREAM="stopPushStream",e.CALL_STARTPULLSTREAM="call-startPullStream",e.STARTPULLSTREAM="startPullStream",e.CALL_STOPPULLSTREAM="call-stopPullStream",e.STOPPULLSTREAM="stopPullStream",e.CALL_UPDATEPULLSTREAM="call-updatePullStream",e.UPDATEPULLSTREAM="updatePullStream",e.ON_ONSTREAMPUSHEDBYOTHER="on-onStreamPushedByOther"}(kN||(kN={})),function(e){e.UP="up",e.DOWN="down",e.DIRECT="direct"}(DN||(DN={})),function(e){e.UP="up",e.DOWN="down",e.PRE="pre"}(PN||(PN={})),function(e){e.UP="up",e.DOWN="down",e.PRE="pre"}(MN||(MN={})),function(e){e.W_0="0",e.W_1="1"}(LN||(LN={})),function(e){e.UP="up",e.DOWN="down"}(UN||(UN={})),function(e){e.ANSWER="answer",e.INCRANSWER="incranswer"}(xN||(xN={})),function(e){e.UP="up",e.DOWN="down"}(VN||(VN={})),function(e){e.SUCCESS="success",e.FAIL="fail"}(BN||(BN={})),function(e){e.W_0="0",e.W_1="1"}(jN||(jN={})),function(e){e.LEAVE_ROOM="leave room",e.ACK_FAILED="ack failed",e.SET_ANSWER_SDP_FAILED="set answer sdp failed",e.ICE_FAILED="ice failed",e.STREAM_FAILED="stream failed",e.NETWORK_RECONNECTED="network reconnected",e.JOIN_ROOM_ACK_FAILED="join room ack failed",e.UNKNOWN="unknown"}(FN||(FN={})),function(e){e.SUCCESS="success",e.FAIL="fail",e.IGNORE="ignore"}(zN||(zN={})),function(e){e.LEAVE_ROOM="leave room",e.ACK_FAILED="ack failed",e.SET_ANSWER_SDP_FAILED="set answer sdp failed",e.ICE_FAILED="ice failed",e.STREAM_FAILED="stream failed",e.NETWORK_RECONNECTED="network reconnected",e.ON_STREAM_REMOVE="on stream remove",e.PUBLISH_MUTE="publish mute",e.UNKNOWN="unknown",e.ON_STREAM_REMOVE_CLIENT_UNPUBLISHED="on stream remove:client unpublished",e.ON_STREAM_REMOVE_PUBLISH_FAILED="on stream remove:publish failed",e.ON_STREAM_REMOVE_STREAM_REMOVED="on stream remove:stream removed",e.ON_STREAM_REMOVE_CLIENT_DISCONNECTED="on stream remove:client disconnected",e.ON_STREAM_REMOVE_CLIENT_REPUBLISH="on stream remove:client republish"}(HN||(HN={})),function(e){e.PLAYOUT_DEVICE_SWITCH="playout_device_switch",e.RECORD_DEVICE_SWITCH="record_device_switch",e.UNKNOWN="unknown"}(GN||(GN={})),function(e){e.BEGIN_SEND="begin_send",e.SENT_END="sent_end",e.BEGIN_RECV="begin_recv",e.RECV_END="recv_end"}(WN||(WN={})),function(e){e.AUDIO="audio",e.VIDEO="video",e.SCREEN_VIDEO="screen_video",e.SCREEN_AUDIO="screen_audio"}(YN||(YN={})),function(e){e.LOGIN="login",e.PUBLISHER="publisher",e.UNMUTE="unmute",e.ENABLE="enable",e.PUSH="push",e.PUBLISH="publish",e.ONDEMAND="ondemand",e.SUBSCRIBE="subscribe",e.PUSH_TRACK="push_track",e.REMOTE_UNMUTE="remote_unmute",e.P2P="p2p"}(KN||(KN={})),function(e){e.TIMEOUT="timeout",e.AUDIENCE="audience",e.MUTE="mute",e.DISABLE="disable",e.STOP_PUSH="stop_push",e.UNPUBLISH="unpublish",e.NO_DEMAND="no_demand",e.LEAVE_ROOM="leave_room",e.UNSUBSCRIBE="unsubscribe",e.REMOVE_TRACK="remove_track",e.REMOTE_MUTE="remote_mute"}(qN||(qN={})),function(e){e.AUDIO="audio",e.VIDEO="video"}(XN||(XN={})),function(e){e.BEGIN="begin",e.END="end"}(JN||(JN={})),function(e){e.BEGIN="begin",e.END="end"}(ZN||(ZN={})),function(e){e.LEAVE_ROOM="leave_room",e.ACK_FAILED="ack_failed",e.TOKEN_ERROR="token_error",e.SIGNALING_ERROR="signaling_error",e.TIMEOUT_10="timeout_10",e.TIMEOUT_60="timeout_60"}($N||($N={})),function(e){e.UNKNOWN="unknown",e.NEW="new",e.CHECKING="checking",e.CONNECTED="connected",e.FAILED="failed",e.SELECTED="selected",e.CLOSING="closing",e.CLOSED="closed"}(QN||(QN={})),function(e){e.NOMINAL="Nominal",e.FAIR="Fair",e.SERIOUS="Serious",e.CRITICAL="Critical",e.UNKNWON="Unknwon"}(ek||(ek={})),function(e){e.UNKNOWN="UNKNOWN",e.AUDIO_RECORD="AUDIO_RECORD",e.AUDIO_PLAYOUT="AUDIO_PLAYOUT",e.VIDEO="VIDEO",e.SHARE_AUDIO_RECORD="SHARE_AUDIO_RECORD",e.SHARE_VIDEO="SHARE_VIDEO"}(tk||(tk={})),function(e){e.P2P="p2p",e.P2P_OUTSIDE_ROOM="p2p_outside_room",e.P2SERVER="p2server"}(nk||(nk={})),function(e){e.START="start",e.START_CAPTURE_RESULT="start_capture_result",e.STARTED="started",e.RUNNING_FAILED="running_failed",e.STOP="stop",e.STOPPED="stopped"}(rk||(rk={})),function(e){e.DSHOW="dshow",e.MF="mf",e.AVCAPTURESESSION="avcapturesession",e.CAMERA1="camera1",e.CAMERA2="camera2"}(ik||(ik={})),function(e){e.SUCCESS="success",e.CAMERA_DEVICE_NO_PERMISSION="camera_device_no_permission",e.CAMERA_DEVICE_BUSY="camera_device_busy",e.CAMERA_DEVICE_FAILURE="camera_device_failure",e.CAMERA_DEVICE_NOT_FOUND="camera_device_not_found",e.CAMERA_DEVICE_DISCONNECTED="camera_device_disconnected",e.TIMEOUT="timeout",e.ABORT="abort"}(ok||(ok={})),function(e){e.UNKNOWN="unknown",e.MUSIC="music",e.HIGHQUALITY_COMMUNICATION="highquality_communication",e.COMMUNICATION="communication",e.MEDIA="media",e.GAME_STREAMING="game_streaming"}(ak||(ak={})),function(e){e.UNKNOWN="unknown",e.MEDIA="media",e.COMMUNICATION="communication"}(sk||(sk={})),function(e){e.UNKNOWN="unknown",e.SLEEP="Sleep",e.AWAKE="Awake"}(ck||(ck={})),function(e){e.UNKNOWN="unknown",e.PRODUCT="product",e.BOE="boe",e.TEST="test"}(uk||(uk={}));var Ck,Rk,Ik,Ak=function(){function e(){}return e.prototype.setStats=function(e){var t=this;Object.keys(e).forEach((function(n){t["_"+n]=e[n]})),Nk.StartUp()},Object.defineProperty(e.prototype,"event_key",{get:function(){return this._event_key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_id",{get:function(){return this._device_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_app_id",{get:function(){return this._rtc_app_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"product_line",{get:function(){return this._product_line},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"report_version",{get:function(){return this._report_version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"os",{get:function(){return this._os},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_sdk_version",{get:function(){return this._rtc_sdk_version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_timestamp",{get:function(){return this._rtc_timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_sdk_git_commit",{get:function(){return this._rtc_sdk_git_commit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"report_id",{get:function(){return this._report_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_sid",{get:function(){return this._rtc_sid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"engine_session_id",{get:function(){return this._engine_session_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_business_id",{get:function(){return this._rtc_business_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"project_key",{get:function(){return this._project_key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"network_type",{get:function(){return this._network_type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app_version",{get:function(){return this._app_version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aid",{get:function(){return this._aid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_model",{get:function(){return this._device_model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_brand",{get:function(){return this._device_brand},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"common_extra_info",{get:function(){return this._common_extra_info},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"had_selected_p2p",{get:function(){return this._had_selected_p2p},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_env_type",{get:function(){return this._rtc_env_type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room_id",{get:function(){return this._room_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"user_id",{get:function(){return this._user_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_session_id",{get:function(){return this._rtc_session_id},enumerable:!1,configurable:!0}),e}(),wk=new Ak,Ok=function(){function e(){var e=this;this.report_id=0,this.dataBuffer=[],this.posting=!1,this.report_common={},this.preSucTime=0,this.errSendDelay=100,"undefined"!=typeof window&&window.addEventListener("beforeunload",(function(){clearTimeout(e.errSendTimer),clearTimeout(e.sucSendTimer),e.send(null,!0)}))}return e.prototype.push=function(e,t){t?this.send(e):(this.dataBuffer.push(e),!this.posting&&!this.errSendTimer&&Date.now()-this.preSucTime>2e3&&(clearTimeout(this.sucSendTimer),this.send()))},e.prototype.unshift=function(e){this.dataBuffer=e.concat(this.dataBuffer)},e.prototype.send=function(e,t){var n=this;if(e||this.dataBuffer.length){var r={data:e||this.dataBuffer.splice(0,4e3),header:this.report_common,from:"web",os:"web",version:"1"},i=new XMLHttpRequest;if(i.timeout=1e4,i.onreadystatechange=function(){if(4===i.readyState){e||(n.posting=!1);var o=void 0;if(200===i.status||304===i.status)try{o=JSON.parse(i.responseText)}catch(e){}o&&0===o.StatusCode?e||t||n.sucSend():e?n.send(e):(n.unshift(r.data),t?n.send():n.errSend())}},i.open("POST","https://log.snssdk.com/video/v1/webrtc_log/",!0),e||(this.posting=!0),location.search.includes("debug"))i.send(JSON.stringify(r));else{var o=Uw.gzip(JSON.stringify(r));i.setRequestHeader("Content-Encoding","gzip"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(o)}}},e.prototype.sucSend=function(){this.errSendDelay=100,this.preSucTime=Date.now(),this.sucSendTimer=setTimeout(this.send.bind(this),2e3)},e.prototype.errSend=function(){var e=this;this.errSendTimer=setTimeout((function(){e.send(),e.errSendTimer=null}),this.errSendDelay),this.errSendDelay*=2},e.prototype.StartUp=function(){var e=this.report_common,t=wk.event_key,n=wk.device_id,r=wk.rtc_app_id,i=wk.product_line,o=wk.report_version,a=wk.os,s=wk.rtc_sdk_version,c=wk.rtc_timestamp,u=wk.rtc_sdk_git_commit,d=wk.report_id,l=wk.rtc_sid,f=wk.engine_session_id,h=wk.rtc_business_id,p=wk.project_key,_=wk.network_type,v=wk.app_version,m=wk.aid,g=wk.device_model,y=wk.device_brand,E=wk.common_extra_info,S=wk.had_selected_p2p,b=wk.rtc_env_type;Object.assign(e,{event_key:t,device_id:n,rtc_app_id:r,product_line:i,report_version:o,os:a,rtc_sdk_version:s,rtc_timestamp:c,rtc_sdk_git_commit:u,report_id:d,rtc_sid:l,engine_session_id:f,rtc_business_id:h,project_key:p,network_type:_,app_version:v,aid:m,device_model:g,device_brand:y,common_extra_info:E,had_selected_p2p:S,rtc_env_type:b}),wk.room_id&&(e.room_id=wk.room_id),wk.user_id&&(e.user_id=wk.user_id),wk.rtc_session_id&&(e.rtc_session_id=wk.rtc_session_id)},e.prototype.rtcSdkApiCall=function(e,t,n){var r={event_key:"rtc_sdk_api_call",report_id:this.report_id++,rtc_timestamp:Date.now(),sdk_api_name:e,error_code:t,message:n};this.push(r)},e.prototype.rtcSdkCallback=function(e,t,n){var r={event_key:"rtc_sdk_callback",report_id:this.report_id++,rtc_timestamp:Date.now(),sdk_callback_name:e,error_code:t,message:n};this.push(r)},e.prototype.rtcReconnect=function(e,t,n,r){var i={event_key:"rtc_reconnect",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,reconnect_id:n,reconnect_type:r};this.push(i)},e.prototype.rtcReconnected=function(e,t){var n={event_key:"rtc_reconnected",report_id:this.report_id++,rtc_timestamp:Date.now(),message:e,reconnect_type:t};this.push(n)},e.prototype.rtcGetAccess=function(e,t,n,r,i,o){var a={event_key:"rtc_get_access",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,elapse:n,type:r,host:i,connect_session_id:o};this.push(a)},e.prototype.rtcPreIceState=function(e,t){var n={event_key:"rtc_pre_ice_state",report_id:this.report_id++,rtc_timestamp:Date.now(),message:e,ice_state:t};this.push(n)},e.prototype.rtcNodeChange=function(e,t,n){var r={event_key:"rtc_node_change",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,reason:n};this.push(r)},e.prototype.rtcSignalingMsgError=function(e,t,n){var r={event_key:"rtc_signaling_msg_error",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,reason:n};this.push(r)},e.prototype.rtcSignaling=function(e,t,n,r,i){var o={event_key:"rtc_signaling",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,signaling_event:n,signaling_type:r,direction:i};this.push(o)},e.prototype.rtcJoinRoom=function(e,t,n,r){var i={event_key:"rtc_join_room",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,deviceModel:t,deviceManufacturer:n,elapse:r};this.push(i)},e.prototype.rtcLeaveRoom=function(e,t,n){var r={event_key:"rtc_leave_room",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,elapse:n};this.push(r)},e.prototype.rtcBeginCreateOffer=function(e,t,n){var r={event_key:"rtc_begin_create_offer",report_id:this.report_id++,rtc_timestamp:Date.now(),direction:e,stream_id:t,stream_user_id:n};this.push(r)},e.prototype.rtcCreateOffer=function(e,t,n,r,i){var o={event_key:"rtc_create_offer",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,direction:t,stream_id:n,stream_user_id:r,elapse:i};this.push(o)},e.prototype.rtcSetDescription=function(e,t,n,r,i,o,a){var s={event_key:"rtc_set_description",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,is_local:n,direction:r,stream_id:i,stream_user_id:o,elapse:a};this.push(s)},e.prototype.rtcRecvAnswer=function(e,t,n,r,i,o){var a={event_key:"rtc_recv_answer",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,answer_type:t,sequence_id:n,direction:r,stream_id:i,stream_user_id:o};this.push(a)},e.prototype.firstRemoteAudioRender=function(e,t){var n={event_key:"first_remote_audio_render",report_id:this.report_id++,rtc_timestamp:Date.now(),stream_id:e,stream_user_id:t};this.push(n)},e.prototype.firstRemoteVideoRender=function(e,t){var n={event_key:"first_remote_video_render",report_id:this.report_id++,rtc_timestamp:Date.now(),stream_id:e,stream_user_id:t};this.push(n)},e.prototype.rtcPublishStat=function(e,t,n,r){var i={event_key:"rtc_publish_stat",report_id:this.report_id++,rtc_timestamp:Date.now(),result:e,is_screen:t,start:n,message:r};this.push(i)},e.prototype.rtcSubscribeStat=function(e,t,n,r){var i={event_key:"rtc_subscribe_stat",report_id:this.report_id++,rtc_timestamp:Date.now(),result:e,start:t,message:n,stream_user_id:r};this.push(i)},e.prototype.rtcAudioDevice=function(e,t,n){var r={event_key:"rtc_audio_device",report_id:this.report_id++,rtc_timestamp:Date.now(),audio_event:e,message:t,error_code:n};this.push(r)},e.prototype.rtcMediaStatistics=function(e,t){var n=y(y({event_key:"rtc_media_statistics",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcMessageStatistics=function(e,t,n){var r=y(y(y({event_key:"rtc_message_statistics",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t),{media_server_ip:n});this.push(r)},e.prototype.rtcError=function(e,t){var n={event_key:"rtc_error",report_id:this.report_id++,rtc_timestamp:Date.now(),message:e,error_code:t};this.push(n)},e.prototype.rtcFirstFrame=function(e){var t=y({event_key:"rtc_first_frame",report_id:this.report_id++,rtc_timestamp:Date.now()},e);this.push(t)},e.prototype.rtcMuteRemote=function(e,t){var n=y(y({event_key:"rtc_mute_remote",report_id:this.report_id++,rtc_timestamp:Date.now()},e),{media_type:t});this.push(n)},e.prototype.sdkInitEngine=function(e,t){var n={event_key:"sdk_init_engine",report_id:this.report_id++,rtc_timestamp:Date.now(),start:e,type:t};this.push(n)},e.prototype.joinRoom=function(e,t,n,r){var i={event_key:"join_room",report_id:this.report_id++,rtc_timestamp:Date.now(),type:e,start:t,result:n,reason:r};this.push(i)},e.prototype.p2pConnectionStatus=function(e,t,n,r,i){var o={event_key:"p2p_connection_status",report_id:this.report_id++,rtc_timestamp:Date.now(),room_id:e,user_id:t,peer_user_id:n,status:r,elapse:i};this.push(o)},e.prototype.p2pConnectClosed=function(e){var t={event_key:"p2p_connect_closed",report_id:this.report_id++,rtc_timestamp:Date.now(),p2p_selected:e};this.push(t)},e.prototype.rtcDeviceError=function(e,t,n,r,i,o,a,s,c,u,d,l,f,h,p,_){var v={event_key:"rtc_device_error",report_id:this.report_id++,rtc_timestamp:Date.now(),device_type:e,device_stage:t,error_code:n,system_error_code:r,system_api:i,call_parameters:o,location:a,message:s,media_device_id:c,media_device_name:u,elapse:d,scenario:l,event_session_id:f,device_pid:h,device_vid:p,media_mode:_};this.push(v)},e.prototype.rtcVideoDevice=function(e,t){var n={event_key:"rtc_video_device",report_id:this.report_id++,rtc_timestamp:Date.now(),media_device_id:e,media_device_name:t};this.push(n)},e.prototype.rtcVideoCaptureEvent=function(e){var t=y({event_key:"rtc_video_capture_event",report_id:this.report_id++,rtc_timestamp:Date.now()},e);this.push(t)},e.prototype.rtcEncodeFirstFrame=function(e,t){var n=y(y({event_key:"rtc_encode_first_frame",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcFirstFrameEncoded=function(e,t){var n=y(y({event_key:"rtc_first_frame_encoded",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcSendFirstPacket=function(e,t){var n=y(y({event_key:"rtc_send_first_packet",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcRecvFirstPacket=function(e,t){var n=y(y({event_key:"rtc_recv_first_packet",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcRecvFirstFrame=function(e,t){var n=y(y({event_key:"rtc_recv_first_frame",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcDecodeFirstFrame=function(e,t){var n=y(y({event_key:"rtc_decode_first_frame",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e}(),Nk=new Ok;function kk(){return function(e,t,n){if("function"==typeof n.value){var r=n.value;n.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Nk.rtcSdkApiCall(t,0,JSON.stringify(e)),r.apply(this,e)}}}}function Dk(e,t,n){void 0===n&&(n=0),Nk.rtcSdkCallback(e,n,JSON.stringify(t))}!function(e){e.streamRemovedBySchedule308="stream removed",e.clientRePublish="client republish",e.publishStreamFaied="publish failed",e.clientUnPublish="client unpublished",e.clientDisconnected="client disconnected",e.videoMuted="video muted"}(Ck||(Ck={})),function(e){e.ON_ADD_STREAM="onAddStream",e.ON_REMOVE_STREAM="onRemoveStream",e.USER_DISCONNECTION="userDisconnection",e.USER_CONNECTION="userConnection",e.ON_UPDATE_STREAM_ATTRIBUTES="onUpdateStreamAttributes",e.ON_UPDATE_ROOM_ATTRIBUTES="onUpdateRoomAttributes",e.ON_PUSH_TRACK="onPushTrack",e.ON_REMOVE_TRACK="onRemoveTrack",e.ON_CUSTOM_MESSAGE="onCustomMessage",e.NODE_CHANGE="nodeChange",e.USER_MESSAGE_RECEIVED="userMessageReceived",e.USER_BINARY_MESSAGE_RECEIVED="userBinaryMessageReceived",e.POST_PROCESSING_MESSAGE="postProcessingMessage"}(Rk||(Rk={})),function(e){e.ON_CONNECTION_STATE_CHANGE="onConnectionStateChange",e.ABNORMAL_DISCONNECTION="normalConnection"}(Ik||(Ik={}));var Pk=function(){for(var e,t,n=-1,r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],i={},o=0;o<r.length;o+=1)i[r[o]]=o;var a=function(n){e=n,t=0},s=function(){if(!e)return n;if(t>=e.length)return n;var r=255&e.charCodeAt(t);return t+=1,r},c=function(){if(!e)return n;for(;;){if(t>=e.length)return n;var r=e.charAt(t);if(t+=1,i[r])return i[r];if("A"===r)return 0}},u=function(e){var t=e.toString(16);return 1===t.length&&(t="0".concat(t)),t="%".concat(t),unescape(t)};return{encodeBase64:function(e){var t,i,o;a(e),t="";var c=new Array(3);for(i=0,o=!1;!o&&(c[0]=s())!==n;)c[1]=s(),c[2]=s(),t+=r[c[0]>>2],c[1]!==n?(t+=r[c[0]<<4&48|c[1]>>4],c[2]!==n?(t+=r[c[1]<<2&60|c[2]>>6],t+=r[63&c[2]]):(t+=r[c[1]<<2&60],t="".concat(t,"="),o=!0)):(t+=r[c[0]<<4&48],t="".concat(t,"="),t="".concat(t,"="),o=!0),(i+=4)>=76&&(t="".concat(t,"\n"),i=0);return t},decodeBase64:function(e){var t,r;a(e),t="";var i=new Array(4);for(r=!1;!r&&(i[0]=c())!==n&&(i[1]=c())!==n;)i[2]=c(),i[3]=c(),t+=u(i[0]<<2&255|i[1]>>4),i[2]!==n?(t+=u(i[1]<<4&255|i[2]>>2),i[3]!==n?t+=u(i[2]<<6&255|i[3]):r=!0):r=!0;return t}}}();function Mk(e){return Mk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mk(e)}var Lk=j,Uk=un,xk=kr,Vk=fd,Bk=le,jk=qe,Fk=lR,zk=gR;uR("match",(function(e,t,n){return[function(t){var n=Bk(this),r=null==t?void 0:jk(t,e);return r?Lk(r,t,n):new RegExp(t)[e](Vk(n))},function(e){var r=Uk(this),i=Vk(e),o=n(t,r,i);if(o.done)return o.value;if(!r.global)return zk(r,i);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=zk(r,i));){var d=Vk(s[0]);c[u]=d,""===d&&(r.lastIndex=Fk(i,xk(r.lastIndex),a)),u++}return 0===u?null:c}]}));var Hk=function(){return eR()},Gk=function(){return Date.now()},Wk=function(){function e(){}return e.token2auth=function(t,n,r,i){return i?"Bearer ".concat(i):"Basic ".concat(e.createUnsafeToken(t,n,r))},e.createUnsafeToken=function(e,t,n){return Pk.encodeBase64([e,t,n].join(":"))},e.merge=function(t,n){var r,i;void 0===t&&(t={}),void 0===n&&(n={});try{for(var o=T(Object.entries(t)),a=o.next();!a.done;a=o.next()){var s=C(a.value,2),c=s[0],u=s[1];null!==u&&"object"===Mk(u)?e.merge(t[c],n[c]):void 0!==n[c]&&(t[c]=n[c])}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.ab2str=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},e.ab2obj=function(t){try{var n=e.ab2str(t);return JSON.parse(n)}catch(e){return{}}},e.str2ab=function(e){var t=new ArrayBuffer(e.length);try{for(var n=new Uint8Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t}catch(e){return t}},e}();var Yk=new gC("DataChannelSignaling",3),Kk=0,qk=1,Xk=0,Jk=0,Zk=function(e){function t(t){var n=t.appId,r=t.roomId,i=t.clientId,o=t.dataChannel,a=e.call(this)||this;return a._appId=n,a._roomId=r,a._clientId=i,a._dataChannel=o,a._resolveCallbacks=new Map,a._rejectCallbacks=new Map,a._p2pResolveCallbacks=new Map,a._p2pRejectCallbacks=new Map,a._p2pMessageId=0,a._rttIds={},a._signalingType=new Map,a._timer={},a._clearDataChannelListener=a._handleHandler(),window.__rtc_mock_signaling__=a.emit.bind(a),a}return n(t,e),t.prototype.destroy=function(){this._dataChannel&&(this._clearDataChannelListener(),this._dataChannel.close()),this._resolveCallbacks=new Map,this._rejectCallbacks=new Map,this._p2pResolveCallbacks=new Map,this._p2pRejectCallbacks=new Map,this._p2pMessageId=0,this._rttIds={},this._signalingType=new Map,this._timer={}},t.prototype.sendSignaling=function(e,t){var n=this;return Nk.rtcSignaling(0,JSON.stringify(t),"call-".concat(e),"Send",DN.UP),new Promise((function(r,i){if(!n._dataChannel||"open"!==n._dataChannel.readyState)return i(new nC(eC.SIGNALING_CHANNEL_NOT_OPEN,"DataChannel not open"));var o=[2,1],a=cN();o=o.concat(a);var s=a.join("-");n._resolveCallbacks.set(s,r),n._rejectCallbacks.set(s,i),n._signalingType.set(s,e),n._timer[s]=setTimeout((function(){i(new nC(eC.TIME_OUT,"Signaling message time out"))}),1e4),Yk.print("Signal",">>>>>> [".concat(e,"][").concat(s,"]"),t),n._sendMessage(e,o,t)}))},t.prototype.sendP2PMessage=function(e,t){var n=t instanceof ArrayBuffer,r=n?Pk.encodeBase64(Wk.ab2str(t)):JSON.stringify(t);return this._sendP2PMessage(e,r,!1,!1,n)},t.prototype._sendP2PMessage=function(e,t,n,r,i,o){var a=this;void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1);var s=this._p2pMessageId++,c=o||{ver:1,id:+s,time:Date.now(),dir:Kk,type:Xk,err:Jk,app:this._appId,room:this._roomId,from:this._clientId,to:e,binary:i,msg:t};return r||-1!==(null==t?void 0:t.indexOf("__web__rtc__rtt__"))||Yk.print("_sendP2PMessage [DC Signaling p2p >>]",JSON.stringify(c)),new Promise((function(e,i){if(!a._dataChannel||"open"!==a._dataChannel.readyState)return i(new nC(eC.SIGNALING_CHANNEL_NOT_OPEN,"DataChannel not open"));var o=[2,5];(null==t?void 0:t.indexOf("__web__rtc__rtt__"))>-1&&(a._rttIds[s]=s,r=!0);var u=cN();o=o.concat(u),n||(a._p2pResolveCallbacks.set(s,e),a._p2pRejectCallbacks.set(s,i),a._timer[s]=setTimeout((function(){i(new nC(eC.TIME_OUT,"P2P message timeout"))}),1e4)),a._sendMessage("p2p",o,c)}))},t.prototype._sendMessage=function(e,t,n){return S(this,void 0,void 0,(function(){var r,i;return b(this,(function(o){return r=Wk.str2ab(JSON.stringify([e,n])),i=function(e){for(var t,n,r,i,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];var s=0;try{for(var c=T(o),u=c.next();!u.done;u=c.next())s+=(p=u.value).length}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}var d=new e(s),l=0;try{for(var f=T(o),h=f.next();!h.done;h=f.next()){var p=h.value;d.set(p,l),l+=p.length}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d}(Uint8Array,t,new Uint8Array(r)),this._dataChannel.send(i.buffer),[2]}))}))},t.prototype._dispartData=function(e){var t={messageType:0,compress:!1,direction:"ack"},n="",r=(new Uint8Array([]),new Uint8Array(e)),i=r[0],o=r[1],a=1&o;t.messageType=(60&o)>>2,t.compress=16==(16&i),t.direction=2==(2&o)?"ack":"send";var s=0;if(a||"ack"===t.direction){for(var c=2;c<=6;c++){var u=r[c];if(128!=(128&u)){s=c-2+1;break}}n=r.slice(2,2+s).join("-")}return{config:t,id:n,data:r.slice(2+s),needAck:a}},t.prototype._feedbackSignaling=function(e,t){void 0===e&&(e="");var n=e.split("-").map((function(e){return+e})),r=[2,3];r=r.concat(n);var i=n.join("-");Yk.print("Signal",">>>>>> [".concat(t,"-res][").concat(i,"]")),this._sendMessage("".concat(t,"-res"),r,"")},t.prototype._feedbackMessage=function(e){var t,n=(null===(t=null==e?void 0:e.msg)||void 0===t?void 0:t.indexOf("__web__rtc__rtt__"))>-1;e.dir=qk,e.msg="",this._sendP2PMessage(e.to,"",!0,n,!1,e)},t.prototype._handleFeedback=function(e){var t=(e=y({},e)).id,n=this._p2pResolveCallbacks.get(t),r=this._p2pRejectCallbacks.get(t);if(clearTimeout(this._timer[t]),this._p2pResolveCallbacks.delete(t),this._p2pRejectCallbacks.delete(t),e.err===Jk)"function"==typeof n&&n(t);else"function"==typeof r&&r(e)},t.prototype._handleMessage=function(e){var t,n;return S(this,void 0,void 0,(function(){var r,i,o,a,s,c,u,d,l,f,h,p,_,v,m;return b(this,(function(g){switch(g.label){case 0:return r=this._dispartData(e),i=r.config,o=r.id,a=r.data,s=a,i.compress&&((c=new Uw.Inflate).push(s,!0),s=c.result),[4,uN(s)];case 1:u=g.sent(),d=[];try{d=JSON.parse(u)}catch(e){return e instanceof Error&&Nk.rtcSignalingMsgError(-1,e.message,NN.MESSAGE_PARSE_FAILED),[2]}switch(l="p2p",i.messageType){case 0:"ack"===i.direction?(f=this._resolveCallbacks.get(o),h=this._rejectCallbacks.get(o),p=d[0]||{},clearTimeout(this._timer[o]),this._resolveCallbacks.delete(o),this._rejectCallbacks.delete(o),200===(null==p?void 0:p.code)?"function"==typeof f&&f(p):"function"==typeof h&&h(p),(l=this._signalingType.get(o))&&(this._signalingType.delete(o),Yk.print("Signal","<<<<<< [".concat(l,"-ack]"),p)),Nk.rtcSignaling(0,u,l,"Ack",DN.DOWN)):Array.isArray(d)&&(l=d[0],d=d[1],Yk.print("Signal","<<<<<< ".concat(l),d,o),this._feedbackSignaling(o,l),d.binary&&"string"==typeof d.message&&(d.message=Wk.str2ab(Pk.decodeBase64(d.message))),this.emit(l,y({},d)),Nk.rtcSignaling(0,u,"on-".concat(l),"Recv",DN.DOWN));break;case 1:switch(Array.isArray(d)&&(l=d[0],d=d[1]),_=null==d?void 0:d.id,this._rttIds[_]||(null==d?void 0:d.dir)===qk||(null===(t=null==d?void 0:d.msg)||void 0===t?void 0:t.indexOf("__web__rtc__rtt__"))>-1?delete this._rttIds[_]:Yk.print("Signal","<<<<<< p2p response",d),d.dir){case Kk:-1===(null===(n=null==d?void 0:d.msg)||void 0===n?void 0:n.indexOf("__web__rtc__rtt__"))&&(v=d.binary,m=d.msg,this.emit(v?Rk.USER_BINARY_MESSAGE_RECEIVED:Rk.USER_MESSAGE_RECEIVED,y(y({},d),{msg:v?Wk.str2ab(Pk.decodeBase64(m)):m}))),this._feedbackMessage(d);break;case qk:this._handleFeedback(d)}}return[2]}}))}))},t.prototype._handleHandler=function(){var e=this,t=function(t){Yk.print("_handleHandler","dataChannel close",t),e.emit("close",t)},n=function(t){Yk.print("_handleHandler","dataChannel error",t),e.emit("close",t)},r=function(t){e._handleMessage(t.data)};return this._dataChannel.addEventListener("close",t),this._dataChannel.addEventListener("error",n),this._dataChannel.addEventListener("message",r),function(){e._dataChannel.removeEventListener("close",t),e._dataChannel.removeEventListener("error",n),e._dataChannel.removeEventListener("message",r)}},t}(_C.exports.EventEmitter),$k=function(){function e(){this.isSending=!1}return e.prototype.ajax=function(e){var t=this,n=e.method,r=e.url,i=e.body,o=void 0===i?{}:i,a=e.headers,s=void 0===a?{}:a,c=e.stringify,u=void 0===c||c;return new Promise((function(e,i){var a,c;t.isSending=!0;var d=new XMLHttpRequest;d.open(n,r,!0);try{for(var l=T(Object.entries(s)),f=l.next();!f.done;f=l.next()){var h=C(f.value,2),p=h[0],_=h[1];d.setRequestHeader(p,_)}}catch(e){a={error:e}}finally{try{f&&!f.done&&(c=l.return)&&c.call(l)}finally{if(a)throw a.error}}d.onreadystatechange=function(){4===d.readyState&&(t.isSending=!1,200===d.status?e(JSON.parse(d.responseText)):i({message:d.statusText,code:d.status})),0===d.status&&i({code:0,message:"Request abort"})},d.onerror=function(e){var n=eC.UNEXPECTED_ERROR;t.isSending=!1,i({code:n,message:d.responseText||"unknown"})},u&&(o=JSON.stringify(o)),d.send(o),t.xhr=d}))},e.prototype.get=function(e,t){return this.ajax({method:"GET",url:e,headers:t})},e.prototype.post=function(e,t,n,r){return this.ajax({method:"POST",url:e,body:t,headers:n,stringify:r})},e.prototype.abort=function(){var e;null===(e=this.xhr)||void 0===e||e.abort()},e}(),Qk="RTC_DEVICE_ID",eD="RTC_DEFAULT_SDP",tD="RTC_ACCESS_NODE",nD="RTC_ACCESS_URLS",rD=function(){function e(){}return e.prototype.get=function(e){var t=localStorage.getItem(e);if(!t)return null;try{var n=JSON.parse(t);return n.ttl>0&&Date.now()-n.saveTime>n.ttl?(this.delete(e),null):n.message}catch(e){return null}},e.prototype.set=function(e,t,n){void 0===n&&(n=-1);var r={ttl:n,saveTime:Date.now(),message:t};try{return localStorage.setItem(e,JSON.stringify(r)),!0}catch(e){return!1}},e.prototype.delete=function(e){try{return localStorage.removeItem(e),!0}catch(e){return!1}},e}(),iD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getDeviceId=function(){var e=this.get(Qk);return e||(e=eR()),this.set(Qk,e),e},t.prototype.getDefaultSdp=function(){return this.get(eD)},t.prototype.setDefaultSdp=function(e){return this.set(eD,e,108e6)},t.prototype.getAccessNode=function(){return this.get(tD)},t.prototype.setAccessNode=function(e,t){return this.set(tD,e,1e3*t)},t.prototype.getAccessUrls=function(){return this.get(nD)},t.prototype.setAccessUrls=function(e){var t=e.map((function(e){var t=e.host,n=e.path;return"https://".concat(t).concat(n)}));return this.set(nD,t)},t.prototype.clearAccessUrls=function(){this.delete(nD)},t}(rD),oD=new iD,aD=new gC("ICE Request",3),sD=function(){function e(){this._request=new $k}return e.prototype.getAccessNode=function(e,t,n,r,i,o){return S(this,void 0,void 0,(function(){var a;return b(this,(function(s){return(a=oD.getAccessNode())?(this.getAccessNodeFromServer(e,t,n,r,i,o),aD.print("use cache node",JSON.stringify(a)),[2,Promise.resolve(a)]):[2,this.getAccessNodeFromServer(e,t,n,r,i,o)]}))}))},e.prototype.getAccessNodeFromServer=function(e,t,n,r,i,o){return S(this,void 0,void 0,(function(){var a,s,c=this;return b(this,(function(u){return a=oD.getAccessUrls(),s=!0,aD.print("use cache access urls if exist",a),(null==a?void 0:a.length)>0||(a=aI.ICE_CONFIG_REQUEST_URLS,s=!1,aD.print("use external access urls if exist",a)),(null==a?void 0:a.length)>0||(a=aI.ICE_CONFIG_REQUEST_URLS_INTERNAL,s=!1,aD.print("use internal access urls finally",a)),[2,this.getICEConfigFromServer(a,e,t,n,r,i,o).then((function(e){aD.print("request success and will cache");var t=e.nodes[0];return oD.setAccessNode(t,e.ttl||11200),oD.setAccessUrls(e.dispatchDomains),t})).catch((function(a){if(s)return aD.print("use cache access urls fail, will fallback"),oD.clearAccessUrls(),c.getAccessNodeFromServer(e,t,n,r,i,o);throw a}))]}))}))},e.prototype.getICEConfigFromServer=function(e,t,n,r,i,o,a){var s;return S(this,void 0,void 0,(function(){var c,u,d,l=this;return b(this,(function(f){return c={appID:t,roomID:n,userID:r,deviceID:i,connectSessionID:Hk(),os:"web",sdkVersion:aI.VERSION,expectedAddr:cI("EXPECTED_ADDR"),productPlatform:"VolcEngine"},o&&a&&(c.feedbackInfo=[{feedbackIP:null===(s=a.publicIPs[0])||void 0===s?void 0:s.ip,feedbackReason:{type:"NodeChanged",reason:o}}],delete c.expectedAddr),u=Date.now(),Nk.rtcGetAccess(0,JSON.stringify(c),0,wN.REQUEST,e.join(","),c.connectSessionID),d=e.map((function(e){return S(l,void 0,void 0,(function(){var t,n,r;return b(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._request.post(e,c)];case 1:return t=i.sent(),[3,3];case 2:throw n=i.sent(),new nC(eC.ICE_SERVER_WRONG,"get ICE config failed",n);case 3:if(200!==t.code)throw new nC(eC.ICE_SERVER_WRONG,"get ICE config failed",{server_code:t.code,message:JSON.stringify(t)});if(!(r=t.nodes[0]))throw new nC(eC.ICE_SERVER_WRONG,"ICE config server return empty nodes",{code:t.code,message:JSON.stringify(t)});return[2,{result:t,firstNode:r}]}}))}))})),[2,Promise.race(d).then((function(t){var n=t.result;return t.firstNode,Nk.rtcGetAccess(200,JSON.stringify(n),Date.now()-u,wN.RESPONSE,e.join(","),c.connectSessionID),n})).catch((function(t){throw Nk.rtcGetAccess(t.error.code||t.error.server_code,t.error.message,Date.now()-u,wN.RESPONSE,e.join(","),c.connectSessionID),t}))]}))}))},e.prototype.abort=function(){this._request.isSending&&(aD.print("abort","HTTP Request of [getICEConfigFromServer] abort"),this._request.abort())},e}(),cD=lS.left,uD=Ne,dD=$f;Si({target:"Array",proto:!0,forced:!cl("reduce")||!dD&&uD>79&&uD<83},{reduce:function(e){var t=arguments.length;return cD(this,e,t,t>1?arguments[1]:void 0)}});var lD={},fD={},hD={exports:{}},pD=hD.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(pD).forEach((function(e){pD[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))})),function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,r){var i=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:i&&!n[e.name]&&(n[e.name]={});var o=e.push?{}:i?n[e.name]:n;!function(e,n,r,i){if(i&&!r)n[i]=t(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(n[r[o]]=t(e[o+1]))}(r.match(e.reg),o,e.names,e.name),e.push&&n[e.push].push(o)},r=hD.exports,i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),a=o[o.length-1]);for(var s=0;s<(r[t]||[]).length;s+=1){var c=r[t][s];if(c.reg.test(i))return n(c,a,i)}})),t.media=o,t};var o=function(e,n){var r=n.split(/=(.+)/,2);return 2===r.length?e[r[0]]=t(r[1]):1===r.length&&n.length>1&&(e[r[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],r=e.split(" ").map(t),i=0;i<r.length;i+=3)n.push({component:r[i],ip:r[i+1],port:r[i+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,r=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),r=!0),{scid:n,paused:r}}))}))}}(fD);var _D=hD.exports,vD=/%[sdv%]/g,mD=function(e){var t=1,n=arguments,r=n.length;return e.replace(vD,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},gD=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return mD.apply(null,r)},yD=["v","o","s","i","u","e","p","c","b","t","r","z","a"],ED=["i","c","b","a"],SD=fD,bD=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||yD,r=t.innerOrder||ED,i=[];return n.forEach((function(t){_D[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(gD(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(gD(t,n,e))}))}))})),e.media.forEach((function(e){i.push(gD("m",_D.m[0],e)),r.forEach((function(t){_D[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(gD(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(gD(t,n,e))}))}))}))})),i.join("\r\n")+"\r\n"};lD.write=bD,lD.parse=SD.parse,lD.parseParams=SD.parseParams,lD.parseFmtpConfig=SD.parseFmtpConfig,lD.parsePayloads=SD.parsePayloads,lD.parseRemoteCandidates=SD.parseRemoteCandidates,lD.parseImageAttributes=SD.parseImageAttributes,lD.parseSimulcastStreamList=SD.parseSimulcastStreamList;var TD=function(){function e(e){this._iceConfigNode=e}return e.prototype.modifyByIceNode=function(e){var t,n=this._iceConfigNode.iceParams,r=lD.parse(e);return null===(t=r.media)||void 0===t||t.forEach((function(e){e.iceUfrag=null==n?void 0:n.clientIceUfrag,e.icePwd=null==n?void 0:n.clientIcePwd,e.iceOptions="renomination"})),lD.write(r)},e}(),CD=function(){function e(e){this._iceConfigNode=e}return e.prototype.modifyByIceNode=function(e){var t,n=this,r=this._iceConfigNode.certFingerprint,i=lD.parse(e);return(null==i?void 0:i.fingerprint)&&(i.fingerprint={type:"sha-256",hash:r}),null===(t=null==i?void 0:i.media)||void 0===t||t.forEach((function(e){return n.modifyMlineByIceNode(e)})),lD.write(i)},e.prototype.modifyMlineByIceNode=function(e){var t=this._iceConfigNode,n=t.publicIPs,r=t.certFingerprint,i=t.iceParams;e.fingerprint&&(e.fingerprint={type:"sha-256",hash:r}),e.icePwd=i.serverIcePwd,this._iceUfrag||(this._iceUfrag=MD(i.serverIceUfrag)),e.iceUfrag=this._iceUfrag,e.setup="active",this._candidates||(this._candidates=PD(n)),e.candidates=this._candidates,e.iceOptions="renomination","application"===e.type&&(e.sctpmap={sctpmapNumber:5e3,app:"webrtc-datachannel",maxMessageSize:262144})},e}();function RD(e,t){var n,r=lD.parse(e),i=[];return r.media=r.media.map((function(e){return t.includes(e.mid+"")?(e.direction="inactive",e.port=0,delete e.ext,delete e.ssrcs,delete e.ssrcGroups,delete e.simulcast,delete e.simulcast_03,delete e.rids,delete e.extmapAllowMixed,delete e.bundleOnly):"inactive"!==e.direction&&i.push(e.mid),e})),(null===(n=r.groups)||void 0===n?void 0:n[0])&&(r.groups[0].mids=i.join(" ")),r}var ID,AD,wD,OD,ND,kD=function(e,t){var n,r;try{var i=lD.parse(e),o=lD.parse(t),a="".concat(null===(n=o.groups)||void 0===n?void 0:n[0].mids).split(" "),s="".concat(null===(r=i.groups)||void 0===r?void 0:r[0].mids).split(" "),c={};a.forEach((function(e){return c[e]=e}));var u={};s.forEach((function(e){c[e]||(u[e]=e)}));var d="",l="";return i.media=i.media.filter((function(e){return u[e.mid]&&"audio"===e.type?d="".concat(e.mid):u[e.mid]&&"video"===e.type&&(l="".concat(e.mid)),u[e.mid]})),delete i.groups,delete i.msidSemantic,{partialSdp:lD.write(i),audioMid:d,videoMid:l}}catch(e){return null}},DD=function(e,t){var n;try{var r=lD.parse(e),i=[];return null===(n=r.media)||void 0===n||n.forEach((function(e){(null==t?void 0:t.includes("".concat(e.mid)))&&i.push(e)})),r.media=i,delete r.groups,delete r.msidSemantic,lD.write(r)}catch(e){return""}},PD=function(e){if(!Array.isArray(e))return[];var t=0,n=2130706431,r=[];return e.forEach((function(e){var i={component:1,ip:e.ip,type:"host",generation:e.generation};e.udpPorts&&e.udpPorts.forEach((function(e){r.push(y(y({},i),{foundation:t++,transport:"udp",port:e,priority:n}))})),e.tcpPorts&&e.tcpPorts.forEach((function(e){r.push(y(y({},i),{foundation:t++,transport:"tcp",port:e,tcptype:"passive",priority:2130705431}))}))})),r},MD=function(e){var t=new TextEncoder,n=t.encode("PREC"),r=new Uint8Array(Wk.str2ab(e)),i=t.encode(Date.now().toString()).slice(-4),o=new Uint8Array(4);o[0]=0,o[1]=1,o[2]=1,o[3]=1;var a=function(e){for(var t,n,r,i,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];var s=0;try{for(var c=T(o),u=c.next();!u.done;u=c.next())s+=(p=u.value).length}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}var d=new e(s),l=0;try{for(var f=T(o),h=f.next();!h.done;h=f.next()){var p=h.value;d.set(p,l),l+=p.length}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d}(Uint8Array,n,r,i,o),s=Wk.ab2str(a.buffer);return Pk.encodeBase64(s)},LD="safari"===(ID="none",null!==window.navigator.userAgent.match("Firefox")?ID="mozilla":null!==window.navigator.userAgent.match("Chrome")?(ID="chrome-stable",null!==window.navigator.userAgent.match("Electron")&&(ID="electron")):(null!==window.navigator.userAgent.match("Safari")||null!==window.navigator.userAgent.match("AppleWebKit"))&&(ID="safari"),ID);!function(e){e.codec="codec",e.inboundRtp="inbound-rtp",e.outboundRtp="outbound-rtp",e.remoteInboundRtp="remote-inbound-rtp",e.remoteOutboundRtp="remote-outbound-rtp",e.mediaSource="media-source",e.csrc="csrc",e.peerConnection="peer-connection",e.dataChannel="data-channel",e.stream="stream",e.track="track",e.transceiver="transceiver",e.sender="sender",e.receiver="receiver",e.transport="transport",e.sctpTransport="sctp-transport",e.candidatePair="candidate-pair",e.localCandidate="local-candidate",e.remoteCandidate="remote-candidate",e.certificate="certificate",e.iceServer="ice-server"}(AD||(AD={})),function(e){e[e.encode=0]="encode",e[e.decode=1]="decode"}(wD||(wD={})),function(e){e[e.none=0]="none",e[e.cpu=1]="cpu",e[e.bandwidth=2]="bandwidth",e[e.other=3]="other"}(OD||(OD={})),function(e){e[e.unknown=0]="unknown",e[e.controlling=1]="controlling",e[e.controlled=2]="controlled"}(ND||(ND={}));var UD=function(){function e(e){this.peer=e,this.stats=[]}return e.prototype.handleCodec=function(e){return e},e.prototype.handleInboundRtp=function(e){return e},e.prototype.handleOutboundRtp=function(e){var t=e.ssrc;return t&&(e.rtxSsrc=t),e},e.prototype.handleRemoteInboundRtp=function(e){return e},e.prototype.handleRemoteOutboundRtp=function(e){return e},e.prototype.handleMediaSource=function(e){return e},e.prototype.handleCsrc=function(e){return e},e.prototype.handlePeerConnection=function(e){return e},e.prototype.handleDataChannel=function(e){return e},e.prototype.handleStream=function(e){return e},e.prototype.handleTrack=function(e){return e},e.prototype.handleTransceiver=function(e){return e},e.prototype.handleSender=function(e){return e},e.prototype.handleReceiver=function(e){return e},e.prototype.handleTransport=function(e){return e},e.prototype.handleSctpTransport=function(e){return e},e.prototype.handleCandidatePair=function(e){return e},e.prototype.handleLocalCandidate=function(e){return e},e.prototype.handleRemoteCandidate=function(e){return e},e.prototype.handleCertificate=function(e){return e},e.prototype.handleIceServer=function(e){return e},e.prototype.processStats=function(e){var t=this;e.forEach((function(e){var n;switch(e.type){case AD.candidatePair:n=t.handleCandidatePair;break;case AD.certificate:n=t.handleCertificate;break;case AD.remoteCandidate:n=t.handleRemoteCandidate;break;case AD.remoteInboundRtp:n=t.handleInboundRtp;break;case AD.remoteOutboundRtp:n=t.handleOutboundRtp;break;case AD.sctpTransport:n=t.handleSctpTransport;break;case AD.sender:n=t.handleSender;break;case AD.stream:n=t.handleStream;break;case AD.track:n=t.handleTrack;break;case AD.transceiver:n=t.handleTransceiver;break;case AD.transport:n=t.handleTransport;break;case AD.codec:n=t.handleCodec;break;case AD.csrc:n=t.handleCsrc;break;case AD.dataChannel:n=t.handleDataChannel;break;case AD.iceServer:n=t.handleIceServer;break;case AD.mediaSource:n=t.handleMediaSource;break;case AD.outboundRtp:n=t.handleOutboundRtp;break;case AD.inboundRtp:n=t.handleInboundRtp;break;case AD.peerConnection:n=t.handlePeerConnection;break;case AD.receiver:n=t.handleReceiver;break;case AD.localCandidate:n=t.handleLocalCandidate;break;default:n=function(e){return e}}n=n.bind(t),t.stats.push(n(e))}))},e.prototype.getExtraStats=function(){return S(this,void 0,void 0,(function(){var e=this;return b(this,(function(t){return[2,new Promise((function(t,n){if(LD||void 0!==window.InstallTrigger)return t(e.stats);try{e.peer.getStats((function(n){n.result().forEach((function(t){if(!xD.includes(t.type)){var n={};t.names().forEach((function(e){n[e]=t.stat(e)})),n.id=t.id,n.type=t.type,n.timestamp=t.timestamp,e.stats.push(n)}})),t(e.stats)}))}catch(e){n(e)}}))]}))}))},e.prototype.getStats=function(e){return S(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),[4,this.peer.getStats(e)];case 1:t=n.sent(),this.processStats(t),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.getExtraStats()];case 3:case 4:return n.sent(),[3,5];case 5:return[3,7];case 6:return n.sent(),[3,7];case 7:return[2,this.stats]}}))}))},e}(),xD=["codec","inbound-rtp","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp","media-source","csrc","peer-connection","data-channel","stream","track","transceiver","sender","receiver","transport","sctp-transport","candidate-pair","local-candidate","remote-candidate","certificate","ice-server"],VD=function(e,t){return S(void 0,void 0,void 0,(function(){var n;return b(this,(function(r){switch(r.label){case 0:return n=[],e instanceof RTCPeerConnection?[4,new UD(e).getStats(t)]:[2,n];case 1:return[2,n=r.sent()]}}))}))},BD=function(){var e;try{var t=null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgent)||void 0===e?void 0:e.toLowerCase();if(t.indexOf("ucbrowser")>-1&&t.indexOf("iphone"))return!1}catch(e){return!1}return!(!window.RTCPeerConnection||!window.RTCPeerConnection.prototype.addTransceiver)},jD=function(){return"undefined"!=typeof TransformStream&&void 0!==RTCRtpSender.prototype.createEncodedStreams&&void 0!==RTCRtpReceiver.prototype.createEncodedStreams},FD=new gC("BasicHandler",3),zD=jD(),HD={iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",encodedInsertableStreams:!!zD||void 0},GD=function(e){function t(){var t=e.call(this)||this;return t._peerConnection=new RTCPeerConnection(HD),t._dataChannel=t._peerConnection.createDataChannel("signaling"),t._dataChannel.binaryType="arraybuffer",t._peerConnection.ontrack=function(e){var n,r;FD.print("constructor","pc.ontrack ".concat(e.track.kind," ").concat(e.track.id," ").concat(null===(r=null===(n=e.streams)||void 0===n?void 0:n[0])||void 0===r?void 0:r.id)),t.emit("ontrack",e)},t._peerConnection.onconnectionstatechange=function(e){FD.print("constructor","onconnectionstatechange ".concat(t._peerConnection.iceConnectionState," -> ").concat(t._peerConnection.connectionState)),"failed"!==t._peerConnection.iceConnectionState&&"closed"!==t._peerConnection.iceConnectionState&&"failed"!==t._peerConnection.connectionState||t.emit("disconnect")},t._peerConnection.oniceconnectionstatechange=function(){var e=t._peerConnection.iceConnectionState;Nk.rtcPreIceState(e,ON["RTCPREICESTATE_ICESTATE_".concat(e.toUpperCase())])},t}return n(t,e),t.prototype.connect=function(e){return S(this,void 0,void 0,(function(){var t,n,r=this;return b(this,(function(i){switch(i.label){case 0:return FD.print("connect","invoke connect"),[4,this._peerConnection.createOffer()];case 1:return t=i.sent(),this._localSdp=new TD(e),[4,this.setLocalDescription(t.sdp)];case 2:return i.sent(),this._remoteSdp=new CD(e),n=this._remoteSdp.modifyByIceNode(t.sdp),[4,this.setRemoteDescription(n)];case 3:return i.sent(),[4,new Promise((function(e,t){r._dataChannel.onopen=function(){FD.print("connect","dataChannel open"),e("")},r._dataChannel.onerror=function(e){Nk.rtcSignalingMsgError(e.error.sdpLineNumber,e.error.errorDetail,NN.INVALID_DATA),t(e)},r._dataChannel.onclose=function(e){t(e)}}))];case 4:return i.sent(),FD.print("connect","dataChannel establish success"),[2,this._dataChannel]}}))}))},t.prototype.disconnect=function(){this._peerConnection.close(),this._dataChannel.close(),this._peerConnection.ontrack=null},t.prototype.destroy=function(){this.disconnect(),this._localSdp=void 0,this._remoteSdp=void 0},t.prototype.publish=function(e){var t;return S(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g;return b(this,(function(E){switch(E.label){case 0:if(n=e.stream,r=null==e?void 0:e.videoTrack,i=null==e?void 0:e.audioTrack,o={},a=[],Array.isArray(null==e?void 0:e.videoEncodeConfig))for(s=null==e?void 0:e.videoEncodeConfig.length,c=null==r?void 0:r.getTrack(),u={width:640,height:480,framerate:30},c&&(d=null==c?void 0:c.getSettings(),u={width:Math.floor(d.width),height:Math.floor(d.height),framerate:Math.floor(d.frameRate)}),o.sendEncodings=[],l=0;l<s;l++)f=null==e?void 0:e.videoEncodeConfig[l],h={maxBitrate:1e3*f.maxKbps},p=Math.pow(2,l),s>1&&(h.rid="".concat(l),h.scaleResolutionDownBy=p),null===(t=o.sendEncodings)||void 0===t||t.unshift(h),a.push({width:Math.floor(u.width/p),height:Math.floor(u.height/p),framerate:u.framerate,maxkbps:f.maxKbps,rid:"".concat(l)});return FD.print("publish videoTransceiverInit videoDescriptions","",o,a),_=null==i?void 0:i.getTrack(),(null==i?void 0:i.mixType)!==A.PLAYOUT&&(null==i?void 0:i.mixedAudioTrack)&&(_=null==i?void 0:i.mixedAudioTrack),e.audioTransceiver=this._peerConnection.addTransceiver(_||"audio",{direction:"sendonly",streams:[n]}),zD&&e.initAudioEncodedTransform(),e.videoTransceiver=this._peerConnection.addTransceiver((null==r?void 0:r.getTrack())||"video",y({direction:"sendonly",streams:[n]},o)),zD&&e.initVideoEncodedTransform(),FD.print("sender.getParameters()",e.videoTransceiver.sender.getParameters()),v=Gk(),Nk.rtcBeginCreateOffer(PN.UP,e.streamId,e.userId),[4,this._peerConnection.createOffer()];case 1:if(m=E.sent(),Nk.rtcCreateOffer(0,MN.UP,e.streamId,e.userId,Gk()-v),g=kD(m.sdp,this.getLocalDescriptionSdp()),!m.sdp||!g)throw new nC(eC.ADD_TRANSCEIVER_FAILED,"createOffer failed");return[2,y(y({sdp:m.sdp},g),{type:"incroffer",semantics:"unified-plan",videoDescriptions:a})]}}))}))},t.prototype.subscribe=function(e,t){return S(this,void 0,void 0,(function(){var n,r,i,o,a;return b(this,(function(s){switch(s.label){case 0:return n="incroffer",r="unified-plan",t?[2,{sdp:this.getLocalDescriptionSdp(),partialSdp:DD(this.getLocalDescriptionSdp(),[t.audioMid,t.videoMid]),audioMid:t.audioMid,videoMid:t.videoMid,type:n,semantics:r}]:(e.audioTransceiver=this._peerConnection.addTransceiver("audio",{direction:"recvonly"}),zD&&e.initAudioEncodedTransform(),e.videoTransceiver=this._peerConnection.addTransceiver("video",{direction:"recvonly"}),zD&&e.initVideoEncodedTransform(),i=Gk(),Nk.rtcBeginCreateOffer(PN.DOWN,e.streamId,e.userId),[4,this._peerConnection.createOffer()]);case 1:if(o=s.sent(),Nk.rtcCreateOffer(0,MN.DOWN,e.streamId,e.userId,Gk()-i),a=kD(o.sdp,this.getLocalDescriptionSdp()),!o.sdp||!a)throw new nC(eC.ADD_TRANSCEIVER_FAILED,"createOffer failed");return[2,y(y({sdp:o.sdp},a),{type:n,semantics:r})]}}))}))},t.prototype.setAnswerSdp=function(e,t,n,r,i){var o;return S(this,void 0,void 0,(function(){var a,s,c,u,d,l;return b(this,(function(f){switch(f.label){case 0:return Nk.rtcRecvAnswer(0,xN.INCRANSWER,0,i,r.streamId,r.userId),a=this._peerConnection.remoteDescription,s=lD.parse(null==a?void 0:a.sdp),c=null===(o=s.media)||void 0===o?void 0:o.reduce((function(e,t){return e[t.mid]=t,e}),{}),lD.parse(t).media.forEach((function(e){return c[e.mid]=e})),u=[],d=lD.parse(e),l=d.media.map((function(e){return n&&n[e.mid]&&(e.mid=n[e.mid]),"inactive"!==e.direction&&u.push(e.mid),c[e.mid]})),s.media=l,d.groups=[{mids:u.join(" "),type:"BUNDLE"}],s.groups=d.groups,[4,this.setLocalDescription(lD.write(d),r,i)];case 1:return f.sent(),[4,this.setRemoteDescription(lD.write(s),r,i)];case 2:return f.sent(),[2]}}))}))},t.prototype.setLocalDescription=function(e,t,n){var r;return S(this,void 0,void 0,(function(){var i,o,a,s;return b(this,(function(c){switch(c.label){case 0:i=null===(r=this._localSdp)||void 0===r?void 0:r.modifyByIceNode(e),o=new RTCSessionDescription({type:"offer",sdp:i}),a=Gk(),c.label=1;case 1:return c.trys.push([1,3,,4]),FD.print("setOffer","set offer: ",o),[4,this._peerConnection.setLocalDescription(o)];case 2:return c.sent(),t&&Nk.rtcSetDescription(0,"",LN.W_1,n,t.streamId,t.userId,Gk()-a),[3,4];case 3:throw(s=c.sent())instanceof Error&&t&&Nk.rtcSetDescription(-1,s.message,LN.W_1,n,t.streamId,t.userId,Gk()-a),s;case 4:return[2]}}))}))},t.prototype.setRemoteDescription=function(e,t,n){return S(this,void 0,void 0,(function(){var r,i,o;return b(this,(function(a){switch(a.label){case 0:r=new RTCSessionDescription({type:"answer",sdp:e}),i=Gk(),a.label=1;case 1:return a.trys.push([1,3,,4]),FD.print("setAnswer","set answer: ",r),[4,this._peerConnection.setRemoteDescription(r)];case 2:return a.sent(),t&&Nk.rtcSetDescription(0,"",LN.W_0,n,t.streamId,t.userId,Gk()-i),[3,4];case 3:throw(o=a.sent())instanceof Error&&t&&Nk.rtcSetDescription(-1,o.message,LN.W_0,n,t.streamId,t.userId,Gk()-i),o;case 4:return[2]}}))}))},t.prototype.getLocalDescriptionSdp=function(){var e,t,n,r;if(null===(t=null===(e=this._peerConnection)||void 0===e?void 0:e.localDescription)||void 0===t?void 0:t.sdp)return null===(r=null===(n=this._peerConnection)||void 0===n?void 0:n.localDescription)||void 0===r?void 0:r.sdp;throw Error()},t.prototype.getRemoteDescriptionSdp=function(){var e,t,n,r;if(null===(t=null===(e=this._peerConnection)||void 0===e?void 0:e.remoteDescription)||void 0===t?void 0:t.sdp)return null===(r=null===(n=this._peerConnection)||void 0===n?void 0:n.remoteDescription)||void 0===r?void 0:r.sdp;throw Error()},t.prototype.closeMLine=function(e){var t,n;return S(this,void 0,void 0,(function(){var r,i,o,a,s=this;return b(this,(function(c){switch(c.label){case 0:return FD.print("closeMids","closeMids: ",e),r=this.getLocalDescriptionSdp(),i=RD(r,e),o=this.getRemoteDescriptionSdp(),a=RD(o,e),[4,this.setLocalDescription(lD.write(i))];case 1:return c.sent(),(null===(t=null==i?void 0:i.media)||void 0===t?void 0:t.length)!==(null===(n=null==a?void 0:a.media)||void 0===n?void 0:n.length)&&i.media.slice(a.media.length).forEach((function(e){var t;null===(t=s._remoteSdp)||void 0===t||t.modifyMlineByIceNode(e),a.media.push(e)})),[4,this.setRemoteDescription(lD.write(a))];case 2:return c.sent(),[2]}}))}))},t.prototype.getDefaultSdp=function(){return S(this,void 0,void 0,(function(){var e,t,n;return b(this,(function(r){switch(r.label){case 0:return(e=oD.getDefaultSdp())?[3,2]:((t=new RTCPeerConnection(HD)).createDataChannel("default"),t.addTransceiver("audio",{direction:"recvonly"}),t.addTransceiver("video",{direction:"recvonly"}),[4,t.createOffer()]);case 1:n=r.sent(),e=null==n?void 0:n.sdp,t.close(),oD.setDefaultSdp(e),r.label=2;case 2:return[2,{sdp:e,semantics:"unified-plan",type:"offer"}]}}))}))},t.prototype.getStats=function(e){return VD(this._peerConnection,e)},t.prototype.rollback=function(e,t){var n;return S(this,void 0,void 0,(function(){return b(this,(function(r){switch(r.label){case 0:return"stable"!==this._peerConnection.signalingState?[3,2]:[4,null===(n=this._peerConnection)||void 0===n?void 0:n.setLocalDescription(new RTCSessionDescription({sdp:e,type:"offer"}))];case 1:r.sent(),r.label=2;case 2:return this.closeMLine(t),[2]}}))}))},Object.defineProperty(t.prototype,"pc",{get:function(){return this._peerConnection},enumerable:!1,configurable:!0}),t}(_C.exports.EventEmitter),WD=U,YD=dr.EXISTS,KD=Q,qD=nn.f,XD=Function.prototype,JD=KD(XD.toString),ZD=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,$D=KD(ZD.exec);WD&&!YD&&qD(XD,"name",{configurable:!0,get:function(){try{return $D(ZD,JD(this))[1]}catch(e){return""}}});var QD=new gC("Locker",2),eP=1,tP=function(){function e(e){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=eP++,e&&(this.name=e),QD.print("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}return Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!1,configurable:!0}),e.prototype.lock=function(){var e,t=this;this.locks+=1,QD.print("[lock-".concat(this.name,"-").concat(this.lockId,"] locked, current queue ").concat(this.locks,"."));var n=new Promise((function(n){e=function(){t.locks-=1,QD.print("[lock-".concat(t.name,"-").concat(t.lockId,"] unlocked, current queue ").concat(t.locks,".")),n()}})),r=this.lockingPromise.then((function(){return e}));return this.lockingPromise=this.lockingPromise.then((function(){return n})),r},e}(),nP=Math.log,rP=Math.LOG10E;Si({target:"Math",stat:!0},{log10:Math.log10||function(e){return nP(e)*rP}}),Si({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),new gC("Stats",2);var iP,oP=function(){function e(e,t){this._client=e,this._handler=t,this.dataChannelRTT={},this._rttTimer={},this._remoteStreamStasEvtIntervals={},this._localStreamStasEvtIntervals={},this._firstFrameStarted={}}return e.prototype.setRemoteStreamStatsEvtInterval=function(e){var t,n,r=this;this.getDataChannelRTT(e.userId);var i={audio:{},video:{},remoteStream:e},o=null===(t=e.audioTrack)||void 0===t?void 0:t.getTrack(),a=null===(n=e.videoTrack)||void 0===n?void 0:n.getTrack();this.getRemoteAudioStats(o,i),this.getRemoteVideoStats(a,i),this.delRemoteStreamStatsEvtInterval(e);this._remoteStreamStasEvtIntervals[e.streamId]=setInterval((function(){return S(r,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,S(r,void 0,void 0,(function(){var t,n,r,o,a,s,c;return b(this,(function(u){switch(u.label){case 0:return t=null===(s=e.audioTrack)||void 0===s?void 0:s.getTrack(),n=null===(c=e.videoTrack)||void 0===c?void 0:c.getTrack(),[4,this.getRemoteAudioStats(t,i)];case 1:return r=u.sent(),[4,this.getRemoteVideoStats(n,i)];case 2:return(o=u.sent()).isScreen=e.isScreen,this.dataChannelRTT[e.userId]&&(a=this.dataChannelRTT[e.userId]/2,r.e2eDelay=a+r.jitterBufferDelay,o.e2eDelay=a+i.video.jitterBufferDelay),[2,{audioStats:r,videoStats:o,isScreen:e.isScreen,userId:e.userId}]}}))}))];case 1:return t=n.sent(),this._client.emit("onRemoteStreamStats",t),[2]}}))}))}),2e3)},e.prototype.delRemoteStreamStatsEvtInterval=function(e){clearInterval(this._remoteStreamStasEvtIntervals[e.streamId])},e.prototype.unsubscribe=function(e){this.delRemoteStreamStatsEvtInterval(e),this._firstFrameStarted["".concat(e.streamId,"-audio")]&&(Nk.rtcFirstFrame({event_type:WN.RECV_END,media_type:e.isScreen?YN.SCREEN_AUDIO:YN.AUDIO,type:KN.PUBLISH,start:this._firstFrameStarted["".concat(e.streamId,"-audio")],event_session_id:+e.streamId,result:!1,reason:qN.UNSUBSCRIBE,stream_user_id:e.userId}),delete this._firstFrameStarted["".concat(e.streamId,"-audio")]),this._firstFrameStarted["".concat(e.streamId,"-video")]&&(Nk.rtcFirstFrame({event_type:WN.RECV_END,media_type:e.isScreen?YN.SCREEN_VIDEO:YN.VIDEO,type:KN.PUBLISH,start:this._firstFrameStarted["".concat(e.streamId,"-video")],event_session_id:+e.streamId,result:!1,reason:qN.UNSUBSCRIBE,stream_user_id:e.userId}),delete this._firstFrameStarted["".concat(e.streamId,"-video")])},e.prototype.getRemoteAudioStats=function(e,t){return S(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d,l,f,h=this;return b(this,(function(p){switch(p.label){case 0:return n={},r={timestamp:Date.now()},i=t.remoteStream,o=i.streamId,a=i.userId,s=i.isScreen,c=i.audioMid,u=i.hasAudio,d={media_type:"audio",direction:"down",stream_id:o,stream_user_id:a,vid:c},e&&this._handler?(t.audioStart||(t.audioStart=Gk(),Nk.rtcFirstFrame({event_type:WN.BEGIN_RECV,media_type:s?YN.SCREEN_AUDIO:YN.AUDIO,type:KN.SUBSCRIBE,start:t.audioStart,event_session_id:+o,stream_user_id:a}),u?this._firstFrameStarted["".concat(o,"-audio")]=t.audioStart:Nk.rtcFirstFrame({event_type:WN.RECV_END,media_type:s?YN.SCREEN_AUDIO:YN.AUDIO,type:KN.PUBLISH,start:t.audioStart,event_session_id:+o,result:!1,reason:qN.DISABLE,stream_user_id:a})),[4,this._handler.getStats(e)]):[2,n];case 1:return p.sent().forEach((function(e){var i=e.type,c=e.packetsLost,u=e.packetsReceived,l=e.bytesReceived,f=e.jitterBufferDelay,p=e.jitterBufferEmittedCount,_=e.clockRate,v=e.channels,m=e.totalSamplesReceived,g=e.concealedSamples,y=e.concealmentEvents,E=e.totalRoundTripTime,S=e.state,b=e.currentRoundTripTime,T=e.audioLevel,C=e.totalAudioEnergy,R=e.totalSamplesDuration,I=e.mimeType,A=e.googDecodingNormal,w=e.fecPacketsReceived,O=e.availableIncomingBitrate,N=e.availableOutgoingBitrate,k=e.bytesSent,D=e.nominated,P=e.id,M=e.writable,L=e.jitter,U=e.candidateType,x=e.ip,V=e.networkType,B=e.port,j=e.protocol,F=e.audioOutputLevel,z=e.requestsReceived,H=e.responsesReceived,G=e.requestsSent,W=e.consentRequestsSent,Y=e.responsesSent,K=e.ssrc,q=e.kind;"inbound-rtp"===i?(r.packetsLost=c,r.packetsReceived=u,d.packets=u,r.bytesReceived=l,d.bytes=l,n.jitterBufferDelay=f/p*1e3,d.jitter_buffer_delay=n.jitterBufferDelay,r.totalSamplesReceived=m,n.concealedSamples=g,r.concealedSamples=g,d.concealed_samples=g,n.concealmentEvents=y,d.fec_packets_received=w,d.jitter=1e3*L,d.ssrc=K,d.total_samples_received=m,m>0&&h._firstFrameStarted["".concat(o,"-audio")]&&(Nk.rtcFirstFrame({event_type:WN.RECV_END,media_type:s?YN.SCREEN_AUDIO:YN.AUDIO,type:KN.SUBSCRIBE,event_session_id:+o,result:!0,start:t.audioStart,stream_user_id:a}),delete h._firstFrameStarted["".concat(o,"-audio")])):"codec"===i?(n.recordSampleRate=_,n.numChannels=v,d.codec=I):"candidate-pair"===i?(d.ice_available_incoming_bitrate=O,d.ice_available_outgoing_bitrate=N,d.ice_bytes_received=l,d.ice_bytes_sent=k,d.ice_nominated=+D,d.ice_pair_id=P,d.ice_pair_rtt=b,d.rtt=1e3*b,d.ice_pair_state=S,d.ice_pair_writable=M,d.recv_ping_requests=z,d.recv_ping_responses=H,d.sent_ping_requests_before_first_response=G,d.sent_ping_requests_total=G+W,d.sent_ping_responses=Y):"candidate-pair"===i&&"succeeded"===S?(n.rtt=1e3*b,n.total_rtt=1e3*E):"track"===i&&"audio"===q?(d.audio_level=-10*Math.log10(Math.pow(T,2)),d.volume=255*T,d.total_audio_energy=C,d.total_samples_duration=R):"ssrc"===i?(d.decoding_normal=A,d.recv_level=F):"local-candidate"===i?(d.local_candidate_type=U,d.local_ip=x,d.local_network_type=V,d.local_port=B,d.protocol=j):"remote-candidate"===i&&(d.remote_candidate_type=U,d.remote_ip=x,d.remote_port=B)})),(l=t.audio).timestamp?(n.audioLossRate=(r.packetsLost-l.packetsLost)/(r.packetsReceived-l.packetsReceived+(r.packetsLost-l.packetsLost)),n.audioLossRate=Number.isNaN(n.audioLossRate)?0:n.audioLossRate,d.packets_lost=Math.round(r.packetsLost-l.packetsLost),d.fraction_lost=n.audioLossRate,d.packets_lost_rate=n.audioLossRate,n.statsInterval=r.timestamp-l.timestamp,n.receivedKBitrate=(r.bytesReceived-l.bytesReceived||0)/n.statsInterval,d.bitrate=Math.round(8e3*n.receivedKBitrate),d.bandwidth=Math.round(d.bitrate/1024),d.interval_concealed_samples=r.concealedSamples-l.concealedSamples,d.interval_samples_received=r.totalSamplesReceived-l.totalSamplesReceived,n.receivedSampleRate=1e3*d.interval_samples_received/n.statsInterval,t.audio=r,this.dataChannelRTT[t.remoteStream.userId]&&(f=this.dataChannelRTT[t.remoteStream.userId]/2,n.e2eDelay=f+n.jitterBufferDelay,d.web_e2e_delay=n.e2eDelay,d.total_rtt_ms=f),t.remoteStream.subAudio&&Nk.rtcMediaStatistics(d,{}),[2,n]):(t.audio=r,[2,n])}}))}))},e.prototype.getRemoteVideoStats=function(e,t){return S(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d,l,f,h=this;return b(this,(function(p){switch(p.label){case 0:return n={},r={timestamp:Date.now()},i=t.remoteStream,o=i.streamId,a=i.userId,s=i.isScreen,c=i.hasVideo,u={media_type:"video",direction:"down",stream_id:o,stream_user_id:a,vid:t.remoteStream.videoMid},e&&this._handler?(t.videoStart||(t.videoStart=Gk(),Nk.rtcFirstFrame({event_type:WN.BEGIN_RECV,media_type:s?YN.SCREEN_VIDEO:YN.VIDEO,type:KN.SUBSCRIBE,start:t.videoStart,event_session_id:+o,stream_user_id:a}),c?this._firstFrameStarted["".concat(o,"-video")]=t.videoStart:Nk.rtcFirstFrame({event_type:WN.RECV_END,media_type:s?YN.SCREEN_VIDEO:YN.VIDEO,type:KN.PUBLISH,start:t.videoStart,event_session_id:+o,result:!1,reason:qN.DISABLE,stream_user_id:a})),[4,this._handler.getStats(e)]):[2,n];case 1:return p.sent().forEach((function(e){var i=e.type,c=e.frameHeight,d=e.frameWidth,l=e.packetsLost,f=e.packetsReceived,p=e.bytesReceived,_=e.framesDecoded,v=e.roundTripTime,m=e.jitterBufferDelay,g=e.jitterBufferEmittedCount,y=e.mimeType,E=e.firCount,S=e.availableIncomingBitrate,b=e.availableOutgoingBitrate,T=e.bytesSent,C=e.nominated,R=e.id,I=e.currentRoundTripTime,A=e.state,w=e.writable,O=e.candidateType,N=e.ip,k=e.networkType,D=e.port,P=e.nackCount,M=e.pliCount,L=e.protocol,U=e.requestsReceived,x=e.responsesReceived,V=e.requestsSent,B=e.consentRequestsSent,j=e.responsesSent,F=e.ssrc;e.totalRoundTripTime;var z=e.jitter,H=e.framesReceived,G=e.keyFramesDecoded,W=e.totalDecodeTime,Y=e.decoderImplementation,K=e.lastPacketReceivedTimestamp;"inbound-rtp"===i?(n.width=d,u.frame_size_width=d,n.height=c,u.frame_size_height=c,r.packetsLost=l,u.packets_lost=l,r.packetsReceived=f,u.packets=f,r.bytesReceived=p,u.bytes=p,r.framesDecoded=_,r.jitterBufferDelay=m/g*1e3,u.jitter_buffer_delay=r.jitterBufferDelay,u.fir_count=E,u.nack_count=P,u.pli_count=M,u.ssrc=F,u.jitter=z,u.frames_received=H,u.frames_decoded=_,u.key_frames_decoded=G,u.total_decode_time=W,u.decoder_implementation=Y,u.last_packet_received_timestamp=K,_>0&&h._firstFrameStarted["".concat(o,"-video")]&&(Nk.rtcFirstFrame({event_type:WN.RECV_END,media_type:s?YN.SCREEN_VIDEO:YN.VIDEO,type:KN.SUBSCRIBE,event_session_id:+o,result:!0,start:t.videoStart,stream_user_id:a}),delete h._firstFrameStarted["".concat(o,"-video")])):"remote-outbound-rtp"===i?(n.rtt=1e3*v,u.rtt=v):"codec"===i?u.codec=y:"candidate-pair"===i?(u.ice_available_incoming_bitrate=S,u.ice_available_outgoing_bitrate=b,u.ice_bytes_received=p,u.ice_bytes_sent=T,u.ice_nominated=+C,u.ice_pair_id=R,u.ice_pair_rtt=I,u.rtt=1e3*I,u.ice_pair_state=A,u.ice_pair_writable=w,u.recv_ping_requests=U,u.recv_ping_responses=x,u.sent_ping_requests_before_first_response=V,u.sent_ping_requests_total=V+B,u.sent_ping_responses=j):"local-candidate"===i?(u.local_candidate_type=O,u.local_ip=N,u.local_network_type=k,u.local_port=D,u.protocol=L):"remote-candidate"===i&&(u.remote_candidate_type=O,u.remote_ip=N,u.remote_port=D)})),d=t.video,l=t.remoteStream,d.timestamp?(n.videoLossRate=(r.packetsLost-d.packetsLost)/(r.packetsReceived-d.packetsReceived+(r.packetsLost-d.packetsLost)),n.videoLossRate=Number.isNaN(n.videoLossRate)?0:n.videoLossRate,u.fraction_lost=n.videoLossRate,u.packets_lost_rate=n.videoLossRate,n.statsInterval=r.timestamp-d.timestamp,n.receivedKBitrate=(r.bytesReceived-d.bytesReceived||0)/n.statsInterval,u.bitrate=Math.round(8e3*n.receivedKBitrate),u.bandwidth=Math.round(u.bitrate/1024),n.decoderOutputFrameRate=1e3*(r.framesDecoded-d.framesDecoded)/n.statsInterval,u.frame_rate_decoded=Math.round(n.decoderOutputFrameRate),u.frame_rate_received=u.frame_rate_decoded,t.video=r,this.dataChannelRTT[t.remoteStream.userId]&&(f=this.dataChannelRTT[t.remoteStream.userId]/2,n.e2eDelay=f+r.jitterBufferDelay,u.web_e2e_delay=n.e2eDelay,u.total_rtt_ms=f),l.subVideo&&(this.processStall(l,u),Nk.rtcMediaStatistics(u,{})),[2,n]):(t.video=r,[2,n])}}))}))},e.prototype.processStall=function(e,t){var n=0,r=0,i=0;e.recordedVideoFrames.forEach((function(e){e.isStall&&(n+=e.stallCount,r+=e.stallDuration),i=e.playTime})),e.recordedVideoFrames.length||(r=2e3),e.recordedVideoFrames=[],t.stall_count=n,t.stall_duration=r,t.play_time=i},e.prototype.setLocalStreamStatsEvtInterval=function(e){var t,n,r=this,i={audio:{},video:{},localStream:e,firstframeReported:!1},o=null===(t=e.audioTrack)||void 0===t?void 0:t.getTrack(),a=null===(n=e.videoTrack)||void 0===n?void 0:n.getTrack();this.getAudioStats(o,i),this.getVideoStats(a,i),this.delLocalStreamStatsEvtInterval(e);this._localStreamStasEvtIntervals[e.streamId]=setInterval((function(){return S(r,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,S(r,void 0,void 0,(function(){var t,n,r,o,a,s;return b(this,(function(c){switch(c.label){case 0:return t=null===(a=e.audioTrack)||void 0===a?void 0:a.getTrack(),n=null===(s=e.videoTrack)||void 0===s?void 0:s.getTrack(),[4,this.getAudioStats(t,i)];case 1:return r=c.sent(),[4,this.getVideoStats(n,i)];case 2:return(o=c.sent()).isScreen=e.isScreen,[2,{audioStats:r,videoStats:o,isScreen:e.isScreen}]}}))}))];case 1:return t=n.sent(),this._client.emit("onLocalStreamStats",t),[2]}}))}))}),2e3)},e.prototype.delLocalStreamStatsEvtInterval=function(e){clearInterval(this._localStreamStasEvtIntervals[e.streamId])},e.prototype.unpublish=function(e){this.delLocalStreamStatsEvtInterval(e),this._firstFrameStarted["".concat(e.streamId,"-audio")]&&(Nk.rtcFirstFrame({event_type:WN.SENT_END,media_type:e.isScreen?YN.SCREEN_AUDIO:YN.AUDIO,type:KN.PUBLISH,start:this._firstFrameStarted["".concat(e.streamId,"-audio")],event_session_id:+e.streamId,result:!1,reason:qN.UNPUBLISH}),delete this._firstFrameStarted["".concat(e.streamId,"-audio")]),this._firstFrameStarted["".concat(e.streamId,"-video")]&&(Nk.rtcFirstFrame({event_type:WN.SENT_END,media_type:e.isScreen?YN.SCREEN_VIDEO:YN.VIDEO,type:KN.PUBLISH,start:this._firstFrameStarted["".concat(e.streamId,"-video")],event_session_id:+e.streamId,result:!1,reason:qN.UNPUBLISH}),delete this._firstFrameStarted["".concat(e.streamId,"-video")])},e.prototype.getAudioStats=function(e,t){return S(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d=this;return b(this,(function(l){switch(l.label){case 0:return n={},r={timestamp:Date.now()},i=t.localStream,o=i.streamId,a=i.audioMid,s=i.isScreen,c={media_type:"audio",direction:"up",stream_id:o,vid:a},e&&this._handler?(t.audioStart||(t.audioStart=Gk(),Nk.rtcFirstFrame({event_type:WN.BEGIN_SEND,media_type:s?YN.SCREEN_AUDIO:YN.AUDIO,type:KN.PUBLISH,start:t.audioStart,event_session_id:+o}),this._firstFrameStarted["".concat(o,"-audio")]=t.audioStart),[4,this._handler.getStats(e)]):[2,n];case 1:return l.sent().forEach((function(e){var i=e.type,a=e.packetsSent,u=e.packetsLost,l=e.bytesSent,f=e.clockRate,h=e.roundTripTime,p=e.channels,_=e.audioLevel,v=e.googRtt,m=e.mimeType,g=e.availableIncomingBitrate,y=e.availableOutgoingBitrate,E=e.bytesReceived,S=e.nominated,b=e.id,T=e.currentRoundTripTime,C=e.state,R=e.writable,I=e.requestsReceived,A=e.responsesReceived,w=e.requestsSent,O=e.consentRequestsSent,N=e.responsesSent,k=e.jitter,D=e.candidateType,P=e.ip,M=e.networkType,L=e.port,U=e.protocol,x=e.nackCount,V=e.retransmittedBytesSent,B=e.retransmittedPacketsSent,j=e.roundTripTimeMeasurements,F=e.audioInputLevel,z=e.ssrc,H=e.totalAudioEnergy,G=e.totalSamplesDuration,W=e.mediaType;"outbound-rtp"===i?(r.packetsSent=a,a>0&&d._firstFrameStarted["".concat(o,"-audio")]&&(Nk.rtcFirstFrame({event_type:WN.SENT_END,media_type:s?YN.SCREEN_AUDIO:YN.AUDIO,type:KN.PUBLISH,event_session_id:+o,result:!0,start:t.audioStart}),delete d._firstFrameStarted["".concat(o,"-audio")]),r.bytesSent=l,c.bytes=l,c.packets=a,c.nack_count=x,c.ssrc=z,c.retransmitted_bytes_sent=V,c.retransmitted_packets_sent=B):"remote-inbound-rtp"===i?(r.packetsLost=u,c.packets_lost=u,c.jitter=1e3*k,n.rtt=1e3*h,c.rtt=n.rtt,c.round_trip_time_measurements=j):"codec"===i?(n.recordSampleRate=f,n.numChannels=p,c.codec=m):"media-source"===i?(c.audio_level=-10*Math.log10(Math.pow(_,2)),c.volume=255*_,c.total_audio_energy=H,c.total_samples_duration=G):"ssrc"===i&&"audio"===W?(c.audio_network_elapse=v,c.send_level=F):"candidate-pair"===i?(c.ice_available_incoming_bitrate=g,c.ice_available_outgoing_bitrate=y,c.ice_bytes_received=E,c.ice_bytes_sent=l,c.ice_nominated=+S,c.ice_pair_id=b,c.ice_pair_rtt=T,c.ice_pair_state=C,c.ice_pair_writable=R,c.recv_ping_requests=I,c.recv_ping_responses=A,c.sent_ping_requests_before_first_response=w,c.sent_ping_requests_total=w+O,c.sent_ping_responses=N):"local-candidate"===i?(c.local_candidate_type=D,c.local_ip=P,c.local_network_type=M,c.local_port=L,c.protocol=U):"remote-candidate"===i&&(c.remote_candidate_type=D,c.remote_ip=P,c.remote_port=L)})),(u=t.audio).timestamp?(n.audioLossRate=(r.packetsLost-u.packetsLost)/(r.packetsSent-u.packetsSent),n.audioLossRate=Number.isNaN(n.audioLossRate)?0:n.audioLossRate,c.fraction_lost=n.audioLossRate,n.statsInterval=r.timestamp-u.timestamp,n.sentKBitrate=(r.bytesSent-u.bytesSent||0)/n.statsInterval,c.bitrate=Math.round(8e3*n.sentKBitrate),c.bandwidth=Math.round(c.bitrate/1024),t.audio=r,Nk.rtcMediaStatistics(c,{}),[2,n]):(t.audio=r,[2,n])}}))}))},e.prototype.getVideoStats=function(e,t){return S(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d=this;return b(this,(function(l){switch(l.label){case 0:return n={},r={timestamp:Date.now()},i=t.localStream,o=i.streamId,a=i.videoMid,s=i.isScreen,c={media_type:"video",direction:"up",stream_id:o,vid:a},e&&this._handler?(t.videoStart||(t.videoStart=Gk(),Nk.rtcFirstFrame({event_type:WN.BEGIN_SEND,media_type:s?YN.SCREEN_VIDEO:YN.VIDEO,type:KN.PUBLISH,start:t.videoStart,event_session_id:+o}),this._firstFrameStarted["".concat(o,"-video")]=t.videoStart),[4,this._handler.getStats(e)]):[2,n];case 1:return l.sent().forEach((function(e){var i=e.type,a=e.framesEncoded,u=e.packetsLost,l=e.bytesSent,f=e.framesSent,h=e.roundTripTime,p=e.mimeType,_=e.totalSamplesReceived,v=e.frameWidth,m=e.frameHeight,g=e.clockRate,y=e.packetsSent,E=e.googActualEncBitrate,S=e.googAvailableReceiveBandwidth,b=e.googAvailableSendBandwidth,T=e.googAvgEncodeMs,C=e.googBucketDelay,R=e.googEncodeUsagePercent,I=e.googFrameRateInput,A=e.availableIncomingBitrate,w=e.availableOutgoingBitrate,O=e.bytesReceived,N=e.nominated,k=e.id,D=e.currentRoundTripTime,P=e.state,M=e.writable,L=e.candidateType,U=e.ip,x=e.networkType,V=e.port,B=e.nackCount,j=e.pliCount,F=e.protocol,z=e.qpSum,H=e.requestsReceived,G=e.responsesReceived,W=e.googRetransmitBitrate,Y=e.requestsSent,K=e.consentRequestsSent,q=e.responsesSent,X=e.ssrc,J=e.googTargetEncBitrate,Z=e.googTransmitBitrate,$=e.googRtt,Q=e.retransmittedPacketsSent,ee=e.encoderImplementation,te=e.jitter;"outbound-rtp"===i?(r.framesEncoded=a,r.bytesSent=l,c.bytes=l,r.framesSent=f,f>0&&d._firstFrameStarted["".concat(o,"-video")]&&(t.firstframeVideoReported=!0,Nk.rtcFirstFrame({event_type:WN.SENT_END,media_type:s?YN.SCREEN_VIDEO:YN.VIDEO,type:KN.PUBLISH,start:t.videoStart,event_session_id:+o,result:!0}),delete d._firstFrameStarted["".concat(o,"-video")]),n.encodedFrameWidth=v,n.encodedFrameHeight=m,c.frame_size_height=m,c.frame_size_width=v,r.packetsSent=y,c.packets=y,c.nack_count=B,c.pli_count=j,c.qp_sum=z,c.ssrc=X,c.retransmitted_packets_sent=Q,c.encoder_implementation=ee):"remote-inbound-rtp"===i?(r.packetsLost=u,n.rtt=1e3*h,c.rtt=n.rtt,c.jitter=te,c.packets_lost=u):"codec"===i?(n.codecType=p,c.codec=p,n.inputFrameRate=g):"track"===i?r.totalSamplesReceived=_:"candidate-pair"===i?(c.ice_available_incoming_bitrate=A,c.ice_available_outgoing_bitrate=w,c.ice_bytes_received=O,c.ice_bytes_sent=l,c.ice_nominated=+N,c.ice_pair_id=k,c.ice_pair_rtt=D,c.ice_pair_state=P,c.ice_pair_writable=M,c.recv_ping_requests=H,c.recv_ping_responses=G,c.sent_ping_requests_before_first_response=Y,c.sent_ping_requests_total=Y+K,c.sent_ping_responses=q):"local-candidate"===i?(c.local_candidate_type=L,c.local_ip=U,c.local_network_type=x,c.local_port=V,c.protocol=F):"remote-candidate"===i?(c.remote_candidate_type=L,c.remote_ip=U,c.remote_port=V):"VideoBwe"===i?(c.actual_enc_bitrate=E,c.available_receive_bandwidth=S,c.available_send_bandwidth=b,c.bucket_delay=C,c.retransmit_bitrate=W,c.target_enc_bitrate=J,c.transmit_bitrate=Z):"ssrc"===i&&(c.video_network_elapse=$,c.avg_encode_ms=T,c.encode_usage_percent=R,c.frame_rate_input=I)})),(u=t.video).timestamp?(n.statsInterval=r.timestamp-u.timestamp,n.encodedFrameCount=r.framesSent-u.framesSent,n.sentKBitrate=(r.bytesSent-u.bytesSent||0)/n.statsInterval,c.bitrate=Math.round(8e3*n.sentKBitrate),c.bandwidth=Math.round(c.bitrate/1024),n.encoderOutputFrameRate=1e3*(r.framesEncoded-u.framesEncoded)/n.statsInterval,c.frame_rate_encoded=Math.round(n.encoderOutputFrameRate),n.sentFrameRate=1e3*(r.framesSent-u.framesSent)/n.statsInterval,c.frame_rate_sent=Math.round(n.sentFrameRate),n.videoLossRate=(r.packetsLost-u.packetsLost)/(r.packetsSent-u.packetsSent),n.videoLossRate=Number.isNaN(n.videoLossRate)?0:n.videoLossRate,c.fraction_lost=n.videoLossRate,t.video=r,Nk.rtcMediaStatistics(c,{}),[2,n]):(t.video=r,[2,n])}}))}))},e.prototype.getDataChannelRTT=function(e){var t,n=this,r=Gk();null===(t=this._client.sendUserMessage(e,"__web__rtc__rtt__"))||void 0===t||t.then((function(t){if("timeout"!==t){var i=Date.now()-r;i>0&&i<2e3&&(n.dataChannelRTT[e]=i)}else clearTimeout(n._rttTimer[e])})).catch((function(){clearTimeout(n._rttTimer[e])})),this._rttTimer[e]=setTimeout((function(){n.getDataChannelRTT(e)}),2e3)},e.prototype.destroy=function(){var e=this;Object.keys(this._localStreamStasEvtIntervals).forEach((function(t){clearInterval(e._localStreamStasEvtIntervals[t])})),Object.keys(this._remoteStreamStasEvtIntervals).forEach((function(t){clearInterval(e._remoteStreamStasEvtIntervals[t])})),Object.keys(this._rttTimer).forEach((function(t){clearTimeout(e._rttTimer[t])})),this._rttTimer={},this.dataChannelRTT={}},e}(),aP=new gC("MediaServerClient",2);!function(e){e.DISCONNECTED="disconnected",e.DISCONNECTING="disconnecting",e.CONNECTED="connected",e.CONNECTING="connecting"}(iP||(iP={}));var sP=function(e){function t(){var t=e.call(this)||this;return t._pubSubLock=new tP("pubSubLock"),t._joinLeaveLock=new tP("joinLeaveLock"),t._state=iP.DISCONNECTED,t._roomAttributes={multiChatMode:!1,bigRoomMode:!1},t}return n(t,e),t.prototype._addHandlerEvents=function(){var e,t=this;null===(e=this._handler)||void 0===e||e.once("disconnect",(function(){aP.print("emit ABNORMAL_DISCONNECTION ice"),t.safeEmit(Ik.ABNORMAL_DISCONNECTION)}))},t.prototype._addSignalEventHandler=function(){var e,t=this;[Rk.ON_ADD_STREAM,Rk.ON_REMOVE_STREAM,Rk.USER_CONNECTION,Rk.USER_DISCONNECTION,Rk.ON_UPDATE_STREAM_ATTRIBUTES,Rk.ON_UPDATE_ROOM_ATTRIBUTES,Rk.ON_PUSH_TRACK,Rk.ON_REMOVE_TRACK,Rk.NODE_CHANGE,Rk.ON_CUSTOM_MESSAGE,Rk.USER_MESSAGE_RECEIVED,Rk.USER_BINARY_MESSAGE_RECEIVED,Rk.POST_PROCESSING_MESSAGE].forEach((function(e){var n;null===(n=t._dataChannelSignal)||void 0===n||n.on(e,(function(n){t.safeEmit(e,n)}))})),null===(e=this._dataChannelSignal)||void 0===e||e.once("close",(function(){aP.print("emit ABNORMAL_DISCONNECTION datachannel"),t.safeEmit(Ik.ABNORMAL_DISCONNECTION)}))},t.prototype._removeSignalEventHandler=function(){var e,t;null===(e=this._dataChannelSignal)||void 0===e||e.removeAllListeners(),null===(t=this._handler)||void 0===t||t.removeAllListeners()},Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._state},set:function(e){this._state!==e&&(this.safeEmit(Ik.ON_CONNECTION_STATE_CHANGE,{prev:this._state,next:e}),this._state=e)},enumerable:!1,configurable:!0}),t.prototype.join=function(e,t,n,r){var i,o;return void 0===t&&(t={}),void 0===n&&(n=!1),S(this,void 0,void 0,(function(){var a,s,c,u,d,l,f,h,p=this;return b(this,(function(_){switch(_.label){case 0:return aP.print("join","Invoke MediaServerClient.join"),this._appId=e.appId,this._token=e.token,this._roomId=e.roomId,this._clientId=e.userInfo.userId,this._businessId=e.userInfo.businessId,this._userInfo=e.userInfo,this._sessionId=eR(),wk.setStats({rtc_session_id:this._sessionId}),this.connectionState=iP.CONNECTING,this._handler&&(this._removeSignalEventHandler(),this._handler.destroy()),t.node?(a=t.node,[3,3]):[3,1];case 1:return Promise.resolve().then((function(){return p.emit("onGetIceConfigHook")})),this._iceConfigRequestManager=new sD,[4,null===(i=this._iceConfigRequestManager)||void 0===i?void 0:i.getAccessNode(this._appId,this._roomId,this._clientId,oD.getDeviceId(),null==t?void 0:t.reason,this._prevICENode)];case 2:if(!(a=_.sent()))throw new nC(eC.ICE_SERVER_WRONG,"get ICE config failed");aP.print("join","get ICE config success"),_.label=3;case 3:this._prevICENode=a,this._handler=new GD,this._addHandlerEvents(),this._statsReport=new oP(this,this._handler),Promise.resolve().then((function(){return p.emit("onEstablishConnectionHook")})),_.label=4;case 4:return _.trys.push([4,6,,7]),[4,this._handler.connect(a)];case 5:return s=_.sent(),aP.print("join","establish peerConnection success"),[3,7];case 6:throw c=_.sent(),this.connectionState=iP.DISCONNECTED,new nC(eC.ESTABLISH_DATACHANNEL_FAILED,"establish dataChannel failed",c);case 7:return this._dataChannelSignal=new Zk({appId:this._appId,roomId:this._roomId,clientId:this._clientId,dataChannel:s}),this._addSignalEventHandler(),[4,null===(o=this._handler)||void 0===o?void 0:o.getDefaultSdp()];case 8:u=_.sent(),d={Authorization:Wk.token2auth(this._appId,this._roomId,this._clientId,this._token),sessionId:this._sessionId,timestamp:Date.now(),controlMessage:r,userAttributes:{extra_info:this._userInfo.extraInfo,role:this._userInfo.role},params:{deviceType:"web",userAgent:window.navigator.userAgent,sdkVersion:aI.VERSION,deviceId:oD.getDeviceId(),appId:this._appId,roomId:this._roomId,userId:this._clientId,businessId:this._businessId},options:{enableUnBundleMode:!0},sdpInfo:u},Promise.resolve().then((function(){return p.emit("onSendingJoinMessageHook")})),_.label=9;case 9:return _.trys.push([9,11,,12]),l=n?"reconnected":"joinRoom",[4,this._dataChannelSignal.sendSignaling(l,d)];case 10:return f=_.sent(),aP.print("join","send join message success"),this._authorization=d.Authorization,this.connectionState=iP.CONNECTED,[2,f];case 11:if(h=_.sent(),this.connectionState=iP.DISCONNECTED,705===(null==h?void 0:h.code))throw new nC(eC.INVALID_TOKEN,(null==h?void 0:h.message)||"Invalid token");if(200!==(null==h?void 0:h.code))throw new nC(eC.JOIN_ROOM_FAILED,(null==h?void 0:h.message)||"Join room failed");return[3,12];case 12:return[2]}}))}))},t.prototype.publish=function(e){var t,n,r,i,o,a,s,c;return S(this,void 0,void 0,(function(){var u,d,l,f,h,p,_,v,m,g,E;return b(this,(function(S){switch(S.label){case 0:aP.print("publish","Invoke MediaServerClient.publish"),u=e.videoTrack,d=e.audioTrack,l=Gk(),f="",h="",p="",S.label=1;case 1:return S.trys.push([1,5,,8]),[4,null===(t=this._handler)||void 0===t?void 0:t.publish(e)];case 2:if(!(_=S.sent()))throw new nC(eC.ADD_TRANSCEIVER_FAILED,"add transceiver failed");return f=_.audioMid,h=_.videoMid,p=_.sdp,e.pubAttributes={localaudio:!!d,localvideo:!!u,videostream:!!(null===(n=null==u?void 0:u.getTrack())||void 0===n?void 0:n.enabled),audiostream:!!(null===(r=null==d?void 0:d.getTrack())||void 0===r?void 0:r.enabled)},v={attributes:y({videoDescriptions:_.videoDescriptions},e.pubAttributes),audio:!0,video:!0,screen:e.isScreen,audioMid:f,videoMid:h,sdpInfo:{msid:e.stream.id,type:_.type,sdp:_.partialSdp,semantics:_.semantics}},[4,null===(i=this._dataChannelSignal)||void 0===i?void 0:i.sendSignaling("publish",v)];case 3:if(200!==(null==(m=S.sent())?void 0:m.code))throw new nC(eC.PUBLISH_FAILED,(null==m?void 0:m.message)||"publish failed");return g=null===(o=null==m?void 0:m.relayMessage)||void 0===o?void 0:o.sdp,[4,null===(a=this._handler)||void 0===a?void 0:a.setAnswerSdp(_.sdp,g,void 0,e,UN.UP)];case 4:return S.sent(),e.streamId=m.streamId,e.videoMid=h,e.audioMid=f,Nk.rtcPublishStat(BN.SUCCESS,jN.W_0,l,FN.UNKNOWN),null===(s=this._statsReport)||void 0===s||s.setLocalStreamStatsEvtInterval(e),[2];case 5:return(E=S.sent())instanceof Error&&Nk.rtcPublishStat(BN.FAIL,jN.W_0,l,E.message),f&&h?[4,null===(c=this._handler)||void 0===c?void 0:c.rollback(p,[f,h])]:[3,7];case 6:S.sent(),S.label=7;case 7:throw E;case 8:return[2]}}))}))},t.prototype.updatePubTrack=function(e){var t,n,r,i,o;return S(this,void 0,void 0,(function(){var a,s,c,u,d,l,f,h,p,_,v,m,g,y,E,S;return b(this,(function(b){switch(b.label){case 0:aP.print("updatePubTrack","Invoke MediaServerClient.updatePubTrack"),a=e.videoTrack,s=e.audioTrack,a&&(null===(t=e.videoTransceiver)||void 0===t||t.sender.replaceTrack(a.getTrack())),s&&(c=s.mixType,u=s.mixedAudioTrack,d=null==s?void 0:s.getTrack(),u&&c!==A.PLAYOUT&&!0===d.enabled&&(d=u),null===(n=e.audioTransceiver)||void 0===n||n.sender.replaceTrack(d)),l={localaudio:!!s,localvideo:!!a,videostream:!!(null===(r=null==a?void 0:a.getTrack())||void 0===r?void 0:r.enabled),audiostream:!!(null===(i=null==s?void 0:s.getTrack())||void 0===i?void 0:i.enabled)},f={};try{for(h=T(Object.entries(l)),p=h.next();!p.done;p=h.next())_=C(p.value,2),v=_[0],(m=_[1])!==Reflect.get(e.pubAttributes,v)&&Reflect.set(f,v,m)}catch(e){E={error:e}}finally{try{p&&!p.done&&(S=h.return)&&S.call(h)}finally{if(E)throw E.error}}return Object.keys(f).length?(e.pubAttributes=l,g={roomId:this._roomId,streamId:e.streamId,attributes:f},[4,null===(o=this._dataChannelSignal)||void 0===o?void 0:o.sendSignaling("updateStreamAttributes",g)]):[2];case 1:if(200!==(null==(y=b.sent())?void 0:y.code))throw new nC(eC.UPDATE_TRACK_FAILED,(null==y?void 0:y.message)||"update track failed");return[2]}}))}))},t.prototype.unpublish=function(e){var t,n,r;return S(this,void 0,void 0,(function(){var i,o;return b(this,(function(a){switch(a.label){case 0:return aP.print("unpublish","Invoke MediaServerClient.unpublish"),i={roomId:this._roomId,initStreamId:e.initStreamId,streamId:e.streamId},[4,null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("unpublish",i)];case 1:if(200!==(null==(o=a.sent())?void 0:o.code))throw new nC(eC.UNPUBLISH_FAILED,(null==o?void 0:o.message)||"unpublish failed");return[4,null===(n=this._handler)||void 0===n?void 0:n.closeMLine([e.videoMid||"",e.audioMid||""])];case 2:return a.sent(),null===(r=this._statsReport)||void 0===r||r.unpublish(e),[2]}}))}))},t.prototype.subscribe=function(e,t,n){var r,i,o,a,s,c,u;return S(this,void 0,void 0,(function(){var d,l,f,h,_,v,m,g,y,E,S,T,C,R,I,A,w,O;return b(this,(function(b){switch(b.label){case 0:aP.print("subscribe","Invoke MediaServerClient.subscribe"),d=!1,l=!1,t===p.VIDEO_ONLY?d=!0:t===p.AUDIO_ONLY?l=!0:t===p.AUDIO_AND_VIDEO?(d=!0,l=!0):t===p.NONE&&(d=!1,l=!1),this._multiChatMode()&&(l=!0),f=Gk(),h=e.audioMid,_=e.videoMid,b.label=1;case 1:return b.trys.push([1,9,,12]),h&&_?[4,null===(r=this._handler)||void 0===r?void 0:r.subscribe(e,{audioMid:h,videoMid:_})]:[3,3];case 2:return v=b.sent(),[3,5];case 3:return[4,null===(i=this._handler)||void 0===i?void 0:i.subscribe(e)];case 4:if(!(v=b.sent()))throw new nC(eC.ADD_TRANSCEIVER_FAILED,"add transceiver failed");h=v.audioMid,_=v.videoMid,b.label=5;case 5:return m={audio:!this._multiChatMode(),video:!0,data:!0,screen:e.isScreen,browser:"chrome-stable",videoMid:_,audioMid:h,sdpInfo:{sdp:null==v?void 0:v.partialSdp,semantics:null==v?void 0:v.semantics,type:null==v?void 0:v.type},streamUserId:e.userId,streamId:e.streamId,config:{enableMediaType:{audio:l,video:d},qualityLayer:{spatialLayer:n.videoIndex,temporalLayer:n.videoIndex}}},[4,null===(o=this._dataChannelSignal)||void 0===o?void 0:o.sendSignaling("subscribe",m)];case 6:if(200!==(null==(g=b.sent())?void 0:g.code))throw new nC(eC.SUBSCRIBE_FAILED,(null==g?void 0:g.message)||"subscribe failed");return this._multiChatMode()||(e.subAudio=l),e.subVideo=d,e.subConfig=n,y=[],E=!this._multiChatMode(),!e._workaround_1_&&y.push(new Promise((function(t,n){var r=setTimeout((function(){return n(new nC(eC.TIME_OUT,"wait video timeout"))}),2e3);e.on("ontrack",(function n(i){"video"===i.mediaType&&(aP.print("remoteStream ".concat(e.userId," received video track")),e.off("ontrack",n),clearTimeout(r),t(0))}))}))),E&&y.push(new Promise((function(t,n){var r=setTimeout((function(){return n(new nC(eC.TIME_OUT,"wait audio timeout"))}),2e3);e.on("ontrack",(function n(i){"audio"===i.mediaType&&(aP.print("remoteStream ".concat(e.userId," received audio track")),e.off("ontrack",n),clearTimeout(r),t(0))}))}))),null===(a=this._handler)||void 0===a||a.on("ontrack",(function(t){e.ontrack(t)})),S=null==g?void 0:g.relayMessage,T=S.audioMid,C=S.videoMid,R=S.sequenceId,I=S.sdp,(O={})[h]=T,O[_]=C,A=O,e.videoMid=C,e.audioMid=T,e.sequenceId=R,e.subMediaType=t,[4,null===(s=this._handler)||void 0===s?void 0:s.setAnswerSdp(null==v?void 0:v.sdp,I,A,e,UN.DOWN)];case 7:return b.sent(),[4,Promise.all(y)];case 8:return b.sent(),e.subAudio=l,e.subVideo=d,Nk.rtcSubscribeStat(zN.SUCCESS,f,HN.UNKNOWN,e.userId),null===(c=this._statsReport)||void 0===c||c.setRemoteStreamStatsEvtInterval(e),[2];case 9:return(w=b.sent())instanceof Error&&Nk.rtcSubscribeStat(zN.FAIL,f,w.message,e.userId),h&&_?[4,null===(u=this._handler)||void 0===u?void 0:u.rollback(null==v?void 0:v.sdp,[h,_])]:[3,11];case 10:b.sent(),b.label=11;case 11:throw w;case 12:return[2]}}))}))},t.prototype.controlMessage=function(e){var t;return S(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return aP.print("controlMessage","Invoke MediaServerClient.controlMessage"),[4,null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("controlMessage",y(y({},e),{roomId:this._roomId}))];case 1:return n.sent(),[2]}}))}))},t.prototype.updateUserAttributes=function(e){var t;return S(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return aP.print("updateUserAttributes","Invoke MediaServerClient.updateUserAttributes"),[4,null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("updateUserAttributes",{roomId:this._roomId,sessionId:this._sessionId,attributes:e})];case 1:return n.sent(),[2]}}))}))},t.prototype.updateSubTrack=function(e,t,n){var r;return S(this,void 0,void 0,(function(){var i,o,a,s;return b(this,(function(c){switch(c.label){case 0:return aP.print("updateSubTrack","Invoke MediaServerClient.updateSubTrack"),i=!1,o=!1,t===p.VIDEO_ONLY?(i=!0,o=!1):t===p.AUDIO_ONLY?(o=!0,i=!1):t===p.AUDIO_AND_VIDEO?(i=!0,o=!0):t===p.NONE&&(i=!1,o=!1),this._multiChatMode()&&(o=!0),a={roomId:this._roomId,streamList:[e.streamId],config:{enableMediaType:{video:i,audio:o},qualityLayer:{spatialLayer:n.videoIndex,temporalLayer:n.videoIndex}}},[4,null===(r=this._dataChannelSignal)||void 0===r?void 0:r.sendSignaling("updateSubscribe",a)];case 1:if(200!==(null==(s=c.sent())?void 0:s.code))throw new nC(eC.UPDATE_TRACK_FAILED,(null==s?void 0:s.message)||"update track failed");return e.subAudio=o,e.subVideo=i,e.subMediaType=t,e.subConfig=n,[2,e]}}))}))},t.prototype.subscribe4pushTrack=function(e,t){var n,r,i,o,a;return S(this,void 0,void 0,(function(){var s,c,u,d,l,f,h,p,_,v,m,g;return b(this,(function(y){switch(y.label){case 0:if(aP.print("subscribe4pushTrack","Invoke MediaServerClient.subscribe4pushTrack"),s=null==t?void 0:t.message,c=s.audioMid,u=s.videoMid,d=s.sequenceId,l=s.sdp,e.subAudio=!0,d<e.sequenceId)return[2];f=e.audioMid,h=e.videoMid,y.label=1;case 1:return y.trys.push([1,8,,11]),f&&h?[4,null===(n=this._handler)||void 0===n?void 0:n.subscribe(e,{audioMid:f,videoMid:h})]:[3,3];case 2:return p=y.sent(),[3,5];case 3:return[4,null===(r=this._handler)||void 0===r?void 0:r.subscribe(e)];case 4:if(!(p=y.sent()))throw new nC(eC.ADD_TRANSCEIVER_FAILED,"add transceiver failed");f=p.audioMid,h=p.videoMid,y.label=5;case 5:return(g={})[f]=c,g[h]=u,_=g,aP.print("onpushtrack midmap",e.streamId,_),e.audioMid=c,e.videoMid=u,e.sequenceId=d,v=[],e.audioTrack||v.push(new Promise((function(t,n){var r=setTimeout((function(){return n(new nC(eC.TIME_OUT,"wait audio timeout"))}),2e3);e.on("ontrack",(function n(i){"audio"===i.mediaType&&(aP.print("remoteStream ".concat(e.userId," received audio track")),e.off("ontrack",n),clearTimeout(r),t(0))}))}))),null===(i=this._handler)||void 0===i||i.on("ontrack",(function(t){e.ontrack(t)})),[4,null===(o=this._handler)||void 0===o?void 0:o.setAnswerSdp(null==p?void 0:p.sdp,l,_,e,UN.DOWN)];case 6:return y.sent(),[4,Promise.all(v)];case 7:return y.sent(),[2];case 8:return m=y.sent(),p?[4,null===(a=this._handler)||void 0===a?void 0:a.rollback(null==p?void 0:p.sdp,[f,h])]:[3,10];case 9:y.sent(),y.label=10;case 10:throw m;case 11:return[2]}}))}))},t.prototype.unsubscribe4removeTrack=function(e){var t;return S(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return aP.print("unsubscribe4removeTrack","Invoke MediaServerClient.unsubscribe4removeTrack"),e.subAudio=!1,e.subVideo?[2]:[4,null===(t=this._handler)||void 0===t?void 0:t.closeMLine([e.videoMid||"",e.audioMid||""])];case 1:return n.sent(),aP.print("clean unsubscribe4removeTrack"),e.clean(),[2]}}))}))},t.prototype.unsubscribe=function(e){var t,n,r;return S(this,void 0,void 0,(function(){var i,o;return b(this,(function(a){switch(a.label){case 0:return aP.print("unsubscribe","Invoke MediaServerClient.unsubscribe"),i={roomId:this._roomId,streamId:e.streamId},aP.print("unsubscribe",e.audioMid,e.videoMid,e.subAudio),[4,null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("unsubscribe",i)];case 1:if(200!==(null==(o=a.sent())?void 0:o.code))throw new nC(eC.UNSUBSCRIBE_FAILED,(null==o?void 0:o.message)||"unsubscribe failed");return e.subVideo=!1,this._multiChatMode()||(e.subAudio=!1),e.subAudio?[3,3]:[4,null===(n=this._handler)||void 0===n?void 0:n.closeMLine([e.videoMid||"",e.audioMid||""])];case 2:a.sent(),aP.print("unsubscribe","clean unsub"),e.clean(),a.label=3;case 3:return null===(r=this._statsReport)||void 0===r||r.unsubscribe(e),[2]}}))}))},t.prototype.handleRemoveStream=function(e){var t;return S(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return aP.print("handleRemoveStream","Invoke MediaServerClient.handleRemoveStream"),e.subVideo=!1,e._workaround_1_||(e.subAudio=!1),e.subAudio?[3,2]:[4,null===(t=this._handler)||void 0===t?void 0:t.closeMLine([e.videoMid||"",e.audioMid||""])];case 1:n.sent(),aP.print("handleRemoveStream","clean remove stream"),e.clean(),n.label=2;case 2:return[2]}}))}))},t.prototype.leave=function(){var e;return S(this,void 0,void 0,(function(){var t,n;return b(this,(function(r){switch(r.label){case 0:return aP.print("leave","Invoke MediaServerClient.leave"),(this.connectionState=iP.CONNECTED)?(this.connectionState=iP.DISCONNECTING,t={Authorization:this._authorization,roomId:this._roomId,sessionId:this._sessionId},[4,this._joinLeaveLock.lock()]):[3,7];case 1:n=r.sent(),r.label=2;case 2:return r.trys.push([2,4,5,6]),[4,null===(e=this._dataChannelSignal)||void 0===e?void 0:e.sendSignaling("leaveRoom",t)];case 3:case 4:return r.sent(),[3,6];case 5:return n(),[7];case 6:return[3,8];case 7:return[2,Promise.resolve()];case 8:return[2]}}))}))},t.prototype.destroy=function(){var e,t,n,r;aP.print("destroy","Invoke MediaServerClient.destroy"),this._token=void 0,this._appId=void 0,this._roomId=void 0,this._clientId=void 0,this._authorization=void 0,this._sessionId=void 0,null===(e=this._handler)||void 0===e||e.destroy(),null===(t=this._dataChannelSignal)||void 0===t||t.destroy(),null===(n=this._iceConfigRequestManager)||void 0===n||n.abort(),this._handler=void 0,this._dataChannelSignal=void 0,this._iceConfigRequestManager=void 0,this._removeSignalEventHandler(),null===(r=this._statsReport)||void 0===r||r.destroy(),this.connectionState=iP.DISCONNECTED,this.emit("INTERRUPT")},t.prototype.sendUserMessage=function(e,t){var n;return null===(n=this._dataChannelSignal)||void 0===n?void 0:n.sendP2PMessage(e,t)},t.prototype.sendRoomMessage=function(e){var t;return null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("customMessage",e)},t.prototype._multiChatMode=function(){var e;return null===(e=this._roomAttributes)||void 0===e?void 0:e.multiChatMode},Object.defineProperty(t.prototype,"handler",{get:function(){return this._handler},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roomAttributes",{set:function(e){this._roomAttributes=e},enumerable:!1,configurable:!0}),E([dP],t.prototype,"join",null),E([uP,cP],t.prototype,"publish",null),E([uP,cP],t.prototype,"updatePubTrack",null),E([uP,cP],t.prototype,"unpublish",null),E([uP,cP],t.prototype,"subscribe",null),E([cP],t.prototype,"controlMessage",null),E([cP],t.prototype,"updateUserAttributes",null),E([uP,cP],t.prototype,"updateSubTrack",null),E([uP,cP],t.prototype,"subscribe4pushTrack",null),E([uP,cP],t.prototype,"unsubscribe4removeTrack",null),E([uP,cP],t.prototype,"unsubscribe",null),E([uP,cP],t.prototype,"handleRemoveStream",null),t}(EC);function cP(e,t,n){var r=n.value;return n.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return S(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return this._handler&&this._state===iP.CONNECTED?[4,r.apply(this,e)]:[3,2];case 1:return n.sent(),[3,3];case 2:throw new nC(eC.NOT_CONNECTED_YET,"error in ".concat(t,": try again after joined"));case 3:return[2]}}))}))},n}function uP(e,t,n){var r=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return S(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return[4,this._pubSubLock.lock()];case 1:t=n.sent(),n.label=2;case 2:return n.trys.push([2,,4,5]),[4,r.apply(this,e)];case 3:return[2,n.sent()];case 4:return t(),[7];case 5:return[2]}}))}))},n}function dP(e,t,n){var r=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return S(this,void 0,void 0,(function(){var t,n=this;return b(this,(function(i){return t=!1,[2,new Promise((function(i,o){return S(n,void 0,void 0,(function(){var n,a;return b(this,(function(s){switch(s.label){case 0:this.on("INTERRUPT",(function(){t=!0,o(new nC(eC.OPERATION_CANCEL,"operation not finish when leave"))})),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.apply(this,e)];case 2:return n=s.sent(),i(n),[3,4];case 3:return a=s.sent(),t||o(a),[3,4];case 4:return[2]}}))}))}))]}))}))},n}var lP=Q,fP=ju,hP=Ds.exports.getWeakData,pP=un,_P=me,vP=pu,mP=lu,gP=ft,yP=ir.set,EP=ir.getterFor,SP=Kl.find,bP=Kl.findIndex,TP=lP([].splice),CP=0,RP=function(e){return e.frozen||(e.frozen=new IP)},IP=function(){this.entries=[]},AP=function(e,t){return SP(e.entries,(function(e){return e[0]===t}))};IP.prototype={get:function(e){var t=AP(this,e);if(t)return t[1]},has:function(e){return!!AP(this,e)},set:function(e,t){var n=AP(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=bP(this.entries,(function(t){return t[0]===e}));return~t&&TP(this.entries,t,1),!!~t}};var wP,OP={getConstructor:function(e,t,n,r){var i=e((function(e,i){vP(e,o),yP(e,{type:t,id:CP++,frozen:void 0}),null!=i&&mP(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=EP(t),s=function(e,t,n){var r=a(e),i=hP(pP(t),!0);return!0===i?RP(r).set(t,n):i[r.id]=n,e};return fP(o,{delete:function(e){var t=a(this);if(!_P(e))return!1;var n=hP(e);return!0===n?RP(t).delete(e):n&&gP(n,t.id)&&delete n[t.id]},has:function(e){var t=a(this);if(!_P(e))return!1;var n=hP(e);return!0===n?RP(t).has(e):n&&gP(n,t.id)}}),fP(o,n?{get:function(e){var t=a(this);if(_P(e)){var n=hP(e);return!0===n?RP(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),i}},NP=P,kP=Q,DP=ju,PP=Ds.exports,MP=Vu,LP=OP,UP=me,xP=tc,VP=ir.enforce,BP=Ln,jP=!NP.ActiveXObject&&"ActiveXObject"in NP,FP=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},zP=MP("WeakMap",FP,LP);if(BP&&jP){wP=LP.getConstructor(FP,"WeakMap",!0),PP.enable();var HP=zP.prototype,GP=kP(HP.delete),WP=kP(HP.has),YP=kP(HP.get),KP=kP(HP.set);DP(HP,{delete:function(e){if(UP(e)&&!xP(e)){var t=VP(this);return t.frozen||(t.frozen=new wP),GP(this,e)||t.frozen.delete(e)}return GP(this,e)},has:function(e){if(UP(e)&&!xP(e)){var t=VP(this);return t.frozen||(t.frozen=new wP),WP(this,e)||t.frozen.has(e)}return WP(this,e)},get:function(e){if(UP(e)&&!xP(e)){var t=VP(this);return t.frozen||(t.frozen=new wP),WP(this,e)?YP(this,e):t.frozen.get(e)}return YP(this,e)},set:function(e,t){if(UP(e)&&!xP(e)){var n=VP(this);n.frozen||(n.frozen=new wP),WP(this,e)?KP(this,e,t):n.frozen.set(e,t)}else KP(this,e,t);return this}})}var qP=un,XP=Zc,JP=Sc,ZP=j,$P=ut,QP=function(e,t,n,r){try{return r?t(qP(n)[0],n[1]):t(n)}catch(t){XP(e,"throw",t)}},eM=Rc,tM=kl,nM=Pr,rM=xs,iM=Kc,oM=jc,aM=P.Array,sM=function(e){var t=$P(e),n=tM(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=JP(i,r>2?arguments[2]:void 0));var a,s,c,u,d,l,f=oM(t),h=0;if(!f||this==aM&&eM(f))for(a=nM(t),s=n?new this(a):aM(a);a>h;h++)l=o?i(t[h],h):t[h],rM(s,h,l);else for(d=(u=iM(t,f)).next,s=n?new this:[];!(c=ZP(d,u)).done;h++)l=o?QP(u,i,[c.value,h],!0):c.value,rM(s,h,l);return s.length=h,s},cM=sM;Si({target:"Array",stat:!0,forced:!yu((function(e){Array.from(e)}))},{from:cM});var uM=new(function(e){function t(){var t=e.call(this)||this;return t._hasVideoPermission=!1,t._hasAudioPermission=!1,t.inited=!1,t.deviceMap=new Map,t._handleDeviceChange=t._handleDeviceChange.bind(t),t.refreshDevices(),t}return n(t,e),t.prototype.refreshDevices=function(){return S(this,void 0,void 0,(function(){var e=this;return b(this,(function(t){switch(t.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:return t.sent().filter((function(e){return""!==e.deviceId})).forEach((function(t){e.deviceMap.set(t.deviceId,{deviceName:t.label,deviceInfo:t,deviceId:t.deviceId,deviceType:t.kind,deviceState:"active"})})),this.inited||this.initListener(),this.inited=!0,[2]}}))}))},t.prototype.initListener=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){return navigator.mediaDevices.addEventListener("devicechange",this._handleDeviceChange),[2]}))}))},t.prototype._handleDeviceChange=function(){return S(this,void 0,void 0,(function(){var e,t,n=this;return b(this,(function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:return e=r.sent(),t=Array.from(this.deviceMap.values()),e.forEach((function(e){var t=n.deviceMap.get(e.deviceId);n.deviceMap.set(e.deviceId,{deviceName:e.label,deviceType:e.kind,deviceId:e.deviceId,deviceInfo:e,deviceState:"active"}),t&&"inactive"!==t.deviceState||n.emit("onMediaDeviceStateChanged",{deviceName:e.label,deviceType:e.kind,deviceId:e.deviceId,deviceInfo:e,deviceState:"active"})})),t.forEach((function(t){e.find((function(e){return e.deviceId===t.deviceId}))||(t.deviceState="inactive",n.deviceMap.delete(t.deviceId),n.emit(O.onMediaDeviceStateChanged,t))})),[2]}}))}))},t.prototype.getVideoPermission=function(){return S(this,void 0,void 0,(function(){var e=this;return b(this,(function(t){switch(t.label){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new nC(eC.NOT_SUPPORTED,"GetUserMedia not supported");if(this.hasVideoPermission)return[2,!0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((function(t){t&&(t.getTracks().forEach((function(e){return e.stop()})),e.hasVideoPermission=!0,e.inited||e.refreshDevices())}))];case 2:case 3:return t.sent(),[3,4];case 4:return[2,this.hasVideoPermission]}}))}))},t.prototype.getAudioPermission=function(){return S(this,void 0,void 0,(function(){var e=this;return b(this,(function(t){switch(t.label){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new nC(eC.NOT_SUPPORTED,"GetUserMedia not supported");if(this.hasAudioPermission)return[2,!0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){t&&(t.getTracks().forEach((function(e){return e.stop()})),e.hasAudioPermission=!0,e.inited||e.refreshDevices())}))];case 2:case 3:return t.sent(),[3,4];case 4:return[2,this.hasAudioPermission]}}))}))},t.prototype.getDevices=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.getAudioPermission()];case 1:case 2:return e.sent(),[3,3];case 3:return e.trys.push([3,5,,6]),[4,this.getVideoPermission()];case 4:case 5:return e.sent(),[3,6];case 6:return[4,this.refreshDevices()];case 7:return e.sent(),[2,Array.from(this.deviceMap.values()).filter((function(e){return"active"===e.deviceState}))]}}))}))},t.prototype.getMicrophones=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return[4,this.refreshDevices()];case 1:return e.sent(),[2,Array.from(this.deviceMap.values()).filter((function(e){return"active"===e.deviceState})).filter((function(e){return"audioinput"===e.deviceType}))]}}))}))},t.prototype.getCameras=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){return this.refreshDevices(),[2,Array.from(this.deviceMap.values()).filter((function(e){return"active"===e.deviceState})).filter((function(e){return"videoinput"===e.deviceType}))]}))}))},t.prototype.getAudioPlayback=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){return this.refreshDevices(),[2,Array.from(this.deviceMap.values()).filter((function(e){return"active"===e.deviceState})).filter((function(e){return"audiooutput"===e.deviceType}))]}))}))},t.prototype.getDeviceById=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return[4,this.getDevices()];case 1:return[2,t.sent().find((function(t){return t.deviceId===e}))]}}))}))},Object.defineProperty(t.prototype,"hasAudioPermission",{get:function(){return this._hasAudioPermission},set:function(e){if(!e)throw new nC(eC.NO_PERMISSION,"Cannot revoke audio permission");this.refreshDevices(),this._hasAudioPermission=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVideoPermission",{get:function(){return this._hasVideoPermission},set:function(e){if(!e)throw new nC(eC.NO_PERMISSION,"Cannot revoke Video permission");this.inited||this.refreshDevices(),this._hasVideoPermission=!0},enumerable:!1,configurable:!0}),t}(EC)),dM=window.AudioContext||window.webkitAudioContext,lM=function(){function e(){}return e.prototype.getAudioContextInstance=function(){return this._audioContextInstance||(this._audioContextInstance=new dM),this._audioContextInstance},e}(),fM=function(){function e(e){var t=hM.getAudioContextInstance();this._track=e;var n=new MediaStream;n.addTrack(e);var r=t.createMediaStreamSource(n),i=t.createAnalyser();r.connect(i),this._analyserNode=i}return e.prototype.getAudioLevel=function(){var e=new Uint8Array(2048);this._analyserNode.getByteTimeDomainData(e);var t=0;return e.forEach((function(e){return t=Math.max(t,Math.abs(e-128))})),t/128*255},e}(),hM=new lM,pM=new gC("VERTC",0),_M=new WeakMap,vM=function(e){function t(t,n){var r=e.call(this)||this;return r._trackId=t,r.mediaType=n,r}return n(t,e),t.prototype.getId=function(){return this._trackId},t}(EC),mM=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i._mediaTrack=t,i._initListeners(),i}return n(t,e),t.prototype.getTrack=function(){return this._mediaTrack},t.prototype.close=function(){var e;return null===(e=this._mediaTrack)||void 0===e?void 0:e.stop()},t.prototype._initListeners=function(){var e=this;this._mediaTrack instanceof MediaStreamTrack&&this._mediaTrack.addEventListener("ended",(function(){Nk.rtcError("track-ended mediaType: ".concat(e._mediaTrack.kind),-1001),e.emit("track-ended",e)}))},t}(vM),gM=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i._mediaTrack=t,i}return n(t,e),t.prototype.getTrack=function(){return this._mediaTrack},t}(vM),yM=function(e){function t(t,n){return e.call(this,t,n,"video")||this}return n(t,e),t.prototype.updateVideoCaptureConfig=function(){var e;return S(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return this.videoCaptureConfig?(pM.print("updateVideoEncoderConfig","update localVideoTrack: ",this.videoCaptureConfig),[4,null===(e=this.getTrack())||void 0===e?void 0:e.applyConstraints(this.videoCaptureConfig)]):[2];case 1:return t.sent(),[2]}}))}))},t}(mM),EM=function(e){function t(t,n){var r=e.call(this,t,n,"audio")||this;return r.mixType=A.PLAYOUT_AND_PUBLISH,r}return n(t,e),t.prototype.getAudioLevel=function(){return this._audioLevelFetcher||(this._audioLevelFetcher=new fM(this.getTrack())),this._audioLevelFetcher.getAudioLevel()},t.prototype.updateAudioCaptureConfig=function(){var e;return S(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return this.audioCaptureConfig?(pM.print("updateAudioCaptureConfig","update localAudioTrack: ",this.audioCaptureConfig),[4,null===(e=this.getTrack())||void 0===e?void 0:e.applyConstraints(this.audioCaptureConfig)]):[2];case 1:return t.sent(),[2]}}))}))},t}(mM),SM=function(e){function t(t,n){return e.call(this,t,n,"video")||this}return n(t,e),t}(gM),bM=function(e){function t(t,n){return e.call(this,t,n,"audio")||this}return n(t,e),t.prototype.getAudioLevel=function(){return this._audioLevelFetcher||(this._audioLevelFetcher=new fM(this.getTrack())),this._audioLevelFetcher.getAudioLevel()},t}(gM),TM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(EM),CM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(yM),RM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(yM),IM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(EM),AM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(yM),wM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(EM);function OM(e){var t;return S(this,void 0,void 0,(function(){var n,r,i,o,a,s;return b(this,(function(c){switch(c.label){case 0:r=(null===(t=null==e?void 0:e.deviceId)||void 0===t?void 0:t.exact)||"default",c.label=1;case 1:return c.trys.push([1,3,,4]),pM.print("createCameraVideoTrack","constraints:",e),Nk.rtcVideoCaptureEvent({event_type:rk.START,media_device_id:r}),i=Gk(),[4,navigator.mediaDevices.getUserMedia({video:e})];case 2:return n=c.sent(),Nk.rtcVideoCaptureEvent({event_type:rk.START_CAPTURE_RESULT,media_device_id:r,reason:ok.SUCCESS,elapse:Gk()-i}),uM.hasVideoPermission=!0,[3,4];case 3:throw o=c.sent(),Nk.rtcVideoCaptureEvent({event_type:rk.RUNNING_FAILED,media_device_id:r,error_code:o.code,reason:JSON.stringify(o)}),new nC(eC.GET_VIDEO_TRACK_FAILED,"throw error from getUserMedia",o);case 4:return a=n.getVideoTracks()[0],_M.set(a,n),(s=new CM(a,Hk())).videoCaptureConfig=e,[2,s]}}))}))}function NM(e){var t;return S(this,void 0,void 0,(function(){var n,r,i,o,a;return b(this,(function(s){switch(s.label){case 0:pM.print("createCameraVideoTrack","constraints:",e),r=(null===(t=null==e?void 0:e.deviceId)||void 0===t?void 0:t.exact)||"default",s.label=1;case 1:return s.trys.push([1,3,,4]),Nk.rtcVideoCaptureEvent({event_type:rk.START,media_device_id:r}),i=Gk(),[4,navigator.mediaDevices.getUserMedia({audio:e})];case 2:return n=s.sent(),Nk.rtcVideoCaptureEvent({event_type:rk.START_CAPTURE_RESULT,media_device_id:r,reason:ok.SUCCESS,elapse:Gk()-i}),uM.hasAudioPermission=!0,[3,4];case 3:throw o=s.sent(),Nk.rtcVideoCaptureEvent({event_type:rk.RUNNING_FAILED,media_device_id:r,error_code:o.code,reason:JSON.stringify(o)}),new nC(eC.GET_AUDIO_TRACK_FAILED,"throw error from getUserMedia",o);case 4:return a=n.getAudioTracks()[0],_M.set(a,n),[2,new TM(a,Hk())]}}))}))}function kM(e){return void 0===e&&(e=!1),S(this,void 0,void 0,(function(){var t,n,r;return b(this,(function(i){switch(i.label){case 0:pM.print("createScreenStream","withAudio:",e),i.label=1;case 1:return i.trys.push([1,3,,4]),Nk.rtcVideoCaptureEvent({event_type:rk.START,media_device_id:"screen"}),n=Gk(),[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:e})];case 2:return t=i.sent(),Nk.rtcVideoCaptureEvent({event_type:rk.START_CAPTURE_RESULT,media_device_id:"screen",reason:ok.SUCCESS,elapse:Gk()-n}),[3,4];case 3:throw r=i.sent(),Nk.rtcVideoCaptureEvent({event_type:rk.RUNNING_FAILED,media_device_id:"screen",error_code:r.code,reason:JSON.stringify(r)}),new nC(eC.GET_SCREEN_TRACK_FAILED,"throw error from getDisplayMedia",r);case 4:return[2,t]}}))}))}var DM=function(){function e(){}return e.getNalunits=function(t){if(t.length-t.position<4)return[];var n=t.position;return 1===t.getInt32(n)||0===t.getInt16(n)&&1===t.getInt8(n+2)?e.getAnnexbNals(t):e.getAvccNals(t)},e.getAnnexbNals=function(t){for(var n=[],r=e.getHeaderPositionAnnexB(t),i=r.pos,o=i;i<t.length-4;){var a=new Uint8Array(t.buffer.slice(i,i+r.headerLength));r.pos===t.position&&t.skip(r.headerLength),o=(r=e.getHeaderPositionAnnexB(t)).pos;var s={header:a,body:new Uint8Array(t.buffer.slice(i+a.byteLength,o)),type:-1};e.analyseNal(s),s.type<=9&&0!==s.type&&n.push(s),t.skip(o-t.position),i=o}return n},e.getAvccNals=function(t){for(var n=[];t.position<t.length-4;){var r=t.getInt32(t.position);if(!(t.length-t.position>=r))break;var i=new Uint8Array(t.buffer.slice(t.position,t.position+4));t.skip(4);var o=new Uint8Array(t.buffer.slice(t.position,t.position+r));t.skip(r);var a={header:i,body:o,type:-1};e.analyseNal(a),a.type<=9&&0!==a.type&&n.push(a)}return n},e.analyseNal=function(e){var t=31&e.body[0];switch(e.type=t,t){case 1:e.ndr=!0;break;case 5:e.idr=!0;break;case 6:e.sei=!0;break;case 7:e.sps=!0;break;case 8:e.pps=!0}},e.getHeaderPositionAnnexB=function(e){for(var t=e.position,n=0,r=e.length;3!==n&&4!==n&&t<r-4;)0===e.getInt16(t)?1===e.getInt16(t+2)?n=4:1===e.getInt8(t+2)?n=3:t++:t++;return t===r-4&&(0===e.getInt16(t)?1===e.getInt16(t+2)?n=4:t=r:(t++,0===e.getInt16(t)&&1===e.getInt8(t)?n=3:t=r)),{pos:t,headerLength:n}},e.getAvcc=function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength+11);n[0]=1,n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=255,n[5]=225;var r=6;return n.set(new Uint8Array([e.byteLength>>>8&255,255&e.byteLength]),r),r+=2,n.set(e,r),n[r+=e.byteLength]=1,r++,n.set(new Uint8Array([t.byteLength>>>8&255,255&t.byteLength]),r),r+=2,n.set(t,r),n},e}();Si({global:!0,forced:!uv},{DataView:Rm.DataView});var PM,MM,LM=function(){function e(e){this._position=0,this._dataview=new DataView(e)}return Object.defineProperty(e.prototype,"length",{get:function(){return this.buffer.byteLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._dataview.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e},enumerable:!1,configurable:!0}),e.prototype.back=function(e){this.position-=e},e.prototype.getUint8=function(e){return this._dataview.getUint8(e)},e.prototype.getInt8=function(e){return this._dataview.getInt8(e)},e.prototype.getInt16=function(e){return this._dataview.getInt16(e)},e.prototype.getUint16=function(e){return this._dataview.getUint16(e)},e.prototype.getUint32=function(e){return this._dataview.getUint32(e)},e.prototype.getInt32=function(e){return this._dataview.getInt32(e)},e.prototype.skip=function(t){for(var n=Math.floor(t/4),r=t%4,i=0;i<n;i++)e.readByte(this,4);r>0&&e.readByte(this,r)},e.readByte=function(e,t,n){var r;switch(t){case 1:r=n?e.getInt8(e.position):e.getUint8(e.position);break;case 2:r=n?e.getInt16(e.position):e.getUint16(e.position);break;case 3:if(n)throw new Error("not supported for readByte 3");r=e.getUint8(e.position)<<16,r|=e.getUint8(e.position+1)<<8,r|=e.getUint8(e.position+2);break;case 4:r=n?e.getInt32(e.position):e.getUint32(e.position);break;case 8:if(n)throw new Error("not supported for readBody 8");r=e.getUint32(e.position)<<32,r|=e.getUint32(e.position+4);break;default:r=""}return e.position+=t,r},e.prototype.readUint8=function(){return e.readByte(this,1)},e.prototype.readUint16=function(){return e.readByte(this,2)},e.prototype.readUint24=function(){return e.readByte(this,3)},e.prototype.readUint32=function(){return e.readByte(this,4)},e.prototype.readUint64=function(){return e.readByte(this,8)},e.prototype.readInt8=function(){return e.readByte(this,1,!0)},e.prototype.readInt16=function(){return e.readByte(this,2,!0)},e.prototype.readInt32=function(){return e.readByte(this,4,!0)},e.prototype.writeUint32=function(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])},e}(),UM=new gC("Stream",0),xM=function(){function e(){this.isScreen=!1,this.seiList=[],this.stream=new MediaStream,this.pubAttributes={localaudio:!1,localvideo:!1,videostream:!1,audiostream:!1}}return Object.defineProperty(e.prototype,"hasPublished",{get:function(){return this.videoTransceiver&&this.audioTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmptyStream",{get:function(){return!this.audioTrack&&!this.videoTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initStreamId",{get:function(){return this.stream.id},enumerable:!1,configurable:!0}),e.prototype.initVideoEncodedTransform=function(){var e=this;if(this.videoTransceiver&&this.videoTransceiver.sender){var t=this.videoTransceiver.sender;if(jD()){var n=t.createEncodedStreams(),r=n.readable,i=n.writable,o=new TransformStream({transform:function(t,n){var r=e.seiList[0];if(r){var i=new Uint8Array(r.content.byteLength+5);i.set([0,0,0,1,6]),i.set(r.content,5);var o=new Uint8Array(i.byteLength+t.data.byteLength);0===r.repeatCount&&e.seiList.splice(0,1),r.repeatCount--,o.set(new Uint8Array(t.data)),o.set(i,t.data.byteLength),t.data=o.buffer,n.enqueue(t)}else n.enqueue(t)}});r.pipeThrough(o).pipeTo(i)}}else UM.print("no sender found when trying to bind encodedTransform")},e.prototype.initAudioEncodedTransform=function(){if(this.audioTransceiver&&this.audioTransceiver.sender){var e=this.audioTransceiver.sender.createEncodedStreams(),t=e.readable,n=e.writable;t.pipeThrough(new TransformStream({transform:function(e,t){t.enqueue(e)}})).pipeTo(n)}else UM.print("no sender found when trying to bind encodedTransform")},e.prototype.clean=function(){this.audioMid=void 0,this.videoMid=void 0,this.videoTransceiver=void 0,this.audioTransceiver=void 0},e.prototype.updateVideoBitrate=function(e){var t,n=null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.maxKbps;if("number"==typeof n&&n&&this.videoTransceiver){var r=this.videoTransceiver.sender,i=r.getParameters();i.encodings&&0!==i.encodings.length||(i.encodings=[{}]),i.encodings[0].maxBitrate=1e3*n,UM.print("updateVideoBitrate","set sendEncodings: ",i),r.setParameters(i)}},e.prototype.switchTrackEnableState=function(e,t){var n;"audio"===e?n=this.audioTrack:"video"===e&&(n=this.videoTrack);var r=null==n?void 0:n.getTrack();return!(!r||(null==r?void 0:r.enabled)===t)&&(r.enabled=t,!0)},e}(),VM=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.userId=t,o.isScreen=r,o.streamId=n,o.hasAudio=i.localaudio,o.hasVideo=i.localvideo,o._attributes=i,o.subVideo=!1,o.subAudio=!1,o._sequenceId=0,o.subMediaType=p.NONE,o.recordedVideoFrames=[],o.subConfig={videoIndex:0},o}return n(t,e),Object.defineProperty(t.prototype,"hasSubscribed",{get:function(){return this.videoTrack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sequenceId",{get:function(){return this._sequenceId||-1},set:function(e){"number"==typeof e&&(this._sequenceId=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this._attributes},set:function(e){this.hasVideo=e.localvideo,this.hasAudio=e.localaudio,this._attributes=e},enumerable:!1,configurable:!0}),t.prototype.initVideoEncodedTransform=function(){var e=this;if(this.videoTransceiver&&this.videoTransceiver.receiver){var t=this.videoTransceiver.receiver.createEncodedStreams(),n=t.readable,r=t.writable;n.pipeThrough(new TransformStream({transform:function(t,n){var r=DM.getNalunits(new LM(t.data)).find((function(e){return e.sei}));r&&e.safeEmit("onSEIMessage",r.body.slice(1)),n.enqueue(t)}})).pipeTo(r)}else UM.print("no receiver found when trying to bind encodedTransform")},t.prototype.initAudioEncodedTransform=function(){if(this.audioTransceiver&&this.audioTransceiver.receiver){var e=this.audioTransceiver.receiver.createEncodedStreams(),t=e.readable,n=e.writable;t.pipeThrough(new TransformStream({transform:function(e,t){t.enqueue(e)}})).pipeTo(n)}else UM.print("no receiver found when trying to bind encodedTransform")},t.prototype.ontrack=function(e){var t,n,r;if((null===(n=null===(t=e.streams)||void 0===t?void 0:t[0])||void 0===n?void 0:n.id)===this.streamId){var i=e.track;"video"===(null==i?void 0:i.kind)?this._setVideoTrack(i):"audio"===(null===(r=e.track)||void 0===r?void 0:r.kind)&&this._setAudioTrack(i),this._setStream(e.streams[0])}this.safeEmit("ontrack",e)},t.prototype.clean=function(){UM.print("clean","exec stream.clean ".concat(this.streamId," ").concat(this.userId)),this.subAudio=!1,this.subVideo=!1,this.audioMid=void 0,this.videoMid=void 0,this.sequenceId=0,this.videoTrack=void 0,this.audioTrack=void 0,this.stream=void 0,this.videoTransceiver=void 0,this.audioTransceiver=void 0,this.recordedVideoFrames=[]},t.prototype._setStream=function(e){var t=this;this.stream=e,e.onaddtrack=function(e){"video"===e.track.kind?t._setVideoTrack(e.track):"audio"===e.track.kind&&t._setAudioTrack(e.track)}},t.prototype._setAudioTrack=function(e){var t,n;(null===(n=null===(t=this.audioTrack)||void 0===t?void 0:t.getTrack())||void 0===n?void 0:n.id)!==(null==e?void 0:e.id)&&(this.audioTrack=new bM(e,Hk()),this.emit("ontrack",this.audioTrack))},t.prototype._setVideoTrack=function(e){var t,n;(null===(n=null===(t=this.videoTrack)||void 0===t?void 0:t.getTrack())||void 0===n?void 0:n.id)!==(null==e?void 0:e.id)&&(this.videoTrack=new SM(e,Hk()),this.emit("ontrack",this.videoTrack))},t}(EC);!function(e){e[e.CHANNEL_PROFILE_COMMUNICATION=0]="CHANNEL_PROFILE_COMMUNICATION",e[e.CHANNEL_PROFILE_LIVE_BROADCASTING=1]="CHANNEL_PROFILE_LIVE_BROADCASTING"}(PM||(PM={})),function(e){e.RESUBSCRIBE="resubscribe",e.STREAM_FAILED="stream_failed",e.SUBSCRIBE_PUSH_TRACK="subscribe_push_track",e.REMOVE_PUSH_TRACK="remove_push_track",e.VIDEO_FIRST_FRAME="video_first_frame",e.ON_USER_MUTE_AUDIO="on_user_mute_audio",e.ON_USER_MUTE_VIDEO="on_user_mute_video",e.ON_USER_START_AUDIO_CAPTURE="on_user_start_audio_capture",e.ON_USER_STOP_AUDIO_CAPTURE="on_user_stop_audio_capture",e.ON_USER_START_VIDEO_CAPTURE="on_user_start_video_capture",e.ON_USER_STOP_VIDEO_CAPTURE="on_user_stop_video_capture",e.ON_SEI_MESSAGED_RECEIVED="on_sei_messaged_received",e.ON_PUBLISH_RESULT="on_publish_result"}(MM||(MM={}));var BM=new gC("Room",1),jM=function(e){function t(t){var n=e.call(this)||this;return n._remoteUsers=new Map,n._remoteStreams=new Map,n._roomConfig=t,n._mediaServerClient=new sP,n._addHandlerEventHandler(),n._isReconnecting=!1,n}return n(t,e),Object.defineProperty(t.prototype,"hasScreenPublished",{get:function(){var e;return null===(e=this._localScreenStream)||void 0===e?void 0:e.hasPublished},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPublished",{get:function(){var e;return null===(e=this._localStream)||void 0===e?void 0:e.hasPublished},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._mediaServerClient.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteUsers",{get:function(){return this._remoteUsers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStreams",{get:function(){return this._remoteStreams},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScreenStream",{get:function(){return this._localScreenStream},enumerable:!1,configurable:!0}),t.prototype._addHandlerEventHandler=function(){var e,t,n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m=this;null===(e=this._mediaServerClient)||void 0===e||e.on(Rk.ON_ADD_STREAM,this._onAddStream.bind(this)),null===(t=this._mediaServerClient)||void 0===t||t.on(Rk.ON_REMOVE_STREAM,this._onRemoveStream.bind(this)),null===(n=this._mediaServerClient)||void 0===n||n.on(Rk.USER_CONNECTION,this._onUserConnection.bind(this)),null===(r=this._mediaServerClient)||void 0===r||r.on(Rk.USER_DISCONNECTION,this._onUserDisconnection.bind(this)),null===(i=this._mediaServerClient)||void 0===i||i.on(Rk.ON_UPDATE_ROOM_ATTRIBUTES,this._onUpdateRoomAttributes.bind(this)),null===(o=this._mediaServerClient)||void 0===o||o.on(Rk.ON_UPDATE_STREAM_ATTRIBUTES,this._onUpdateStreamAttributes.bind(this)),null===(a=this._mediaServerClient)||void 0===a||a.on(Rk.ON_PUSH_TRACK,this._onPushTrack.bind(this)),null===(s=this._mediaServerClient)||void 0===s||s.on(Rk.ON_REMOVE_TRACK,this._onRemoveTrack.bind(this)),null===(c=this._mediaServerClient)||void 0===c||c.on(Rk.NODE_CHANGE,this._nodeChange.bind(this)),null===(u=this._mediaServerClient)||void 0===u||u.on(Rk.ON_CUSTOM_MESSAGE,this._onCustomMessage.bind(this)),null===(d=this._mediaServerClient)||void 0===d||d.on(Rk.USER_MESSAGE_RECEIVED,this._onUserMessageReceived.bind(this)),null===(l=this._mediaServerClient)||void 0===l||l.on(Rk.USER_BINARY_MESSAGE_RECEIVED,this._onUserBinaryMessageReceived.bind(this)),null===(f=this._mediaServerClient)||void 0===f||f.on(Rk.POST_PROCESSING_MESSAGE,this._onPostProcessingMessage.bind(this)),null===(h=this._mediaServerClient)||void 0===h||h.on(Ik.ON_CONNECTION_STATE_CHANGE,this._onConnectionStateChange.bind(this)),null===(p=this._mediaServerClient)||void 0===p||p.on(Ik.ABNORMAL_DISCONNECTION,this._handleAbnormalDisconnection.bind(this)),null===(_=this._mediaServerClient)||void 0===_||_.on("onRemoteStreamStats",(function(e){m.emit("onRemoteStreamStats",e)})),null===(v=this._mediaServerClient)||void 0===v||v.on("onLocalStreamStats",(function(e){m.emit("onLocalStreamStats",e)}))},t.prototype._removeHandlerEventHandler=function(){var e;null===(e=this._mediaServerClient)||void 0===e||e.removeAllListeners()},t.prototype.join=function(e,t,n,r,i){return S(this,void 0,void 0,(function(){var o=this;return b(this,(function(a){return wk.setStats({rtc_app_id:e,room_id:t,user_id:r.userId}),BM.print("join","Invoke join"),[2,new Promise((function(a,s){return S(o,void 0,void 0,(function(){var o;return b(this,(function(c){return this._joinResolveCallback=a,this._joinRejectCallback=s,this._controlMessage=i,this._roomInfo={appId:e,roomId:t,token:n,userInfo:r},o=Gk(),Nk.joinRoom(ZN.BEGIN,o,!1,""),this._join((function(e){Nk.joinRoom(ZN.END,o,!0,e.message),a(e)}),(function(e){Nk.joinRoom(ZN.END,o,!1,e.message),s(e)})),[2]}))}))}))]}))}))},t.prototype._join=function(e,t,n){var r;return void 0===n&&(n=!1),S(this,void 0,void 0,(function(){var i,o,a;return b(this,(function(s){switch(s.label){case 0:i=Gk(),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._mediaServerClient.join(this._roomInfo,{node:this._getAccessNode,reason:this._getAccessFeedback},n,this._controlMessage)];case 2:return o=s.sent(),this._mediaServerClient.roomAttributes=o.roomAttributes,this._joinResolveCallback=void 0,this._joinRejectCallback=void 0,this._getAccessFeedback=void 0,this._getAccessNode=void 0,"function"==typeof e&&e(null===(r=this._roomInfo)||void 0===r?void 0:r.userInfo),this._isReconnecting=!1,Nk.rtcJoinRoom(0,"web","web",Gk()-i),this._onJoinSucc(o),[3,4];case 3:return(a=s.sent()).code!==eC.OPERATION_CANCEL&&"function"==typeof t?[2,t(a)]:[3,4];case 4:return[2]}}))}))},t.prototype.publishScreen=function(e,t,n){return S(this,void 0,void 0,(function(){return b(this,(function(r){switch(r.label){case 0:return BM.print("publishScreen","Invoke publishScreen"),this._localScreenStream||(this._localScreenStream=new xM,this._localScreenStream.isScreen=!0),this._localScreenStream.videoTrack=t,this._localScreenStream.audioTrack=n,this._localScreenStream.videoEncodeConfig=e,this._localScreenStream.hasPublished?[3,2]:[4,this._mediaServerClient.publish(this._localScreenStream)];case 1:return r.sent(),[3,4];case 2:return[4,this.updatePubScreenTrack()];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},t.prototype.updatePubScreenTrack=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return BM.print("updatePubTrack","Invoke updatePubTrack"),this._localScreenStream?[4,this._mediaServerClient.updatePubTrack(this._localScreenStream)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.unpublishScreen=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return BM.print("unpublish","Invoke unpublishScreen"),this._localScreenStream?[4,this._mediaServerClient.unpublish(this._localScreenStream)]:[3,2];case 1:e.sent(),this._localScreenStream.clean(),this._localScreenStream=void 0,e.label=2;case 2:return[2]}}))}))},t.prototype.controlMessage=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return BM.print("controlMessage","Invoke controlMessage"),this._controlMessage=e,[4,this._mediaServerClient.controlMessage(e)];case 1:return t.sent(),"stopped"===e.action&&delete this._controlMessage,[2]}}))}))},t.prototype.updateUserAttributes=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return BM.print("updateUserAttributes","Invoke updateUserAttributes"),e.role&&this._roomInfo&&(this._roomInfo.userInfo.role=e.role),[4,this._mediaServerClient.updateUserAttributes(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.publish=function(e,t,n){return S(this,void 0,void 0,(function(){var r;return b(this,(function(i){switch(i.label){case 0:if(BM.print("publish","Invoke publish"),this._localStream||(this._localStream=new xM),this._localStream.videoTrack=t,this._localStream.audioTrack=n,this._localStream.videoEncodeConfig=e,this._localStream.hasPublished)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this._mediaServerClient.publish(this._localStream)];case 2:return i.sent(),this.emit(MM.ON_PUBLISH_RESULT,{isScreen:!1,state:u.PUBLISH_SUCC}),[3,4];case 3:throw r=i.sent(),this.emit(MM.ON_PUBLISH_RESULT,{isScreen:!1,state:u.PUBLISH_FAIL}),r;case 4:return[3,7];case 5:return[4,this.updatePubTrack()];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},t.prototype.updatePubTrack=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return BM.print("updatePubTrack","Invoke updatePubTrack"),this._localStream?[4,this._mediaServerClient.updatePubTrack(this._localStream)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.unpublish=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return BM.print("unpublish","Invoke unpublish"),this._localStream?[4,this._mediaServerClient.unpublish(this._localStream)]:[3,2];case 1:e.sent(),this._localStream.clean(),this._localStream=void 0,e.label=2;case 2:return[2]}}))}))},t.prototype.subscribe=function(e,t,n){return S(this,void 0,void 0,(function(){return b(this,(function(r){switch(r.label){case 0:return BM.print("subscribe","Invoke subscribe"),e.hasSubscribed&&!(null==e?void 0:e._workaround_1_)?[3,2]:[4,this._mediaServerClient.subscribe(e,t,n)];case 1:return r.sent(),[3,4];case 2:return[4,this.updateSubTrack(e,t,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},t.prototype.updateSubTrack=function(e,t,n){var r,i;return S(this,void 0,void 0,(function(){return b(this,(function(o){return BM.print("updateSubTrack","Invoke updateSubTrack"),e.subMediaType===t&&(null===(r=null==e?void 0:e.subConfig)||void 0===r?void 0:r.videoIndex)===(null==n?void 0:n.videoIndex)?[2,Promise.resolve(e)]:[2,null===(i=this._mediaServerClient)||void 0===i?void 0:i.updateSubTrack(e,t,n)]}))}))},t.prototype.unsubscribe=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return BM.print("unsubscribe","Invoke unsubscribe"),[4,this._mediaServerClient.unsubscribe(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.leave=function(){return S(this,void 0,void 0,(function(){var e,t;return b(this,(function(n){switch(n.label){case 0:BM.print("leave","Invoke leave"),e=Gk(),n.label=1;case 1:return n.trys.push([1,3,4,5]),clearTimeout(this._reconnectTimer),[4,this._mediaServerClient.leave()];case 2:return n.sent(),Nk.rtcLeaveRoom(0,"",Gk()-e),[3,5];case 3:return(t=n.sent())instanceof Error&&Nk.rtcLeaveRoom(-1,t.message,Gk()-e),[3,5];case 4:return this.destroy(),[7];case 5:return[2]}}))}))},t.prototype.destroy=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:return BM.print("destroy","Invoke destroy"),this.connectionState!==iP.CONNECTED?[3,2]:[4,this.leave()];case 1:e.sent(),e.label=2;case 2:return this._destroyAndInitMediaServerClient(),this._roomInfo=void 0,this._remoteUsers=new Map,this._remoteStreams=new Map,this._localStream=void 0,this._localScreenStream=void 0,this._removeHandlerEventHandler(),[2]}}))}))},t.prototype.updateToken=function(e){BM.print("updateToken","Invoke updateToken"),this._roomInfo&&(this._roomInfo.token=e)},t.prototype.muteLocalTrack=function(e,t){var n,r;return S(this,void 0,void 0,(function(){var i,o;return b(this,(function(a){switch(a.label){case 0:return this._localStream&&(null===(n=this._localStream)||void 0===n?void 0:n.hasPublished)?(i=t!==s.MUTE_STATE_OFF,(o=this._localStream.switchTrackEnableState(e,i))?[4,null===(r=this._mediaServerClient)||void 0===r?void 0:r.updatePubTrack(this._localStream)]:[3,2]):[2,!1];case 1:a.sent(),a.label=2;case 2:return[2,o]}}))}))},t.prototype.pauseAllSubscribedStream=function(e){return S(this,void 0,void 0,(function(){var t,n,r,i,o,a,s=this;return b(this,(function(c){t=[];try{for(n=T(this._remoteStreams.values()),r=n.next();!r.done;r=n.next())i=r.value,Array.isArray(i)&&i.forEach((function(n){if(n.hasSubscribed){var r=null;switch(e){case l.RTC_PAUSE_RESUME_CONTROL_AUDIO:n.subMediaType===p.AUDIO_ONLY?r=p.NONE:n.subMediaType===p.AUDIO_AND_VIDEO&&(r=p.VIDEO_ONLY);break;case l.RTC_PAUSE_RESUME_CONTROL_VIDEO:n.subMediaType===p.VIDEO_ONLY?r=p.NONE:n.subMediaType===p.AUDIO_AND_VIDEO&&(r=p.AUDIO_ONLY);break;case l.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO:n.subMediaType!==p.NONE&&(r=p.NONE)}if(null!==r){var i=s.updateSubTrack(n,r,n.subConfig);i&&t.push(i)}}}))}catch(e){o={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(o)throw o.error}}return[2,Promise.all(t)]}))}))},t.prototype.resumeAllSubscribedStream=function(e){return S(this,void 0,void 0,(function(){var t,n,r,i,o,a,s=this;return b(this,(function(c){t=[];try{for(n=T(this._remoteStreams.values()),r=n.next();!r.done;r=n.next())i=r.value,Array.isArray(i)&&i.forEach((function(n){if(n.hasSubscribed){var r=null;switch(e){case l.RTC_PAUSE_RESUME_CONTROL_AUDIO:n.subMediaType===p.NONE?r=p.AUDIO_ONLY:n.subMediaType===p.VIDEO_ONLY&&(r=p.AUDIO_AND_VIDEO);break;case l.RTC_PAUSE_RESUME_CONTROL_VIDEO:n.subMediaType===p.NONE?r=p.VIDEO_ONLY:n.subMediaType===p.AUDIO_ONLY&&(r=p.AUDIO_AND_VIDEO);break;case l.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO:n.subMediaType!==p.AUDIO_AND_VIDEO&&(r=p.AUDIO_AND_VIDEO)}if(null!==r){var i=s.updateSubTrack(n,r,n.subConfig);i&&t.push(i)}}}))}catch(e){o={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(o)throw o.error}}return[2,Promise.all(t)]}))}))},t.prototype.sendUserMessage=function(e,t){var n;return this._remoteUsers.has(e)?null===(n=this._mediaServerClient)||void 0===n?void 0:n.sendUserMessage(e,t):Promise.reject(new nC(eC.USER_NOT_EXIST,"User does not exist"))},t.prototype.sendRoomMessage=function(e,t){var n,r;void 0===t&&(t=!1);var i={clientId:null===(n=this._roomInfo)||void 0===n?void 0:n.userInfo.userId,binary:t,message:""};return i.message=t?Pk.encodeBase64(Wk.ab2str(e)):e,null===(r=this._mediaServerClient)||void 0===r?void 0:r.sendRoomMessage(i)},t.prototype._destroyAndInitMediaServerClient=function(){console.log("_destroyAndInitMediaServerClient()"),this._mediaServerClient&&(this._mediaServerClient.destroy(),this._removeHandlerEventHandler()),this._mediaServerClient=new sP,this._addHandlerEventHandler()},t.prototype._onJoinSucc=function(e){var t,n,r,i,o,a=this,s=[],c=[],u=[],d=[];null===(o=e.clientsDetail)||void 0===o||o.forEach((function(t){if(t.clientId!==e.clientId){var n=a._remoteUsers.get(t.clientId);n?n._stillExist=!0:s.push(t)}}));try{for(var l=T(this._remoteUsers.values()),f=l.next();!f.done;f=l.next()){var h=f.value;h._stillExist?delete h._stillExist:c.push({clientId:h.userId,leaveReason:"Left during disconnection"})}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}e.streams.forEach((function(e){var t=a._findRemoteStream(e.clientId,e.streamId);t?t.stillExist=!0:d.push(e)}));try{for(var p=T(this._remoteStreams.values()),_=p.next();!_.done;_=p.next()){var v=_.value;Array.isArray(v)&&v.forEach((function(e){e.stillExist?delete e.stillExist:u.push({clientId:e.userId,streamId:e.streamId,message:Ck.clientDisconnected})}))}}catch(e){r={error:e}}finally{try{_&&!_.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this._handleSendOrRecvStreamAfterReconnect(),setTimeout((function(){s.forEach((function(e){return a._onUserConnection(e)})),c.forEach((function(e){return a._onUserDisconnection(e)})),u.forEach((function(e){return a._onRemoveStream(e)})),d.forEach((function(e){return a._onAddStream(e)}))}))},t.prototype._handleSendOrRecvStreamAfterReconnect=function(){var e,t,n=this;this._localStream&&(this._localStream.clean(),this._mediaServerClient.publish(this._localStream).catch((function(e){}))),this._localScreenStream&&(this._localScreenStream.clean(),this._mediaServerClient.publish(this._localScreenStream).catch((function(e){})));try{for(var r=T(this._remoteStreams.values()),i=r.next();!i.done;i=r.next()){var o=i.value;Array.isArray(o)&&o.forEach((function(e){return S(n,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:if(!e.hasSubscribed)return[3,4];e.clean(),n.label=1;case 1:return n.trys.push([1,3,,4]),console.log("start resubscribe ".concat(e.userId," with ").concat(e.subMediaType)),[4,this._mediaServerClient.subscribe(e,e.subMediaType,e.subConfig)];case 2:return n.sent(),console.log("success resubscribe ".concat(e.userId," with ").concat(e.subMediaType)),this.safeEmit(MM.RESUBSCRIBE,{stream:e}),[3,4];case 3:return t=n.sent(),console.log("failed resubscribe ".concat(e.userId," with ").concat(e.subMediaType,", error:").concat(t)),e.clean(),[3,4];case 4:return[2]}}))}))}))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype._findRemoteStream=function(e,t){var n=this._remoteStreams.get(e);return Array.isArray(n)?n.find((function(e){return e.streamId===t})):null},t.prototype._onAddStream=function(e,t){var n;if(void 0===t&&(t=!0),e.clientId!==(null===(n=this._roomInfo)||void 0===n?void 0:n.userInfo.userId)){var r=this._findRemoteStream(e.clientId,e.streamId);if(!r){r=new VM(e.clientId,e.streamId,e.screen,e.attributes),this._initStreamListeners(r);var i=this._remoteStreams.get(e.clientId);i?i.push(r):this._remoteStreams.set(e.clientId,[r])}return t&&this.safeEmit(Rk.ON_ADD_STREAM,{stream:r}),!r.isScreen&&r.hasVideo&&this.safeEmit(MM.ON_USER_START_VIDEO_CAPTURE,{userId:r.userId}),!r.isScreen&&r.hasAudio&&this.safeEmit(MM.ON_USER_START_AUDIO_CAPTURE,{userId:r.userId}),r}},t.prototype._onUserConnection=function(e){var t;if(e.clientId!==(null===(t=this._roomInfo)||void 0===t?void 0:t.userInfo.userId)){var n={userId:e.clientId,extraInfo:e.attributes.extra_info};this._remoteUsers.set(e.clientId,y(y({},n),{_stillExist:!0})),this.safeEmit(Rk.USER_CONNECTION,{userInfo:n})}},t.prototype._onUserDisconnection=function(e){var t,n,r=this,i=e.clientId,o=e.leaveReason,a=this._remoteUsers.get(i);this._remoteUsers.delete(i);var s=this._remoteStreams.get(i);Array.isArray(s)&&s.length&&(s.forEach((function(e){r.safeEmit(Rk.ON_REMOVE_STREAM,{stream:e,reason:"Client leave"})})),this._remoteStreams.delete(i)),"userDuplicateLogin"===e.tag&&i===(null===(n=null===(t=this._roomInfo)||void 0===t?void 0:t.userInfo)||void 0===n?void 0:n.userId)&&(a={userId:i},o=e.tag),this.safeEmit(Rk.USER_DISCONNECTION,{userInfo:a,reason:o})},t.prototype._onRemoveStream=function(e){var t,n;if(e.clientId!==(null===(t=this._roomInfo)||void 0===t?void 0:t.userInfo.userId)){var r=this._remoteStreams.get(e.clientId);if(r){var i=r.find((function(t){return t.streamId==e.streamId}));i&&(e.message&&e.message!==Ck.videoMuted?i._workaround_1_=!1:i._workaround_1_=!0),(null==i?void 0:i._workaround_1_)||(r=r.filter((function(t){return t.streamId!==e.streamId})),this._remoteStreams.set(e.clientId,r)),i&&(null===(n=this._mediaServerClient)||void 0===n||n.handleRemoveStream(i),this.safeEmit(Rk.ON_REMOVE_STREAM,{stream:i,reason:e.message}))}}},t.prototype._onUpdateRoomAttributes=function(e){e.roomAttributes&&(this._mediaServerClient.roomAttributes=e.roomAttributes)},t.prototype._onUpdateStreamAttributes=function(e){var t=e.clientId,n=e.streamId,r=e.attributes,i=this._findRemoteStream(t,n);if(i){var o=i.attributes,a=y(y({},o),r);i.attributes=a,a.localaudio!==o.localaudio&&(a.localaudio?this.safeEmit(MM.ON_USER_START_AUDIO_CAPTURE,{userId:t}):this.safeEmit(MM.ON_USER_STOP_AUDIO_CAPTURE,{userId:t})),a.localvideo!==o.localvideo&&(a.localvideo?this.safeEmit(MM.ON_USER_START_VIDEO_CAPTURE,{userId:t}):this.safeEmit(MM.ON_USER_STOP_VIDEO_CAPTURE,{userId:t})),a.audiostream!==o.audiostream&&(a.audiostream?this.safeEmit(MM.ON_USER_MUTE_AUDIO,{userInfo:{userId:t},muteState:s.MUTE_STATE_ON}):this.safeEmit(MM.ON_USER_MUTE_AUDIO,{userInfo:{userId:t},muteState:s.MUTE_STATE_OFF})),a.videostream!==o.videostream&&(a.videostream?this.safeEmit(MM.ON_USER_MUTE_VIDEO,{userInfo:{userId:t},muteState:s.MUTE_STATE_ON}):this.safeEmit(MM.ON_USER_MUTE_VIDEO,{userInfo:{userId:t},muteState:s.MUTE_STATE_OFF}))}},t.prototype._onPushTrack=function(e){var t=this,n=e.clientId,r=e.streamId,i=this._findRemoteStream(n,r);i||(i=this._onAddStream(e,!1)),this._mediaServerClient.subscribe4pushTrack(i,e).then((function(){return t.safeEmit(MM.SUBSCRIBE_PUSH_TRACK,{stream:i})})).catch((function(e){console.log("subscribe push track failed: ".concat(e))}))},t.prototype._onRemoveTrack=function(e){var t,n=this,r=e.clientId,i=e.streamId,o=this._findRemoteStream(r,i);if(o){if(!o.subVideo){var a=null===(t=this._remoteStreams.get(r))||void 0===t?void 0:t.filter((function(e){return e.streamId!==i}));this._remoteStreams.set(r,a||[])}this._mediaServerClient.unsubscribe4removeTrack(o).then((function(){return n.safeEmit(MM.REMOVE_PUSH_TRACK,{stream:o})})).catch((function(e){console.log("remove push track failed: ".concat(e))}))}},t.prototype._nodeChange=function(e){var t=e.nodes,n=e.reason;this._destroyAndInitMediaServerClient(),Array.isArray(t)&&t.length?this._getAccessNode=t[0]:this._getAccessFeedback=n,Nk.rtcNodeChange(0,JSON.stringify(e),JSON.stringify(n)),this._joinResolveCallback&&this._joinRejectCallback?this._join(this._joinResolveCallback,this._joinRejectCallback):this._reconnect()},t.prototype._reconnect=function(){var e=this;this._isReconnecting=!0,Nk.rtcReconnect(1002,CN.PEERCONNECTION_RECONNECTING,this._roomInfo.userInfo.userId,RN.PEERCONNECTION),this._join((function(){Nk.rtcReconnected(IN.PEERCONNECTION_RECONNECTED,AN.PEERCONNECTION)}),(function(t){console.log("Reconnecting error, will reconnect after 3s",t),e._reconnectTimer=setTimeout(e._reconnect.bind(e),3e3)}),!0)},t.prototype._handleAbnormalDisconnection=function(){console.log("on ABNORMAL_DISCONNECTION"),this._destroyAndInitMediaServerClient(),navigator.onLine?this._reconnect():this._reconnectTimer=setTimeout(this._reconnect.bind(this),3e3)},t.prototype._onConnectionStateChange=function(e){var t;if(e.next===iP.DISCONNECTED)t=v.CONNECTION_STATE_DISCONNECTED;else if(e.next===iP.CONNECTED)t=this._isReconnecting?v.CONNECTION_STATE_RECONNECTED:v.CONNECTION_STATE_CONNECTED;else{if(e.next!==iP.CONNECTING)return;t=this._isReconnecting?v.CONNECTION_STATE_RECONNECTING:v.CONNECTION_STATE_CONNECTING}this.safeEmit(Ik.ON_CONNECTION_STATE_CHANGE,{state:t})},t.prototype._initStreamListeners=function(e){var t=this;e.on("ontrack",(function(n){n.track&&"video"===n.track.kind&&t._watchVideoFirstFrameDecoded(n.track,e.userId)})),e.on("onSEIMessage",(function(n){var r;t.emit(MM.ON_SEI_MESSAGED_RECEIVED,{sei:n,remoteStreamKey:{userId:e.userId,roomId:null===(r=t._roomInfo)||void 0===r?void 0:r.roomId,streamIndex:e.isScreen?h.STREAM_INDEX_SCREEN:h.STREAM_INDEX_MAIN}})}))},t.prototype._watchVideoFirstFrameDecoded=function(e,t){return S(this,void 0,void 0,(function(){var n,r,i,o=this;return b(this,(function(a){return n=Date.now(),r=-1,i=function(){return S(o,void 0,void 0,(function(){var i,o,a;return b(this,(function(s){switch(s.label){case 0:return this._mediaServerClient.handler?[4,VD(this._mediaServerClient.handler.pc,e)]:[2];case 1:return i=s.sent(),(o=i.find((function(e){return"inbound-rtp"===e.type})))&&o.framesDecoded>0?(a={userId:t,height:o.frameHeight,width:o.frameWidth},this.emit(MM.VIDEO_FIRST_FRAME,a),clearInterval(r)):Date.now()-n>2e4&&clearInterval(r),[2]}}))}))},r=window.setInterval((function(){i()}),200),[2]}))}))},t.prototype._onCustomMessage=function(e){this.safeEmit(Rk.ON_CUSTOM_MESSAGE,e)},t.prototype._onUserMessageReceived=function(e){var t=e.msg;try{t=JSON.parse(t)}catch(e){}this.safeEmit(Rk.USER_MESSAGE_RECEIVED,{userId:e.from,message:t})},t.prototype._onUserBinaryMessageReceived=function(e){this.safeEmit(Rk.USER_BINARY_MESSAGE_RECEIVED,{userId:e.from,message:e.msg})},t.prototype._onPostProcessingMessage=function(e){var t,n=(null===(t=e.body)||void 0===t?void 0:t.error)||0;this.safeEmit(Rk.POST_PROCESSING_MESSAGE,{code:n,message:["success","parameter error","subscription timeout","ffmpeg error","cdn error"][n]})},t}(EC),FM=function(e,t){return void 0===t&&(t={}),t.id&&(e.id=t.id),t.classList&&t.classList.forEach((function(t){e.classList.add(t)})),t.style&&Object.assign(e.style,t.style),t.attributes&&Object.entries(t.attributes).forEach((function(t){var n=C(t,2),r=n[0],i=n[1];e.setAttribute(r,i)})),e},zM=new gC("Player",0),HM=["play","playing","pause","ended","error","seeking","seeked","waiting","canplay","canplaythrough","durationchange","volumechange","loadedmetadata","loadeddata","loadstart","timeupdate"],GM=function(){function e(){this.videoCache=[],this.audioCache=[]}return e.prototype.getOrCreate=function(e,t){if("video"===e&&this.videoCache.length>0){if(n=this.videoCache.pop())return FM(n,{style:t}),n}else if("audio"===e&&this.audioCache.length>0){var n;if(n=this.audioCache.pop())return FM(n,{style:t}),n}return function(e,t){void 0===t&&(t={});var n=document.createElement(e);return t.id&&(n.id=t.id),t.classList&&t.classList.forEach((function(e){n.classList.add(e)})),t.style&&Object.assign(n.style,t.style),t.attributes&&Object.entries(t.attributes).forEach((function(e){var t=C(e,2),r=t[0],i=t[1];n.setAttribute(r,i)})),n}(e,{style:t})},e.prototype.recycle=function(e){for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);e instanceof HTMLVideoElement?this.videoCache.push(e):this.audioCache.push(e)},e}(),WM=new GM,YM=function(e){function t(t){var n=e.call(this)||this;n.emitVideoEvent=function(e){var t,r,i={type:"video",rawEvent:e,readyState:(null===(t=n._videoDom)||void 0===t?void 0:t.readyState)||0,userId:n.userId,eventName:e.type,currentTime:(null===(r=n._videoDom)||void 0===r?void 0:r.currentTime)||0,isScreen:n.isScreen};n.emit("playback_event",i)};var r=t.renderDom,i=t.userId;n.isPlaying=!1,n.renderMode=void 0!==t.renderMode?t.renderMode:f.RENDER_MODE_FIT;var o="string"==typeof r?document.getElementById(r):r;if(!o)throw new nC(eC.CANT_FIND_DOM,"can't find dom");return n._containerDom=o,n.userId=i,n.isScreen=!!t.isScreen,n._initVideo(),n}return n(t,e),t.prototype._initVideo=function(){this._videoDom||(this._videoDom=WM.getOrCreate("video",{width:"100%",height:"100%",background:"black"}),this._videoDom.id=Hk(),this.renderMode===f.RENDER_MODE_FIT?this._videoDom.style.objectFit="contain":this._videoDom.style.objectFit="cover"),this._initListeners()},t.prototype._initListeners=function(){var e=this;this._videoDom&&HM.forEach((function(t){var n;null===(n=e._videoDom)||void 0===n||n.addEventListener(t,e.emitVideoEvent)}))},t.prototype._removeListeners=function(){var e=this;this._videoDom&&HM.forEach((function(t){var n;null===(n=e._videoDom)||void 0===n||n.removeEventListener(t,e.emitVideoEvent)}))},t.prototype._recordFrame=function(e){var t=this;this.on("playback_event",(function(n){var r;if("timeupdate"===n.eventName){if(void 0===t.__cumulativeTime&&(t.__cumulativeTime=0),0===(null===(r=t._videoDom)||void 0===r?void 0:r.currentTime))return;if(t._videoDom.currentTime>t.__cumulativeTime){var i=Math.floor(1e3*(t._videoDom.currentTime-t.__cumulativeTime)),o=t._videoDom.currentTime-t.__cumulativeTime>.5;e.recordedVideoFrames.push({playTime:t._videoDom.currentTime,isStall:o,stallCount:o?1:0,stallDuration:i%2e3})}t.__cumulativeTime=t._videoDom.currentTime}}))},t.prototype.playVideo=function(e,t){var n;return S(this,void 0,void 0,(function(){var r;return b(this,(function(i){return zM.print("playVideo","play video track: ".concat(this.userId)),this._videoDom||this._initVideo(),zM.print("playVideo","play video by dom: ".concat(null===(n=this._videoDom)||void 0===n?void 0:n.id)),(r=new MediaStream).addTrack(e.getTrack()),this._videoDom.srcObject=r,this._containerDom.appendChild(this._videoDom),this._videoDom.play(),t&&this._recordFrame(t),this.isPlaying=!0,[2]}))}))},t.prototype.updateSrcObject=function(e){var t=e.getTrack();if(t&&this._videoDom){var n=new MediaStream;n.addTrack(t),this._videoDom.srcObject=n}},t.prototype.mirror=function(e){zM.print("mirror","".concat(this.userId," set mirror: ").concat(e)),this._videoDom&&(this._videoDom.style.transform=e?"rotateY(180deg)":"")},t.prototype.stop=function(){var t;e.prototype.removeAllListeners.call(this),zM.print("stop","stop video track: ".concat(this.userId)),this._videoDom&&(this._videoDom.srcObject=null,null===(t=this._containerDom)||void 0===t||t.removeChild(this._videoDom),WM.recycle(this._videoDom),this._removeListeners(),delete this._videoDom),this._videoDom=void 0,this.isPlaying=!1,this.__cumulativeTime=void 0},Object.defineProperty(t.prototype,"domElement",{get:function(){return this._videoDom},enumerable:!1,configurable:!0}),t}(_C.exports.EventEmitter),KM=function(e){function t(t,n){var r=e.call(this)||this;if(r.emitVideoEvent=function(e){var t,n,i={type:"audio",rawEvent:e,readyState:(null===(t=r._audioDom)||void 0===t?void 0:t.readyState)||0,userId:r.userId,eventName:e.type,currentTime:(null===(n=r._audioDom)||void 0===n?void 0:n.currentTime)||0};r.emit("playback_event",i)},r.isPlaying=!1,n){var i=document.getElementById(n);if(!i)throw new nC(eC.CANT_FIND_DOM,"can't find dom");r._containerDom=i}else r._containerDom=document.body;return r.userId=t,r._initAudio(),r}return n(t,e),t.prototype._initAudio=function(){this._audioDom||(this._audioDom=WM.getOrCreate("video",{display:"none"}),this._containerDom.appendChild(this._audioDom)),this._initListeners()},t.prototype._initListeners=function(){var e=this;this._audioDom&&HM.forEach((function(t){var n;null===(n=e._audioDom)||void 0===n||n.addEventListener(t,e.emitVideoEvent)}))},t.prototype._removeListeners=function(){var e=this;this._audioDom&&HM.forEach((function(t){var n;null===(n=e._audioDom)||void 0===n||n.removeEventListener(t,e.emitVideoEvent)}))},t.prototype.playAudio=function(e){return S(this,void 0,void 0,(function(){var t,n,r=this;return b(this,(function(i){return zM.print("playAudio","play audio track: ".concat(this.userId)),this._audioDom||this._initAudio(),(t=new MediaStream).addTrack(e.getTrack()),this._audioDom.srcObject=t,(null==(n=this._audioDom.play())?void 0:n.then)&&n.catch((function(e){var t;Nk.rtcError("autoplay failed, userId: ".concat(r.userId),-1e3),r.emit("playback_event",{type:"audio",rawEvent:e,readyState:r._audioDom.readyState||0,userId:r.userId,eventName:"autoplay-error",currentTime:(null===(t=r._audioDom)||void 0===t?void 0:t.currentTime)||0})})),this.isPlaying=!0,[2]}))}))},t.prototype.manuallyPlay=function(){if(zM.print("Invoke AudioPlayer.manuallyPlay"),!this._audioDom)throw new nC(eC.INVALID_PARAMS,"Player not found");var e=this._audioDom.play();return(null==e?void 0:e.then)?e:Promise.resolve(e)},t.prototype.setPlaybackDevice=function(e){return S(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:return zM.print("setPlaybackDevice","setPlaybackDevice: ".concat(e)),[4,uM.getAudioPlayback()];case 1:return t=n.sent(),t.map((function(e){return e.deviceId})).includes(e)&&this._audioDom&&this._audioDom.setSinkId?[4,this._audioDom.setSinkId(e)]:[2];case 2:return n.sent(),[2]}}))}))},t.prototype.stop=function(){var t;e.prototype.removeAllListeners.call(this),zM.print("stopAudio","stop audio track: ".concat(this.userId)),this._audioDom&&(this._audioDom.srcObject=null,null===(t=this._containerDom)||void 0===t||t.removeChild(this._audioDom),WM.recycle(this._audioDom),this._removeListeners(),delete this._audioDom),this._audioDom=void 0,this.isPlaying=!1},Object.defineProperty(t.prototype,"domElement",{get:function(){return this._audioDom},enumerable:!1,configurable:!0}),t}(_C.exports.EventEmitter),qM={exports:{}};!function(e,t){(function(){var n,r="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",a=16,s=32,c=64,u=128,d=256,l=1/0,f=9007199254740991,h=NaN,p=4294967295,_=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",s],["partialRight",c],["rearg",d]],v="[object Arguments]",m="[object Array]",g="[object Boolean]",y="[object Date]",E="[object Error]",S="[object Function]",b="[object GeneratorFunction]",T="[object Map]",C="[object Number]",R="[object Object]",I="[object Promise]",A="[object RegExp]",w="[object Set]",O="[object String]",N="[object Symbol]",D="[object WeakMap]",P="[object ArrayBuffer]",M="[object DataView]",L="[object Float32Array]",U="[object Float64Array]",x="[object Int8Array]",V="[object Int16Array]",B="[object Int32Array]",j="[object Uint8Array]",F="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",G=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,X=RegExp(K.source),J=RegExp(q.source),Z=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(re.source),oe=/^\s+/,ae=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,_e=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,Ee=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Se=/($^)/,be=/['\n\r\u2028\u2029\\]/g,Te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",Re="a-z\\xdf-\\xf6\\xf8-\\xff",Ie="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",we="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oe="['’]",Ne="[\\ud800-\\udfff]",ke="["+we+"]",De="["+Te+"]",Pe="\\d+",Me="[\\u2700-\\u27bf]",Le="["+Re+"]",Ue="[^\\ud800-\\udfff"+we+Pe+Ce+Re+Ie+"]",xe="\\ud83c[\\udffb-\\udfff]",Ve="[^\\ud800-\\udfff]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+Ie+"]",ze="(?:"+Le+"|"+Ue+")",He="(?:"+Fe+"|"+Ue+")",Ge="(?:['’](?:d|ll|m|re|s|t|ve))?",We="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+De+"|"+xe+")"+"?",Ke="[\\ufe0e\\ufe0f]?",qe=Ke+Ye+("(?:\\u200d(?:"+[Ve,Be,je].join("|")+")"+Ke+Ye+")*"),Xe="(?:"+[Me,Be,je].join("|")+")"+qe,Je="(?:"+[Ve+De+"?",De,Be,je,Ne].join("|")+")",Ze=RegExp(Oe,"g"),$e=RegExp(De,"g"),Qe=RegExp(xe+"(?="+xe+")|"+Je+qe,"g"),et=RegExp([Fe+"?"+Le+"+"+Ge+"(?="+[ke,Fe,"$"].join("|")+")",He+"+"+We+"(?="+[ke,Fe+ze,"$"].join("|")+")",Fe+"?"+ze+"+"+Ge,Fe+"+"+We,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pe,Xe].join("|"),"g"),tt=RegExp("[\\u200d\\ud800-\\udfff"+Te+Ae+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[L]=ot[U]=ot[x]=ot[V]=ot[B]=ot[j]=ot[F]=ot[z]=ot[H]=!0,ot[v]=ot[m]=ot[P]=ot[g]=ot[M]=ot[y]=ot[E]=ot[S]=ot[T]=ot[C]=ot[R]=ot[A]=ot[w]=ot[O]=ot[D]=!1;var at={};at[v]=at[m]=at[P]=at[M]=at[g]=at[y]=at[L]=at[U]=at[x]=at[V]=at[B]=at[T]=at[C]=at[R]=at[A]=at[w]=at[O]=at[N]=at[j]=at[F]=at[z]=at[H]=!0,at[E]=at[S]=at[D]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,ut=parseInt,dt="object"==typeof k&&k&&k.Object===Object&&k,lt="object"==typeof self&&self&&self.Object===Object&&self,ft=dt||lt||Function("return this")(),ht=t&&!t.nodeType&&t,pt=ht&&e&&!e.nodeType&&e,_t=pt&&pt.exports===ht,vt=_t&&dt.process,mt=function(){try{var e=pt&&pt.require&&pt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(e){}}(),gt=mt&&mt.isArrayBuffer,yt=mt&&mt.isDate,Et=mt&&mt.isMap,St=mt&&mt.isRegExp,bt=mt&&mt.isSet,Tt=mt&&mt.isTypedArray;function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Rt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function wt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Nt(e,t){return!!(null==e?0:e.length)&&jt(e,t,0)>-1}function kt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Pt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Mt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Lt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var xt=Gt("length");function Vt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Bt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function jt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,zt,n)}function Ft(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function zt(e){return e!=e}function Ht(e,t){var n=null==e?0:e.length;return n?Kt(e,t)/n:h}function Gt(e){return function(t){return null==t?n:t[e]}}function Wt(e){return function(t){return null==e?n:e[t]}}function Yt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Kt(e,t){for(var r,i=-1,o=e.length;++i<o;){var a=t(e[i]);a!==n&&(r=r===n?a:r+a)}return r}function qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Xt(e){return e?e.slice(0,pn(e)+1).replace(oe,""):e}function Jt(e){return function(t){return e(t)}}function Zt(e,t){return Dt(t,(function(t){return e[t]}))}function $t(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,r=e.length;++n<r&&jt(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var nn=Wt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=Wt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+st[e]}function an(e){return tt.test(e)}function sn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function cn(e,t){return function(n){return e(t(n))}}function un(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var s=e[n];s!==t&&s!==o||(e[n]=o,a[i++]=n)}return a}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return an(e)?function(e){var t=Qe.lastIndex=0;for(;Qe.test(e);)++t;return t}(e):xt(e)}function hn(e){return an(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function pn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var _n=Wt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function e(t){var k=(t=null==t?ft:vn.defaults(ft.Object(),t,vn.pick(ft,rt))).Array,ae=t.Date,Te=t.Error,Ce=t.Function,Re=t.Math,Ie=t.Object,Ae=t.RegExp,we=t.String,Oe=t.TypeError,Ne=k.prototype,ke=Ce.prototype,De=Ie.prototype,Pe=t["__core-js_shared__"],Me=ke.toString,Le=De.hasOwnProperty,Ue=0,xe=function(){var e=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ve=De.toString,Be=Me.call(Ie),je=ft._,Fe=Ae("^"+Me.call(Le).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=_t?t.Buffer:n,He=t.Symbol,Ge=t.Uint8Array,We=ze?ze.allocUnsafe:n,Ye=cn(Ie.getPrototypeOf,Ie),Ke=Ie.create,qe=De.propertyIsEnumerable,Xe=Ne.splice,Je=He?He.isConcatSpreadable:n,Qe=He?He.iterator:n,tt=He?He.toStringTag:n,st=function(){try{var e=ho(Ie,"defineProperty");return e({},"",{}),e}catch(e){}}(),dt=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,lt=ae&&ae.now!==ft.Date.now&&ae.now,ht=t.setTimeout!==ft.setTimeout&&t.setTimeout,pt=Re.ceil,vt=Re.floor,mt=Ie.getOwnPropertySymbols,xt=ze?ze.isBuffer:n,Wt=t.isFinite,mn=Ne.join,gn=cn(Ie.keys,Ie),yn=Re.max,En=Re.min,Sn=ae.now,bn=t.parseInt,Tn=Re.random,Cn=Ne.reverse,Rn=ho(t,"DataView"),In=ho(t,"Map"),An=ho(t,"Promise"),wn=ho(t,"Set"),On=ho(t,"WeakMap"),Nn=ho(Ie,"create"),kn=On&&new On,Dn={},Pn=jo(Rn),Mn=jo(In),Ln=jo(An),Un=jo(wn),xn=jo(On),Vn=He?He.prototype:n,Bn=Vn?Vn.valueOf:n,jn=Vn?Vn.toString:n;function Fn(e){if(rs(e)&&!Ya(e)&&!(e instanceof Wn)){if(e instanceof Gn)return e;if(Le.call(e,"__wrapped__"))return Fo(e)}return new Gn(e)}var zn=function(){function e(){}return function(t){if(!ns(t))return{};if(Ke)return Ke(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Hn(){}function Gn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Jn(e){var t=this.__data__=new Kn(e);this.size=t.size}function Zn(e,t){var n=Ya(e),r=!n&&Wa(e),i=!n&&!r&&Ja(e),o=!n&&!r&&!i&&ls(e),a=n||r||i||o,s=a?qt(e.length,we):[],c=s.length;for(var u in e)!t&&!Le.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Eo(u,c))||s.push(u);return s}function $n(e){var t=e.length;return t?e[Xr(0,t-1)]:n}function Qn(e,t){return xo(Ni(e),cr(t,0,e.length))}function er(e){return xo(Ni(e))}function tr(e,t,r){(r!==n&&!za(e[t],r)||r===n&&!(t in e))&&ar(e,t,r)}function nr(e,t,r){var i=e[t];Le.call(e,t)&&za(i,r)&&(r!==n||t in e)||ar(e,t,r)}function rr(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function ir(e,t,n,r){return hr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&ki(t,Ps(t),e)}function ar(e,t,n){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,i=t.length,o=k(i),a=null==e;++r<i;)o[r]=a?n:ws(e,t[r]);return o}function cr(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function ur(e,t,r,i,o,a){var s,c=1&t,u=2&t,d=4&t;if(r&&(s=o?r(e,i,o,a):r(e)),s!==n)return s;if(!ns(e))return e;var l=Ya(e);if(l){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Ni(e,s)}else{var f=vo(e),h=f==S||f==b;if(Ja(e))return Ci(e,c);if(f==R||f==v||h&&!o){if(s=u||h?{}:go(e),!c)return u?function(e,t){return ki(e,_o(e),t)}(e,function(e,t){return e&&ki(t,Ms(t),e)}(s,e)):function(e,t){return ki(e,po(e),t)}(e,or(s,e))}else{if(!at[f])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case P:return Ri(e);case g:case y:return new r(+e);case M:return function(e,t){var n=t?Ri(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case L:case U:case x:case V:case B:case j:case F:case z:case H:return Ii(e,n);case T:return new r;case C:case O:return new r(e);case A:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case w:return new r;case N:return i=e,Bn?Ie(Bn.call(i)):{}}var i}(e,f,c)}}a||(a=new Jn);var p=a.get(e);if(p)return p;a.set(e,s),cs(e)?e.forEach((function(n){s.add(ur(n,t,r,n,e,a))})):is(e)&&e.forEach((function(n,i){s.set(i,ur(n,t,r,i,e,a))}));var _=l?n:(d?u?oo:io:u?Ms:Ps)(e);return It(_||e,(function(n,i){_&&(n=e[i=n]),nr(s,i,ur(n,t,r,i,e,a))})),s}function dr(e,t,r){var i=r.length;if(null==e)return!i;for(e=Ie(e);i--;){var o=r[i],a=t[o],s=e[o];if(s===n&&!(o in e)||!a(s))return!1}return!0}function lr(e,t,i){if("function"!=typeof e)throw new Oe(r);return Po((function(){e.apply(n,i)}),t)}function fr(e,t,n,r){var i=-1,o=Nt,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=Dt(t,Jt(n))),r?(o=kt,a=!1):t.length>=200&&(o=$t,a=!1,t=new Xn(t));e:for(;++i<s;){var d=e[i],l=null==n?d:n(d);if(d=r||0!==d?d:0,a&&l==l){for(var f=u;f--;)if(t[f]===l)continue e;c.push(d)}else o(t,l,r)||c.push(d)}return c}Fn.templateSettings={escape:Z,evaluate:$,interpolate:Q,variable:"",imports:{_:Fn}},Fn.prototype=Hn.prototype,Fn.prototype.constructor=Fn,Gn.prototype=zn(Hn.prototype),Gn.prototype.constructor=Gn,Wn.prototype=zn(Hn.prototype),Wn.prototype.constructor=Wn,Yn.prototype.clear=function(){this.__data__=Nn?Nn(null):{},this.size=0},Yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yn.prototype.get=function(e){var t=this.__data__;if(Nn){var r=t[e];return r===i?n:r}return Le.call(t,e)?t[e]:n},Yn.prototype.has=function(e){var t=this.__data__;return Nn?t[e]!==n:Le.call(t,e)},Yn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Nn&&t===n?i:t,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},Kn.prototype.get=function(e){var t=this.__data__,r=rr(t,e);return r<0?n:t[r][1]},Kn.prototype.has=function(e){return rr(this.__data__,e)>-1},Kn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(In||Kn),string:new Yn}},qn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return lo(this,e).get(e)},qn.prototype.has=function(e){return lo(this,e).has(e)},qn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Xn.prototype.add=Xn.prototype.push=function(e){return this.__data__.set(e,i),this},Xn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Jn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Jn.prototype.get=function(e){return this.__data__.get(e)},Jn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!In||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var hr=Mi(Sr),pr=Mi(br,!0);function _r(e,t){var n=!0;return hr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function vr(e,t,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(c===n?s==s&&!ds(s):r(s,c)))var c=s,u=a}return u}function mr(e,t){var n=[];return hr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function gr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=yo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?gr(s,t-1,n,r,i):Pt(i,s):r||(i[i.length]=s)}return i}var yr=Li(),Er=Li(!0);function Sr(e,t){return e&&yr(e,t,Ps)}function br(e,t){return e&&Er(e,t,Ps)}function Tr(e,t){return Ot(t,(function(t){return Qa(e[t])}))}function Cr(e,t){for(var r=0,i=(t=Ei(t,e)).length;null!=e&&r<i;)e=e[Bo(t[r++])];return r&&r==i?e:n}function Rr(e,t,n){var r=t(e);return Ya(e)?r:Pt(r,n(e))}function Ir(e){return null==e?e===n?"[object Undefined]":"[object Null]":tt&&tt in Ie(e)?function(e){var t=Le.call(e,tt),r=e[tt];try{e[tt]=n;var i=!0}catch(e){}var o=Ve.call(e);i&&(t?e[tt]=r:delete e[tt]);return o}(e):function(e){return Ve.call(e)}(e)}function Ar(e,t){return e>t}function wr(e,t){return null!=e&&Le.call(e,t)}function Or(e,t){return null!=e&&t in Ie(e)}function Nr(e,t,r){for(var i=r?kt:Nt,o=e[0].length,a=e.length,s=a,c=k(a),u=1/0,d=[];s--;){var l=e[s];s&&t&&(l=Dt(l,Jt(t))),u=En(l.length,u),c[s]=!r&&(t||o>=120&&l.length>=120)?new Xn(s&&l):n}l=e[0];var f=-1,h=c[0];e:for(;++f<o&&d.length<u;){var p=l[f],_=t?t(p):p;if(p=r||0!==p?p:0,!(h?$t(h,_):i(d,_,r))){for(s=a;--s;){var v=c[s];if(!(v?$t(v,_):i(e[s],_,r)))continue e}h&&h.push(_),d.push(p)}}return d}function kr(e,t,r){var i=null==(e=Oo(e,t=Ei(t,e)))?e:e[Bo($o(t))];return null==i?n:Ct(i,e,r)}function Dr(e){return rs(e)&&Ir(e)==v}function Pr(e,t,r,i,o){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!=e&&t!=t:function(e,t,r,i,o,a){var s=Ya(e),c=Ya(t),u=s?m:vo(e),d=c?m:vo(t),l=(u=u==v?R:u)==R,f=(d=d==v?R:d)==R,h=u==d;if(h&&Ja(e)){if(!Ja(t))return!1;s=!0,l=!1}if(h&&!l)return a||(a=new Jn),s||ls(e)?no(e,t,r,i,o,a):function(e,t,n,r,i,o,a){switch(n){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!o(new Ge(e),new Ge(t)));case g:case y:case C:return za(+e,+t);case E:return e.name==t.name&&e.message==t.message;case A:case O:return e==t+"";case T:var s=sn;case w:var c=1&r;if(s||(s=dn),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var d=no(s(e),s(t),r,i,o,a);return a.delete(e),d;case N:if(Bn)return Bn.call(e)==Bn.call(t)}return!1}(e,t,u,r,i,o,a);if(!(1&r)){var p=l&&Le.call(e,"__wrapped__"),_=f&&Le.call(t,"__wrapped__");if(p||_){var S=p?e.value():e,b=_?t.value():t;return a||(a=new Jn),o(S,b,r,i,a)}}if(!h)return!1;return a||(a=new Jn),function(e,t,r,i,o,a){var s=1&r,c=io(e),u=c.length,d=io(t).length;if(u!=d&&!s)return!1;var l=u;for(;l--;){var f=c[l];if(!(s?f in t:Le.call(t,f)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var _=!0;a.set(e,t),a.set(t,e);var v=s;for(;++l<u;){var m=e[f=c[l]],g=t[f];if(i)var y=s?i(g,m,f,t,e,a):i(m,g,f,e,t,a);if(!(y===n?m===g||o(m,g,r,i,a):y)){_=!1;break}v||(v="constructor"==f)}if(_&&!v){var E=e.constructor,S=t.constructor;E==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof E&&E instanceof E&&"function"==typeof S&&S instanceof S||(_=!1)}return a.delete(e),a.delete(t),_}(e,t,r,i,o,a)}(e,t,r,i,Pr,o))}function Mr(e,t,r,i){var o=r.length,a=o,s=!i;if(null==e)return!a;for(e=Ie(e);o--;){var c=r[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=r[o])[0],d=e[u],l=c[1];if(s&&c[2]){if(d===n&&!(u in e))return!1}else{var f=new Jn;if(i)var h=i(d,l,u,e,t,f);if(!(h===n?Pr(l,d,3,i,f):h))return!1}}return!0}function Lr(e){return!(!ns(e)||(t=e,xe&&xe in t))&&(Qa(e)?Fe:me).test(jo(e));var t}function Ur(e){return"function"==typeof e?e:null==e?oc:"object"==typeof e?Ya(e)?zr(e[0],e[1]):Fr(e):pc(e)}function xr(e){if(!Ro(e))return gn(e);var t=[];for(var n in Ie(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Vr(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Ie(e))t.push(n);return t}(e);var t=Ro(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function Br(e,t){return e<t}function jr(e,t){var n=-1,r=qa(e)?k(e.length):[];return hr(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function Fr(e){var t=fo(e);return 1==t.length&&t[0][2]?Ao(t[0][0],t[0][1]):function(n){return n===e||Mr(n,e,t)}}function zr(e,t){return bo(e)&&Io(t)?Ao(Bo(e),t):function(r){var i=ws(r,e);return i===n&&i===t?Os(r,e):Pr(t,i,3)}}function Hr(e,t,r,i,o){e!==t&&yr(t,(function(a,s){if(o||(o=new Jn),ns(a))!function(e,t,r,i,o,a,s){var c=ko(e,r),u=ko(t,r),d=s.get(u);if(d)return void tr(e,r,d);var l=a?a(c,u,r+"",e,t,s):n,f=l===n;if(f){var h=Ya(u),p=!h&&Ja(u),_=!h&&!p&&ls(u);l=u,h||p||_?Ya(c)?l=c:Xa(c)?l=Ni(c):p?(f=!1,l=Ci(u,!0)):_?(f=!1,l=Ii(u,!0)):l=[]:as(u)||Wa(u)?(l=c,Wa(c)?l=ys(c):ns(c)&&!Qa(c)||(l=go(u))):f=!1}f&&(s.set(u,l),o(l,u,i,a,s),s.delete(u));tr(e,r,l)}(e,t,s,r,Hr,i,o);else{var c=i?i(ko(e,s),a,s+"",e,t,o):n;c===n&&(c=a),tr(e,s,c)}}),Ms)}function Gr(e,t){var r=e.length;if(r)return Eo(t+=t<0?r:0,r)?e[t]:n}function Wr(e,t,n){t=t.length?Dt(t,(function(e){return Ya(e)?function(t){return Cr(t,1===e.length?e[0]:e)}:e})):[oc];var r=-1;t=Dt(t,Jt(uo()));var i=jr(e,(function(e,n,i){var o=Dt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var c=Ai(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Yr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Cr(e,a);n(s,a)&&ei(o,Ei(a,e),s)}return o}function Kr(e,t,n,r){var i=r?Ft:jt,o=-1,a=t.length,s=e;for(e===t&&(t=Ni(t)),n&&(s=Dt(e,Jt(n)));++o<a;)for(var c=0,u=t[o],d=n?n(u):u;(c=i(s,d,c,r))>-1;)s!==e&&Xe.call(s,c,1),Xe.call(e,c,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Eo(i)?Xe.call(e,i,1):fi(e,i)}}return e}function Xr(e,t){return e+vt(Tn()*(t-e+1))}function Jr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Zr(e,t){return Mo(wo(e,t,oc),e+"")}function $r(e){return $n(zs(e))}function Qr(e,t){var n=zs(e);return xo(n,cr(t,0,n.length))}function ei(e,t,r,i){if(!ns(e))return e;for(var o=-1,a=(t=Ei(t,e)).length,s=a-1,c=e;null!=c&&++o<a;){var u=Bo(t[o]),d=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var l=c[u];(d=i?i(l,u,c):n)===n&&(d=ns(l)?l:Eo(t[o+1])?[]:{})}nr(c,u,d),c=c[u]}return e}var ti=kn?function(e,t){return kn.set(e,t),e}:oc,ni=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:nc(t),writable:!0})}:oc;function ri(e){return xo(zs(e))}function ii(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=k(i);++r<i;)o[r]=e[r+t];return o}function oi(e,t){var n;return hr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ds(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,oc,n)}function si(e,t,r,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=r(t))!=t,c=null===t,u=ds(t),d=t===n;o<a;){var l=vt((o+a)/2),f=r(e[l]),h=f!==n,p=null===f,_=f==f,v=ds(f);if(s)var m=i||_;else m=d?_&&(i||h):c?_&&h&&(i||!p):u?_&&h&&!p&&(i||!v):!p&&!v&&(i?f<=t:f<t);m?o=l+1:a=l}return En(a,4294967294)}function ci(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!za(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function ui(e){return"number"==typeof e?e:ds(e)?h:+e}function di(e){if("string"==typeof e)return e;if(Ya(e))return Dt(e,di)+"";if(ds(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=Nt,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=kt;else if(o>=200){var u=t?null:Ji(e);if(u)return dn(u);a=!1,i=$t,c=new Xn}else c=t?[]:s;e:for(;++r<o;){var d=e[r],l=t?t(d):d;if(d=n||0!==d?d:0,a&&l==l){for(var f=c.length;f--;)if(c[f]===l)continue e;t&&c.push(l),s.push(d)}else i(c,l,n)||(c!==s&&c.push(l),s.push(d))}return s}function fi(e,t){return null==(e=Oo(e,t=Ei(t,e)))||delete e[Bo($o(t))]}function hi(e,t,n,r){return ei(e,t,n(Cr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function _i(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Mt(t,(function(e,t){return t.func.apply(t.thisArg,Pt([e],t.args))}),n)}function vi(e,t,n){var r=e.length;if(r<2)return r?li(e[0]):[];for(var i=-1,o=k(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=fr(o[i]||a,e[s],t,n));return li(gr(o,1),t,n)}function mi(e,t,r){for(var i=-1,o=e.length,a=t.length,s={};++i<o;){var c=i<a?t[i]:n;r(s,e[i],c)}return s}function gi(e){return Xa(e)?e:[]}function yi(e){return"function"==typeof e?e:oc}function Ei(e,t){return Ya(e)?e:bo(e,t)?[e]:Vo(Es(e))}var Si=Zr;function bi(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:ii(e,t,r)}var Ti=dt||function(e){return ft.clearTimeout(e)};function Ci(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function Ri(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function Ii(e,t){var n=t?Ri(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ai(e,t){if(e!==t){var r=e!==n,i=null===e,o=e==e,a=ds(e),s=t!==n,c=null===t,u=t==t,d=ds(t);if(!c&&!d&&!a&&e>t||a&&s&&u&&!c&&!d||i&&s&&u||!r&&u||!o)return 1;if(!i&&!a&&!d&&e<t||d&&r&&o&&!i&&!a||c&&r&&o||!s&&o||!u)return-1}return 0}function wi(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,c=t.length,u=yn(o-a,0),d=k(c+u),l=!r;++s<c;)d[s]=t[s];for(;++i<a;)(l||i<o)&&(d[n[i]]=e[i]);for(;u--;)d[s++]=e[i++];return d}function Oi(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,c=-1,u=t.length,d=yn(o-s,0),l=k(d+u),f=!r;++i<d;)l[i]=e[i];for(var h=i;++c<u;)l[h+c]=t[c];for(;++a<s;)(f||i<o)&&(l[h+n[a]]=e[i++]);return l}function Ni(e,t){var n=-1,r=e.length;for(t||(t=k(r));++n<r;)t[n]=e[n];return t}function ki(e,t,r,i){var o=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var c=t[a],u=i?i(r[c],e[c],c,r,e):n;u===n&&(u=e[c]),o?ar(r,c,u):nr(r,c,u)}return r}function Di(e,t){return function(n,r){var i=Ya(n)?Rt:ir,o=t?t():{};return i(n,e,uo(r,2),o)}}function Pi(e){return Zr((function(t,r){var i=-1,o=r.length,a=o>1?r[o-1]:n,s=o>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(o--,a):n,s&&So(r[0],r[1],s)&&(a=o<3?n:a,o=1),t=Ie(t);++i<o;){var c=r[i];c&&e(t,c,i,a)}return t}))}function Mi(e,t){return function(n,r){if(null==n)return n;if(!qa(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Ie(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Li(e){return function(t,n,r){for(var i=-1,o=Ie(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}function Ui(e){return function(t){var r=an(t=Es(t))?hn(t):n,i=r?r[0]:t.charAt(0),o=r?bi(r,1).join(""):t.slice(1);return i[e]()+o}}function xi(e){return function(t){return Mt(Qs(Ws(t).replace(Ze,"")),e,"")}}function Vi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=zn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Bi(e){return function(t,r,i){var o=Ie(t);if(!qa(t)){var a=uo(r,3);t=Ps(t),r=function(e){return a(o[e],e,o)}}var s=e(t,r,i);return s>-1?o[a?t[s]:s]:n}}function ji(e){return ro((function(t){var i=t.length,o=i,a=Gn.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new Oe(r);if(a&&!c&&"wrapper"==so(s))var c=new Gn([],!0)}for(o=c?o:i;++o<i;){var u=so(s=t[o]),d="wrapper"==u?ao(s):n;c=d&&To(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?c[so(d[0])].apply(c,d[3]):1==s.length&&To(s)?c[u]():c.thru(s)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&Ya(n))return c.plant(n).value();for(var r=0,o=i?t[r].apply(this,e):n;++r<i;)o=t[r].call(this,o);return o}}))}function Fi(e,t,r,i,o,a,s,c,d,l){var f=t&u,h=1&t,p=2&t,_=24&t,v=512&t,m=p?n:Vi(e);return function n(){for(var u=arguments.length,g=k(u),y=u;y--;)g[y]=arguments[y];if(_)var E=co(n),S=tn(g,E);if(i&&(g=wi(g,i,o,_)),a&&(g=Oi(g,a,s,_)),u-=S,_&&u<l){var b=un(g,E);return qi(e,t,Fi,n.placeholder,r,g,b,c,d,l-u)}var T=h?r:this,C=p?T[e]:e;return u=g.length,c?g=No(g,c):v&&u>1&&g.reverse(),f&&d<u&&(g.length=d),this&&this!==ft&&this instanceof n&&(C=m||Vi(C)),C.apply(T,g)}}function zi(e,t){return function(n,r){return function(e,t,n,r){return Sr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Hi(e,t){return function(r,i){var o;if(r===n&&i===n)return t;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=di(r),i=di(i)):(r=ui(r),i=ui(i)),o=e(r,i)}return o}}function Gi(e){return ro((function(t){return t=Dt(t,Jt(uo())),Zr((function(n){var r=this;return e(t,(function(e){return Ct(e,r,n)}))}))}))}function Wi(e,t){var r=(t=t===n?" ":di(t)).length;if(r<2)return r?Jr(t,e):t;var i=Jr(t,pt(e/fn(t)));return an(t)?bi(hn(i),0,e).join(""):i.slice(0,e)}function Yi(e){return function(t,r,i){return i&&"number"!=typeof i&&So(t,r,i)&&(r=i=n),t=_s(t),r===n?(r=t,t=0):r=_s(r),function(e,t,n,r){for(var i=-1,o=yn(pt((t-e)/(n||1)),0),a=k(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,r,i=i===n?t<r?1:-1:_s(i),e)}}function Ki(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function qi(e,t,r,i,o,a,u,d,l,f){var h=8&t;t|=h?s:c,4&(t&=~(h?c:s))||(t&=-4);var p=[e,t,o,h?a:n,h?u:n,h?n:a,h?n:u,d,l,f],_=r.apply(n,p);return To(e)&&Do(_,p),_.placeholder=i,Lo(_,e,t)}function Xi(e){var t=Re[e];return function(e,n){if(e=gs(e),(n=null==n?0:En(vs(n),292))&&Wt(e)){var r=(Es(e)+"e").split("e");return+((r=(Es(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ji=wn&&1/dn(new wn([,-0]))[1]==l?function(e){return new wn(e)}:dc;function Zi(e){return function(t){var n=vo(t);return n==T?sn(t):n==w?ln(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function $i(e,t,i,l,f,h,p,_){var v=2&t;if(!v&&"function"!=typeof e)throw new Oe(r);var m=l?l.length:0;if(m||(t&=-97,l=f=n),p=p===n?p:yn(vs(p),0),_=_===n?_:vs(_),m-=f?f.length:0,t&c){var g=l,y=f;l=f=n}var E=v?n:ao(e),S=[e,t,i,l,f,g,y,h,p,_];if(E&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,s=r==u&&8==n||r==u&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?wi(l,c,t[4]):c,e[4]=l?un(e[3],o):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Oi(l,c,t[6]):c,e[6]=l?un(e[5],o):t[6]);(c=t[7])&&(e[7]=c);r&u&&(e[8]=null==e[8]?t[8]:En(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(S,E),e=S[0],t=S[1],i=S[2],l=S[3],f=S[4],!(_=S[9]=S[9]===n?v?0:e.length:yn(S[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||t==a?function(e,t,r){var i=Vi(e);return function o(){for(var a=arguments.length,s=k(a),c=a,u=co(o);c--;)s[c]=arguments[c];var d=a<3&&s[0]!==u&&s[a-1]!==u?[]:un(s,u);return(a-=d.length)<r?qi(e,t,Fi,o.placeholder,n,s,d,n,n,r-a):Ct(this&&this!==ft&&this instanceof o?i:e,this,s)}}(e,t,_):t!=s&&33!=t||f.length?Fi.apply(n,S):function(e,t,n,r){var i=1&t,o=Vi(e);return function t(){for(var a=-1,s=arguments.length,c=-1,u=r.length,d=k(u+s),l=this&&this!==ft&&this instanceof t?o:e;++c<u;)d[c]=r[c];for(;s--;)d[c++]=arguments[++a];return Ct(l,i?n:this,d)}}(e,t,i,l);else var b=function(e,t,n){var r=1&t,i=Vi(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,i);return Lo((E?ti:Do)(b,S),e,t)}function Qi(e,t,r,i){return e===n||za(e,De[r])&&!Le.call(i,r)?t:e}function eo(e,t,r,i,o,a){return ns(e)&&ns(t)&&(a.set(t,e),Hr(e,t,n,eo,a),a.delete(t)),e}function to(e){return as(e)?n:e}function no(e,t,r,i,o,a){var s=1&r,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var d=a.get(e),l=a.get(t);if(d&&l)return d==t&&l==e;var f=-1,h=!0,p=2&r?new Xn:n;for(a.set(e,t),a.set(t,e);++f<c;){var _=e[f],v=t[f];if(i)var m=s?i(v,_,f,t,e,a):i(_,v,f,e,t,a);if(m!==n){if(m)continue;h=!1;break}if(p){if(!Ut(t,(function(e,t){if(!$t(p,t)&&(_===e||o(_,e,r,i,a)))return p.push(t)}))){h=!1;break}}else if(_!==v&&!o(_,v,r,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function ro(e){return Mo(wo(e,n,Ko),e+"")}function io(e){return Rr(e,Ps,po)}function oo(e){return Rr(e,Ms,_o)}var ao=kn?function(e){return kn.get(e)}:dc;function so(e){for(var t=e.name+"",n=Dn[t],r=Le.call(Dn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function co(e){return(Le.call(Fn,"placeholder")?Fn:e).placeholder}function uo(){var e=Fn.iteratee||ac;return e=e===ac?Ur:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function fo(e){for(var t=Ps(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Io(i)]}return t}function ho(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Lr(r)?r:n}var po=mt?function(e){return null==e?[]:(e=Ie(e),Ot(mt(e),(function(t){return qe.call(e,t)})))}:mc,_o=mt?function(e){for(var t=[];e;)Pt(t,po(e)),e=Ye(e);return t}:mc,vo=Ir;function mo(e,t,n){for(var r=-1,i=(t=Ei(t,e)).length,o=!1;++r<i;){var a=Bo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ts(i)&&Eo(a,i)&&(Ya(e)||Wa(e))}function go(e){return"function"!=typeof e.constructor||Ro(e)?{}:zn(Ye(e))}function yo(e){return Ya(e)||Wa(e)||!!(Je&&e&&e[Je])}function Eo(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function So(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?qa(n)&&Eo(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function bo(e,t){if(Ya(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ds(e))||(te.test(e)||!ee.test(e)||null!=t&&e in Ie(t))}function To(e){var t=so(e),n=Fn[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(Rn&&vo(new Rn(new ArrayBuffer(1)))!=M||In&&vo(new In)!=T||An&&vo(An.resolve())!=I||wn&&vo(new wn)!=w||On&&vo(new On)!=D)&&(vo=function(e){var t=Ir(e),r=t==R?e.constructor:n,i=r?jo(r):"";if(i)switch(i){case Pn:return M;case Mn:return T;case Ln:return I;case Un:return w;case xn:return D}return t});var Co=Pe?Qa:gc;function Ro(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function Io(e){return e==e&&!ns(e)}function Ao(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==n||e in Ie(r)))}}function wo(e,t,r){return t=yn(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=yn(n.length-t,0),a=k(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=k(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),Ct(e,this,s)}}function Oo(e,t){return t.length<2?e:Cr(e,ii(t,0,-1))}function No(e,t){for(var r=e.length,i=En(t.length,r),o=Ni(e);i--;){var a=t[i];e[i]=Eo(a,r)?o[a]:n}return e}function ko(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Do=Uo(ti),Po=ht||function(e,t){return ft.setTimeout(e,t)},Mo=Uo(ni);function Lo(e,t,n){var r=t+"";return Mo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return It(_,(function(n){var r="_."+n[0];t&n[1]&&!Nt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Uo(e){var t=0,r=0;return function(){var i=Sn(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function xo(e,t){var r=-1,i=e.length,o=i-1;for(t=t===n?i:t;++r<t;){var a=Xr(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=t,e}var Vo=function(e){var t=Ua(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function Bo(e){if("string"==typeof e||ds(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function jo(e){if(null!=e){try{return Me.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fo(e){if(e instanceof Wn)return e.clone();var t=new Gn(e.__wrapped__,e.__chain__);return t.__actions__=Ni(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zo=Zr((function(e,t){return Xa(e)?fr(e,gr(t,1,Xa,!0)):[]})),Ho=Zr((function(e,t){var r=$o(t);return Xa(r)&&(r=n),Xa(e)?fr(e,gr(t,1,Xa,!0),uo(r,2)):[]})),Go=Zr((function(e,t){var r=$o(t);return Xa(r)&&(r=n),Xa(e)?fr(e,gr(t,1,Xa,!0),n,r):[]}));function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=yn(r+i,0)),Bt(e,uo(t,3),i)}function Yo(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==n&&(o=vs(r),o=r<0?yn(i+o,0):En(o,i-1)),Bt(e,uo(t,3),o,!0)}function Ko(e){return(null==e?0:e.length)?gr(e,1):[]}function qo(e){return e&&e.length?e[0]:n}var Xo=Zr((function(e){var t=Dt(e,gi);return t.length&&t[0]===e[0]?Nr(t):[]})),Jo=Zr((function(e){var t=$o(e),r=Dt(e,gi);return t===$o(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Nr(r,uo(t,2)):[]})),Zo=Zr((function(e){var t=$o(e),r=Dt(e,gi);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Nr(r,n,t):[]}));function $o(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Qo=Zr(ea);function ea(e,t){return e&&e.length&&t&&t.length?Kr(e,t):e}var ta=ro((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return qr(e,Dt(t,(function(e){return Eo(e,n)?+e:e})).sort(Ai)),r}));function na(e){return null==e?e:Cn.call(e)}var ra=Zr((function(e){return li(gr(e,1,Xa,!0))})),ia=Zr((function(e){var t=$o(e);return Xa(t)&&(t=n),li(gr(e,1,Xa,!0),uo(t,2))})),oa=Zr((function(e){var t=$o(e);return t="function"==typeof t?t:n,li(gr(e,1,Xa,!0),n,t)}));function aa(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(Xa(e))return t=yn(e.length,t),!0})),qt(t,(function(t){return Dt(e,Gt(t))}))}function sa(e,t){if(!e||!e.length)return[];var r=aa(e);return null==t?r:Dt(r,(function(e){return Ct(t,n,e)}))}var ca=Zr((function(e,t){return Xa(e)?fr(e,t):[]})),ua=Zr((function(e){return vi(Ot(e,Xa))})),da=Zr((function(e){var t=$o(e);return Xa(t)&&(t=n),vi(Ot(e,Xa),uo(t,2))})),la=Zr((function(e){var t=$o(e);return t="function"==typeof t?t:n,vi(Ot(e,Xa),n,t)})),fa=Zr(aa);var ha=Zr((function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,sa(e,r)}));function pa(e){var t=Fn(e);return t.__chain__=!0,t}function _a(e,t){return t(e)}var va=ro((function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,o=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Wn&&Eo(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:_a,args:[o],thisArg:n}),new Gn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(o)}));var ma=Di((function(e,t,n){Le.call(e,n)?++e[n]:ar(e,n,1)}));var ga=Bi(Wo),ya=Bi(Yo);function Ea(e,t){return(Ya(e)?It:hr)(e,uo(t,3))}function Sa(e,t){return(Ya(e)?At:pr)(e,uo(t,3))}var ba=Di((function(e,t,n){Le.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Ta=Zr((function(e,t,n){var r=-1,i="function"==typeof t,o=qa(e)?k(e.length):[];return hr(e,(function(e){o[++r]=i?Ct(t,e,n):kr(e,t,n)})),o})),Ca=Di((function(e,t,n){ar(e,n,t)}));function Ra(e,t){return(Ya(e)?Dt:jr)(e,uo(t,3))}var Ia=Di((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Aa=Zr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&So(e,t[0],t[1])?t=[]:n>2&&So(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,gr(t,1),[])})),wa=lt||function(){return ft.Date.now()};function Oa(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,$i(e,u,n,n,n,n,t)}function Na(e,t){var i;if("function"!=typeof t)throw new Oe(r);return e=vs(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var ka=Zr((function(e,t,n){var r=1;if(n.length){var i=un(n,co(ka));r|=s}return $i(e,r,t,n,i)})),Da=Zr((function(e,t,n){var r=3;if(n.length){var i=un(n,co(Da));r|=s}return $i(t,r,e,n,i)}));function Pa(e,t,i){var o,a,s,c,u,d,l=0,f=!1,h=!1,p=!0;if("function"!=typeof e)throw new Oe(r);function _(t){var r=o,i=a;return o=a=n,l=t,c=e.apply(i,r)}function v(e){return l=e,u=Po(g,t),f?_(e):c}function m(e){var r=e-d;return d===n||r>=t||r<0||h&&e-l>=s}function g(){var e=wa();if(m(e))return y(e);u=Po(g,function(e){var n=t-(e-d);return h?En(n,s-(e-l)):n}(e))}function y(e){return u=n,p&&o?_(e):(o=a=n,c)}function E(){var e=wa(),r=m(e);if(o=arguments,a=this,d=e,r){if(u===n)return v(d);if(h)return Ti(u),u=Po(g,t),_(d)}return u===n&&(u=Po(g,t)),c}return t=gs(t)||0,ns(i)&&(f=!!i.leading,s=(h="maxWait"in i)?yn(gs(i.maxWait)||0,t):s,p="trailing"in i?!!i.trailing:p),E.cancel=function(){u!==n&&Ti(u),l=0,o=d=a=u=n},E.flush=function(){return u===n?c:y(wa())},E}var Ma=Zr((function(e,t){return lr(e,1,t)})),La=Zr((function(e,t,n){return lr(e,gs(t)||0,n)}));function Ua(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ua.Cache||qn),n}function xa(e){if("function"!=typeof e)throw new Oe(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ua.Cache=qn;var Va=Si((function(e,t){var n=(t=1==t.length&&Ya(t[0])?Dt(t[0],Jt(uo())):Dt(gr(t,1),Jt(uo()))).length;return Zr((function(r){for(var i=-1,o=En(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Ct(e,this,r)}))})),Ba=Zr((function(e,t){var r=un(t,co(Ba));return $i(e,s,n,t,r)})),ja=Zr((function(e,t){var r=un(t,co(ja));return $i(e,c,n,t,r)})),Fa=ro((function(e,t){return $i(e,d,n,n,n,t)}));function za(e,t){return e===t||e!=e&&t!=t}var Ha=Ki(Ar),Ga=Ki((function(e,t){return e>=t})),Wa=Dr(function(){return arguments}())?Dr:function(e){return rs(e)&&Le.call(e,"callee")&&!qe.call(e,"callee")},Ya=k.isArray,Ka=gt?Jt(gt):function(e){return rs(e)&&Ir(e)==P};function qa(e){return null!=e&&ts(e.length)&&!Qa(e)}function Xa(e){return rs(e)&&qa(e)}var Ja=xt||gc,Za=yt?Jt(yt):function(e){return rs(e)&&Ir(e)==y};function $a(e){if(!rs(e))return!1;var t=Ir(e);return t==E||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Qa(e){if(!ns(e))return!1;var t=Ir(e);return t==S||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==vs(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=Et?Jt(Et):function(e){return rs(e)&&vo(e)==T};function os(e){return"number"==typeof e||rs(e)&&Ir(e)==C}function as(e){if(!rs(e)||Ir(e)!=R)return!1;var t=Ye(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Me.call(n)==Be}var ss=St?Jt(St):function(e){return rs(e)&&Ir(e)==A};var cs=bt?Jt(bt):function(e){return rs(e)&&vo(e)==w};function us(e){return"string"==typeof e||!Ya(e)&&rs(e)&&Ir(e)==O}function ds(e){return"symbol"==typeof e||rs(e)&&Ir(e)==N}var ls=Tt?Jt(Tt):function(e){return rs(e)&&ts(e.length)&&!!ot[Ir(e)]};var fs=Ki(Br),hs=Ki((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(qa(e))return us(e)?hn(e):Ni(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=vo(e);return(t==T?sn:t==w?dn:zs)(e)}function _s(e){return e?(e=gs(e))===l||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vs(e){var t=_s(e),n=t%1;return t==t?n?t-n:t:0}function ms(e){return e?cr(vs(e),0,p):0}function gs(e){if("number"==typeof e)return e;if(ds(e))return h;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=ve.test(e);return n||ge.test(e)?ut(e.slice(2),n?2:8):_e.test(e)?h:+e}function ys(e){return ki(e,Ms(e))}function Es(e){return null==e?"":di(e)}var Ss=Pi((function(e,t){if(Ro(t)||qa(t))ki(t,Ps(t),e);else for(var n in t)Le.call(t,n)&&nr(e,n,t[n])})),bs=Pi((function(e,t){ki(t,Ms(t),e)})),Ts=Pi((function(e,t,n,r){ki(t,Ms(t),e,r)})),Cs=Pi((function(e,t,n,r){ki(t,Ps(t),e,r)})),Rs=ro(sr);var Is=Zr((function(e,t){e=Ie(e);var r=-1,i=t.length,o=i>2?t[2]:n;for(o&&So(t[0],t[1],o)&&(i=1);++r<i;)for(var a=t[r],s=Ms(a),c=-1,u=s.length;++c<u;){var d=s[c],l=e[d];(l===n||za(l,De[d])&&!Le.call(e,d))&&(e[d]=a[d])}return e})),As=Zr((function(e){return e.push(n,eo),Ct(Us,n,e)}));function ws(e,t,r){var i=null==e?n:Cr(e,t);return i===n?r:i}function Os(e,t){return null!=e&&mo(e,t,Or)}var Ns=zi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ve.call(t)),e[t]=n}),nc(oc)),ks=zi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ve.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Ds=Zr(kr);function Ps(e){return qa(e)?Zn(e):xr(e)}function Ms(e){return qa(e)?Zn(e,!0):Vr(e)}var Ls=Pi((function(e,t,n){Hr(e,t,n)})),Us=Pi((function(e,t,n,r){Hr(e,t,n,r)})),xs=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,(function(t){return t=Ei(t,e),r||(r=t.length>1),t})),ki(e,oo(e),n),r&&(n=ur(n,7,to));for(var i=t.length;i--;)fi(n,t[i]);return n}));var Vs=ro((function(e,t){return null==e?{}:function(e,t){return Yr(e,t,(function(t,n){return Os(e,n)}))}(e,t)}));function Bs(e,t){if(null==e)return{};var n=Dt(oo(e),(function(e){return[e]}));return t=uo(t),Yr(e,n,(function(e,n){return t(e,n[0])}))}var js=Zi(Ps),Fs=Zi(Ms);function zs(e){return null==e?[]:Zt(e,Ps(e))}var Hs=xi((function(e,t,n){return t=t.toLowerCase(),e+(n?Gs(t):t)}));function Gs(e){return $s(Es(e).toLowerCase())}function Ws(e){return(e=Es(e))&&e.replace(Ee,nn).replace($e,"")}var Ys=xi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ks=xi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),qs=Ui("toLowerCase");var Xs=xi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Js=xi((function(e,t,n){return e+(n?" ":"")+$s(t)}));var Zs=xi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$s=Ui("toUpperCase");function Qs(e,t,r){return e=Es(e),(t=r?n:t)===n?function(e){return nt.test(e)}(e)?function(e){return e.match(et)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var ec=Zr((function(e,t){try{return Ct(e,n,t)}catch(e){return $a(e)?e:new Te(e)}})),tc=ro((function(e,t){return It(t,(function(t){t=Bo(t),ar(e,t,ka(e[t],e))})),e}));function nc(e){return function(){return e}}var rc=ji(),ic=ji(!0);function oc(e){return e}function ac(e){return Ur("function"==typeof e?e:ur(e,1))}var sc=Zr((function(e,t){return function(n){return kr(n,e,t)}})),cc=Zr((function(e,t){return function(n){return kr(e,n,t)}}));function uc(e,t,n){var r=Ps(t),i=Tr(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Tr(t,Ps(t)));var o=!(ns(n)&&"chain"in n&&!n.chain),a=Qa(e);return It(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ni(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Pt([this.value()],arguments))})})),e}function dc(){}var lc=Gi(Dt),fc=Gi(wt),hc=Gi(Ut);function pc(e){return bo(e)?Gt(Bo(e)):function(e){return function(t){return Cr(t,e)}}(e)}var _c=Yi(),vc=Yi(!0);function mc(){return[]}function gc(){return!1}var yc=Hi((function(e,t){return e+t}),0),Ec=Xi("ceil"),Sc=Hi((function(e,t){return e/t}),1),bc=Xi("floor");var Tc,Cc=Hi((function(e,t){return e*t}),1),Rc=Xi("round"),Ic=Hi((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Oe(r);return e=vs(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Oa,Fn.assign=Ss,Fn.assignIn=bs,Fn.assignInWith=Ts,Fn.assignWith=Cs,Fn.at=Rs,Fn.before=Na,Fn.bind=ka,Fn.bindAll=tc,Fn.bindKey=Da,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ya(e)?e:[e]},Fn.chain=pa,Fn.chunk=function(e,t,r){t=(r?So(e,t,r):t===n)?1:yn(vs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=k(pt(i/t));o<i;)s[a++]=ii(e,o,o+=t);return s},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=k(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Pt(Ya(n)?Ni(n):[n],gr(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Oe(r);return[n(e[0]),e[1]]})):[],Zr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Ct(i[0],this,n))return Ct(i[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=Ps(e);return function(n){return dr(n,e,t)}}(ur(e,1))},Fn.constant=nc,Fn.countBy=ma,Fn.create=function(e,t){var n=zn(e);return null==t?n:or(n,t)},Fn.curry=function e(t,r,i){var o=$i(t,8,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},Fn.curryRight=function e(t,r,i){var o=$i(t,a,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},Fn.debounce=Pa,Fn.defaults=Is,Fn.defaultsDeep=As,Fn.defer=Ma,Fn.delay=La,Fn.difference=zo,Fn.differenceBy=Ho,Fn.differenceWith=Go,Fn.drop=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,(t=r||t===n?1:vs(t))<0?0:t,i):[]},Fn.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,0,(t=i-(t=r||t===n?1:vs(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?pi(e,uo(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?pi(e,uo(t,3),!0):[]},Fn.fill=function(e,t,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&So(e,t,r)&&(r=0,i=o),function(e,t,r,i){var o=e.length;for((r=vs(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:vs(i))<0&&(i+=o),i=r>i?0:ms(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},Fn.filter=function(e,t){return(Ya(e)?Ot:mr)(e,uo(t,3))},Fn.flatMap=function(e,t){return gr(Ra(e,t),1)},Fn.flatMapDeep=function(e,t){return gr(Ra(e,t),l)},Fn.flatMapDepth=function(e,t,r){return r=r===n?1:vs(r),gr(Ra(e,t),r)},Fn.flatten=Ko,Fn.flattenDeep=function(e){return(null==e?0:e.length)?gr(e,l):[]},Fn.flattenDepth=function(e,t){return(null==e?0:e.length)?gr(e,t=t===n?1:vs(t)):[]},Fn.flip=function(e){return $i(e,512)},Fn.flow=rc,Fn.flowRight=ic,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Fn.functions=function(e){return null==e?[]:Tr(e,Ps(e))},Fn.functionsIn=function(e){return null==e?[]:Tr(e,Ms(e))},Fn.groupBy=ba,Fn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Fn.intersection=Xo,Fn.intersectionBy=Jo,Fn.intersectionWith=Zo,Fn.invert=Ns,Fn.invertBy=ks,Fn.invokeMap=Ta,Fn.iteratee=ac,Fn.keyBy=Ca,Fn.keys=Ps,Fn.keysIn=Ms,Fn.map=Ra,Fn.mapKeys=function(e,t){var n={};return t=uo(t,3),Sr(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Fn.mapValues=function(e,t){var n={};return t=uo(t,3),Sr(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Fn.matches=function(e){return Fr(ur(e,1))},Fn.matchesProperty=function(e,t){return zr(e,ur(t,1))},Fn.memoize=Ua,Fn.merge=Ls,Fn.mergeWith=Us,Fn.method=sc,Fn.methodOf=cc,Fn.mixin=uc,Fn.negate=xa,Fn.nthArg=function(e){return e=vs(e),Zr((function(t){return Gr(t,e)}))},Fn.omit=xs,Fn.omitBy=function(e,t){return Bs(e,xa(uo(t)))},Fn.once=function(e){return Na(2,e)},Fn.orderBy=function(e,t,r,i){return null==e?[]:(Ya(t)||(t=null==t?[]:[t]),Ya(r=i?n:r)||(r=null==r?[]:[r]),Wr(e,t,r))},Fn.over=lc,Fn.overArgs=Va,Fn.overEvery=fc,Fn.overSome=hc,Fn.partial=Ba,Fn.partialRight=ja,Fn.partition=Ia,Fn.pick=Vs,Fn.pickBy=Bs,Fn.property=pc,Fn.propertyOf=function(e){return function(t){return null==e?n:Cr(e,t)}},Fn.pull=Qo,Fn.pullAll=ea,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,uo(n,2)):e},Fn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Kr(e,t,n,r):e},Fn.pullAt=ta,Fn.range=_c,Fn.rangeRight=vc,Fn.rearg=Fa,Fn.reject=function(e,t){return(Ya(e)?Ot:mr)(e,xa(uo(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=uo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return qr(e,i),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Oe(r);return Zr(e,t=t===n?t:vs(t))},Fn.reverse=na,Fn.sampleSize=function(e,t,r){return t=(r?So(e,t,r):t===n)?1:vs(t),(Ya(e)?Qn:Qr)(e,t)},Fn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Fn.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:ei(e,t,r,i)},Fn.shuffle=function(e){return(Ya(e)?er:ri)(e)},Fn.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&So(e,t,r)?(t=0,r=i):(t=null==t?0:vs(t),r=r===n?i:vs(r)),ii(e,t,r)):[]},Fn.sortBy=Aa,Fn.sortedUniq=function(e){return e&&e.length?ci(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?ci(e,uo(t,2)):[]},Fn.split=function(e,t,r){return r&&"number"!=typeof r&&So(e,t,r)&&(t=r=n),(r=r===n?p:r>>>0)?(e=Es(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=di(t))&&an(e)?bi(hn(e),0,r):e.split(t,r):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Oe(r);return t=null==t?0:yn(vs(t),0),Zr((function(n){var r=n[t],i=bi(n,0,t);return r&&Pt(i,r),Ct(e,this,i)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Fn.take=function(e,t,r){return e&&e.length?ii(e,0,(t=r||t===n?1:vs(t))<0?0:t):[]},Fn.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,(t=i-(t=r||t===n?1:vs(t)))<0?0:t,i):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?pi(e,uo(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?pi(e,uo(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new Oe(r);return ns(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Pa(e,t,{leading:i,maxWait:t,trailing:o})},Fn.thru=_a,Fn.toArray=ps,Fn.toPairs=js,Fn.toPairsIn=Fs,Fn.toPath=function(e){return Ya(e)?Dt(e,Bo):ds(e)?[e]:Ni(Vo(Es(e)))},Fn.toPlainObject=ys,Fn.transform=function(e,t,n){var r=Ya(e),i=r||Ja(e)||ls(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ns(e)&&Qa(o)?zn(Ye(e)):{}}return(i?It:Sr)(e,(function(e,r,i){return t(n,e,r,i)})),n},Fn.unary=function(e){return Oa(e,1)},Fn.union=ra,Fn.unionBy=ia,Fn.unionWith=oa,Fn.uniq=function(e){return e&&e.length?li(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?li(e,uo(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?li(e,n,t):[]},Fn.unset=function(e,t){return null==e||fi(e,t)},Fn.unzip=aa,Fn.unzipWith=sa,Fn.update=function(e,t,n){return null==e?e:hi(e,t,yi(n))},Fn.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:hi(e,t,yi(r),i)},Fn.values=zs,Fn.valuesIn=function(e){return null==e?[]:Zt(e,Ms(e))},Fn.without=ca,Fn.words=Qs,Fn.wrap=function(e,t){return Ba(yi(t),e)},Fn.xor=ua,Fn.xorBy=da,Fn.xorWith=la,Fn.zip=fa,Fn.zipObject=function(e,t){return mi(e||[],t||[],nr)},Fn.zipObjectDeep=function(e,t){return mi(e||[],t||[],ei)},Fn.zipWith=ha,Fn.entries=js,Fn.entriesIn=Fs,Fn.extend=bs,Fn.extendWith=Ts,uc(Fn,Fn),Fn.add=yc,Fn.attempt=ec,Fn.camelCase=Hs,Fn.capitalize=Gs,Fn.ceil=Ec,Fn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=gs(r))==r?r:0),t!==n&&(t=(t=gs(t))==t?t:0),cr(gs(e),t,r)},Fn.clone=function(e){return ur(e,4)},Fn.cloneDeep=function(e){return ur(e,5)},Fn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:n)},Fn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:n)},Fn.conformsTo=function(e,t){return null==t||dr(e,t,Ps(t))},Fn.deburr=Ws,Fn.defaultTo=function(e,t){return null==e||e!=e?t:e},Fn.divide=Sc,Fn.endsWith=function(e,t,r){e=Es(e),t=di(t);var i=e.length,o=r=r===n?i:cr(vs(r),0,i);return(r-=t.length)>=0&&e.slice(r,o)==t},Fn.eq=za,Fn.escape=function(e){return(e=Es(e))&&J.test(e)?e.replace(q,rn):e},Fn.escapeRegExp=function(e){return(e=Es(e))&&ie.test(e)?e.replace(re,"\\$&"):e},Fn.every=function(e,t,r){var i=Ya(e)?wt:_r;return r&&So(e,t,r)&&(t=n),i(e,uo(t,3))},Fn.find=ga,Fn.findIndex=Wo,Fn.findKey=function(e,t){return Vt(e,uo(t,3),Sr)},Fn.findLast=ya,Fn.findLastIndex=Yo,Fn.findLastKey=function(e,t){return Vt(e,uo(t,3),br)},Fn.floor=bc,Fn.forEach=Ea,Fn.forEachRight=Sa,Fn.forIn=function(e,t){return null==e?e:yr(e,uo(t,3),Ms)},Fn.forInRight=function(e,t){return null==e?e:Er(e,uo(t,3),Ms)},Fn.forOwn=function(e,t){return e&&Sr(e,uo(t,3))},Fn.forOwnRight=function(e,t){return e&&br(e,uo(t,3))},Fn.get=ws,Fn.gt=Ha,Fn.gte=Ga,Fn.has=function(e,t){return null!=e&&mo(e,t,wr)},Fn.hasIn=Os,Fn.head=qo,Fn.identity=oc,Fn.includes=function(e,t,n,r){e=qa(e)?e:zs(e),n=n&&!r?vs(n):0;var i=e.length;return n<0&&(n=yn(i+n,0)),us(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&jt(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=yn(r+i,0)),jt(e,t,i)},Fn.inRange=function(e,t,r){return t=_s(t),r===n?(r=t,t=0):r=_s(r),function(e,t,n){return e>=En(t,n)&&e<yn(t,n)}(e=gs(e),t,r)},Fn.invoke=Ds,Fn.isArguments=Wa,Fn.isArray=Ya,Fn.isArrayBuffer=Ka,Fn.isArrayLike=qa,Fn.isArrayLikeObject=Xa,Fn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Ir(e)==g},Fn.isBuffer=Ja,Fn.isDate=Za,Fn.isElement=function(e){return rs(e)&&1===e.nodeType&&!as(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(qa(e)&&(Ya(e)||"string"==typeof e||"function"==typeof e.splice||Ja(e)||ls(e)||Wa(e)))return!e.length;var t=vo(e);if(t==T||t==w)return!e.size;if(Ro(e))return!xr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Pr(e,t)},Fn.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?Pr(e,t,n,r):!!i},Fn.isError=$a,Fn.isFinite=function(e){return"number"==typeof e&&Wt(e)},Fn.isFunction=Qa,Fn.isInteger=es,Fn.isLength=ts,Fn.isMap=is,Fn.isMatch=function(e,t){return e===t||Mr(e,t,fo(t))},Fn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Mr(e,t,fo(t),r)},Fn.isNaN=function(e){return os(e)&&e!=+e},Fn.isNative=function(e){if(Co(e))throw new Te("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=os,Fn.isObject=ns,Fn.isObjectLike=rs,Fn.isPlainObject=as,Fn.isRegExp=ss,Fn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=f},Fn.isSet=cs,Fn.isString=us,Fn.isSymbol=ds,Fn.isTypedArray=ls,Fn.isUndefined=function(e){return e===n},Fn.isWeakMap=function(e){return rs(e)&&vo(e)==D},Fn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Ir(e)},Fn.join=function(e,t){return null==e?"":mn.call(e,t)},Fn.kebabCase=Ys,Fn.last=$o,Fn.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=vs(r))<0?yn(i+o,0):En(o,i-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Bt(e,zt,o,!0)},Fn.lowerCase=Ks,Fn.lowerFirst=qs,Fn.lt=fs,Fn.lte=hs,Fn.max=function(e){return e&&e.length?vr(e,oc,Ar):n},Fn.maxBy=function(e,t){return e&&e.length?vr(e,uo(t,2),Ar):n},Fn.mean=function(e){return Ht(e,oc)},Fn.meanBy=function(e,t){return Ht(e,uo(t,2))},Fn.min=function(e){return e&&e.length?vr(e,oc,Br):n},Fn.minBy=function(e,t){return e&&e.length?vr(e,uo(t,2),Br):n},Fn.stubArray=mc,Fn.stubFalse=gc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Cc,Fn.nth=function(e,t){return e&&e.length?Gr(e,vs(t)):n},Fn.noConflict=function(){return ft._===this&&(ft._=je),this},Fn.noop=dc,Fn.now=wa,Fn.pad=function(e,t,n){e=Es(e);var r=(t=vs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Wi(vt(i),n)+e+Wi(pt(i),n)},Fn.padEnd=function(e,t,n){e=Es(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?e+Wi(t-r,n):e},Fn.padStart=function(e,t,n){e=Es(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?Wi(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(Es(e).replace(oe,""),t||0)},Fn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&So(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=_s(e),t===n?(t=e,e=0):t=_s(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var o=Tn();return En(e+o*(t-e+ct("1e-"+((o+"").length-1))),t)}return Xr(e,t)},Fn.reduce=function(e,t,n){var r=Ya(e)?Mt:Yt,i=arguments.length<3;return r(e,uo(t,4),n,i,hr)},Fn.reduceRight=function(e,t,n){var r=Ya(e)?Lt:Yt,i=arguments.length<3;return r(e,uo(t,4),n,i,pr)},Fn.repeat=function(e,t,r){return t=(r?So(e,t,r):t===n)?1:vs(t),Jr(Es(e),t)},Fn.replace=function(){var e=arguments,t=Es(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,r){var i=-1,o=(t=Ei(t,e)).length;for(o||(o=1,e=n);++i<o;){var a=null==e?n:e[Bo(t[i])];a===n&&(i=o,a=r),e=Qa(a)?a.call(e):a}return e},Fn.round=Rc,Fn.runInContext=e,Fn.sample=function(e){return(Ya(e)?$n:$r)(e)},Fn.size=function(e){if(null==e)return 0;if(qa(e))return us(e)?fn(e):e.length;var t=vo(e);return t==T||t==w?e.size:xr(e).length},Fn.snakeCase=Xs,Fn.some=function(e,t,r){var i=Ya(e)?Ut:oi;return r&&So(e,t,r)&&(t=n),i(e,uo(t,3))},Fn.sortedIndex=function(e,t){return ai(e,t)},Fn.sortedIndexBy=function(e,t,n){return si(e,t,uo(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&za(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return ai(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return si(e,t,uo(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if(za(e[n],t))return n}return-1},Fn.startCase=Js,Fn.startsWith=function(e,t,n){return e=Es(e),n=null==n?0:cr(vs(n),0,e.length),t=di(t),e.slice(n,n+t.length)==t},Fn.subtract=Ic,Fn.sum=function(e){return e&&e.length?Kt(e,oc):0},Fn.sumBy=function(e,t){return e&&e.length?Kt(e,uo(t,2)):0},Fn.template=function(e,t,r){var i=Fn.templateSettings;r&&So(e,t,r)&&(t=n),e=Es(e),t=Ts({},t,i,Qi);var o,a,s=Ts({},t.imports,i.imports,Qi),c=Ps(s),u=Zt(s,c),d=0,l=t.interpolate||Se,f="__p += '",h=Ae((t.escape||Se).source+"|"+l.source+"|"+(l===Q?he:Se).source+"|"+(t.evaluate||Se).source+"|$","g"),p="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(h,(function(t,n,r,i,s,c){return r||(r=i),f+=e.slice(d,c).replace(be,on),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=c+t.length,t})),f+="';\n";var _=Le.call(t,"variable")&&t.variable;if(_){if(le.test(_))throw new Te("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(G,""):f).replace(W,"$1").replace(Y,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=ec((function(){return Ce(c,p+"return "+f).apply(n,u)}));if(v.source=f,$a(v))throw v;return v},Fn.times=function(e,t){if((e=vs(e))<1||e>f)return[];var n=p,r=En(e,p);t=uo(t),e-=p;for(var i=qt(r,t);++n<e;)t(n);return i},Fn.toFinite=_s,Fn.toInteger=vs,Fn.toLength=ms,Fn.toLower=function(e){return Es(e).toLowerCase()},Fn.toNumber=gs,Fn.toSafeInteger=function(e){return e?cr(vs(e),-9007199254740991,f):0===e?e:0},Fn.toString=Es,Fn.toUpper=function(e){return Es(e).toUpperCase()},Fn.trim=function(e,t,r){if((e=Es(e))&&(r||t===n))return Xt(e);if(!e||!(t=di(t)))return e;var i=hn(e),o=hn(t);return bi(i,Qt(i,o),en(i,o)+1).join("")},Fn.trimEnd=function(e,t,r){if((e=Es(e))&&(r||t===n))return e.slice(0,pn(e)+1);if(!e||!(t=di(t)))return e;var i=hn(e);return bi(i,0,en(i,hn(t))+1).join("")},Fn.trimStart=function(e,t,r){if((e=Es(e))&&(r||t===n))return e.replace(oe,"");if(!e||!(t=di(t)))return e;var i=hn(e);return bi(i,Qt(i,hn(t))).join("")},Fn.truncate=function(e,t){var r=30,i="...";if(ns(t)){var o="separator"in t?t.separator:o;r="length"in t?vs(t.length):r,i="omission"in t?di(t.omission):i}var a=(e=Es(e)).length;if(an(e)){var s=hn(e);a=s.length}if(r>=a)return e;var c=r-fn(i);if(c<1)return i;var u=s?bi(s,0,c).join(""):e.slice(0,c);if(o===n)return u+i;if(s&&(c+=u.length-c),ss(o)){if(e.slice(c).search(o)){var d,l=u;for(o.global||(o=Ae(o.source,Es(pe.exec(o))+"g")),o.lastIndex=0;d=o.exec(l);)var f=d.index;u=u.slice(0,f===n?c:f)}}else if(e.indexOf(di(o),c)!=c){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i},Fn.unescape=function(e){return(e=Es(e))&&X.test(e)?e.replace(K,_n):e},Fn.uniqueId=function(e){var t=++Ue;return Es(e)+t},Fn.upperCase=Zs,Fn.upperFirst=$s,Fn.each=Ea,Fn.eachRight=Sa,Fn.first=qo,uc(Fn,(Tc={},Sr(Fn,(function(e,t){Le.call(Fn.prototype,t)||(Tc[t]=e)})),Tc),{chain:!1}),Fn.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),It(["drop","take"],(function(e,t){Wn.prototype[e]=function(r){r=r===n?1:yn(vs(r),0);var i=this.__filtered__&&!t?new Wn(this):this.clone();return i.__filtered__?i.__takeCount__=En(r,i.__takeCount__):i.__views__.push({size:En(r,p),type:e+(i.__dir__<0?"Right":"")}),i},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),It(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),It(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(oc)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Zr((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return kr(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(xa(uo(e)))},Wn.prototype.slice=function(e,t){e=vs(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Wn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=vs(t))<0?r.dropRight(-t):r.take(t-e)),r)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(p)},Sr(Wn.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=Fn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(Fn.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,c=t instanceof Wn,u=s[0],d=c||Ya(t),l=function(e){var t=o.apply(Fn,Pt([e],s));return i&&f?t[0]:t};d&&r&&"function"==typeof u&&1!=u.length&&(c=d=!1);var f=this.__chain__,h=!!this.__actions__.length,p=a&&!f,_=c&&!h;if(!a&&d){t=_?t:new Wn(this);var v=e.apply(t,s);return v.__actions__.push({func:_a,args:[l],thisArg:n}),new Gn(v,f)}return p&&_?e.apply(this,s):(v=this.thru(l),p?i?v.value()[0]:v.value():v)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ne[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ya(i)?i:[],e)}return this[n]((function(n){return t.apply(Ya(n)?n:[],e)}))}})),Sr(Wn.prototype,(function(e,t){var n=Fn[t];if(n){var r=n.name+"";Le.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:t,func:n})}})),Dn[Fi(n,2).name]=[{name:"wrapper",func:n}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ni(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ni(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ni(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ya(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=En(t,e+a);break;case"takeRight":e=yn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,d=this.__iteratees__,l=d.length,f=0,h=En(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return _i(e,this.__actions__);var p=[];e:for(;c--&&f<h;){for(var _=-1,v=e[u+=t];++_<l;){var m=d[_],g=m.iteratee,y=m.type,E=g(v);if(2==y)v=E;else if(!E){if(1==y)continue e;break e}}p[f++]=v}return p},Fn.prototype.at=va,Fn.prototype.chain=function(){return pa(this)},Fn.prototype.commit=function(){return new Gn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===n&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,r=this;r instanceof Hn;){var i=Fo(r);i.__index__=0,i.__values__=n,t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:_a,args:[na],thisArg:n}),new Gn(t,this.__chain__)}return this.thru(na)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return _i(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Qe&&(Fn.prototype[Qe]=function(){return this}),Fn}();pt?((pt.exports=vn)._=vn,ht._=vn):ft._=vn}).call(k)}(qM,qM.exports);var XM=L,JM=wt("iterator"),ZM=!XM((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[JM]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),$M=Q,QM=2147483647,eL=/[^\0-\u007E]/,tL=/[.\u3002\uFF0E\uFF61]/g,nL="Overflow: input needs wider integers to process",rL=P.RangeError,iL=$M(tL.exec),oL=Math.floor,aL=String.fromCharCode,sL=$M("".charCodeAt),cL=$M([].join),uL=$M([].push),dL=$M("".replace),lL=$M("".split),fL=$M("".toLowerCase),hL=function(e){return e+22+75*(e<26)},pL=function(e,t,n){var r=0;for(e=n?oL(e/700):e>>1,e+=oL(e/t);e>455;)e=oL(e/35),r+=36;return oL(r+36*e/(e+38))},_L=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=sL(e,n++);if(i>=55296&&i<=56319&&n<r){var o=sL(e,n++);56320==(64512&o)?uL(t,((1023&i)<<10)+(1023&o)+65536):(uL(t,i),n--)}else uL(t,i)}return t}(e);var n,r,i=e.length,o=128,a=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&uL(t,aL(r));var c=t.length,u=c;for(c&&uL(t,"-");u<i;){var d=QM;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<d&&(d=r);var l=u+1;if(d-o>oL((QM-a)/l))throw rL(nL);for(a+=(d-o)*l,o=d,n=0;n<e.length;n++){if((r=e[n])<o&&++a>QM)throw rL(nL);if(r==o){for(var f=a,h=36;;){var p=h<=s?1:h>=s+26?26:h-s;if(f<p)break;var _=f-p,v=36-p;uL(t,aL(hL(p+_%v))),f=oL(_/v),h+=36}uL(t,aL(hL(f))),s=pL(a,l,u==c),a=0,u++}}a++,o++}return cL(t,"")},vL=Si,mL=P,gL=Se,yL=j,EL=Q,SL=ZM,bL=Cn.exports,TL=ju,CL=xa,RL=Ga,IL=ir,AL=pu,wL=_e,OL=ft,NL=Sc,kL=Lc,DL=un,PL=me,ML=fd,LL=aa,UL=K,xL=Kc,VL=jc,BL=Jf,jL=x_,FL=wt("iterator"),zL="URLSearchParams",HL="URLSearchParamsIterator",GL=IL.set,WL=IL.getterFor(zL),YL=IL.getterFor(HL),KL=gL("fetch"),qL=gL("Request"),XL=gL("Headers"),JL=qL&&qL.prototype,ZL=XL&&XL.prototype,$L=mL.RegExp,QL=mL.TypeError,eU=mL.decodeURIComponent,tU=mL.encodeURIComponent,nU=EL("".charAt),rU=EL([].join),iU=EL([].push),oU=EL("".replace),aU=EL([].shift),sU=EL([].splice),cU=EL("".split),uU=EL("".slice),dU=/\+/g,lU=Array(4),fU=function(e){return lU[e-1]||(lU[e-1]=$L("((?:%[\\da-f]{2}){"+e+"})","gi"))},hU=function(e){try{return eU(e)}catch(t){return e}},pU=function(e){var t=oU(e,dU," "),n=4;try{return eU(t)}catch(e){for(;n;)t=oU(t,fU(n--),hU);return t}},_U=/[!'()~]|%20/g,vU={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},mU=function(e){return vU[e]},gU=function(e){return oU(tU(e),_U,mU)},yU=RL((function(e,t){GL(this,{type:HL,iterator:xL(WL(e).entries),kind:t})}),"Iterator",(function(){var e=YL(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),EU=function(e){this.entries=[],this.url=null,void 0!==e&&(PL(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===nU(e,0)?uU(e,1):e:ML(e)))};EU.prototype={type:zL,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s,c=VL(e);if(c)for(n=(t=xL(e,c)).next;!(r=yL(n,t)).done;){if(o=(i=xL(DL(r.value))).next,(a=yL(o,i)).done||(s=yL(o,i)).done||!yL(o,i).done)throw QL("Expected sequence with length 2");iU(this.entries,{key:ML(a.value),value:ML(s.value)})}else for(var u in e)OL(e,u)&&iU(this.entries,{key:u,value:ML(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=cU(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=cU(t,"="),iU(this.entries,{key:pU(aU(n)),value:pU(rU(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],iU(n,gU(e.key)+"="+gU(e.value));return rU(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var SU=function(){AL(this,bU);var e=arguments.length>0?arguments[0]:void 0;GL(this,new EU(e))},bU=SU.prototype;if(TL(bU,{append:function(e,t){BL(arguments.length,2);var n=WL(this);iU(n.entries,{key:ML(e),value:ML(t)}),n.updateURL()},delete:function(e){BL(arguments.length,1);for(var t=WL(this),n=t.entries,r=ML(e),i=0;i<n.length;)n[i].key===r?sU(n,i,1):i++;t.updateURL()},get:function(e){BL(arguments.length,1);for(var t=WL(this).entries,n=ML(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){BL(arguments.length,1);for(var t=WL(this).entries,n=ML(e),r=[],i=0;i<t.length;i++)t[i].key===n&&iU(r,t[i].value);return r},has:function(e){BL(arguments.length,1);for(var t=WL(this).entries,n=ML(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){BL(arguments.length,1);for(var n,r=WL(this),i=r.entries,o=!1,a=ML(e),s=ML(t),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?sU(i,c--,1):(o=!0,n.value=s));o||iU(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=WL(this);jL(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=WL(this).entries,r=NL(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new yU(this,"keys")},values:function(){return new yU(this,"values")},entries:function(){return new yU(this,"entries")}},{enumerable:!0}),bL(bU,FL,bU.entries,{name:"entries"}),bL(bU,"toString",(function(){return WL(this).serialize()}),{enumerable:!0}),CL(SU,zL),vL({global:!0,forced:!SL},{URLSearchParams:SU}),!SL&&wL(XL)){var TU=EL(ZL.has),CU=EL(ZL.set),RU=function(e){if(PL(e)){var t,n=e.body;if(kL(n)===zL)return t=e.headers?new XL(e.headers):new XL,TU(t,"content-type")||CU(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),LL(e,{body:UL(0,ML(n)),headers:UL(0,t)})}return e};if(wL(KL)&&vL({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return KL(e,arguments.length>1?RU(arguments[1]):{})}}),wL(qL)){var IU=function(e){return AL(this,JL),new qL(e,arguments.length>1?RU(arguments[1]):{})};JL.constructor=IU,IU.prototype=JL,vL({global:!0,forced:!0},{Request:IU})}}var AU,wU={URLSearchParams:SU,getState:WL},OU=Si,NU=U,kU=ZM,DU=P,PU=Sc,MU=Q,LU=xo.f,UU=Cn.exports,xU=pu,VU=ft,BU=bk,jU=sM,FU=Hs,zU=Sd.codeAt,HU=function(e){var t,n,r=[],i=lL(dL(fL(e),tL,"."),".");for(t=0;t<i.length;t++)n=i[t],uL(r,iL(eL,n)?"xn--"+_L(n):n);return cL(r,".")},GU=fd,WU=xa,YU=Jf,KU=wU,qU=ir,XU=qU.set,JU=qU.getterFor("URL"),ZU=KU.URLSearchParams,$U=KU.getState,QU=DU.URL,ex=DU.TypeError,tx=DU.parseInt,nx=Math.floor,rx=Math.pow,ix=MU("".charAt),ox=MU(/./.exec),ax=MU([].join),sx=MU(1..toString),cx=MU([].pop),ux=MU([].push),dx=MU("".replace),lx=MU([].shift),fx=MU("".split),hx=MU("".slice),px=MU("".toLowerCase),_x=MU([].unshift),vx="Invalid scheme",mx="Invalid host",gx="Invalid port",yx=/[a-z]/i,Ex=/[\d+-.a-z]/i,Sx=/\d/,bx=/^0x/i,Tx=/^[0-7]+$/,Cx=/^\d+$/,Rx=/^[\da-f]+$/i,Ix=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Ax=/[\0\t\n\r #/:<>?@[\\\]^|]/,wx=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Ox=/[\t\n\r]/g,Nx=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)_x(t,e%256),e=nx(e/256);return ax(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=sx(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},kx={},Dx=BU({},kx,{" ":1,'"':1,"<":1,">":1,"`":1}),Px=BU({},Dx,{"#":1,"?":1,"{":1,"}":1}),Mx=BU({},Px,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Lx=function(e,t){var n=zU(e,0);return n>32&&n<127&&!VU(t,e)?e:encodeURIComponent(e)},Ux={ftp:21,file:null,http:80,https:443,ws:80,wss:443},xx=function(e,t){var n;return 2==e.length&&ox(yx,ix(e,0))&&(":"==(n=ix(e,1))||!t&&"|"==n)},Vx=function(e){var t;return e.length>1&&xx(hx(e,0,2))&&(2==e.length||"/"===(t=ix(e,2))||"\\"===t||"?"===t||"#"===t)},Bx=function(e){return"."===e||"%2e"===px(e)},jx={},Fx={},zx={},Hx={},Gx={},Wx={},Yx={},Kx={},qx={},Xx={},Jx={},Zx={},$x={},Qx={},eV={},tV={},nV={},rV={},iV={},oV={},aV={},sV=function(e,t,n){var r,i,o,a=GU(e);if(t){if(i=this.parse(a))throw ex(i);this.searchParams=null}else{if(void 0!==n&&(r=new sV(n,!0)),i=this.parse(a,null,r))throw ex(i);(o=$U(new ZU)).bindURL(this),this.searchParams=o}};sV.prototype={type:"URL",parse:function(e,t,n){var r,i,o,a,s,c=this,u=t||jx,d=0,l="",f=!1,h=!1,p=!1;for(e=GU(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=dx(e,wx,"")),e=dx(e,Ox,""),r=jU(e);d<=r.length;){switch(i=r[d],u){case jx:if(!i||!ox(yx,i)){if(t)return vx;u=zx;continue}l+=px(i),u=Fx;break;case Fx:if(i&&(ox(Ex,i)||"+"==i||"-"==i||"."==i))l+=px(i);else{if(":"!=i){if(t)return vx;l="",u=zx,d=0;continue}if(t&&(c.isSpecial()!=VU(Ux,l)||"file"==l&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=l,t)return void(c.isSpecial()&&Ux[c.scheme]==c.port&&(c.port=null));l="","file"==c.scheme?u=Qx:c.isSpecial()&&n&&n.scheme==c.scheme?u=Hx:c.isSpecial()?u=Kx:"/"==r[d+1]?(u=Gx,d++):(c.cannotBeABaseURL=!0,ux(c.path,""),u=iV)}break;case zx:if(!n||n.cannotBeABaseURL&&"#"!=i)return vx;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=FU(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=aV;break}u="file"==n.scheme?Qx:Wx;continue;case Hx:if("/"!=i||"/"!=r[d+1]){u=Wx;continue}u=qx,d++;break;case Gx:if("/"==i){u=Xx;break}u=rV;continue;case Wx:if(c.scheme=n.scheme,i==AU)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=FU(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())u=Yx;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=FU(n.path),c.query="",u=oV;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=FU(n.path),c.path.length--,u=rV;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=FU(n.path),c.query=n.query,c.fragment="",u=aV}break;case Yx:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=rV;continue}u=Xx}else u=qx;break;case Kx:if(u=qx,"/"!=i||"/"!=ix(l,d+1))continue;d++;break;case qx:if("/"!=i&&"\\"!=i){u=Xx;continue}break;case Xx:if("@"==i){f&&(l="%40"+l),f=!0,o=jU(l);for(var _=0;_<o.length;_++){var v=o[_];if(":"!=v||p){var m=Lx(v,Mx);p?c.password+=m:c.username+=m}else p=!0}l=""}else if(i==AU||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(f&&""==l)return"Invalid authority";d-=jU(l).length+1,l="",u=Jx}else l+=i;break;case Jx:case Zx:if(t&&"file"==c.scheme){u=tV;continue}if(":"!=i||h){if(i==AU||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==l)return mx;if(t&&""==l&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(l))return a;if(l="",u=nV,t)return;continue}"["==i?h=!0:"]"==i&&(h=!1),l+=i}else{if(""==l)return mx;if(a=c.parseHost(l))return a;if(l="",u=$x,t==Zx)return}break;case $x:if(!ox(Sx,i)){if(i==AU||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=l){var g=tx(l,10);if(g>65535)return gx;c.port=c.isSpecial()&&g===Ux[c.scheme]?null:g,l=""}if(t)return;u=nV;continue}return gx}l+=i;break;case Qx:if(c.scheme="file","/"==i||"\\"==i)u=eV;else{if(!n||"file"!=n.scheme){u=rV;continue}if(i==AU)c.host=n.host,c.path=FU(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=FU(n.path),c.query="",u=oV;else{if("#"!=i){Vx(ax(FU(r,d),""))||(c.host=n.host,c.path=FU(n.path),c.shortenPath()),u=rV;continue}c.host=n.host,c.path=FU(n.path),c.query=n.query,c.fragment="",u=aV}}break;case eV:if("/"==i||"\\"==i){u=tV;break}n&&"file"==n.scheme&&!Vx(ax(FU(r,d),""))&&(xx(n.path[0],!0)?ux(c.path,n.path[0]):c.host=n.host),u=rV;continue;case tV:if(i==AU||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&xx(l))u=rV;else if(""==l){if(c.host="",t)return;u=nV}else{if(a=c.parseHost(l))return a;if("localhost"==c.host&&(c.host=""),t)return;l="",u=nV}continue}l+=i;break;case nV:if(c.isSpecial()){if(u=rV,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=AU&&(u=rV,"/"!=i))continue}else c.fragment="",u=aV;else c.query="",u=oV;break;case rV:if(i==AU||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=px(s=l))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||ux(c.path,"")):Bx(l)?"/"==i||"\\"==i&&c.isSpecial()||ux(c.path,""):("file"==c.scheme&&!c.path.length&&xx(l)&&(c.host&&(c.host=""),l=ix(l,0)+":"),ux(c.path,l)),l="","file"==c.scheme&&(i==AU||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)lx(c.path);"?"==i?(c.query="",u=oV):"#"==i&&(c.fragment="",u=aV)}else l+=Lx(i,Px);break;case iV:"?"==i?(c.query="",u=oV):"#"==i?(c.fragment="",u=aV):i!=AU&&(c.path[0]+=Lx(i,kx));break;case oV:t||"#"!=i?i!=AU&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":Lx(i,kx)):(c.fragment="",u=aV);break;case aV:i!=AU&&(c.fragment+=Lx(i,Dx))}d++}},parseHost:function(e){var t,n,r;if("["==ix(e,0)){if("]"!=ix(e,e.length-1))return mx;if(t=function(e){var t,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,d=null,l=0,f=function(){return ix(e,l)};if(":"==f()){if(":"!=ix(e,1))return;l+=2,d=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=n=0;n<4&&ox(Rx,f());)t=16*t+tx(f(),16),l++,n++;if("."==f()){if(0==n)return;if(l-=n,u>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;l++}if(!ox(Sx,f()))return;for(;ox(Sx,f());){if(o=tx(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;l++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==f()){if(l++,!f())return}else if(f())return;c[u++]=t}else{if(null!==d)return;l++,d=++u}}if(null!==d)for(a=u-d,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[d+a-1],c[d+--a]=s;else if(8!=u)return;return c}(hx(e,1,-1)),!t)return mx;this.host=t}else if(this.isSpecial()){if(e=HU(e),ox(Ix,e))return mx;if(t=function(e){var t,n,r,i,o,a,s,c=fx(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==ix(i,0)&&(o=ox(bx,i)?16:8,i=hx(i,8==o?1:2)),""===i)a=0;else{if(!ox(10==o?Cx:8==o?Tx:Rx,i))return e;a=tx(i,o)}ux(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=rx(256,5-t))return null}else if(a>255)return null;for(s=cx(n),r=0;r<n.length;r++)s+=n[r]*rx(256,3-r);return s}(e),null===t)return mx;this.host=t}else{if(ox(Ax,e))return mx;for(t="",n=jU(e),r=0;r<n.length;r++)t+=Lx(n[r],kx);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return VU(Ux,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&xx(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",e.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=Nx(i),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+ax(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw ex(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new cV(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+Nx(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(GU(e)+":",jx)},getUsername:function(){return this.username},setUsername:function(e){var t=jU(GU(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Lx(t[n],Mx)}},getPassword:function(){return this.password},setPassword:function(e){var t=jU(GU(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Lx(t[n],Mx)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?Nx(e):Nx(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Jx)},getHostname:function(){var e=this.host;return null===e?"":Nx(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Zx)},getPort:function(){var e=this.port;return null===e?"":GU(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=GU(e))?this.port=null:this.parse(e,$x))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+ax(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,nV))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=GU(e))?this.query=null:("?"==ix(e,0)&&(e=hx(e,1)),this.query="",this.parse(e,oV)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=GU(e))?("#"==ix(e,0)&&(e=hx(e,1)),this.fragment="",this.parse(e,aV)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var cV=function(e){var t=xU(this,uV),n=YU(arguments.length,1)>1?arguments[1]:void 0,r=XU(t,new sV(e,!1,n));NU||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},uV=cV.prototype,dV=function(e,t){return{get:function(){return JU(this)[e]()},set:t&&function(e){return JU(this)[t](e)},configurable:!0,enumerable:!0}};if(NU&&LU(uV,{href:dV("serialize","setHref"),origin:dV("getOrigin"),protocol:dV("getProtocol","setProtocol"),username:dV("getUsername","setUsername"),password:dV("getPassword","setPassword"),host:dV("getHost","setHost"),hostname:dV("getHostname","setHostname"),port:dV("getPort","setPort"),pathname:dV("getPathname","setPathname"),search:dV("getSearch","setSearch"),searchParams:dV("getSearchParams"),hash:dV("getHash","setHash")}),UU(uV,"toJSON",(function(){return JU(this).serialize()}),{enumerable:!0}),UU(uV,"toString",(function(){return JU(this).serialize()}),{enumerable:!0}),QU){var lV=QU.createObjectURL,fV=QU.revokeObjectURL;lV&&UU(cV,"createObjectURL",PU(lV,QU)),fV&&UU(cV,"revokeObjectURL",PU(fV,QU))}WU(cV,"URL"),OU({global:!0,forced:!kU,sham:!NU},{URL:cV});var hV,pV=function(){function e(e){this._sharedAudioContext=new AudioContext,this._audioDestination=this._sharedAudioContext.createMediaStreamDestination(),this._localGainNode=this._sharedAudioContext.createGain(),this._bufferGainNode=this._sharedAudioContext.createGain(),this.mixingMap=new Map,this.resourcesCache=new Map,this.volumeConfig=new Map,this.cachedBuffer=[],this._context=e,this._localGainNode.gain.value=1}return e.prototype.mixMediaStream=function(e){this._localSource&&this._localSource.disconnect(this._localGainNode),this._localSource=this._sharedAudioContext.createMediaStreamSource(e),this._localSource.connect(this._localGainNode).connect(this._audioDestination)},e.prototype.startAudioMixing=function(e,t,n){return S(this,void 0,void 0,(function(){var r,i,o,a,s,c,u,d,l,f,h,p;return b(this,(function(_){switch(_.label){case 0:if(r=n.playCount,aC(i=n.type,"mixingType",qM.exports.values(A)),!(o=this._context.getLocalAudioTrack()))return[2];if(v=o.getTrack(),(a=_M.get(v))&&this.mixMediaStream(a),(s=this.mixingMap.get(e))&&s.audioNode){s.audioNode.pause();try{s.gainNode.disconnect(this._audioDestination),s.audioSource.disconnect(s.gainNode)}catch(e){}}return(u=this.resourcesCache.get(e))&&u.filePath===t?(c=u.getAudioNode(),[3,3]):[3,1];case 1:return[4,fetch(t,{mode:"cors",credentials:"include"}).then((function(e){if(e.ok)return e.arrayBuffer();throw new nC(eC.LOAD_RESOURCES_FAILED,e.statusText)}))];case 2:d=_.sent(),c=new Audio(URL.createObjectURL(new Blob([d]))),_.label=3;case 3:return c.crossOrigin="anonymous",r<=0?c.loop=!0:r>0&&(l=r,c.onended=function(){--l>0&&c.play()}),[4,c.play()];case 4:if(_.sent(),f=this._sharedAudioContext.createMediaElementSource(c),h=this._sharedAudioContext.createGain(),p=this.volumeConfig.get(e),h.gain.value=p?p/100:1,f.connect(h).connect(this._audioDestination),this.mixingMap.set(e,{audioSource:f,audioNode:c,gainNode:h,type:"file"}),i===A.PUBLISH)try{h.disconnect(this._sharedAudioContext.destination)}catch(e){}else h.connect(this._sharedAudioContext.destination);return this._context.updateLocalAudioTrack(this._audioDestination.stream.getAudioTracks()[0],n.type),[2]}var v}))}))},e.prototype.stopAudioMixing=function(e){var t=this.mixingMap.get(e);t&&"file"===t.type&&(this.mixingMap.delete(e),t.audioNode.pause(),t.audioSource.disconnect(t.gainNode),t.gainNode.disconnect(this._audioDestination),this._context.updateLocalAudioTrack())},e.prototype.pauseAudioMixing=function(e){var t=this.mixingMap.get(e);t&&t.audioNode.pause()},e.prototype.resumeAudioMixing=function(e){var t=this.mixingMap.get(e);t&&t.audioNode.play()},e.prototype.preloadAudioMixing=function(e,t){return S(this,void 0,void 0,(function(){var n;return b(this,(function(r){switch(r.label){case 0:return this.stopAudioMixing(e),[4,fetch(t,{mode:"cors",credentials:"include"}).then((function(e){if(e.ok)return e.arrayBuffer();throw new nC(eC.LOAD_RESOURCES_FAILED,e.statusText)})).catch((function(e){throw new nC(eC.LOAD_RESOURCES_FAILED,"Load resources failed",e)}))];case 1:return n=r.sent(),this.resourcesCache.set(e,{getAudioNode:function(){return new Audio(URL.createObjectURL(new Blob([n])))},filePath:t}),[2]}}))}))},e.prototype.unloadAudioMixing=function(e){this.resourcesCache.has(e)&&this.resourcesCache.delete(e)},e.prototype.getAudioMixingVolume=function(e){var t=this.mixingMap.get(e);return t?100*t.gainNode.gain.value:0},e.prototype.setAudioMixingVolume=function(e,t){t<0?t=0:t>400&&(t=400),this.volumeConfig.set(e,t);var n=this.mixingMap.get(e);n&&(n.gainNode.gain.value=Number(t)/100)},e.prototype.getAudioMixingDuration=function(e){var t=this.mixingMap.get(e),n=this.mixingMap.get(e);return t||n?t?1e3*t.audioNode.duration:n?1e3*n.audioNode.duration:0:0},e.prototype.getAudioMixingCurrentPosition=function(e){var t=this.mixingMap.get(e);return t?1e3*t.audioNode.currentTime:0},e.prototype.setAudioMixingPosition=function(e,t){var n=this.mixingMap.get(e);n&&(n.audioNode.currentTime=t/1e3,n.audioNode.play())},e.prototype.enableAudioMixingBuffer=function(t){aC(t,"position",qM.exports.values(e)),this._bufferGainNode.connect(this._audioDestination),this._bufferGainNode.connect(this._sharedAudioContext.destination)},e.prototype.disableAudioMixingBuffer=function(){this.cachedBuffer=[],this._audioBufferSource&&(this._audioBufferSource.disconnect(this._bufferGainNode),this._audioBufferSource=void 0,this._bufferGainNode.disconnect(this._audioDestination),this._bufferGainNode.disconnect(this._sharedAudioContext.destination))},e.prototype.pushAudioMixingBuffer=function(e){var t=this;this._audioBufferSource&&this.cachedBuffer.push(e),this._audioBufferSource=this._sharedAudioContext.createBufferSource(),this._audioBufferSource.buffer=e,this._audioBufferSource.connect(this._bufferGainNode),this._audioBufferSource.start(),this._audioBufferSource.onended=function(){var e;if(null===(e=t._audioBufferSource)||void 0===e||e.disconnect(t._bufferGainNode),t._audioBufferSource=void 0,t.cachedBuffer.length){var n=t.cachedBuffer.shift();n&&t.pushAudioMixingBuffer(n)}}},Object.defineProperty(e.prototype,"mixTrack",{get:function(){return this._audioDestination.stream.getAudioTracks()[0]},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e=this._sharedAudioContext;"closed"!==e.state&&"function"==typeof e.close&&e.close(),this.cachedBuffer=[],this.mixingMap.clear(),this.resourcesCache.clear(),this.volumeConfig.clear()},E([kk()],e.prototype,"startAudioMixing",null),E([kk()],e.prototype,"stopAudioMixing",null),E([kk()],e.prototype,"pauseAudioMixing",null),E([kk()],e.prototype,"resumeAudioMixing",null),E([kk()],e.prototype,"preloadAudioMixing",null),E([kk()],e.prototype,"unloadAudioMixing",null),E([kk()],e.prototype,"getAudioMixingVolume",null),E([kk()],e.prototype,"setAudioMixingVolume",null),E([kk()],e.prototype,"getAudioMixingDuration",null),E([kk()],e.prototype,"getAudioMixingCurrentPosition",null),E([kk()],e.prototype,"setAudioMixingPosition",null),E([kk()],e.prototype,"enableAudioMixingBuffer",null),E([kk()],e.prototype,"disableAudioMixingBuffer",null),E([kk()],e.prototype,"pushAudioMixingBuffer",null),e}();!function(e){e.NORMAL_USER="normalUser",e.SILENT_USER="silentUser"}(hV||(hV={}));var _V=new gC("Engine",0),vV=function(e){function t(t){var n=e.call(this)||this;return n._visibility=!0,n._remoteVideoPlayer=new Map,n._remoteScreenPlayer=new Map,n._remoteAudioPlayer=new Map,n._videoStreamConstraints={},n._audioStreamConstraints={},n._videoStreamEncodeConfig=[{maxKbps:500}],n._screenStreamEncodeConfig=[{maxKbps:500}],n._pauseAllSubscribeState={audio:!1,video:!1},n._mirrorType=m.MIRROR_TYPE_RENDER,n._updateMixAudioTrack=function(e,t){return void 0===t&&(t=A.PLAYOUT_AND_PUBLISH),S(n,void 0,void 0,(function(){var n;return b(this,(function(r){switch(r.label){case 0:return this._localAudioTrack?(e?(this._localAudioTrack.mixType=t,this._localAudioTrack.mixedAudioTrack=e):(delete this._localAudioTrack.mixType,delete this._localAudioTrack.mixedAudioTrack),(null===(n=this._room)||void 0===n?void 0:n.hasPublished)?[4,this._updatePublish()]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},n._appId=t,n._pubLock=new tP("pubLock"),n._addDeviceEventHandler(),n._audioMixingManager=new pV({getLocalAudioTrack:function(){return n._localAudioTrack},updateLocalAudioTrack:n._updateMixAudioTrack}),window["__rtc_engine__".concat(Math.floor(100*Math.random()+1))]=n,n._trackSourceType={video:r.VIDEO_SOURCE_TYPE_INTERNAL,screenVideo:r.VIDEO_SOURCE_TYPE_INTERNAL,audio:i.AUDIO_SOURCE_TYPE_INTERNAL,screenAudio:i.AUDIO_SOURCE_TYPE_INTERNAL},n}return n(t,e),Object.defineProperty(t.prototype,"appId",{get:function(){return this._appId},enumerable:!1,configurable:!0}),t.prototype.updateToken=function(e){var t;_V.print("updateToken","Invoke updateToken: ",e),oC(e,"token"),null===(t=this._room)||void 0===t||t.updateToken(e)},t.prototype.switchCamera=function(e){var t,n;return S(this,void 0,void 0,(function(){var r,i;return b(this,(function(o){switch(o.label){case 0:return _V.print("switchCamera","Invoke switchCamera: ",e),oC(e,"deviceId"),e===(null===(n=null===(t=this._videoStreamConstraints)||void 0===t?void 0:t.deviceId)||void 0===n?void 0:n.exact)?[2]:((r=this._videoStreamConstraints).deviceId={exact:e},this._videoStreamConstraints=r,[4,OM(r)]);case 1:return i=o.sent(),this._initLocalTrackEvents(i),this._localVideoTrack&&this._localVideoTrack.close(),this._localVideoTrack=i,this._videoPlayer&&(this._videoPlayer.stop(),this._videoPlayer.playVideo(i),this._videoPlayer.mirror(!!this._mirrorType)),this._room?this._room.hasPublished?[4,this._updatePublish()]:[3,3]:[2];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.switchMicrophone=function(e){var t,n;return S(this,void 0,void 0,(function(){var r,i;return b(this,(function(o){switch(o.label){case 0:return _V.print("switchMicrophone","Invoke switchMicrophone: ",e),oC(e,"deviceId"),e===(null===(n=null===(t=this._videoStreamConstraints)||void 0===t?void 0:t.deviceId)||void 0===n?void 0:n.exact)?[2]:((r=this._audioStreamConstraints).deviceId={exact:e},this._audioStreamConstraints=r,[4,NM(r)]);case 1:return i=o.sent(),this._initLocalTrackEvents(i),this._localAudioTrack&&this._localAudioTrack.close(),this._localAudioTrack=i,this._audioPlayer&&(this._audioPlayer.stop(),this._audioPlayer.playAudio(i)),this._room?this._room.hasPublished?[4,this._updatePublish()]:[3,3]:[2];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype._addDeviceEventHandler=function(){uM.on(O.onMediaDeviceStateChanged,this._onDeviceStateChange.bind(this))},t.prototype._addHandlerEventHandler=function(){var e,t,n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g,y,E,S,b,T=this;null===(e=this._room)||void 0===e||e.on(Rk.ON_ADD_STREAM,this._onAddStream.bind(this)),null===(t=this._room)||void 0===t||t.on(Rk.ON_REMOVE_STREAM,this._onRemoveStream.bind(this)),null===(n=this._room)||void 0===n||n.on(Rk.USER_CONNECTION,this._onUserConnection.bind(this)),null===(r=this._room)||void 0===r||r.on(Rk.USER_DISCONNECTION,this._onUserDisconnection.bind(this)),null===(i=this._room)||void 0===i||i.on(Rk.ON_CUSTOM_MESSAGE,this._onCustomMessage.bind(this)),null===(o=this._room)||void 0===o||o.on(Rk.USER_MESSAGE_RECEIVED,this._onUserMessageReceived.bind(this)),null===(a=this._room)||void 0===a||a.on(Rk.USER_BINARY_MESSAGE_RECEIVED,this._onUserBinaryMessageReceived.bind(this)),null===(s=this._room)||void 0===s||s.on(Rk.POST_PROCESSING_MESSAGE,this._onLiveTranscodingResult.bind(this)),null===(c=this._room)||void 0===c||c.on(Ik.ON_CONNECTION_STATE_CHANGE,this._onConnectionStateChange.bind(this)),null===(u=this._room)||void 0===u||u.on(MM.RESUBSCRIBE,this._onResubscribe.bind(this)),null===(d=this._room)||void 0===d||d.on(MM.SUBSCRIBE_PUSH_TRACK,this._onSubscribePushTrack.bind(this)),null===(l=this._room)||void 0===l||l.on(MM.REMOVE_PUSH_TRACK,this._onRemovePushTrack.bind(this)),null===(f=this._room)||void 0===f||f.on(MM.VIDEO_FIRST_FRAME,this._onVideoFirstFrameDecoded.bind(this)),null===(h=this._room)||void 0===h||h.on(MM.ON_PUBLISH_RESULT,(function(e){var t;(null===(t=T._room)||void 0===t?void 0:t._roomConfig.isAutoPublish)&&T.safeEmit(O.onAutoPublishResult,e)})),null===(p=this._room)||void 0===p||p.on("onRemoteStreamStats",(function(e){T.safeEmit(O.onRemoteStreamStats,e)})),null===(_=this._room)||void 0===_||_.on("onLocalStreamStats",(function(e){T.safeEmit(O.onLocalStreamStats,e)})),null===(v=this._room)||void 0===v||v.on(MM.ON_USER_MUTE_AUDIO,this._onUserMuteAudio.bind(this)),null===(m=this._room)||void 0===m||m.on(MM.ON_USER_MUTE_VIDEO,this._onUserMuteVideo.bind(this)),null===(g=this._room)||void 0===g||g.on(MM.ON_USER_START_AUDIO_CAPTURE,(function(e){var t=e.userId;T.safeEmit(O.onUserStartAudioCapture,{userId:t})})),null===(y=this._room)||void 0===y||y.on(MM.ON_USER_STOP_AUDIO_CAPTURE,(function(e){var t=e.userId;T.safeEmit(O.onUserStopAudioCapture,{userId:t})})),null===(E=this._room)||void 0===E||E.on(MM.ON_USER_START_VIDEO_CAPTURE,(function(e){var t=e.userId;T.safeEmit(O.onUserStartVideoCapture,{userId:t})})),null===(S=this._room)||void 0===S||S.on(MM.ON_USER_STOP_VIDEO_CAPTURE,(function(e){var t=e.userId;T.safeEmit(O.onUserStopVideoCapture,{userId:t})})),null===(b=this._room)||void 0===b||b.on(MM.ON_SEI_MESSAGED_RECEIVED,(function(e){T.safeEmit(O.onSEIMessageReceived,e)}))},t.prototype.safeEmit=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return hC(t)&&Dk(t,JSON.stringify(n)),e.prototype.safeEmit.apply(this,R([t],C(n),!1))},t.prototype._removeHandlerEventHandler=function(){var e;null===(e=this._room)||void 0===e||e.removeAllListeners()},t.prototype.joinRoom=function(e,t,n,r){return void 0===r&&(r={isAutoPublish:!1,isAutoSubscribeAudio:!1,isAutoSubscribeVideo:!1}),S(this,void 0,void 0,(function(){var i;return b(this,(function(o){switch(o.label){case 0:if(_V.print("joinRoom","Invoke joinRoom: ",e,t,n,r),uC(e)||oC(e,"token"),function(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \_\-\@]{1,128}$/.test(e))throw new nC(eC.INVALID_PARAMS,"The RoomId must be within 128 bytes. The supported characters: a-z,A-Z,0-9,@,-,_")}(t),dC(n),function(e){sC(e,"roomConfig"),rC(e.isAutoPublish,"roomConfig.isAutoPublish"),rC(e.isAutoSubscribeAudio,"roomConfig.isAutoSubscribeAudio"),rC(e.isAutoSubscribeVideo,"roomConfig.isAutoSubscribeVideo")}(r),!this._room||this._room.connectionState===iP.DISCONNECTED)return[3,1];throw new nC(eC.REPEAT_JOIN,"Already joined");case 1:return this._room=new jM(r),this._addHandlerEventHandler(),i=this._liveTranscodeConfig&&uI("started",this._liveTranscodeConfig),[4,this._room.join(this._appId,t,e,y(y({},n),{businessId:this._businessId,role:this._visibility?hV.NORMAL_USER:hV.SILENT_USER}),i)];case 2:return o.sent(),this._roomConfig=r,(this._localAudioTrack||this._localVideoTrack)&&r.isAutoPublish?[4,this._updatePublish()]:[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},t.prototype.leaveRoom=function(){var e;_V.print("leaveRoom","Invoke leaveRoom"),this._removeHandlerEventHandler(),null===(e=this._room)||void 0===e||e.leave().catch,this._liveTranscodeConfig&&this.stopLiveTranscoding(),this._room=void 0,this._remoteAudioPlayer.forEach((function(e){return e.stop()})),this._remoteAudioPlayer=new Map,this._remoteScreenPlayer.forEach((function(e){return e.stop()})),this._remoteScreenPlayer=new Map,this._remoteVideoPlayer.forEach((function(e){return e.stop()})),this._remoteVideoPlayer=new Map,this._roomConfig=void 0},t.prototype.destroy=function(){var e,t,n;_V.print("destroy","Invoke destroy"),this.removeAllListeners(),this._removeHandlerEventHandler(),null===(e=this._room)||void 0===e||e.destroy(),this._room=void 0,null===(t=this._videoPlayer)||void 0===t||t.stop(),null===(n=this._audioPlayer)||void 0===n||n.stop(),this._videoPlayer=void 0,this._audioPlayer=void 0,this._screenPlayer=void 0,this._videoStreamConstraints={},this._audioStreamConstraints={},this._videoStreamEncodeConfig=[{maxKbps:500}],this._screenStreamEncodeConfig=[{maxKbps:500}],this._pauseAllSubscribeState={audio:!1,video:!1},clearInterval(this._audioVolumeIndicationTimer),this._audioVolumeIndicationTimer=void 0,this._localAudioTrack&&(this._localAudioTrack.close(),this._localAudioTrack=void 0),this._localVideoTrack&&(this._localVideoTrack.close(),this._localVideoTrack=void 0),this._localScreenAudioTrack&&(this._localScreenAudioTrack.close(),this._localScreenAudioTrack=void 0),this._localScreenVideoTrack&&(this._localScreenVideoTrack.close(),this._localScreenVideoTrack=void 0),this._remoteAudioPlayer.forEach((function(e){return e.stop()})),this._remoteAudioPlayer=new Map,this._remoteScreenPlayer.forEach((function(e){return e.stop()})),this._remoteScreenPlayer=new Map,this._remoteVideoPlayer.forEach((function(e){return e.stop()})),this._remoteVideoPlayer=new Map,this._roomConfig=void 0,this._audioMixingManager.destroy()},t.prototype.publish=function(){return S(this,void 0,void 0,(function(){return b(this,(function(e){switch(e.label){case 0:if(_V.print("publish","Invoke publish"),!this._room||this._room.connectionState!==iP.CONNECTED)throw new nC(eC.PUBLISH_BEFORE_JOIN,"join first");return[4,this._updatePublish()];case 1:return e.sent(),[2]}}))}))},t.prototype.unpublish=function(){return S(this,void 0,void 0,(function(){var e,t;return b(this,(function(n){switch(n.label){case 0:if(_V.print("unpublish","Invoke unpublish"),!this._room)throw new nC(eC.UNPUBLISH_BEFORE_JOIN,"join first");return[4,this._pubLock.lock()];case 1:e=n.sent(),n.label=2;case 2:return n.trys.push([2,4,5,6]),[4,this._room.unpublish()];case 3:return n.sent(),[3,6];case 4:throw(t=n.sent())instanceof nC?t:new nC(eC.UNEXPECTED_ERROR,"unexpected error",t);case 5:return e(),[7];case 6:return[2]}}))}))},t.prototype.subscribeUserStream=function(e,t,n,r){var i,o,a,s;return void 0===n&&(n=h.STREAM_INDEX_MAIN),void 0===r&&(r={videoIndex:0}),S(this,void 0,void 0,(function(){var u,d,l,f,_,v;return b(this,(function(m){switch(m.label){case 0:if(_V.print("subscribeStream","Invoke subscribeStream: ",e,t,n,r),oC(e,"userId"),aC(t,"mediaType",[p.AUDIO_AND_VIDEO,p.AUDIO_ONLY,p.VIDEO_ONLY,p.NONE]),aC(n,"streamType",[h.STREAM_INDEX_MAIN,h.STREAM_INDEX_SCREEN]),iC(r.videoIndex,"config.videoIndex",0,2),!this._room||this._room.connectionState!==iP.CONNECTED)throw new nC(eC.SUBSCRIBE_BEFORE_JOIN,"join first");if(u=this._room.remoteStreams.get(e),l=n===h.STREAM_INDEX_SCREEN,!(d=l?null==u?void 0:u.find((function(e){return e.isScreen})):null==u?void 0:u.find((function(e){return!e.isScreen}))))throw new nC(eC.STREAM_NOT_EXIST,"stream not exist");m.label=1;case 1:return m.trys.push([1,3,,4]),f=t,this._pauseAllSubscribeState.audio&&this._pauseAllSubscribeState.video?t=p.NONE:this._pauseAllSubscribeState.audio&&!this._pauseAllSubscribeState.video?t===p.AUDIO_AND_VIDEO?t=p.VIDEO_ONLY:t===p.AUDIO_ONLY&&(t=p.NONE):!this._pauseAllSubscribeState.audio&&this._pauseAllSubscribeState.video&&(t===p.AUDIO_AND_VIDEO?t=p.AUDIO_ONLY:t===p.VIDEO_ONLY&&(t=p.NONE)),t!==f&&_V.print("subscribeUserStream","due to pauseAllState change sub mediaType from ".concat(f," to ").concat(t)),[4,this._room.subscribe(d,t,r)];case 2:return m.sent(),this._updateVideoPlayerState(d),this._updateAudioPlayerState(d),((null===(i=this._roomConfig)||void 0===i?void 0:i.isAutoSubscribeAudio)||(null===(o=this._roomConfig)||void 0===o?void 0:o.isAutoSubscribeVideo))&&(d.audioTrack||d.videoTrack)&&(v={userId:e,isScreen:l,state:c.SUBSCRIBE_SUCC},this.safeEmit(O.onAutoSubscribeResult,v)),[3,4];case 3:throw _=m.sent(),((null===(a=this._roomConfig)||void 0===a?void 0:a.isAutoSubscribeAudio)||(null===(s=this._roomConfig)||void 0===s?void 0:s.isAutoSubscribeVideo))&&(v={userId:e,isScreen:l,state:c.SUBSCRIBE_FAIL},this.safeEmit(O.onAutoSubscribeResult,v)),_;case 4:return[2]}}))}))},t.prototype.unSubscribe=function(e,t){return S(this,void 0,void 0,(function(){var n,r;return b(this,(function(i){switch(i.label){case 0:if(_V.print("unSubscribe","Invoke unSubscribe"),oC(e,"userId"),rC(t,"isScreen"),!this._room||this._room.connectionState!==iP.CONNECTED)throw new nC(eC.SUBSCRIBE_BEFORE_JOIN,"join first");if(n=this._room.remoteStreams.get(e),!(r=t?null==n?void 0:n.find((function(e){return e.isScreen})):null==n?void 0:n.find((function(e){return!e.isScreen}))))throw new nC(eC.STREAM_NOT_EXIST,"stream not exist");return[4,this._room.unsubscribe(r)];case 1:return i.sent(),this._updateAudioPlayerState(r),this._updateVideoPlayerState(r),[2]}}))}))},t.prototype.startVideoCapture=function(e){return S(this,void 0,void 0,(function(){var t,n,r;return b(this,(function(i){switch(i.label){case 0:if(_V.print("startVideoCapture","Invoke startVideoCapture: ",e),uC(e)||oC(e,"deviceId"),this._localVideoTrack)throw new nC(eC.REPEAT_CAPTURE,"Has already capture");return t=this._videoStreamConstraints,e&&(t.deviceId={exact:e},this._videoStreamConstraints=t),[4,OM(t)];case 1:return n=i.sent(),this._initLocalTrackEvents(n),this._localVideoTrack=n,this._videoPlayer&&this._videoPlayer.playVideo(n),this._room?(r=this._room._roomConfig.isAutoPublish,this._room.hasPublished||r?[4,this._updatePublish()]:[3,3]):[2];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.stopVideoCapture=function(){var e;return S(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:if(_V.print("stopVideoCapture","Invoke stopVideoCapture"),this._trackSourceType.video===r.VIDEO_SOURCE_TYPE_EXTERNAL)throw new nC(eC.STREAM_TYPE_NOT_MATCH,"setVideoSourceType as internal first");return this._videoPlayer&&this._videoPlayer.stop(),null===(e=this._localVideoTrack)||void 0===e||e.close(),this._localVideoTrack=void 0,this._room?this._room.hasPublished?[4,this._updatePublish()]:[3,2]:[2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.startAudioCapture=function(e){return S(this,void 0,void 0,(function(){var t,n,r;return b(this,(function(i){switch(i.label){case 0:if(_V.print("startAudioCapture","Invoke startAudioCapture: ",e),uC(e)||oC(e,"deviceId"),this._localAudioTrack)throw new nC(eC.REPEAT_CAPTURE,"Has already capture");return t=this._audioStreamConstraints,e&&(t.deviceId={exact:e},this._audioStreamConstraints=t),[4,NM(t)];case 1:return n=i.sent(),this._initLocalTrackEvents(n),this._localAudioTrack=n,this._room?(r=this._room._roomConfig.isAutoPublish,this._room.hasPublished||r?[4,this._updatePublish()]:[3,3]):[2];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.stopAudioCapture=function(){var e;return S(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:if(_V.print("stopAudioCapture","Invoke stopAudioCapture"),null===(e=this._localAudioTrack)||void 0===e||e.close(),this._localAudioTrack=void 0,this._trackSourceType.audio===i.AUDIO_SOURCE_TYPE_EXTERNAL)throw new nC(eC.STREAM_TYPE_NOT_MATCH,"setAudioSourceType as internal first");return this._room?this._room.hasPublished?[4,this._updatePublish()]:[3,2]:[2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.getAudioMixingManager=function(){return this._audioMixingManager},t.prototype.startScreenCapture=function(e){var t,n;return void 0===e&&(e={}),S(this,void 0,void 0,(function(){var o,a,s,c;return b(this,(function(u){switch(u.label){case 0:if(_V.print("startScreenCapture","Invoke startScreenCapture"),null===(t=this._localScreenVideoTrack)||void 0===t||t.close(),this._localScreenVideoTrack=void 0,o=e.enableAudio,a=void 0!==o&&o,this._trackSourceType.screenVideo===r.VIDEO_SOURCE_TYPE_EXTERNAL)throw new nC(eC.STREAM_TYPE_NOT_MATCH,"setVideoSourceType as internal first");if(this._trackSourceType.screenAudio===i.AUDIO_SOURCE_TYPE_EXTERNAL)throw new nC(eC.STREAM_TYPE_NOT_MATCH,"setAudioSourceType as internal first");return[4,kM(a)];case 1:return s=u.sent(),this._localScreenVideoTrack=new RM(s.getVideoTracks()[0],Hk()),(c=s.getAudioTracks()).length&&(this._localScreenAudioTrack=new IM(c[0],Hk())),null===(n=this._screenPlayer)||void 0===n||n.playVideo(this._localScreenVideoTrack),[2]}}))}))},t.prototype.stopScreenCapture=function(){var e,t,n;return S(this,void 0,void 0,(function(){return b(this,(function(r){return _V.print("stopScreenCapture","Invoke stopCapture"),null===(e=this._screenPlayer)||void 0===e||e.stop(),null===(t=this._localScreenVideoTrack)||void 0===t||t.close(),this._localScreenVideoTrack=void 0,null===(n=this._localScreenAudioTrack)||void 0===n||n.close(),this._localScreenAudioTrack=void 0,[2]}))}))},t.prototype.publishScreen=function(){return S(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:if(_V.print("publishScreen","Invoke publishScreen"),!this._room||this._room.connectionState!==iP.CONNECTED)throw new nC(eC.PUBLISH_BEFORE_JOIN,"join first");if(!this._visibility)throw new nC(eC.NO_PUBLISH_PERMISSION,"no publish permission");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._room.publishScreen(this._screenStreamEncodeConfig,this._localScreenVideoTrack,this._localScreenAudioTrack)];case 2:return t.sent(),[3,4];case 3:throw(e=t.sent())instanceof nC?e:new nC(eC.UNEXPECTED_ERROR,"unexpected error",e);case 4:return[2]}}))}))},t.prototype.unpublishScreen=function(){return S(this,void 0,void 0,(function(){var e;return b(this,(function(t){switch(t.label){case 0:if(_V.print("unpublishScreen","Invoke unpublishScreen"),!this._room)throw new nC(eC.UNPUBLISH_BEFORE_JOIN,"join first");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._room.unpublishScreen()];case 2:return t.sent(),[3,4];case 3:throw(e=t.sent())instanceof nC?e:new nC(eC.UNEXPECTED_ERROR,"unexpected error",e);case 4:return[2]}}))}))},t.prototype.setLocalVideoPlayer=function(e,t){var n,r;_V.print("setLocalVideoPlayer","Invoke setLocalVideoPlayer: ",e,t),aC(e,"streamIndex",[h.STREAM_INDEX_MAIN,h.STREAM_INDEX_SCREEN]),t?(lC(t),e==h.STREAM_INDEX_MAIN?(this._videoPlayer=new YM(t),this._initPlayerEvents(this._videoPlayer),this._localVideoTrack&&this._videoPlayer.playVideo(this._localVideoTrack),this._videoPlayer.mirror(!!this._mirrorType)):(t.isScreen=!0,this._screenPlayer=new YM(t),this._initPlayerEvents(this._screenPlayer),this._localScreenVideoTrack&&this._screenPlayer.playVideo(this._localScreenVideoTrack))):e==h.STREAM_INDEX_MAIN?(null===(n=this._videoPlayer)||void 0===n||n.stop(),delete this._videoPlayer):(null===(r=this._screenPlayer)||void 0===r||r.stop(),delete this._screenPlayer)},t.prototype.startLiveTranscoding=function(e){var t;return S(this,void 0,void 0,(function(){var n;return b(this,(function(r){switch(r.label){case 0:_V.print("startLiveTranscoding","Invoke startLiveTranscoding: ",e),oC(e.url,"liveTranscode.url"),this._liveTranscodeConfig=e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,null===(t=this._room)||void 0===t?void 0:t.controlMessage(uI("started",this._liveTranscodeConfig))];case 2:return r.sent(),[3,4];case 3:throw(n=r.sent())instanceof nC?n:new nC(eC.UNEXPECTED_ERROR,"unexpected error",n);case 4:return[2]}}))}))},t.prototype.updateLiveTranscoding=function(e){var t;return S(this,void 0,void 0,(function(){var n;return b(this,(function(r){switch(r.label){case 0:if(_V.print("updateLiveTranscoding","Invoke updateLiveTranscoding: ",e),!this._liveTranscodeConfig)return[2];this._liveTranscodeConfig=qM.exports.assignIn(this._liveTranscodeConfig,e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,null===(t=this._room)||void 0===t?void 0:t.controlMessage(uI("layoutChanged",this._liveTranscodeConfig))];case 2:return r.sent(),[3,4];case 3:throw(n=r.sent())instanceof nC?n:new nC(eC.UNEXPECTED_ERROR,"unexpected error",n);case 4:return[2]}}))}))},t.prototype.stopLiveTranscoding=function(){var e;return S(this,void 0,void 0,(function(){var t;return b(this,(function(n){switch(n.label){case 0:if(_V.print("stopLiveTranscoding","Invoke stopLiveTranscoding"),!this._liveTranscodeConfig)return[2];delete this._liveTranscodeConfig,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null===(e=this._room)||void 0===e?void 0:e.controlMessage({action:"stopped",type:"transcode"})];case 2:return n.sent(),[3,4];case 3:throw(t=n.sent())instanceof nC?t:new nC(eC.UNEXPECTED_ERROR,"unexpected error",t);case 4:return[2]}}))}))},t.prototype.setBusinessId=function(e){if(_V.print("setBusinessId","Invoke setBusinessId: ",e),function(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \_\-\@]{1,128}$/.test(e))throw new nC(eC.INVALID_PARAMS,"The businessId must be within 128 bytes. The supported characters: a-z,A-Z,0-9,@,-,_")}(e),this._room)throw new nC(eC.ALREADY_IN_ROOM,"You should invoke setBusinessId before joinRoom");this._businessId=e},t.prototype.setUserVisibility=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:if(_V.print("setUserVisibility","Invoke setUserVisibility: ",e),e=!!e,this._visibility===e)return[2];if(!this._room)return this._visibility=e,[2];if(this._room.connectionState!==iP.CONNECTED)throw new nC(eC.NOT_CONNECTED_YET,"server not connected");return!e?[4,this._room.unpublish()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,this._room.updateUserAttributes({role:e?hV.NORMAL_USER:hV.SILENT_USER})];case 3:return t.sent(),this._visibility=e,[2]}}))}))},t.prototype._initPlayerEvents=function(e){var t=this;e.on("playback_event",(function(n){var r,i;switch(n.eventName){case"timeupdate":return;case"loadeddata":if("audio"===n.type)t.safeEmit(O.onAudioFirstFrameDecoded,{userId:e.userId}),Nk.firstRemoteAudioRender("","");else{var o={userId:e.userId,height:(null===(r=e.domElement)||void 0===r?void 0:r.videoHeight)||0,width:(null===(i=e.domElement)||void 0===i?void 0:i.videoWidth)||0};t.safeEmit(O.onVideoFirstFrameRendered,o),Nk.firstRemoteVideoRender("","")}break;case"autoplay-error":return void t.safeEmit(O.onAutoplayFailed,n)}t.safeEmit(O.onPlayerEvent,n)}))},t.prototype._initLocalTrackEvents=function(e){var t=this;e.on("track-ended",(function(e){var n=!1;e!==t._localScreenAudioTrack&&e!==t._localScreenVideoTrack||(n=!0),t.safeEmit(O.onTrackEnded,{kind:e.getTrack().kind,isScreen:n})}))},t.prototype.setRemoteVideoPlayer=function(e,t){var n,r,i,o;_V.print("setRemoteVideoPlayer","Invoke setRemoteVideoPlayer: ",e,t),aC(e,"streamIndex",[h.STREAM_INDEX_MAIN,h.STREAM_INDEX_SCREEN]),lC(t);var a=t.userId;if(e==h.STREAM_INDEX_MAIN){var s=new YM(t);this._initPlayerEvents(s),this._remoteVideoPlayer.set(a,s),(c=null===(r=null===(n=this._room)||void 0===n?void 0:n.remoteStreams.get(a))||void 0===r?void 0:r.find((function(e){return!e.isScreen})))&&this._updateVideoPlayerState(c)}else{t.isScreen=!0;var c;s=new YM(t);this._remoteScreenPlayer.set(a,s),this._initPlayerEvents(s),(c=null===(o=null===(i=this._room)||void 0===i?void 0:i.remoteStreams.get(a))||void 0===o?void 0:o.find((function(e){return e.isScreen})))&&this._updateVideoPlayerState(c)}},t.prototype.setLocalVideoMirrorType=function(e){aC(e,"mirrorType",[m.MIRROR_TYPE_NONE,m.MIRROR_TYPE_RENDER]),_V.print("setLocalVideoMirrorType","Invoke setLocalVideoMirrorType: ",e),this._mirrorType=e,this._videoPlayer&&this._videoPlayer.mirror(!!e)},t.prototype.setAudioPlaybackDevice=function(e){var t;return S(this,void 0,void 0,(function(){var n;return b(this,(function(r){switch(r.label){case 0:return _V.print("setAudioPlaybackDevice","Invoke setAudioPlaybackDevice: ",e),oC(e,"deviceId"),void 0===HTMLAudioElement.prototype.setSinkId?(_V.print("setAudioPlaybackDevice failed","setSinkId not supported by current browser"),[2]):[4,uM.getDeviceById(e)];case 1:if(!(n=r.sent()))throw new nC(eC.INVALID_DEVICE_ID,"audio playback device id ".concat(e," is invalid"));return this._remoteAudioPlayer.forEach((function(t){t.setPlaybackDevice(e)})),null===(t=this._audioPlayer)||void 0===t||t.setPlaybackDevice(e),n&&this.safeEmit(O.onAudioPlaybackDeviceChanged,n),Nk.rtcAudioDevice(GN.PLAYOUT_DEVICE_SWITCH,e,0),[2]}}))}))},t.prototype.play=function(e){return S(this,void 0,void 0,(function(){var t;return b(this,(function(n){if(_V.print("play","Invoke play: ",e),oC(e,"userId"),(t=this._remoteAudioPlayer.get(e))||(t=this._audioPlayer),!t)throw new nC(eC.INVALID_PARAMS,"Player not found");return[2,t.manuallyPlay()]}))}))},t.prototype.muteLocalAudio=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){if(_V.print("muteLocalAudio","Invoke muteLocalAudio: ",e),aC(e,"muteState",[s.MUTE_STATE_OFF,s.MUTE_STATE_ON]),!this._room)throw new nC(eC.UNPUBLISH_BEFORE_JOIN,"join first");return[2,this._room.muteLocalTrack("audio",e)]}))}))},t.prototype.muteLocalVideo=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){if(_V.print("muteLocalVideo","Invoke muteLocalVideo: ",e),aC(e,"muteState",[s.MUTE_STATE_OFF,s.MUTE_STATE_ON]),!this._room)throw new nC(eC.UNPUBLISH_BEFORE_JOIN,"join first");return[2,this._room.muteLocalTrack("video",e)]}))}))},t.prototype.pauseAllSubscribedStream=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){if(!this._room||this._room.connectionState!==iP.CONNECTED)throw new nC(eC.REFUSE_OPERATION_IN_DISCONNECT,"Refuse all operation in disconnect");return _V.print("pauseAllSubscribedStream","".concat(e)),aC(e,"mediaType",[l.RTC_PAUSE_RESUME_CONTROL_AUDIO,l.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO,l.RTC_PAUSE_RESUME_CONTROL_VIDEO]),this._pauseAllSubscribeState.audio&&this._pauseAllSubscribeState.video?[2,Promise.resolve()]:(e===l.RTC_PAUSE_RESUME_CONTROL_AUDIO?this._pauseAllSubscribeState.audio=!0:e===l.RTC_PAUSE_RESUME_CONTROL_VIDEO?this._pauseAllSubscribeState.video=!0:e===l.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO&&(this._pauseAllSubscribeState.audio=!0,this._pauseAllSubscribeState.video=!0),this._room?[2,this._room.pauseAllSubscribedStream(e).then((function(){}))]:[2,Promise.resolve()])}))}))},t.prototype.resumeAllSubscribedStream=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){return _V.print("resumeAllSubscribedStream","".concat(e)),aC(e,"mediaType",[l.RTC_PAUSE_RESUME_CONTROL_AUDIO,l.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO,l.RTC_PAUSE_RESUME_CONTROL_VIDEO]),this._pauseAllSubscribeState.audio||this._pauseAllSubscribeState.video?(e===l.RTC_PAUSE_RESUME_CONTROL_AUDIO?this._pauseAllSubscribeState.audio=!1:e===l.RTC_PAUSE_RESUME_CONTROL_VIDEO?this._pauseAllSubscribeState.video=!1:e===l.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO&&(this._pauseAllSubscribeState.audio=!1,this._pauseAllSubscribeState.video=!1),this._room?[2,this._room.resumeAllSubscribedStream(e).then((function(){}))]:[2,Promise.resolve()]):[2,Promise.resolve()]}))}))},t.prototype.sendUserMessage=function(e,t){return S(this,void 0,void 0,(function(){return b(this,(function(n){if(oC(e,"userId",1,128),fC(t),!this._room||this._room.connectionState!==iP.CONNECTED)throw new nC(eC.IM_BEFORE_JOIN,"join first");return[2,this._room.sendUserMessage(e,t)]}))}))},t.prototype.sendUserBinaryMessage=function(e,t){return S(this,void 0,void 0,(function(){return b(this,(function(n){if(oC(e,"userId",1,128),function(e,t){if(!(e instanceof ArrayBuffer))throw new nC(eC.INVALID_PARAMS,"Invalid ".concat(t,", should be ArrayBuffer"))}(t,"message"),fC(t),!this._room||this._room.connectionState!==iP.CONNECTED)throw new nC(eC.IM_BEFORE_JOIN,"join first");return[2,this._room.sendUserMessage(e,t)]}))}))},t.prototype.sendRoomMessage=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){if(fC(e),!this._room||this._room.connectionState!==iP.CONNECTED)throw new nC(eC.IM_BEFORE_JOIN,"join first");return[2,this._room.sendRoomMessage(e)]}))}))},t.prototype.sendRoomBinaryMessage=function(e){return S(this,void 0,void 0,(function(){return b(this,(function(t){if(fC(e),!this._room||this._room.connectionState!==iP.CONNECTED)throw new nC(eC.IM_BEFORE_JOIN,"join first");return[2,this._room.sendRoomMessage(e,!0)]}))}))},t.prototype.setAudioCaptureConfig=function(e){var t;return void 0===e&&(e={}),S(this,void 0,void 0,(function(){var n;return b(this,(function(r){switch(r.label){case 0:return _V.print("setAudioCaptureConfig","Invoke setAudioCaptureConfig: ",e),delete e.deviceId,cC(e),n=this._audioStreamConstraints.deviceId,this._audioStreamConstraints=e,n&&(this._audioStreamConstraints.deviceId=n),this._localAudioTrack?(this._localAudioTrack.audioCaptureConfig=this._audioStreamConstraints,[4,null===(t=this._localAudioTrack)||void 0===t?void 0:t.updateAudioCaptureConfig()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.setVideoCaptureConfig=function(e){var t;return void 0===e&&(e={}),S(this,void 0,void 0,(function(){var n;return b(this,(function(r){switch(r.label){case 0:return _V.print("setVideoCaptureConfig","Invoke setVideoCaptureConfig: ",e),delete e.deviceId,cC(e),n=this._videoStreamConstraints.deviceId,this._videoStreamConstraints=e,n&&(this._videoStreamConstraints.deviceId=n),this._localVideoTrack?(this._localVideoTrack.videoCaptureConfig=this._videoStreamConstraints,[4,null===(t=this._localVideoTrack)||void 0===t?void 0:t.updateVideoCaptureConfig()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.setVideoEncoderConfig=function(e,t){var n,r,i,o,a,s,c,u;return S(this,void 0,void 0,(function(){return b(this,(function(d){if(_V.print("setVideoEncoderConfig","streamIndex: ".concat(e,", descriptions: "),t),aC(e,"streamIndex",[h.STREAM_INDEX_MAIN,h.STREAM_INDEX_SCREEN]),function(e,t){if(!Array.isArray(e))throw new nC(eC.INVALID_PARAMS,"Invalid ".concat(t,", should be array"))}(t,"descriptions"),t.length>3&&(t=t.slice(0,3)),t.sort((function(e,t){return t.maxKbps-e.maxKbps})),e===h.STREAM_INDEX_MAIN){if(null===(r=null===(n=this._room)||void 0===n?void 0:n.localStream)||void 0===r?void 0:r.hasPublished){if(1!==this._videoStreamEncodeConfig.length||1!==(null==t?void 0:t.length))throw new nC(eC.INVALID_PARAMS,"After publishing, only non simulcast streams can be modified");null===(o=null===(i=this._room)||void 0===i?void 0:i.localStream)||void 0===o||o.updateVideoBitrate(t)}this._videoStreamEncodeConfig=t}else{if(null===(s=null===(a=this._room)||void 0===a?void 0:a.localScreenStream)||void 0===s?void 0:s.hasPublished){if(1!==this._screenStreamEncodeConfig.length||1!==(null==t?void 0:t.length))throw new nC(eC.INVALID_PARAMS,"After publishing, only non simulcast streams can be modified");null===(u=null===(c=this._room)||void 0===c?void 0:c.localScreenStream)||void 0===u||u.updateVideoBitrate([t[0]])}this._screenStreamEncodeConfig=t}return[2]}))}))},t.prototype.sendSEIMessage=function(e,t,n){var r,i,o,a,s,c;aC(e,"streamIndex",[h.STREAM_INDEX_MAIN,h.STREAM_INDEX_SCREEN]),iC(n,"repeatCount",0,30);var u="string"==typeof t?new Uint8Array(Wk.str2ab(t)):t;if(t.length){var d;if(e===h.STREAM_INDEX_MAIN){if(!(null===(i=null===(r=this._room)||void 0===r?void 0:r.localStream)||void 0===i?void 0:i.hasPublished))return;d=null===(o=this._room)||void 0===o?void 0:o.localStream}else{if(!(null===(s=null===(a=this._room)||void 0===a?void 0:a.localScreenStream)||void 0===s?void 0:s.hasPublished))return;d=null===(c=this._room)||void 0===c?void 0:c.localScreenStream}if(u.byteLength>4096)_V.print("sei size must not bigger than 4KB");else{var l=Hk();d.seiList.push({content:u,uuid:l,repeatCount:n}),setTimeout((function(){if(d){var e=d.seiList.findIndex((function(e){return e.uuid===l}));e&&d.seiList.splice(e,1)}}),2e3)}}else _V.print("sei message must not be empty")},t.prototype.setAudioVolumeIndicationInterval=function(e){var t=this;_V.print("setAudioVolumeIndicationInterval","interval: ".concat(e)),("number"!=typeof e||e<200)&&(e=200);var n=[];this._audioVolumeIndicationTimer&&clearInterval(this._audioVolumeIndicationTimer),this._audioVolumeIndicationTimer=setInterval((function(){var e,r,i,o;n=[],null===(e=t._room)||void 0===e||e.remoteStreams.forEach((function(e,t){var r,i,o=null===(i=null===(r=e[0])||void 0===r?void 0:r.audioTrack)||void 0===i?void 0:i.getAudioLevel();n.push({userId:t,volume:o||0})}));var a=null===(r=t._localAudioTrack)||void 0===r?void 0:r.getAudioLevel();n.push({userId:(null===(o=null===(i=t._room)||void 0===i?void 0:i._roomInfo)||void 0===o?void 0:o.userInfo.userId)||"local_user",volume:a||0}),t.safeEmit(O.onAudioVolumeIndication,{speakers:n})}),e)},t.prototype.setVideoSourceType=function(e,t){var n,i,o,a,s;return S(this,void 0,void 0,(function(){var c,u;return b(this,(function(d){switch(d.label){case 0:return _V.print("setVideoSourceType","Invoke setVideoSourceType: ",e,t),aC(e,"streamIndex",[h.STREAM_INDEX_MAIN,h.STREAM_INDEX_SCREEN]),aC(t,"VideoSourceType",[r.VIDEO_SOURCE_TYPE_EXTERNAL,r.VIDEO_SOURCE_TYPE_INTERNAL]),c=e===h.STREAM_INDEX_MAIN?"video":"screenVideo",this._trackSourceType[c]===t?[3,4]:(this._trackSourceType[c]=t,_V.print("setVideoSourceType","set ".concat(c," source type to ").concat(t)),this._localVideoTrack&&e===h.STREAM_INDEX_MAIN?(t===r.VIDEO_SOURCE_TYPE_EXTERNAL&&this._localVideoTrack.close(),null===(n=this._videoPlayer)||void 0===n||n.stop(),this._localVideoTrack,u=null===(i=this._room)||void 0===i?void 0:i._roomConfig.isAutoPublish,(null===(o=this._room)||void 0===o?void 0:o.hasPublished)||u?[4,this._updatePublish()]:[3,2]):[3,2]);case 1:d.sent(),d.label=2;case 2:return this._localScreenVideoTrack&&e===h.STREAM_INDEX_SCREEN?(t===r.VIDEO_SOURCE_TYPE_EXTERNAL&&this._localScreenVideoTrack.close(),null===(a=this._screenPlayer)||void 0===a||a.stop(),this._localScreenVideoTrack,(null===(s=this._room)||void 0===s?void 0:s.hasScreenPublished)?[4,this._updateScreenPublish()]:[3,4]):[3,4];case 3:d.sent(),d.label=4;case 4:return[2]}}))}))},t.prototype.setExternalVideoTrack=function(e,t){var n,i,o,a,s;return S(this,void 0,void 0,(function(){var c;return b(this,(function(u){switch(u.label){case 0:if(_V.print("setExternalVideoTrack","Invoker setExternalVideoTrack: ",e,t),aC(e,"streamIndex",[h.STREAM_INDEX_MAIN,h.STREAM_INDEX_SCREEN]),e!==h.STREAM_INDEX_MAIN)return[3,2];if(this._trackSourceType.video!==r.VIDEO_SOURCE_TYPE_EXTERNAL)throw new nC(eC.STREAM_TYPE_NOT_MATCH,"setVideoSourceType as external first");return this._localVideoTrack=new AM(t,Hk()),this._initLocalTrackEvents(this._localVideoTrack),null===(n=this._videoPlayer)||void 0===n||n.playVideo(this._localVideoTrack),c=null===(i=this._room)||void 0===i?void 0:i._roomConfig.isAutoPublish,(null===(o=this._room)||void 0===o?void 0:o.hasPublished)||c?[4,this._updatePublish()]:[3,2];case 1:u.sent(),u.label=2;case 2:if(e!==h.STREAM_INDEX_SCREEN)return[3,4];if(this._trackSourceType.screenVideo!==r.VIDEO_SOURCE_TYPE_EXTERNAL)throw new nC(eC.STREAM_TYPE_NOT_MATCH,"setVideoSourceType as external first");return this._localScreenVideoTrack=new AM(t,Hk()),this._initLocalTrackEvents(this._localScreenVideoTrack),null===(a=this._screenPlayer)||void 0===a||a.playVideo(this._localScreenVideoTrack),(null===(s=this._room)||void 0===s?void 0:s.hasScreenPublished)?[4,this._updateScreenPublish()]:[3,4];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},t.prototype.setAudioSourceType=function(e,t){var n,r,o;return S(this,void 0,void 0,(function(){var a,s;return b(this,(function(c){switch(c.label){case 0:return _V.print("setAudioSourceType","Invoke setAudioSourceType: ",e,t),aC(e,"streamIndex",[h.STREAM_INDEX_MAIN,h.STREAM_INDEX_SCREEN]),aC(t,"audioSourceType",[i.AUDIO_SOURCE_TYPE_EXTERNAL,i.AUDIO_SOURCE_TYPE_INTERNAL]),a=e===h.STREAM_INDEX_MAIN?"audio":"screenAudio",this._trackSourceType[a]===t?[3,4]:(this._trackSourceType[a]=t,_V.print("setVideoSourceType","set ".concat(a," source type to ").concat(t)),this._localAudioTrack&&e===h.STREAM_INDEX_MAIN?(this._trackSourceType.audio===i.AUDIO_SOURCE_TYPE_EXTERNAL&&this._localAudioTrack.close(),this._localAudioTrack,s=null===(n=this._room)||void 0===n?void 0:n._roomConfig.isAutoPublish,(null===(r=this._room)||void 0===r?void 0:r.hasPublished)||s?[4,this._updatePublish()]:[3,2]):[3,2]);case 1:c.sent(),c.label=2;case 2:return this._localScreenAudioTrack&&e===h.STREAM_INDEX_SCREEN?(this._trackSourceType.audio===i.AUDIO_SOURCE_TYPE_EXTERNAL&&this._localScreenAudioTrack.close(),this._localScreenAudioTrack,(null===(o=this._room)||void 0===o?void 0:o.hasScreenPublished)?[4,this._updateScreenPublish()]:[3,4]):[3,4];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))},t.prototype.setExternalAudioTrack=function(e,t){var n,r,o;return S(this,void 0,void 0,(function(){var a;return b(this,(function(s){switch(s.label){case 0:if(_V.print("setExternalAudioTrack","Invoker setExternalAudioTrack: ",e,t),aC(e,"streamIndex",[h.STREAM_INDEX_MAIN,h.STREAM_INDEX_SCREEN]),e!==h.STREAM_INDEX_MAIN)return[3,2];if(this._trackSourceType.audio!==i.AUDIO_SOURCE_TYPE_EXTERNAL)throw new nC(eC.STREAM_TYPE_NOT_MATCH,"setAudioSourceType as external first");return this._localAudioTrack=new wM(t,Hk()),this._initLocalTrackEvents(this._localAudioTrack),a=null===(n=this._room)||void 0===n?void 0:n._roomConfig.isAutoPublish,(null===(r=this._room)||void 0===r?void 0:r.hasPublished)||a?[4,this._updatePublish()]:[3,2];case 1:s.sent(),s.label=2;case 2:if(e!==h.STREAM_INDEX_SCREEN)return[3,4];if(this._trackSourceType.screenAudio!==i.AUDIO_SOURCE_TYPE_EXTERNAL)throw new nC(eC.STREAM_TYPE_NOT_MATCH,"setAudioSourceType as external first");return this._localScreenAudioTrack=new wM(t,Hk()),this._initLocalTrackEvents(this._localScreenAudioTrack),(null===(o=this._room)||void 0===o?void 0:o.hasScreenPublished)?[4,this._updateScreenPublish()]:[3,4];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))},t.prototype._updatePublish=function(){return S(this,void 0,void 0,(function(){var e,t;return b(this,(function(n){switch(n.label){case 0:if(!this._visibility)throw new nC(eC.NO_PUBLISH_PERMISSION,"no publish permission");return[4,this._pubLock.lock()];case 1:if(e=n.sent(),!this._room||this._room.connectionState!==iP.CONNECTED)return e(),[2];n.label=2;case 2:return n.trys.push([2,4,5,6]),[4,this._room.publish(this._videoStreamEncodeConfig,this._localVideoTrack,this._localAudioTrack)];case 3:return n.sent(),[3,6];case 4:throw(t=n.sent())instanceof nC?t:new nC(eC.UNEXPECTED_ERROR,"unexpected error",t);case 5:return e(),[7];case 6:return[2]}}))}))},t.prototype._updateScreenPublish=function(){return S(this,void 0,void 0,(function(){var e,t;return b(this,(function(n){switch(n.label){case 0:return[4,this._pubLock.lock()];case 1:if(e=n.sent(),!this._room||this._room.connectionState!==iP.CONNECTED)return e(),[2];n.label=2;case 2:return n.trys.push([2,4,5,6]),[4,this._room.publishScreen(this._screenStreamEncodeConfig,this._localScreenVideoTrack,this._localScreenAudioTrack)];case 3:return n.sent(),[3,6];case 4:throw(t=n.sent())instanceof nC?t:new nC(eC.UNEXPECTED_ERROR,"unexpected error",t);case 5:return e(),[7];case 6:return[2]}}))}))},t.prototype._updateAudioPlayerState=function(e){var t,n=e.userId,r=e.isScreen;if(t=r?this._remoteAudioPlayer.get("".concat(n,"_screen")):this._remoteAudioPlayer.get(n),e.audioTrack){if(!t){var i=r?"".concat(n,"_screen"):n;t=new KM(i),this._initPlayerEvents(t),this._remoteAudioPlayer.set(i,t)}t.playAudio(e.audioTrack)}else(null==t?void 0:t.isPlaying)&&t.stop()},t.prototype._updateVideoPlayerState=function(e){var t,n=e.userId;t=e.isScreen?this._remoteScreenPlayer.get(n):this._remoteVideoPlayer.get(n),e.videoTrack?t&&t.playVideo(e.videoTrack,e):(null==t?void 0:t.isPlaying)&&t.stop()},t.prototype._onAddStream=function(e){var t,n,r,i,o=e.stream,a={userId:o.userId,isScreen:o.isScreen,hasVideo:o.hasVideo,hasAudio:o.hasAudio,videoStreamDescriptions:o.attributes.videoDescriptions};this.safeEmit(O.onStreamAdd,{stream:a});var s=null;(null===(t=this._roomConfig)||void 0===t?void 0:t.isAutoSubscribeAudio)&&(s=p.AUDIO_ONLY),(null===(n=this._roomConfig)||void 0===n?void 0:n.isAutoSubscribeVideo)&&(s=p.VIDEO_ONLY),(null===(r=this._roomConfig)||void 0===r?void 0:r.isAutoSubscribeVideo)&&(null===(i=this._roomConfig)||void 0===i?void 0:i.isAutoSubscribeAudio)&&(s=p.AUDIO_AND_VIDEO),_V.print("_onAddStream","autoSubType: ".concat(s)),null===s||o.isScreen||this.subscribeUserStream(o.userId,s)},t.prototype._onRemoveStream=function(e){var t=e.stream,n={userId:t.userId,isScreen:t.isScreen,hasVideo:t.hasVideo,hasAudio:t.hasAudio,videoStreamDescriptions:[]},r=mV[e.reason]||_.STREAM_REMOVE_REASON_OTHER;this.safeEmit(O.onStreamRemove,{stream:n,reason:r})},t.prototype._onUserConnection=function(e){this.safeEmit(O.onUserJoined,e)},t.prototype._onUserDisconnection=function(e){this.safeEmit(O.onUserLeave,e),"userDuplicateLogin"===(null==e?void 0:e.reason)&&this.safeEmit(O.onError,{errorCode:eC.DUPLICATE_LOGIN})},t.prototype._onConnectionStateChange=function(e){this.safeEmit(O.onConnectionStateChanged,e)},t.prototype._onResubscribe=function(e){e.stream&&(this._updateAudioPlayerState(e.stream),this._updateVideoPlayerState(e.stream))},t.prototype._onSubscribePushTrack=function(e){e.stream&&this._updateAudioPlayerState(e.stream)},t.prototype._onRemovePushTrack=function(e){e.stream&&this._updateAudioPlayerState(e.stream)},t.prototype._onVideoFirstFrameDecoded=function(e){this.safeEmit(O.onVideoFirstFrameDecoded,e)},t.prototype._onDeviceStateChange=function(e){this.safeEmit(O.onMediaDeviceStateChanged,e)},t.prototype._onUserMuteAudio=function(e){this.safeEmit(O.onUserMuteAudio,e)},t.prototype._onUserMuteVideo=function(e){this.safeEmit(O.onUserMuteVideo,e)},t.prototype._onCustomMessage=function(e){var t=e.message;e.binary?this.safeEmit(O.onRoomBinaryMessageReceived,{userId:e.clientId,message:t}):this.safeEmit(O.onRoomMessageReceived,{userId:e.clientId,message:t})},t.prototype._onUserMessageReceived=function(e){this.safeEmit(O.onUserMessageReceived,e)},t.prototype._onUserBinaryMessageReceived=function(e){this.safeEmit(O.onUserBinaryMessageReceived,e)},t.prototype._onLiveTranscodingResult=function(e){this.safeEmit(O.onLiveTranscodingResult,e)},E([kk()],t.prototype,"updateToken",null),E([kk()],t.prototype,"switchCamera",null),E([kk()],t.prototype,"switchMicrophone",null),E([kk()],t.prototype,"joinRoom",null),E([kk()],t.prototype,"leaveRoom",null),E([kk()],t.prototype,"destroy",null),E([kk()],t.prototype,"publish",null),E([kk()],t.prototype,"unpublish",null),E([kk()],t.prototype,"subscribeUserStream",null),E([kk()],t.prototype,"unSubscribe",null),E([kk()],t.prototype,"startVideoCapture",null),E([kk()],t.prototype,"stopVideoCapture",null),E([kk()],t.prototype,"startAudioCapture",null),E([kk()],t.prototype,"stopAudioCapture",null),E([kk()],t.prototype,"startScreenCapture",null),E([kk()],t.prototype,"stopScreenCapture",null),E([kk()],t.prototype,"publishScreen",null),E([kk()],t.prototype,"unpublishScreen",null),E([kk()],t.prototype,"setLocalVideoPlayer",null),E([kk()],t.prototype,"startLiveTranscoding",null),E([kk()],t.prototype,"updateLiveTranscoding",null),E([kk()],t.prototype,"stopLiveTranscoding",null),E([kk()],t.prototype,"setBusinessId",null),E([kk()],t.prototype,"setUserVisibility",null),E([kk()],t.prototype,"setRemoteVideoPlayer",null),E([kk()],t.prototype,"setLocalVideoMirrorType",null),E([kk()],t.prototype,"setAudioPlaybackDevice",null),E([kk()],t.prototype,"play",null),E([kk()],t.prototype,"muteLocalAudio",null),E([kk()],t.prototype,"muteLocalVideo",null),E([kk()],t.prototype,"pauseAllSubscribedStream",null),E([kk()],t.prototype,"resumeAllSubscribedStream",null),E([kk()],t.prototype,"sendUserMessage",null),E([kk()],t.prototype,"sendUserBinaryMessage",null),E([kk()],t.prototype,"sendRoomMessage",null),E([kk()],t.prototype,"sendRoomBinaryMessage",null),E([kk()],t.prototype,"setAudioCaptureConfig",null),E([kk()],t.prototype,"setVideoCaptureConfig",null),E([kk()],t.prototype,"setVideoEncoderConfig",null),E([kk()],t.prototype,"sendSEIMessage",null),E([kk()],t.prototype,"setAudioVolumeIndicationInterval",null),E([kk()],t.prototype,"setVideoSourceType",null),E([kk()],t.prototype,"setExternalVideoTrack",null),E([kk()],t.prototype,"setAudioSourceType",null),E([kk()],t.prototype,"setExternalAudioTrack",null),t}(EC),mV={"client unpublished":_.STREAM_REMOVE_REASON_UNPUBLISH,"publish failed":_.STREAM_REMOVE_REASON_PUBLISH_FAILED,"stream removed":_.STREAM_REMOVE_REASON_KEEP_LIVE_FAILED,"client disconnected":_.STREAM_REMOVE_REASON_CLIENT_DISCONNECTED,"client republish":_.STREAM_REMOVE_REASON_REPUBLISH},gV=new gC("VERTC",0),yV=function(e){return gV.print("createEngine","Invoke VERTC.createEngine"),oC(e,"appId"),wk.setStats({rtc_app_id:e,rtc_sdk_version:IV(),product_line:yN.RTC,report_version:EN.W_5,os:SN.WEB,device_id:oD.getDeviceId()}),Nk.sdkInitEngine(Date.now(),JN.BEGIN),new vV(e)},EV=function(e){if(gV.print("destroyEngine","Invoke VERTC.destroyEngine"),!(e instanceof vV))throw new nC(eC.INVALID_ENGINE,"Invalid engine object");e.destroy(),Nk.sdkInitEngine(Date.now(),JN.END)},SV=function(){return S(void 0,void 0,void 0,(function(){return b(this,(function(e){return[2,uM.getDevices()]}))}))},bV=function(e){return void 0===e&&(e={video:!0,audio:!0}),S(void 0,void 0,void 0,(function(){var t,n,r,i,o;return b(this,(function(a){switch(a.label){case 0:if(t=e.video,n=e.audio,r={video:!1,audio:!1},!t)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),i=r,[4,uM.getVideoPermission()];case 2:return i.video=a.sent(),[3,4];case 3:return a.sent(),[3,4];case 4:if(!n)return[3,8];a.label=5;case 5:return a.trys.push([5,7,,8]),o=r,[4,uM.getAudioPermission()];case 6:return o.audio=a.sent(),[3,8];case 7:return a.sent(),[3,8];case 8:return[2,r]}}))}))},TV=function(){return S(void 0,void 0,void 0,(function(){return b(this,(function(e){return[2,uM.getMicrophones()]}))}))},CV=function(){return S(void 0,void 0,void 0,(function(){return b(this,(function(e){return[2,uM.getCameras()]}))}))},RV=function(){return S(void 0,void 0,void 0,(function(){return b(this,(function(e){return[2,uM.getAudioPlayback()]}))}))},IV=function(){return aI.VERSION},AV=new function(){this.getSdkVersion=IV,this.createEngine=yV,this.destroyEngine=EV,this.getDevices=SV,this.enableDevices=bV,this.getMicrophones=TV,this.getCameras=CV,this.getAudioPlayback=RV,this.getParameter=cI,this.setParameter=sI,this.isSupported=BD,this.events=O,this.ErrorCode=eC};return y(y(y(y({},AV),w),N),{events:O})}));
//# sourceMappingURL=index.min.js.map
