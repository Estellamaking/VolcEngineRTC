!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).VERTC=t()}(this,(function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},t(e,n)};function n(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r,i,o,a,s,c,u,d,l,f,h,p,_,v,m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)};function g(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function y(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function S(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function T(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}!function(e){e[e.VIDEO_SOURCE_TYPE_EXTERNAL=0]="VIDEO_SOURCE_TYPE_EXTERNAL",e[e.VIDEO_SOURCE_TYPE_INTERNAL=1]="VIDEO_SOURCE_TYPE_INTERNAL"}(r||(r={})),function(e){e[e.AUDIO_SOURCE_TYPE_EXTERNAL=0]="AUDIO_SOURCE_TYPE_EXTERNAL",e[e.AUDIO_SOURCE_TYPE_INTERNAL=1]="AUDIO_SOURCE_TYPE_INTERNAL"}(i||(i={})),function(e){e[e.CHANNEL_PROFILE_COMMUNICATION=0]="CHANNEL_PROFILE_COMMUNICATION",e[e.CHANNEL_PROFILE_LIVE_BROADCASTING=1]="CHANNEL_PROFILE_LIVE_BROADCASTING"}(o||(o={})),function(e){e[e.AUTO_SUBSCRIBE_MODE=0]="AUTO_SUBSCRIBE_MODE",e[e.MANUAL_SUBSCRIBE_MODE=1]="MANUAL_SUBSCRIBE_MODE"}(a||(a={})),function(e){e[e.MUTE_STATE_OFF=0]="MUTE_STATE_OFF",e[e.MUTE_STATE_ON=1]="MUTE_STATE_ON"}(s||(s={})),function(e){e[e.SUBSCRIBE_SUCC=0]="SUBSCRIBE_SUCC",e[e.SUBSCRIBE_FAIL=1]="SUBSCRIBE_FAIL"}(c||(c={})),function(e){e[e.MIRROR_MODE_OFF=0]="MIRROR_MODE_OFF",e[e.MIRROR_MODE_ON=1]="MIRROR_MODE_ON"}(u||(u={})),function(e){e[e.RTC_PAUSE_RESUME_CONTROL_AUDIO=0]="RTC_PAUSE_RESUME_CONTROL_AUDIO",e[e.RTC_PAUSE_RESUME_CONTROL_VIDEO=1]="RTC_PAUSE_RESUME_CONTROL_VIDEO",e[e.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO=2]="RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO"}(d||(d={})),function(e){e[e.RENDER_MODE_HIDDEN=0]="RENDER_MODE_HIDDEN",e[e.RENDER_MODE_FIT=1]="RENDER_MODE_FIT"}(l||(l={})),function(e){e[e.STREAM_INDEX_MAIN=0]="STREAM_INDEX_MAIN",e[e.STREAM_INDEX_SCREEN=1]="STREAM_INDEX_SCREEN"}(f||(f={})),function(e){e[e.AUDIO_ONLY=0]="AUDIO_ONLY",e[e.VIDEO_ONLY=1]="VIDEO_ONLY",e[e.AUDIO_AND_VIDEO=2]="AUDIO_AND_VIDEO",e[e.NONE=3]="NONE"}(h||(h={})),function(e){e[e.STREAM_REMOVE_REASON_UNPUBLISH=0]="STREAM_REMOVE_REASON_UNPUBLISH",e[e.STREAM_REMOVE_REASON_PUBLISH_FAILED=1]="STREAM_REMOVE_REASON_PUBLISH_FAILED",e[e.STREAM_REMOVE_REASON_KEEP_LIVE_FAILED=2]="STREAM_REMOVE_REASON_KEEP_LIVE_FAILED",e[e.STREAM_REMOVE_REASON_CLIENT_DISCONNECTED=3]="STREAM_REMOVE_REASON_CLIENT_DISCONNECTED",e[e.STREAM_REMOVE_REASON_REPUBLISH=4]="STREAM_REMOVE_REASON_REPUBLISH",e[e.STREAM_REMOVE_REASON_OTHER=5]="STREAM_REMOVE_REASON_OTHER"}(p||(p={})),function(e){e[e.CONNECTION_START=0]="CONNECTION_START",e[e.CONNECTION_STATE_DISCONNECTED=1]="CONNECTION_STATE_DISCONNECTED",e[e.CONNECTION_STATE_CONNECTING=2]="CONNECTION_STATE_CONNECTING",e[e.CONNECTION_STATE_CONNECTED=3]="CONNECTION_STATE_CONNECTED",e[e.CONNECTION_STATE_RECONNECTING=4]="CONNECTION_STATE_RECONNECTING",e[e.CONNECTION_STATE_RECONNECTED=5]="CONNECTION_STATE_RECONNECTED"}(_||(_={})),function(e){e[e.MIRROR_TYPE_NONE=0]="MIRROR_TYPE_NONE",e[e.MIRROR_TYPE_RENDER=1]="MIRROR_TYPE_RENDER"}(v||(v={}));var C,R=Object.freeze({__proto__:null,get VideoSourceType(){return r},get AudioSourceType(){return i},get ChannelProfile(){return o},get SubscribeMode(){return a},get MuteState(){return s},get SubscribeState(){return c},get MirrorMode(){return u},get PauseResumeControlMediaType(){return d},get VideoRenderMode(){return l},get StreamIndex(){return f},get SubscribeMediaType(){return h},get StreamRemoveReason(){return p},get ConnectionState(){return _},get MirrorType(){return v}});!function(e){e.onTrackEnded="onTrackEnded",e.onPlayerEvent="onPlayerEvent",e.onAutoplayFailed="onAutoplayFailed",e.onUserJoined="onUserJoined",e.onUserLeave="onUserLeave",e.onConnectionStateChanged="onConnectionStateChanged",e.onStreamAdd="onStreamAdd",e.onStreamRemove="onStreamRemove",e.onRoomMessageReceived="onRoomMessageReceived",e.onUserMessageReceived="onUserMessageReceived",e.onUserBinaryMessageReceived="onUserBinaryMessageReceived",e.onUserMuteAudio="onUserMuteAudio",e.onUserMuteVideo="onUserMuteVideo",e.onVideoFirstFrameRendered="onVideoFirstFrameRendered",e.onVideoFirstFrameDecoded="onVideoFirstFrameDecoded",e.onAudioFirstFrameDecoded="onAudioFirstFrameDecoded",e.onMediaDeviceStateChanged="onMediaDeviceStateChanged",e.onRemoteStreamStats="onRemoteStreamStats",e.onLocalStreamStats="onLocalStreamStats",e.onAudioVolumeIndication="onAudioVolumeIndication",e.onAudioPlaybackDeviceChanged="onAudioPlaybackDeviceChanged",e.onUserStartVideoCapture="onUserStartVideoCapture",e.onUserStopVideoCapture="onUserStopVideoCapture",e.onUserStartAudioCapture="onUserStartAudioCapture",e.onUserStopAudioCapture="onUserStopAudioCapture",e.onAudioSubscribeResult="onAudioSubscribeResult",e.onLiveTranscodingResult="onLiveTranscodingResult"}(C||(C={}));var w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},I=function(e){return e&&e.Math==Math&&e},A=I("object"==typeof globalThis&&globalThis)||I("object"==typeof window&&window)||I("object"==typeof self&&self)||I("object"==typeof w&&w)||function(){return this}()||Function("return this")(),O={},k=function(e){try{return!!e()}catch(e){return!0}},N=!k((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),D=!k((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),P=D,M=Function.prototype.call,x=P?M.bind(M):function(){return M.apply(M,arguments)},U={},L={}.propertyIsEnumerable,j=Object.getOwnPropertyDescriptor,V=j&&!L.call({1:2},1);U.f=V?function(e){var t=j(this,e);return!!t&&t.enumerable}:L;var B,F,z=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},H=D,G=Function.prototype,W=G.bind,Y=G.call,K=H&&W.bind(Y,Y),q=H?function(e){return e&&K(e)}:function(e){return e&&function(){return Y.apply(e,arguments)}},J=q,X=J({}.toString),Z=J("".slice),$=function(e){return Z(X(e),8,-1)},Q=q,ee=k,te=$,ne=A.Object,re=Q("".split),ie=ee((function(){return!ne("z").propertyIsEnumerable(0)}))?function(e){return"String"==te(e)?re(e,""):ne(e)}:ne,oe=A.TypeError,ae=function(e){if(null==e)throw oe("Can't call method on "+e);return e},se=ie,ce=ae,ue=function(e){return se(ce(e))},de=function(e){return"function"==typeof e},le=de,fe=function(e){return"object"==typeof e?null!==e:le(e)},he=A,pe=de,_e=function(e){return pe(e)?e:void 0},ve=function(e,t){return arguments.length<2?_e(he[e]):he[e]&&he[e][t]},me=q({}.isPrototypeOf),ge=ve("navigator","userAgent")||"",ye=A,Se=ge,be=ye.process,Ee=ye.Deno,Te=be&&be.versions||Ee&&Ee.version,Ce=Te&&Te.v8;Ce&&(F=(B=Ce.split("."))[0]>0&&B[0]<4?1:+(B[0]+B[1])),!F&&Se&&(!(B=Se.match(/Edge\/(\d+)/))||B[1]>=74)&&(B=Se.match(/Chrome\/(\d+)/))&&(F=+B[1]);var Re=F,we=Re,Ie=k,Ae=!!Object.getOwnPropertySymbols&&!Ie((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&we&&we<41})),Oe=Ae&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ke=ve,Ne=de,De=me,Pe=Oe,Me=A.Object,xe=Pe?function(e){return"symbol"==typeof e}:function(e){var t=ke("Symbol");return Ne(t)&&De(t.prototype,Me(e))},Ue=A.String,Le=function(e){try{return Ue(e)}catch(e){return"Object"}},je=de,Ve=Le,Be=A.TypeError,Fe=function(e){if(je(e))return e;throw Be(Ve(e)+" is not a function")},ze=Fe,He=function(e,t){var n=e[t];return null==n?void 0:ze(n)},Ge=x,We=de,Ye=fe,Ke=A.TypeError,qe={exports:{}},Je=A,Xe=Object.defineProperty,Ze=function(e,t){try{Xe(Je,e,{value:t,configurable:!0,writable:!0})}catch(n){Je[e]=t}return t},$e=Ze,Qe="__core-js_shared__",et=A[Qe]||$e(Qe,{}),tt=et;(qe.exports=function(e,t){return tt[e]||(tt[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.0",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE",source:"https://github.com/zloirock/core-js"});var nt=ae,rt=A.Object,it=function(e){return rt(nt(e))},ot=it,at=q({}.hasOwnProperty),st=Object.hasOwn||function(e,t){return at(ot(e),t)},ct=q,ut=0,dt=Math.random(),lt=ct(1..toString),ft=function(e){return"Symbol("+(void 0===e?"":e)+")_"+lt(++ut+dt,36)},ht=A,pt=qe.exports,_t=st,vt=ft,mt=Ae,gt=Oe,yt=pt("wks"),St=ht.Symbol,bt=St&&St.for,Et=gt?St:St&&St.withoutSetter||vt,Tt=function(e){if(!_t(yt,e)||!mt&&"string"!=typeof yt[e]){var t="Symbol."+e;mt&&_t(St,e)?yt[e]=St[e]:yt[e]=gt&&bt?bt(t):Et(t)}return yt[e]},Ct=x,Rt=fe,wt=xe,It=He,At=function(e,t){var n,r;if("string"===t&&We(n=e.toString)&&!Ye(r=Ge(n,e)))return r;if(We(n=e.valueOf)&&!Ye(r=Ge(n,e)))return r;if("string"!==t&&We(n=e.toString)&&!Ye(r=Ge(n,e)))return r;throw Ke("Can't convert object to primitive value")},Ot=Tt,kt=A.TypeError,Nt=Ot("toPrimitive"),Dt=function(e,t){if(!Rt(e)||wt(e))return e;var n,r=It(e,Nt);if(r){if(void 0===t&&(t="default"),n=Ct(r,e,t),!Rt(n)||wt(n))return n;throw kt("Can't convert object to primitive value")}return void 0===t&&(t="number"),At(e,t)},Pt=Dt,Mt=xe,xt=function(e){var t=Pt(e,"string");return Mt(t)?t:t+""},Ut=fe,Lt=A.document,jt=Ut(Lt)&&Ut(Lt.createElement),Vt=function(e){return jt?Lt.createElement(e):{}},Bt=Vt,Ft=!N&&!k((function(){return 7!=Object.defineProperty(Bt("div"),"a",{get:function(){return 7}}).a})),zt=N,Ht=x,Gt=U,Wt=z,Yt=ue,Kt=xt,qt=st,Jt=Ft,Xt=Object.getOwnPropertyDescriptor;O.f=zt?Xt:function(e,t){if(e=Yt(e),t=Kt(t),Jt)try{return Xt(e,t)}catch(e){}if(qt(e,t))return Wt(!Ht(Gt.f,e,t),e[t])};var Zt={},$t=N&&k((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Qt=A,en=fe,tn=Qt.String,nn=Qt.TypeError,rn=function(e){if(en(e))return e;throw nn(tn(e)+" is not an object")},on=N,an=Ft,sn=$t,cn=rn,un=xt,dn=A.TypeError,ln=Object.defineProperty,fn=Object.getOwnPropertyDescriptor,hn="enumerable",pn="configurable",_n="writable";Zt.f=on?sn?function(e,t,n){if(cn(e),t=un(t),cn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&_n in n&&!n.writable){var r=fn(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:pn in n?n.configurable:r.configurable,enumerable:hn in n?n.enumerable:r.enumerable,writable:!1})}return ln(e,t,n)}:ln:function(e,t,n){if(cn(e),t=un(t),cn(n),an)try{return ln(e,t,n)}catch(e){}if("get"in n||"set"in n)throw dn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var vn=Zt,mn=z,gn=N?function(e,t,n){return vn.f(e,t,mn(1,n))}:function(e,t,n){return e[t]=n,e},yn={exports:{}},Sn=de,bn=et,En=q(Function.toString);Sn(bn.inspectSource)||(bn.inspectSource=function(e){return En(e)});var Tn,Cn,Rn,wn=bn.inspectSource,In=de,An=wn,On=A.WeakMap,kn=In(On)&&/native code/.test(An(On)),Nn=qe.exports,Dn=ft,Pn=Nn("keys"),Mn=function(e){return Pn[e]||(Pn[e]=Dn(e))},xn={},Un=kn,Ln=A,jn=q,Vn=fe,Bn=gn,Fn=st,zn=et,Hn=Mn,Gn=xn,Wn="Object already initialized",Yn=Ln.TypeError,Kn=Ln.WeakMap;if(Un||zn.state){var qn=zn.state||(zn.state=new Kn),Jn=jn(qn.get),Xn=jn(qn.has),Zn=jn(qn.set);Tn=function(e,t){if(Xn(qn,e))throw new Yn(Wn);return t.facade=e,Zn(qn,e,t),t},Cn=function(e){return Jn(qn,e)||{}},Rn=function(e){return Xn(qn,e)}}else{var $n=Hn("state");Gn[$n]=!0,Tn=function(e,t){if(Fn(e,$n))throw new Yn(Wn);return t.facade=e,Bn(e,$n,t),t},Cn=function(e){return Fn(e,$n)?e[$n]:{}},Rn=function(e){return Fn(e,$n)}}var Qn={set:Tn,get:Cn,has:Rn,enforce:function(e){return Rn(e)?Cn(e):Tn(e,{})},getterFor:function(e){return function(t){var n;if(!Vn(t)||(n=Cn(t)).type!==e)throw Yn("Incompatible receiver, "+e+" required");return n}}},er=N,tr=st,nr=Function.prototype,rr=er&&Object.getOwnPropertyDescriptor,ir=tr(nr,"name"),or={EXISTS:ir,PROPER:ir&&"something"===function(){}.name,CONFIGURABLE:ir&&(!er||er&&rr(nr,"name").configurable)},ar=A,sr=de,cr=st,ur=gn,dr=Ze,lr=wn,fr=or.CONFIGURABLE,hr=Qn.get,pr=Qn.enforce,_r=String(String).split("String");(yn.exports=function(e,t,n,r){var i,o=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet,c=r&&void 0!==r.name?r.name:t;sr(n)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!cr(n,"name")||fr&&n.name!==c)&&ur(n,"name",c),(i=pr(n)).source||(i.source=_r.join("string"==typeof c?c:""))),e!==ar?(o?!s&&e[t]&&(a=!0):delete e[t],a?e[t]=n:ur(e,t,n)):a?e[t]=n:dr(t,n)})(Function.prototype,"toString",(function(){return sr(this)&&hr(this).source||lr(this)}));var vr={},mr=Math.ceil,gr=Math.floor,yr=function(e){var t=+e;return t!=t||0===t?0:(t>0?gr:mr)(t)},Sr=yr,br=Math.max,Er=Math.min,Tr=function(e,t){var n=Sr(e);return n<0?br(n+t,0):Er(n,t)},Cr=yr,Rr=Math.min,wr=function(e){return e>0?Rr(Cr(e),9007199254740991):0},Ir=wr,Ar=function(e){return Ir(e.length)},Or=ue,kr=Tr,Nr=Ar,Dr=function(e){return function(t,n,r){var i,o=Or(t),a=Nr(o),s=kr(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},Pr={includes:Dr(!0),indexOf:Dr(!1)},Mr=st,xr=ue,Ur=Pr.indexOf,Lr=xn,jr=q([].push),Vr=function(e,t){var n,r=xr(e),i=0,o=[];for(n in r)!Mr(Lr,n)&&Mr(r,n)&&jr(o,n);for(;t.length>i;)Mr(r,n=t[i++])&&(~Ur(o,n)||jr(o,n));return o},Br=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Fr=Vr,zr=Br.concat("length","prototype");vr.f=Object.getOwnPropertyNames||function(e){return Fr(e,zr)};var Hr={};Hr.f=Object.getOwnPropertySymbols;var Gr=ve,Wr=vr,Yr=Hr,Kr=rn,qr=q([].concat),Jr=Gr("Reflect","ownKeys")||function(e){var t=Wr.f(Kr(e)),n=Yr.f;return n?qr(t,n(e)):t},Xr=st,Zr=Jr,$r=O,Qr=Zt,ei=k,ti=de,ni=/#|\.prototype\./,ri=function(e,t){var n=oi[ii(e)];return n==si||n!=ai&&(ti(t)?ei(t):!!t)},ii=ri.normalize=function(e){return String(e).replace(ni,".").toLowerCase()},oi=ri.data={},ai=ri.NATIVE="N",si=ri.POLYFILL="P",ci=ri,ui=A,di=O.f,li=gn,fi=yn.exports,hi=Ze,pi=function(e,t,n){for(var r=Zr(t),i=Qr.f,o=$r.f,a=0;a<r.length;a++){var s=r[a];Xr(e,s)||n&&Xr(n,s)||i(e,s,o(t,s))}},_i=ci,vi=function(e,t){var n,r,i,o,a,s=e.target,c=e.global,u=e.stat;if(n=c?ui:u?ui[s]||hi(s,{}):(ui[s]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(a=di(n,r))&&a.value:n[r],!_i(c?r:s+(u?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;pi(o,i)}(e.sham||i&&i.sham)&&li(o,"sham",!0),fi(n,r,o,e)}},mi=vi,gi=q,yi=A.Date,Si=gi(yi.prototype.getTime);mi({target:"Date",stat:!0},{now:function(){return Si(new yi)}});var bi=q,Ei=yn.exports,Ti=Date.prototype,Ci="Invalid Date",Ri="toString",wi=bi(Ti.toString),Ii=bi(Ti.getTime);String(new Date(NaN))!=Ci&&Ei(Ti,Ri,(function(){var e=Ii(this);return e==e?wi(this):Ci}));let Ai=!0,Oi=!0;function ki(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Ni(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function Di(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Ai=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Pi(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Oi=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Mi(){if("object"==typeof window){if(Ai)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function xi(e,t){Oi&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Ui(e){return"[object Object]"===Object.prototype.toString.call(e)}function Li(e){return Ui(e)?Object.keys(e).reduce((function(t,n){const r=Ui(e[n]),i=r?Li(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})}),{}):e}function ji(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?ji(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{ji(e,e.get(t),n)}))})))}function Vi(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&ji(e,n,i)}))})),i}const Bi=Mi;function Fi(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const a=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=o.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),Bi("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return Bi("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function zi(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Hi(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Ni(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Gi(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Wi(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(o(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(o(i(t)))},n])})).then(n,r)}}function Yi(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Vi(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Ni(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Vi(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Ki(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function qi(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Ki(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function a(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const i=this.getSenders().find((e=>e.track===t));if(i)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ji(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function Xi(e,t){Ni(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Zi=Object.freeze({__proto__:null,shimMediaStream:zi,shimOnTrack:Hi,shimGetSendersWithDtmf:Gi,shimGetStats:Wi,shimSenderReceiverGetStats:Yi,shimAddTrackRemoveTrackWithNative:Ki,shimAddTrackRemoveTrack:qi,shimPeerConnection:Ji,fixNegotiationNeeded:Xi,shimGetUserMedia:Fi,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function $i(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){xi("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function Qi(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function eo(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,o]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,o)}}function to(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function no(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Ni(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ro(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){xi("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function io(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function oo(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function ao(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function so(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function co(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var uo=Object.freeze({__proto__:null,shimOnTrack:Qi,shimPeerConnection:eo,shimSenderGetStats:to,shimReceiverGetStats:no,shimRemoveStream:ro,shimRTCDataChannel:io,shimAddTransceiver:oo,shimGetParameters:ao,shimCreateOffer:so,shimCreateAnswer:co,shimGetUserMedia:$i,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function lo(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function fo(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function ho(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}function po(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(_o(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function _o(e){return e&&void 0!==e.video?Object.assign({},e,{video:Li(e.video)}):e}function vo(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(xi("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function mo(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function go(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function yo(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var So=Object.freeze({__proto__:null,shimLocalStreamsAPI:lo,shimRemoteStreamsAPI:fo,shimCallbacksAPI:ho,shimGetUserMedia:po,shimConstraints:_o,shimRTCIceServerUrls:vo,shimTrackEventTransceiver:mo,shimCreateOfferLegacy:go,shimAudioContext:yo}),bo={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":n.relatedAddress=t[e+1];break;case"rport":n.relatedPort=parseInt(t[e+1],10);break;case"tcptype":n.tcpType=t[e+1];break;case"ufrag":n.ufrag=t[e+1],n.usernameFragment=t[e+1];break;default:void 0===n[t[e]]&&(n[t[e]]=t[e+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){let t=e.substr(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substr(e.indexOf(" ")+1).split(";");for(let e=0;e<r.length;e++)n=r[e].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){const t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){const t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");for(let i=3;i<r.length;i++){const o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){const r=t.parseRtpMap(a),i=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(r.parameters=i.length?t.parseFmtp(i[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),o=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),s=a.length>0&&a[0].ssrc;let c;const u=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substr(17).split(" ").map((e=>parseInt(e,10)))));u.length>0&&u[0].length>1&&u[0][0]===s&&(c=u[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&c&&(t.rtx={ssrc:c}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&s&&n.push({ssrc:s});let d=t.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=d}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substr(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substr(19),10)),isNaN(i)&&(i=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:n.fmt,maxMessageSize:i};const a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){const e=a[0].substr(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){let i;const o=void 0!==n?n:2;i=e||t.generateSessionId();return"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let e=0;e<r.length;e++)switch(r[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[e].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let e=0;e<n.length;e++)if(n[e].length<2||"="!==n[e].charAt(1))return!1;return!0},e.exports=t}(bo);var Eo=bo.exports,To=Object.freeze(e({__proto__:null,default:Eo},[bo.exports]));function Co(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=Eo.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Ni(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Ro(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Eo.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Eo.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},i=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=Eo.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=i(e),n=o(arguments[0],e);let a;a=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function wo(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Ni(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Io(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Ao(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Oo(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function ko(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);const t="offer"===e.type?this.createOffer:this.createAnswer;return t.apply(this).then((e=>n.apply(this,[e])))})}var No=Object.freeze({__proto__:null,shimRTCIceCandidate:Co,shimMaxMessageSize:Ro,shimSendThrowTypeError:wo,shimConnectionState:Io,removeExtmapAllowMixed:Ao,shimAddIceCandidateNullOrEmpty:Oo,shimParameterlessSetLocalDescription:ko});!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Mi,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=ki(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=ki(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=ki(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:No,extractVersion:ki,disableLog:Di,disableWarnings:Pi,sdp:To};switch(r.browser){case"chrome":if(!Zi||!Ji||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Zi,Oo(e,r),ko(e),Fi(e,r),zi(e),Ji(e,r),Hi(e),qi(e,r),Gi(e),Wi(e),Yi(e),Xi(e,r),Co(e),Io(e),Ro(e,r),wo(e),Ao(e,r);break;case"firefox":if(!uo||!eo||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=uo,Oo(e,r),ko(e),$i(e,r),eo(e,r),Qi(e),ro(e),to(e),no(e),io(e),oo(e),ao(e),so(e),co(e),Co(e),Io(e),Ro(e,r),wo(e);break;case"safari":if(!So||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=So,Oo(e,r),ko(e),vo(e),go(e),ho(e),lo(e),fo(e),mo(e),po(e),yo(e),Co(e),Ro(e,r),wo(e),Ao(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var Do={},Po=Vr,Mo=Br,xo=Object.keys||function(e){return Po(e,Mo)},Uo=N,Lo=$t,jo=Zt,Vo=rn,Bo=ue,Fo=xo;Do.f=Uo&&!Lo?Object.defineProperties:function(e,t){Vo(e);for(var n,r=Bo(t),i=Fo(t),o=i.length,a=0;o>a;)jo.f(e,n=i[a++],r[n]);return e};var zo,Ho=ve("document","documentElement"),Go=rn,Wo=Do,Yo=Br,Ko=xn,qo=Ho,Jo=Vt,Xo=Mn("IE_PROTO"),Zo=function(){},$o=function(e){return"<script>"+e+"</"+"script>"},Qo=function(e){e.write($o("")),e.close();var t=e.parentWindow.Object;return e=null,t},ea=function(){try{zo=new ActiveXObject("htmlfile")}catch(e){}var e,t;ea="undefined"!=typeof document?document.domain&&zo?Qo(zo):((t=Jo("iframe")).style.display="none",qo.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write($o("document.F=Object")),e.close(),e.F):Qo(zo);for(var n=Yo.length;n--;)delete ea.prototype[Yo[n]];return ea()};Ko[Xo]=!0;var ta=Object.create||function(e,t){var n;return null!==e?(Zo.prototype=Go(e),n=new Zo,Zo.prototype=null,n[Xo]=e):n=ea(),void 0===t?n:Wo.f(n,t)},na=ta,ra=Zt,ia=Tt("unscopables"),oa=Array.prototype;null==oa[ia]&&ra.f(oa,ia,{configurable:!0,value:na(null)});var aa,sa,ca,ua=function(e){oa[ia][e]=!0},da={},la=!k((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),fa=A,ha=st,pa=de,_a=it,va=la,ma=Mn("IE_PROTO"),ga=fa.Object,ya=ga.prototype,Sa=va?ga.getPrototypeOf:function(e){var t=_a(e);if(ha(t,ma))return t[ma];var n=t.constructor;return pa(n)&&t instanceof n?n.prototype:t instanceof ga?ya:null},ba=k,Ea=de,Ta=Sa,Ca=yn.exports,Ra=Tt("iterator"),wa=!1;[].keys&&("next"in(ca=[].keys())?(sa=Ta(Ta(ca)))!==Object.prototype&&(aa=sa):wa=!0);var Ia=null==aa||ba((function(){var e={};return aa[Ra].call(e)!==e}));Ia&&(aa={}),Ea(aa[Ra])||Ca(aa,Ra,(function(){return this}));var Aa={IteratorPrototype:aa,BUGGY_SAFARI_ITERATORS:wa},Oa=Zt.f,ka=st,Na=Tt("toStringTag"),Da=function(e,t,n){e&&!n&&(e=e.prototype),e&&!ka(e,Na)&&Oa(e,Na,{configurable:!0,value:t})},Pa=Aa.IteratorPrototype,Ma=ta,xa=z,Ua=Da,La=da,ja=function(){return this},Va=function(e,t,n,r){var i=t+" Iterator";return e.prototype=Ma(Pa,{next:xa(+!r,n)}),Ua(e,i,!1),La[i]=ja,e},Ba=A,Fa=de,za=Ba.String,Ha=Ba.TypeError,Ga=q,Wa=rn,Ya=function(e){if("object"==typeof e||Fa(e))return e;throw Ha("Can't set "+za(e)+" as a prototype")},Ka=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Ga(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Wa(n),Ya(r),t?e(n,r):n.__proto__=r,n}}():void 0),qa=vi,Ja=x,Xa=or,Za=de,$a=Va,Qa=Sa,es=Ka,ts=Da,ns=gn,rs=yn.exports,is=da,os=Xa.PROPER,as=Xa.CONFIGURABLE,ss=Aa.IteratorPrototype,cs=Aa.BUGGY_SAFARI_ITERATORS,us=Tt("iterator"),ds="keys",ls="values",fs="entries",hs=function(){return this},ps=function(e,t,n,r,i,o,a){$a(n,t,r);var s,c,u,d=function(e){if(e===i&&_)return _;if(!cs&&e in h)return h[e];switch(e){case ds:case ls:case fs:return function(){return new n(this,e)}}return function(){return new n(this)}},l=t+" Iterator",f=!1,h=e.prototype,p=h[us]||h["@@iterator"]||i&&h[i],_=!cs&&p||d(i),v="Array"==t&&h.entries||p;if(v&&(s=Qa(v.call(new e)))!==Object.prototype&&s.next&&(Qa(s)!==ss&&(es?es(s,ss):Za(s[us])||rs(s,us,hs)),ts(s,l,!0)),os&&i==ls&&p&&p.name!==ls&&(as?ns(h,"name",ls):(f=!0,_=function(){return Ja(p,this)})),i)if(c={values:d(ls),keys:o?_:d(ds),entries:d(fs)},a)for(u in c)(cs||f||!(u in h))&&rs(h,u,c[u]);else qa({target:t,proto:!0,forced:cs||f},c);return h[us]!==_&&rs(h,us,_,{name:i}),is[t]=_,c},_s=ue,vs=ua,ms=da,gs=Qn,ys=Zt.f,Ss=ps,bs=N,Es="Array Iterator",Ts=gs.set,Cs=gs.getterFor(Es),Rs=Ss(Array,"Array",(function(e,t){Ts(this,{type:Es,target:_s(e),index:0,kind:t})}),(function(){var e=Cs(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),ws=ms.Arguments=ms.Array;if(vs("keys"),vs("values"),vs("entries"),bs&&"values"!==ws.name)try{ys(ws,"name",{value:"values"})}catch(e){}var Is={exports:{}},As={},Os=xt,ks=Zt,Ns=z,Ds=function(e,t,n){var r=Os(t);r in e?ks.f(e,r,Ns(0,n)):e[r]=n},Ps=Tr,Ms=Ar,xs=Ds,Us=A.Array,Ls=Math.max,js=function(e,t,n){for(var r=Ms(e),i=Ps(t,r),o=Ps(void 0===n?r:n,r),a=Us(Ls(o-i,0)),s=0;i<o;i++,s++)xs(a,s,e[i]);return a.length=s,a},Vs=$,Bs=ue,Fs=vr.f,zs=js,Hs="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];As.f=function(e){return Hs&&"Window"==Vs(e)?function(e){try{return Fs(e)}catch(e){return zs(Hs)}}(e):Fs(Bs(e))};var Gs=k((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),Ws=k,Ys=fe,Ks=$,qs=Gs,Js=Object.isExtensible,Xs=Ws((function(){Js(1)}))||qs?function(e){return!!Ys(e)&&((!qs||"ArrayBuffer"!=Ks(e))&&(!Js||Js(e)))}:Js,Zs=!k((function(){return Object.isExtensible(Object.preventExtensions({}))})),$s=vi,Qs=q,ec=xn,tc=fe,nc=st,rc=Zt.f,ic=vr,oc=As,ac=Xs,sc=Zs,cc=!1,uc=ft("meta"),dc=0,lc=function(e){rc(e,uc,{value:{objectID:"O"+dc++,weakData:{}}})},fc=Is.exports={enable:function(){fc.enable=function(){},cc=!0;var e=ic.f,t=Qs([].splice),n={};n[uc]=1,e(n).length&&(ic.f=function(n){for(var r=e(n),i=0,o=r.length;i<o;i++)if(r[i]===uc){t(r,i,1);break}return r},$s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:oc.f}))},fastKey:function(e,t){if(!tc(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!nc(e,uc)){if(!ac(e))return"F";if(!t)return"E";lc(e)}return e[uc].objectID},getWeakData:function(e,t){if(!nc(e,uc)){if(!ac(e))return!0;if(!t)return!1;lc(e)}return e[uc].weakData},onFreeze:function(e){return sc&&cc&&ac(e)&&!nc(e,uc)&&lc(e),e}};ec[uc]=!0;var hc=Fe,pc=D,_c=q(q.bind),vc=function(e,t){return hc(e),void 0===t?e:pc?_c(e,t):function(){return e.apply(t,arguments)}},mc=da,gc=Tt("iterator"),yc=Array.prototype,Sc=function(e){return void 0!==e&&(mc.Array===e||yc[gc]===e)},bc={};bc[Tt("toStringTag")]="z";var Ec="[object z]"===String(bc),Tc=A,Cc=Ec,Rc=de,wc=$,Ic=Tt("toStringTag"),Ac=Tc.Object,Oc="Arguments"==wc(function(){return arguments}()),kc=Cc?wc:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Ac(e),Ic))?n:Oc?wc(t):"Object"==(r=wc(t))&&Rc(t.callee)?"Arguments":r},Nc=kc,Dc=He,Pc=da,Mc=Tt("iterator"),xc=function(e){if(null!=e)return Dc(e,Mc)||Dc(e,"@@iterator")||Pc[Nc(e)]},Uc=x,Lc=Fe,jc=rn,Vc=Le,Bc=xc,Fc=A.TypeError,zc=function(e,t){var n=arguments.length<2?Bc(e):t;if(Lc(n))return jc(Uc(n,e));throw Fc(Vc(e)+" is not iterable")},Hc=x,Gc=rn,Wc=He,Yc=function(e,t,n){var r,i;Gc(e);try{if(!(r=Wc(e,"return"))){if("throw"===t)throw n;return n}r=Hc(r,e)}catch(e){i=!0,r=e}if("throw"===t)throw n;if(i)throw r;return Gc(r),n},Kc=vc,qc=x,Jc=rn,Xc=Le,Zc=Sc,$c=Ar,Qc=me,eu=zc,tu=xc,nu=Yc,ru=A.TypeError,iu=function(e,t){this.stopped=e,this.result=t},ou=iu.prototype,au=function(e,t,n){var r,i,o,a,s,c,u,d=n&&n.that,l=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),p=Kc(t,d),_=function(e){return r&&nu(r,"normal",e),new iu(!0,e)},v=function(e){return l?(Jc(e),h?p(e[0],e[1],_):p(e[0],e[1])):h?p(e,_):p(e)};if(f)r=e;else{if(!(i=tu(e)))throw ru(Xc(e)+" is not iterable");if(Zc(i)){for(o=0,a=$c(e);a>o;o++)if((s=v(e[o]))&&Qc(ou,s))return s;return new iu(!1)}r=eu(e,i)}for(c=r.next;!(u=qc(c,r)).done;){try{s=v(u.value)}catch(e){nu(r,"throw",e)}if("object"==typeof s&&s&&Qc(ou,s))return s}return new iu(!1)},su=me,cu=A.TypeError,uu=function(e,t){if(su(t,e))return e;throw cu("Incorrect invocation")},du=Tt("iterator"),lu=!1;try{var fu=0,hu={next:function(){return{done:!!fu++}},return:function(){lu=!0}};hu[du]=function(){return this},Array.from(hu,(function(){throw 2}))}catch(e){}var pu=function(e,t){if(!t&&!lu)return!1;var n=!1;try{var r={};r[du]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},_u=de,vu=fe,mu=Ka,gu=function(e,t,n){var r,i;return mu&&_u(r=t.constructor)&&r!==n&&vu(i=r.prototype)&&i!==n.prototype&&mu(e,i),e},yu=vi,Su=A,bu=q,Eu=ci,Tu=yn.exports,Cu=Is.exports,Ru=au,wu=uu,Iu=de,Au=fe,Ou=k,ku=pu,Nu=Da,Du=gu,Pu=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=Su[e],s=a&&a.prototype,c=a,u={},d=function(e){var t=bu(s[e]);Tu(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!Au(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return i&&!Au(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!Au(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(Eu(e,!Iu(a)||!(i||s.forEach&&!Ou((function(){(new a).entries().next()})))))c=n.getConstructor(t,e,r,o),Cu.enable();else if(Eu(e,!0)){var l=new c,f=l[o](i?{}:-0,1)!=l,h=Ou((function(){l.has(1)})),p=ku((function(e){new a(e)})),_=!i&&Ou((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));p||((c=t((function(e,t){wu(e,s);var n=Du(new a,e,c);return null!=t&&Ru(t,n[o],{that:n,AS_ENTRIES:r}),n}))).prototype=s,s.constructor=c),(h||_)&&(d("delete"),d("has"),r&&d("get")),(_||f)&&d(o),i&&s.clear&&delete s.clear}return u[e]=c,yu({global:!0,forced:c!=a},u),Nu(c,e),i||n.setStrong(c,e,r),c},Mu=yn.exports,xu=function(e,t,n){for(var r in t)Mu(e,r,t[r],n);return e},Uu=ve,Lu=Zt,ju=N,Vu=Tt("species"),Bu=function(e){var t=Uu(e),n=Lu.f;ju&&t&&!t[Vu]&&n(t,Vu,{configurable:!0,get:function(){return this}})},Fu=Zt.f,zu=ta,Hu=xu,Gu=vc,Wu=uu,Yu=au,Ku=ps,qu=Bu,Ju=N,Xu=Is.exports.fastKey,Zu=Qn.set,$u=Qn.getterFor,Qu={getConstructor:function(e,t,n,r){var i=e((function(e,i){Wu(e,o),Zu(e,{type:t,index:zu(null),first:void 0,last:void 0,size:0}),Ju||(e.size=0),null!=i&&Yu(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=$u(t),s=function(e,t,n){var r,i,o=a(e),s=c(e,t);return s?s.value=n:(o.last=s={index:i=Xu(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),Ju?o.size++:e.size++,"F"!==i&&(o.index[i]=s)),e},c=function(e,t){var n,r=a(e),i=Xu(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Hu(o,{clear:function(){for(var e=a(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Ju?e.size=0:this.size=0},delete:function(e){var t=this,n=a(t),r=c(t,e);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),Ju?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=a(this),r=Gu(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!c(this,e)}}),Hu(o,n?{get:function(e){var t=c(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Ju&&Fu(o,"size",{get:function(){return a(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=$u(t),o=$u(r);Ku(e,t,(function(e,t){Zu(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),qu(t)}};Pu("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Qu);var ed=kc,td=Ec?{}.toString:function(){return"[object "+ed(this)+"]"},nd=Ec,rd=yn.exports,id=td;nd||rd(Object.prototype,"toString",id,{unsafe:!0});var od=kc,ad=A.String,sd=function(e){if("Symbol"===od(e))throw TypeError("Cannot convert a Symbol value to a string");return ad(e)},cd=q,ud=yr,dd=sd,ld=ae,fd=cd("".charAt),hd=cd("".charCodeAt),pd=cd("".slice),_d=function(e){return function(t,n){var r,i,o=dd(ld(t)),a=ud(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=hd(o,a))<55296||r>56319||a+1===s||(i=hd(o,a+1))<56320||i>57343?e?fd(o,a):r:e?pd(o,a,a+2):i-56320+(r-55296<<10)+65536}},vd={codeAt:_d(!1),charAt:_d(!0)},md=vd.charAt,gd=sd,yd=Qn,Sd=ps,bd="String Iterator",Ed=yd.set,Td=yd.getterFor(bd);Sd(String,"String",(function(e){Ed(this,{type:bd,string:gd(e),index:0})}),(function(){var e,t=Td(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=md(n,r),t.index+=e.length,{value:e,done:!1})}));var Cd={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Rd=Vt("span").classList,wd=Rd&&Rd.constructor&&Rd.constructor.prototype,Id=wd===Object.prototype?void 0:wd,Ad=A,Od=Cd,kd=Id,Nd=Rs,Dd=gn,Pd=Tt,Md=Pd("iterator"),xd=Pd("toStringTag"),Ud=Nd.values,Ld=function(e,t){if(e){if(e[Md]!==Ud)try{Dd(e,Md,Ud)}catch(t){e[Md]=Ud}if(e[xd]||Dd(e,xd,t),Od[t])for(var n in Nd)if(e[n]!==Nd[n])try{Dd(e,n,Nd[n])}catch(t){e[n]=Nd[n]}}};for(var jd in Od)Ld(Ad[jd]&&Ad[jd].prototype,jd);Ld(kd,"DOMTokenList");var Vd=vi,Bd=N,Fd=Zt.f;Vd({target:"Object",stat:!0,forced:Object.defineProperty!==Fd,sham:!Bd},{defineProperty:Fd});var zd=q([].slice),Hd=q,Gd=Fe,Wd=fe,Yd=st,Kd=zd,qd=D,Jd=A.Function,Xd=Hd([].concat),Zd=Hd([].join),$d={},Qd=function(e,t,n){if(!Yd($d,t)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";$d[t]=Jd("C,a","return new C("+Zd(r,",")+")")}return $d[t](e,n)},el=qd?Jd.bind:function(e){var t=Gd(this),n=t.prototype,r=Kd(arguments,1),i=function(){var n=Xd(r,Kd(arguments));return this instanceof i?Qd(t,n.length,n):t.apply(e,n)};return Wd(n)&&(i.prototype=n),i},tl=el;vi({target:"Function",proto:!0,forced:Function.bind!==tl},{bind:tl});var nl=k,rl=function(e,t){var n=[][e];return!!n&&nl((function(){n.call(null,t||function(){throw 1},1)}))},il=vi,ol=ie,al=ue,sl=rl,cl=q([].join),ul=ol!=Object,dl=sl("join",",");il({target:"Array",proto:!0,forced:ul||!dl},{join:function(e){return cl(al(this),void 0===e?",":e)}});var ll=$,fl=Array.isArray||function(e){return"Array"==ll(e)},hl=q,pl=k,_l=de,vl=kc,ml=wn,gl=function(){},yl=[],Sl=ve("Reflect","construct"),bl=/^\s*(?:class|function)\b/,El=hl(bl.exec),Tl=!bl.exec(gl),Cl=function(e){if(!_l(e))return!1;try{return Sl(gl,yl,e),!0}catch(e){return!1}},Rl=function(e){if(!_l(e))return!1;switch(vl(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Tl||!!El(bl,ml(e))}catch(e){return!0}};Rl.sham=!0;var wl=!Sl||pl((function(){var e;return Cl(Cl.call)||!Cl(Object)||!Cl((function(){e=!0}))||e}))?Rl:Cl,Il=A,Al=fl,Ol=wl,kl=fe,Nl=Tt("species"),Dl=Il.Array,Pl=function(e){var t;return Al(e)&&(t=e.constructor,(Ol(t)&&(t===Dl||Al(t.prototype))||kl(t)&&null===(t=t[Nl]))&&(t=void 0)),void 0===t?Dl:t},Ml=function(e,t){return new(Pl(e))(0===t?0:t)},xl=vc,Ul=ie,Ll=it,jl=Ar,Vl=Ml,Bl=q([].push),Fl=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(c,u,d,l){for(var f,h,p=Ll(c),_=Ul(p),v=xl(u,d),m=jl(_),g=0,y=l||Vl,S=t?y(c,m):n||a?y(c,0):void 0;m>g;g++)if((s||g in _)&&(h=v(f=_[g],g,p),e))if(t)S[g]=h;else if(h)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:Bl(S,f)}else switch(e){case 4:return!1;case 7:Bl(S,f)}return o?-1:r||i?i:S}},zl={forEach:Fl(0),map:Fl(1),filter:Fl(2),some:Fl(3),every:Fl(4),find:Fl(5),findIndex:Fl(6),filterReject:Fl(7)},Hl=zl.forEach,Gl=rl("forEach")?[].forEach:function(e){return Hl(this,e,arguments.length>1?arguments[1]:void 0)};vi({target:"Array",proto:!0,forced:[].forEach!=Gl},{forEach:Gl});var Wl=A,Yl=Cd,Kl=Id,ql=Gl,Jl=gn,Xl=function(e){if(e&&e.forEach!==ql)try{Jl(e,"forEach",ql)}catch(t){e.forEach=ql}};for(var Zl in Yl)Yl[Zl]&&Xl(Wl[Zl]&&Wl[Zl].prototype);Xl(Kl);var $l=vi,Ql=zl.find,ef=ua,tf="find",nf=!0;tf in[]&&Array(1).find((function(){nf=!1})),$l({target:"Array",proto:!0,forced:nf},{find:function(e){return Ql(this,e,arguments.length>1?arguments[1]:void 0)}}),ef(tf);var rf=k,of=Re,af=Tt("species"),sf=function(e){return of>=51||!rf((function(){var t=[];return(t.constructor={})[af]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},cf=vi,uf=A,df=k,lf=fl,ff=fe,hf=it,pf=Ar,_f=Ds,vf=Ml,mf=sf,gf=Re,yf=Tt("isConcatSpreadable"),Sf=9007199254740991,bf="Maximum allowed index exceeded",Ef=uf.TypeError,Tf=gf>=51||!df((function(){var e=[];return e[yf]=!1,e.concat()[0]!==e})),Cf=mf("concat"),Rf=function(e){if(!ff(e))return!1;var t=e[yf];return void 0!==t?!!t:lf(e)};cf({target:"Array",proto:!0,forced:!Tf||!Cf},{concat:function(e){var t,n,r,i,o,a=hf(this),s=vf(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(Rf(o=-1===t?a:arguments[t])){if(c+(i=pf(o))>Sf)throw Ef(bf);for(n=0;n<i;n++,c++)n in o&&_f(s,c,o[n])}else{if(c>=Sf)throw Ef(bf);_f(s,c++,o)}return s.length=c,s}});var wf,If,Af,Of,kf=A.Promise,Nf=wl,Df=Le,Pf=A.TypeError,Mf=function(e){if(Nf(e))return e;throw Pf(Df(e)+" is not a constructor")},xf=rn,Uf=Mf,Lf=Tt("species"),jf=function(e,t){var n,r=xf(e).constructor;return void 0===r||null==(n=xf(r)[Lf])?t:Uf(n)},Vf=D,Bf=Function.prototype,Ff=Bf.apply,zf=Bf.call,Hf="object"==typeof Reflect&&Reflect.apply||(Vf?zf.bind(Ff):function(){return zf.apply(Ff,arguments)}),Gf=A.TypeError,Wf=function(e,t){if(e<t)throw Gf("Not enough arguments");return e},Yf=/(?:ipad|iphone|ipod).*applewebkit/i.test(ge),Kf="process"==$(A.process),qf=A,Jf=Hf,Xf=vc,Zf=de,$f=st,Qf=k,eh=Ho,th=zd,nh=Vt,rh=Wf,ih=Yf,oh=Kf,ah=qf.setImmediate,sh=qf.clearImmediate,ch=qf.process,uh=qf.Dispatch,dh=qf.Function,lh=qf.MessageChannel,fh=qf.String,hh=0,ph={},_h="onreadystatechange";try{wf=qf.location}catch(e){}var vh=function(e){if($f(ph,e)){var t=ph[e];delete ph[e],t()}},mh=function(e){return function(){vh(e)}},gh=function(e){vh(e.data)},yh=function(e){qf.postMessage(fh(e),wf.protocol+"//"+wf.host)};ah&&sh||(ah=function(e){rh(arguments.length,1);var t=Zf(e)?e:dh(e),n=th(arguments,1);return ph[++hh]=function(){Jf(t,void 0,n)},If(hh),hh},sh=function(e){delete ph[e]},oh?If=function(e){ch.nextTick(mh(e))}:uh&&uh.now?If=function(e){uh.now(mh(e))}:lh&&!ih?(Of=(Af=new lh).port2,Af.port1.onmessage=gh,If=Xf(Of.postMessage,Of)):qf.addEventListener&&Zf(qf.postMessage)&&!qf.importScripts&&wf&&"file:"!==wf.protocol&&!Qf(yh)?(If=yh,qf.addEventListener("message",gh,!1)):If=_h in nh("script")?function(e){eh.appendChild(nh("script")).onreadystatechange=function(){eh.removeChild(this),vh(e)}}:function(e){setTimeout(mh(e),0)});var Sh,bh,Eh,Th,Ch,Rh,wh,Ih,Ah={set:ah,clear:sh},Oh=A,kh=/ipad|iphone|ipod/i.test(ge)&&void 0!==Oh.Pebble,Nh=/web0s(?!.*chrome)/i.test(ge),Dh=A,Ph=vc,Mh=O.f,xh=Ah.set,Uh=Yf,Lh=kh,jh=Nh,Vh=Kf,Bh=Dh.MutationObserver||Dh.WebKitMutationObserver,Fh=Dh.document,zh=Dh.process,Hh=Dh.Promise,Gh=Mh(Dh,"queueMicrotask"),Wh=Gh&&Gh.value;Wh||(Sh=function(){var e,t;for(Vh&&(e=zh.domain)&&e.exit();bh;){t=bh.fn,bh=bh.next;try{t()}catch(e){throw bh?Th():Eh=void 0,e}}Eh=void 0,e&&e.enter()},Uh||Vh||jh||!Bh||!Fh?!Lh&&Hh&&Hh.resolve?((wh=Hh.resolve(void 0)).constructor=Hh,Ih=Ph(wh.then,wh),Th=function(){Ih(Sh)}):Vh?Th=function(){zh.nextTick(Sh)}:(xh=Ph(xh,Dh),Th=function(){xh(Sh)}):(Ch=!0,Rh=Fh.createTextNode(""),new Bh(Sh).observe(Rh,{characterData:!0}),Th=function(){Rh.data=Ch=!Ch}));var Yh=Wh||function(e){var t={fn:e,next:void 0};Eh&&(Eh.next=t),bh||(bh=t,Th()),Eh=t},Kh={},qh=Fe,Jh=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=qh(t),this.reject=qh(n)};Kh.f=function(e){return new Jh(e)};var Xh=rn,Zh=fe,$h=Kh,Qh=A,ep=function(){this.head=null,this.tail=null};ep.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var tp,np,rp,ip,op=ep,ap="object"==typeof window,sp=vi,cp=A,up=ve,dp=x,lp=kf,fp=yn.exports,hp=xu,pp=Ka,_p=Da,vp=Bu,mp=Fe,gp=de,yp=fe,Sp=uu,bp=wn,Ep=au,Tp=pu,Cp=jf,Rp=Ah.set,wp=Yh,Ip=function(e,t){if(Xh(e),Zh(t)&&t.constructor===e)return t;var n=$h.f(e);return(0,n.resolve)(t),n.promise},Ap=function(e,t){var n=Qh.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},Op=Kh,kp=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Np=op,Dp=Qn,Pp=ci,Mp=ap,xp=Kf,Up=Re,Lp=Tt("species"),jp="Promise",Vp=Dp.getterFor(jp),Bp=Dp.set,Fp=Dp.getterFor(jp),zp=lp&&lp.prototype,Hp=lp,Gp=zp,Wp=cp.TypeError,Yp=cp.document,Kp=cp.process,qp=Op.f,Jp=qp,Xp=!!(Yp&&Yp.createEvent&&cp.dispatchEvent),Zp=gp(cp.PromiseRejectionEvent),$p="unhandledrejection",Qp=!1,e_=Pp(jp,(function(){var e=bp(Hp),t=e!==String(Hp);if(!t&&66===Up)return!0;if(Up>=51&&/native code/.test(e))return!1;var n=new Hp((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Lp]=r,!(Qp=n.then((function(){}))instanceof r)||!t&&Mp&&!Zp})),t_=e_||!Tp((function(e){Hp.all(e).catch((function(){}))})),n_=function(e){var t;return!(!yp(e)||!gp(t=e.then))&&t},r_=function(e,t){var n,r,i,o=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,u=e.reject,d=e.domain;try{s?(a||(2===t.rejection&&c_(t),t.rejection=1),!0===s?n=o:(d&&d.enter(),n=s(o),d&&(d.exit(),i=!0)),n===e.promise?u(Wp("Promise-chain cycle")):(r=n_(n))?dp(r,n,c,u):c(n)):u(o)}catch(e){d&&!i&&d.exit(),u(e)}},i_=function(e,t){e.notified||(e.notified=!0,wp((function(){for(var n,r=e.reactions;n=r.get();)r_(n,e);e.notified=!1,t&&!e.rejection&&a_(e)})))},o_=function(e,t,n){var r,i;Xp?((r=Yp.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),cp.dispatchEvent(r)):r={promise:t,reason:n},!Zp&&(i=cp["on"+e])?i(r):e===$p&&Ap("Unhandled promise rejection",n)},a_=function(e){dp(Rp,cp,(function(){var t,n=e.facade,r=e.value;if(s_(e)&&(t=kp((function(){xp?Kp.emit("unhandledRejection",r,n):o_($p,n,r)})),e.rejection=xp||s_(e)?2:1,t.error))throw t.value}))},s_=function(e){return 1!==e.rejection&&!e.parent},c_=function(e){dp(Rp,cp,(function(){var t=e.facade;xp?Kp.emit("rejectionHandled",t):o_("rejectionhandled",t,e.value)}))},u_=function(e,t,n){return function(r){e(t,r,n)}},d_=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,i_(e,!0))},l_=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Wp("Promise can't be resolved itself");var r=n_(t);r?wp((function(){var n={done:!1};try{dp(r,t,u_(l_,n,e),u_(d_,n,e))}catch(t){d_(n,t,e)}})):(e.value=t,e.state=1,i_(e,!1))}catch(t){d_({done:!1},t,e)}}};if(e_&&(Gp=(Hp=function(e){Sp(this,Gp),mp(e),dp(tp,this);var t=Vp(this);try{e(u_(l_,t),u_(d_,t))}catch(e){d_(t,e)}}).prototype,(tp=function(e){Bp(this,{type:jp,done:!1,notified:!1,parent:!1,reactions:new Np,rejection:!1,state:0,value:void 0})}).prototype=hp(Gp,{then:function(e,t){var n=Fp(this),r=qp(Cp(this,Hp));return n.parent=!0,r.ok=!gp(e)||e,r.fail=gp(t)&&t,r.domain=xp?Kp.domain:void 0,0==n.state?n.reactions.add(r):wp((function(){r_(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),np=function(){var e=new tp,t=Vp(e);this.promise=e,this.resolve=u_(l_,t),this.reject=u_(d_,t)},Op.f=qp=function(e){return e===Hp||e===rp?new np(e):Jp(e)},gp(lp)&&zp!==Object.prototype)){ip=zp.then,Qp||(fp(zp,"then",(function(e,t){var n=this;return new Hp((function(e,t){dp(ip,n,e,t)})).then(e,t)}),{unsafe:!0}),fp(zp,"catch",Gp.catch,{unsafe:!0}));try{delete zp.constructor}catch(e){}pp&&pp(zp,Gp)}sp({global:!0,wrap:!0,forced:e_},{Promise:Hp}),_p(Hp,jp,!1),vp(jp),rp=up(jp),sp({target:jp,stat:!0,forced:e_},{reject:function(e){var t=qp(this);return dp(t.reject,void 0,e),t.promise}}),sp({target:jp,stat:!0,forced:e_},{resolve:function(e){return Ip(this,e)}}),sp({target:jp,stat:!0,forced:t_},{all:function(e){var t=this,n=qp(t),r=n.resolve,i=n.reject,o=kp((function(){var n=mp(t.resolve),o=[],a=0,s=1;Ep(e,(function(e){var c=a++,u=!1;s++,dp(n,t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=qp(t),r=n.reject,i=kp((function(){var i=mp(t.resolve);Ep(e,(function(e){dp(i,t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var f_=vi,h_=A,p_=fl,__=wl,v_=fe,m_=Tr,g_=Ar,y_=ue,S_=Ds,b_=Tt,E_=zd,T_=sf("slice"),C_=b_("species"),R_=h_.Array,w_=Math.max;f_({target:"Array",proto:!0,forced:!T_},{slice:function(e,t){var n,r,i,o=y_(this),a=g_(o),s=m_(e,a),c=m_(void 0===t?a:t,a);if(p_(o)&&(n=o.constructor,(__(n)&&(n===R_||p_(n.prototype))||v_(n)&&null===(n=n[C_]))&&(n=void 0),n===R_||void 0===n))return E_(o,s,c);for(r=new(void 0===n?R_:n)(w_(c-s,0)),i=0;s<c;s++,i++)s in o&&S_(r,i,o[s]);return r.length=i,r}});var I_=js,A_=Math.floor,O_=function(e,t){var n=e.length,r=A_(n/2);return n<8?k_(e,t):N_(e,O_(I_(e,0,r),t),O_(I_(e,r),t),t)},k_=function(e,t){for(var n,r,i=e.length,o=1;o<i;){for(r=o,n=e[o];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==o++&&(e[r]=n)}return e},N_=function(e,t,n,r){for(var i=t.length,o=n.length,a=0,s=0;a<i||s<o;)e[a+s]=a<i&&s<o?r(t[a],n[s])<=0?t[a++]:n[s++]:a<i?t[a++]:n[s++];return e},D_=O_,P_=ge.match(/firefox\/(\d+)/i),M_=!!P_&&+P_[1],x_=/MSIE|Trident/.test(ge),U_=ge.match(/AppleWebKit\/(\d+)\./),L_=!!U_&&+U_[1],j_=vi,V_=q,B_=Fe,F_=it,z_=Ar,H_=sd,G_=k,W_=D_,Y_=rl,K_=M_,q_=x_,J_=Re,X_=L_,Z_=[],$_=V_(Z_.sort),Q_=V_(Z_.push),ev=G_((function(){Z_.sort(void 0)})),tv=G_((function(){Z_.sort(null)})),nv=Y_("sort"),rv=!G_((function(){if(J_)return J_<70;if(!(K_&&K_>3)){if(q_)return!0;if(X_)return X_<603;var e,t,n,r,i="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Z_.push({k:t+r,v:n})}for(Z_.sort((function(e,t){return t.v-e.v})),r=0;r<Z_.length;r++)t=Z_[r].k.charAt(0),i.charAt(i.length-1)!==t&&(i+=t);return"DGBEFHACIJK"!==i}}));j_({target:"Array",proto:!0,forced:ev||!tv||!nv||!rv},{sort:function(e){void 0!==e&&B_(e);var t=F_(this);if(rv)return void 0===e?$_(t):$_(t,e);var n,r,i=[],o=z_(t);for(r=0;r<o;r++)r in t&&Q_(i,t[r]);for(W_(i,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:H_(t)>H_(n)?1:-1}}(e)),n=i.length,r=0;r<n;)t[r]=i[r++];for(;r<o;)delete t[r++];return t}});var iv=vi,ov=A,av=Hf,sv=de,cv=zd,uv=Wf,dv=/MSIE .\./.test(ge),lv=ov.Function,fv=function(e){return function(t,n){var r=uv(arguments.length,1)>2,i=sv(t)?t:lv(t),o=r?cv(arguments,2):void 0;return e(r?function(){av(i,this,o)}:i,n)}};iv({global:!0,bind:!0,forced:dv},{setTimeout:fv(ov.setTimeout),setInterval:fv(ov.setInterval)});var hv=Pr.includes,pv=ua;vi({target:"Array",proto:!0},{includes:function(e){return hv(this,e,arguments.length>1?arguments[1]:void 0)}}),pv("includes");var _v=fe,vv=$,mv=Tt("match"),gv=function(e){var t;return _v(e)&&(void 0!==(t=e[mv])?!!t:"RegExp"==vv(e))},yv=gv,Sv=A.TypeError,bv=function(e){if(yv(e))throw Sv("The method doesn't accept regular expressions");return e},Ev=Tt("match"),Tv=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Ev]=!1,"/./"[e](t)}catch(e){}}return!1},Cv=vi,Rv=bv,wv=ae,Iv=sd,Av=Tv,Ov=q("".indexOf);Cv({target:"String",proto:!0,forced:!Av("includes")},{includes:function(e){return!!~Ov(Iv(wv(this)),Iv(Rv(e)),arguments.length>1?arguments[1]:void 0)}}),vi({target:"Array",stat:!0},{isArray:fl});var kv="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Nv=yr,Dv=wr,Pv=A.RangeError,Mv=function(e){if(void 0===e)return 0;var t=Nv(e),n=Dv(t);if(t!==n)throw Pv("Wrong length or index");return n},xv=A.Array,Uv=Math.abs,Lv=Math.pow,jv=Math.floor,Vv=Math.log,Bv=Math.LN2,Fv={pack:function(e,t,n){var r,i,o,a=xv(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,d=23===t?Lv(2,-24)-Lv(2,-77):0,l=e<0||0===e&&1/e<0?1:0,f=0;for((e=Uv(e))!=e||e===1/0?(i=e!=e?1:0,r=c):(r=jv(Vv(e)/Bv),e*(o=Lv(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?d/o:d*Lv(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*Lv(2,t),r+=u):(i=e*Lv(2,u-1)*Lv(2,t),r=0));t>=8;)a[f++]=255&i,i/=256,t-=8;for(r=r<<t|i,s+=t;s>0;)a[f++]=255&r,r/=256,s-=8;return a[--f]|=128*l,a},unpack:function(e,t){var n,r=e.length,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,u=e[c--],d=127&u;for(u>>=7;s>0;)d=256*d+e[c--],s-=8;for(n=d&(1<<-s)-1,d>>=-s,s+=t;s>0;)n=256*n+e[c--],s-=8;if(0===d)d=1-a;else{if(d===o)return n?NaN:u?-1/0:1/0;n+=Lv(2,t),d-=a}return(u?-1:1)*n*Lv(2,d-t)}},zv=it,Hv=Tr,Gv=Ar,Wv=function(e){for(var t=zv(this),n=Gv(t),r=arguments.length,i=Hv(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:Hv(o,n);a>i;)t[i++]=e;return t},Yv=A,Kv=q,qv=N,Jv=kv,Xv=or,Zv=gn,$v=xu,Qv=k,em=uu,tm=yr,nm=wr,rm=Mv,im=Fv,om=Sa,am=Ka,sm=vr.f,cm=Zt.f,um=Wv,dm=js,lm=Da,fm=Xv.PROPER,hm=Xv.CONFIGURABLE,pm=Qn.get,_m=Qn.set,vm="ArrayBuffer",mm="DataView",gm="Wrong index",ym=Yv.ArrayBuffer,Sm=ym,bm=Sm&&Sm.prototype,Em=Yv.DataView,Tm=Em&&Em.prototype,Cm=Object.prototype,Rm=Yv.Array,wm=Yv.RangeError,Im=Kv(um),Am=Kv([].reverse),Om=im.pack,km=im.unpack,Nm=function(e){return[255&e]},Dm=function(e){return[255&e,e>>8&255]},Pm=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Mm=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},xm=function(e){return Om(e,23,4)},Um=function(e){return Om(e,52,8)},Lm=function(e,t){cm(e.prototype,t,{get:function(){return pm(this)[t]}})},jm=function(e,t,n,r){var i=rm(n),o=pm(e);if(i+t>o.byteLength)throw wm(gm);var a=pm(o.buffer).bytes,s=i+o.byteOffset,c=dm(a,s,s+t);return r?c:Am(c)},Vm=function(e,t,n,r,i,o){var a=rm(n),s=pm(e);if(a+t>s.byteLength)throw wm(gm);for(var c=pm(s.buffer).bytes,u=a+s.byteOffset,d=r(+i),l=0;l<t;l++)c[u+l]=d[o?l:t-l-1]};if(Jv){var Bm=fm&&ym.name!==vm;if(Qv((function(){ym(1)}))&&Qv((function(){new ym(-1)}))&&!Qv((function(){return new ym,new ym(1.5),new ym(NaN),Bm&&!hm})))Bm&&hm&&Zv(ym,"name",vm);else{(Sm=function(e){return em(this,bm),new ym(rm(e))}).prototype=bm;for(var Fm,zm=sm(ym),Hm=0;zm.length>Hm;)(Fm=zm[Hm++])in Sm||Zv(Sm,Fm,ym[Fm]);bm.constructor=Sm}am&&om(Tm)!==Cm&&am(Tm,Cm);var Gm=new Em(new Sm(2)),Wm=Kv(Tm.setInt8);Gm.setInt8(0,2147483648),Gm.setInt8(1,2147483649),!Gm.getInt8(0)&&Gm.getInt8(1)||$v(Tm,{setInt8:function(e,t){Wm(this,e,t<<24>>24)},setUint8:function(e,t){Wm(this,e,t<<24>>24)}},{unsafe:!0})}else bm=(Sm=function(e){em(this,bm);var t=rm(e);_m(this,{bytes:Im(Rm(t),0),byteLength:t}),qv||(this.byteLength=t)}).prototype,Tm=(Em=function(e,t,n){em(this,Tm),em(e,bm);var r=pm(e).byteLength,i=tm(t);if(i<0||i>r)throw wm("Wrong offset");if(i+(n=void 0===n?r-i:nm(n))>r)throw wm("Wrong length");_m(this,{buffer:e,byteLength:n,byteOffset:i}),qv||(this.buffer=e,this.byteLength=n,this.byteOffset=i)}).prototype,qv&&(Lm(Sm,"byteLength"),Lm(Em,"buffer"),Lm(Em,"byteLength"),Lm(Em,"byteOffset")),$v(Tm,{getInt8:function(e){return jm(this,1,e)[0]<<24>>24},getUint8:function(e){return jm(this,1,e)[0]},getInt16:function(e){var t=jm(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=jm(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Mm(jm(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Mm(jm(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return km(jm(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return km(jm(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Vm(this,1,e,Nm,t)},setUint8:function(e,t){Vm(this,1,e,Nm,t)},setInt16:function(e,t){Vm(this,2,e,Dm,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Vm(this,2,e,Dm,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Vm(this,4,e,Pm,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Vm(this,4,e,Pm,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Vm(this,4,e,xm,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Vm(this,8,e,Um,t,arguments.length>2?arguments[2]:void 0)}});lm(Sm,vm),lm(Em,mm);var Ym={ArrayBuffer:Sm,DataView:Em},Km=Bu,qm="ArrayBuffer",Jm=Ym.ArrayBuffer;vi({global:!0,forced:A.ArrayBuffer!==Jm},{ArrayBuffer:Jm}),Km(qm);var Xm=vi,Zm=q,$m=k,Qm=rn,eg=Tr,tg=wr,ng=jf,rg=Ym.ArrayBuffer,ig=Ym.DataView,og=ig.prototype,ag=Zm(rg.prototype.slice),sg=Zm(og.getUint8),cg=Zm(og.setUint8);Xm({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:$m((function(){return!new rg(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(ag&&void 0===t)return ag(Qm(this),e);for(var n=Qm(this).byteLength,r=eg(e,n),i=eg(void 0===t?n:t,n),o=new(ng(this,rg))(tg(i-r)),a=new ig(this),s=new ig(o),c=0;r<i;)cg(s,c++,sg(a,r++));return o}});var ug=it,dg=xo;vi({target:"Object",stat:!0,forced:k((function(){dg(1)}))},{keys:function(e){return dg(ug(e))}});var lg,fg,hg=rn,pg=function(){var e=hg(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},_g=k,vg=A.RegExp,mg=_g((function(){var e=vg("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),gg=mg||_g((function(){return!vg("a","y").sticky})),yg={BROKEN_CARET:mg||_g((function(){var e=vg("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:gg,UNSUPPORTED_Y:mg},Sg=k,bg=A.RegExp,Eg=Sg((function(){var e=bg(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Tg=k,Cg=A.RegExp,Rg=Tg((function(){var e=Cg("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),wg=x,Ig=q,Ag=sd,Og=pg,kg=yg,Ng=qe.exports,Dg=ta,Pg=Qn.get,Mg=Eg,xg=Rg,Ug=Ng("native-string-replace",String.prototype.replace),Lg=RegExp.prototype.exec,jg=Lg,Vg=Ig("".charAt),Bg=Ig("".indexOf),Fg=Ig("".replace),zg=Ig("".slice),Hg=(fg=/b*/g,wg(Lg,lg=/a/,"a"),wg(Lg,fg,"a"),0!==lg.lastIndex||0!==fg.lastIndex),Gg=kg.BROKEN_CARET,Wg=void 0!==/()??/.exec("")[1];(Hg||Wg||Gg||Mg||xg)&&(jg=function(e){var t,n,r,i,o,a,s,c=this,u=Pg(c),d=Ag(e),l=u.raw;if(l)return l.lastIndex=c.lastIndex,t=wg(jg,l,d),c.lastIndex=l.lastIndex,t;var f=u.groups,h=Gg&&c.sticky,p=wg(Og,c),_=c.source,v=0,m=d;if(h&&(p=Fg(p,"y",""),-1===Bg(p,"g")&&(p+="g"),m=zg(d,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==Vg(d,c.lastIndex-1))&&(_="(?: "+_+")",m=" "+m,v++),n=new RegExp("^(?:"+_+")",p)),Wg&&(n=new RegExp("^"+_+"$(?!\\s)",p)),Hg&&(r=c.lastIndex),i=wg(Lg,h?n:c,m),h?i?(i.input=zg(i.input,v),i[0]=zg(i[0],v),i.index=c.lastIndex,c.lastIndex+=i[0].length):c.lastIndex=0:Hg&&i&&(c.lastIndex=c.global?i.index+i[0].length:r),Wg&&i&&i.length>1&&wg(Ug,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&f)for(i.groups=a=Dg(null),o=0;o<f.length;o++)a[(s=f[o])[0]]=i[s[1]];return i});var Yg=jg;vi({target:"RegExp",proto:!0,forced:/./.exec!==Yg},{exec:Yg});var Kg="INVALID_ENGINE",qg="INVALID_PARAMS",Jg="INVALID_TOKEN",Xg="JOIN_ROOM_FAILED",Zg="REPEAT_JOIN",$g="PUBLISH_BEFORE_JOIN",Qg="UNPUBLISH_BEFORE_JOIN",ey="SUBSCRIBE_BEFORE_JOIN",ty="NO_PUBLISH_PERMISSION",ny="STREAM_NOT_EXIST",ry="EMPTY_STREAM",iy="NOT_CONNECTED_YET",oy="IM_BEFORE_JOIN",ay="USER_NOT_EXIST",sy="ALREADY_IN_ROOM",cy="REPEAT_CAPTURE",uy="GET_VIDEO_TRACK_FAILED",dy="GET_AUDIO_TRACK_FAILED",ly="GET_SCREEN_TRACK_FAILED",fy="STREAM_TYPE_NOT_MATCH",hy="CANT_FIND_DOM",py="INVALID_DEVICE_ID",_y="NO_PERMISSION",vy="NOT_SUPPORTED",my="ICE_SERVER_WRONG",gy="ESTABLISH_DATACHANNEL_FAILED",yy="LOAD_RESOURCES_FAILED",Sy="SIGNALING_CHANNEL_NOT_OPEN",by="TIME_OUT",Ey="REFUSE_OPERATION_IN_DISCONNECT",Ty="ADD_TRANSCEIVER_FAILED",Cy="UPDATE_TRACK_FAILED",Ry="PUBLISH_FAILED",wy="UNPUBLISH_FAILED",Iy="SUBSCRIBE_FAILED",Ay="UNSUBSCRIBE_FAILED",Oy="OPERATION_CANCEL",ky="UNEXPECTED_ERROR",Ny=function(e,t,n){this.code=e,this.message=t,this.error=n};function Dy(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=255),null==e)throw new Ny(qg,"".concat(t," cannot be empty"));if(!function(e,t,n){void 0===t&&(t=1);void 0===n&&(n=255);return"string"==typeof e&&e.length<=n&&e.length>=t}(e,n,r))throw new Ny(qg,"Invalid ".concat(t,": The value should be string type. Length of the string: [").concat(n,",").concat(r,"]"))}function Py(e,t,n){if(!n.includes(e))throw new Ny(qg,"Invalid ".concat(t,": The value can only be set as ").concat(JSON.stringify(n)))}function My(e,t){if(Uy(e))throw new Ny(qg,"Invalid ".concat(t,", should not be empty"))}function xy(e){var t,n;try{var r=navigator.mediaDevices.getSupportedConstraints();try{for(var i=b(Object.keys(e)),o=i.next();!o.done;o=i.next()){var a=o.value;r[a]||delete e[a]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}catch(e){}}function Uy(e){return null==e}function Ly(e){My(e,"userInfo"),function(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \_\-\@]{1,128}$/.test(e))throw new Ny(qg,"The userId must be within 128 bytes. The supported characters: a-z,A-Z,0-9,@,-,_")}(e.userId),Uy(e.extraInfo)||Dy(e.extraInfo,"userInfo.extraInfo",1,200)}function jy(e){My(e,"videoPlayerOption")}function Vy(e){!function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=1e4),e<n||e>r||"number"!=typeof e)throw new Ny(qg,"Invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"))}(e.videoIndex,"config.videoIndex",0,2)}function By(e,t){var n,r;if(void 0===t&&(t=64),!e||0===(null===(n=e)||void 0===n?void 0:n.byteLength))throw new Ny(qg,"The message cannot be empty");e instanceof ArrayBuffer?r=e:r=(new TextEncoder).encode(JSON.stringify(e));if((null==r?void 0:r.byteLength)>1e3*t)throw new Ny(qg,"The message length must be less than ".concat(t,"K"))}function Fy(e){return![C.onRemoteStreamStats,C.onLocalStreamStats].includes(e)}var zy=zl.filter;vi({target:"Array",proto:!0,forced:!sf("filter")},{filter:function(e){return zy(this,e,arguments.length>1?arguments[1]:void 0)}});var Hy={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,o),!0;case 6:return d.fn.call(d.context,t,r,i,o,a),!0}for(u=1,c=new Array(l-1);u<l;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var f,h=d.length;for(u=0;u<h;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),l){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,r);break;case 4:d[u].fn.call(d[u].context,t,r,i);break;default:if(!c)for(f=1,c=new Array(l-1);f<l;f++)c[f-1]=arguments[f];d[u].fn.apply(d[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],d=s.length;c<d;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Hy);var Gy="[VERTC]",Wy=["#0050b3","#0050b3","#0050b3","#0050b3"],Yy=function(){function e(e,t,n){this._module=e,this._indent=t}return e.prototype.print=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r="",i=0;i<this._indent;i++)r+="    ";console.log.apply(console,T(["%c".concat(Gy).concat(r,"[").concat(this._module,".").concat(e,"] ").concat(t.shift()),"color:".concat(Wy[this._indent],";")],E(t),!1))},e}(),Ky=new Yy("VERTC",0),qy=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype.safeEmit=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.listenerCount(t);try{return e.prototype.emit.apply(this,T([t],E(n),!1))}catch(e){return Ky.print("safaEmit","safeEmit() | event listener threw an error [event:%s]:%o",t,e),Boolean(i)}},t.prototype.safeEmitAsPromise=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return y(this,void 0,void 0,(function(){var n=this;return S(this,(function(r){return[2,new Promise((function(r,i){try{n.emit.apply(n,T(T([e],E(t),!1),[r,i],!1))}catch(t){Ky.print("safeEmitAsPromise","safeEmitAsPromise() | event listener threw an error [event:%s]:%o",e,t),i(t)}}))]}))}))},t}(Hy.exports.EventEmitter),Jy=N,Xy=q,Zy=xo,$y=ue,Qy=Xy(U.f),eS=Xy([].push),tS=function(e){return function(t){for(var n,r=$y(t),i=Zy(r),o=i.length,a=0,s=[];o>a;)n=i[a++],Jy&&!Qy(r,n)||eS(s,e?[n,r[n]]:r[n]);return s}},nS={entries:tS(!0),values:tS(!1)}.entries;vi({target:"Object",stat:!0},{entries:function(e){return nS(e)}});var rS=st,iS=function(e){return void 0!==e&&(rS(e,"value")||rS(e,"writable"))},oS=x,aS=fe,sS=rn,cS=iS,uS=O,dS=Sa;vi({target:"Reflect",stat:!0},{get:function e(t,n){var r,i,o=arguments.length<3?t:arguments[2];return sS(t)===o?t[n]:(r=uS.f(t,n))?cS(r)?r.value:void 0===r.get?void 0:oS(r.get,o):aS(i=dS(t))?e(i,n,o):void 0}});var lS=vi,fS=x,hS=rn,pS=fe,_S=iS,vS=Zt,mS=O,gS=Sa,yS=z;var SS,bS=k((function(){var e=function(){},t=vS.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}));lS({target:"Reflect",stat:!0,forced:bS},{set:function e(t,n,r){var i,o,a,s=arguments.length<4?t:arguments[3],c=mS.f(hS(t),n);if(!c){if(pS(o=gS(t)))return e(o,n,r,s);c=yS(0)}if(_S(c)){if(!1===c.writable||!pS(s))return!1;if(i=mS.f(s,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,vS.f(s,n,i)}else vS.f(s,n,yS(0,r))}else{if(void 0===(a=c.set))return!1;fS(a,s,r)}return!0}});var ES=new Uint8Array(16);function TS(){if(!SS&&!(SS="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return SS(ES)}var CS=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function RS(e){return"string"==typeof e&&CS.test(e)}for(var wS=[],IS=0;IS<256;++IS)wS.push((IS+256).toString(16).substr(1));function AS(e,t,n){var r=(e=e||{}).random||(e.rng||TS)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(wS[e[t+0]]+wS[e[t+1]]+wS[e[t+2]]+wS[e[t+3]]+"-"+wS[e[t+4]]+wS[e[t+5]]+"-"+wS[e[t+6]]+wS[e[t+7]]+"-"+wS[e[t+8]]+wS[e[t+9]]+"-"+wS[e[t+10]]+wS[e[t+11]]+wS[e[t+12]]+wS[e[t+13]]+wS[e[t+14]]+wS[e[t+15]]).toLowerCase();if(!RS(n))throw TypeError("Stringified UUID is invalid");return n}(r)}var OS=q,kS=yn.exports,NS=Yg,DS=k,PS=Tt,MS=gn,xS=PS("species"),US=RegExp.prototype,LS=function(e,t,n,r){var i=PS(e),o=!DS((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!DS((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[xS]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||n){var s=OS(/./[i]),c=t(i,""[e],(function(e,t,n,r,i){var a=OS(e),c=t.exec;return c===NS||c===US.exec?o&&!i?{done:!0,value:s(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));kS(String.prototype,e,c[0]),kS(US,i,c[1])}r&&MS(US[i],"sham",!0)},jS=vd.charAt,VS=function(e,t,n){return t+(n?jS(e,t).length:1)},BS=x,FS=rn,zS=de,HS=$,GS=Yg,WS=A.TypeError,YS=function(e,t){var n=e.exec;if(zS(n)){var r=BS(n,e,t);return null!==r&&FS(r),r}if("RegExp"===HS(e))return BS(GS,e,t);throw WS("RegExp#exec called on incompatible receiver")},KS=Hf,qS=x,JS=q,XS=LS,ZS=gv,$S=rn,QS=ae,eb=jf,tb=VS,nb=wr,rb=sd,ib=He,ob=js,ab=YS,sb=Yg,cb=k,ub=yg.UNSUPPORTED_Y,db=4294967295,lb=Math.min,fb=[].push,hb=JS(/./.exec),pb=JS(fb),_b=JS("".slice),vb=!cb((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));XS("split",(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=rb(QS(this)),i=void 0===n?db:n>>>0;if(0===i)return[];if(void 0===e)return[r];if(!ZS(e))return qS(t,r,e,i);for(var o,a,s,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,l=new RegExp(e.source,u+"g");(o=qS(sb,l,r))&&!((a=l.lastIndex)>d&&(pb(c,_b(r,d,o.index)),o.length>1&&o.index<r.length&&KS(fb,c,ob(o,1)),s=o[0].length,d=a,c.length>=i));)l.lastIndex===o.index&&l.lastIndex++;return d===r.length?!s&&hb(l,"")||pb(c,""):pb(c,_b(r,d)),c.length>i?ob(c,0,i):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:qS(t,this,e,n)}:t,[function(t,n){var i=QS(this),o=null==t?void 0:ib(t,e);return o?qS(o,t,i,n):qS(r,rb(i),t,n)},function(e,i){var o=$S(this),a=rb(e),s=n(r,o,a,i,r!==t);if(s.done)return s.value;var c=eb(o,RegExp),u=o.unicode,d=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(ub?"g":"y"),l=new c(ub?"^(?:"+o.source+")":o,d),f=void 0===i?db:i>>>0;if(0===f)return[];if(0===a.length)return null===ab(l,a)?[a]:[];for(var h=0,p=0,_=[];p<a.length;){l.lastIndex=ub?0:p;var v,m=ab(l,ub?_b(a,p):a);if(null===m||(v=lb(nb(l.lastIndex+(ub?p:0)),a.length))===h)p=tb(a,p,u);else{if(pb(_,_b(a,h,p)),_.length===f)return _;for(var g=1;g<=m.length-1;g++)if(pb(_,m[g]),_.length===f)return _;p=h=v}}return pb(_,_b(a,h)),_}]}),!vb,ub);var mb,gb=vi,yb=q,Sb=O.f,bb=wr,Eb=sd,Tb=bv,Cb=ae,Rb=Tv,wb=yb("".endsWith),Ib=yb("".slice),Ab=Math.min,Ob=Rb("endsWith");gb({target:"String",proto:!0,forced:!!(Ob||(mb=Sb(String.prototype,"endsWith"),!mb||mb.writable))&&!Ob},{endsWith:function(e){var t=Eb(Cb(this));Tb(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,i=void 0===n?r:Ab(bb(n),r),o=Eb(e);return wb?wb(t,o,i):Ib(t,i-o.length,i)===o}});var kb=zl.map;function Nb(e){return void 0===e&&(e=""),e.endsWith("com")||e.endsWith("net")||e.endsWith("org")?"https://".concat(e,"/dispatch/v1/AccessInfo?Action=GetAccessInfo"):e}vi({target:"Array",proto:!0,forced:!sf("map")},{map:function(e){return kb(this,e,arguments.length>1?arguments[1]:void 0)}});var Db={VERSION:"4.0.0-alpha.0",ICE_CONFIG_REQUEST_URLS_INTERNAL:"access.rtc.volcvideo.com,access2-hl.rtc.volcvideo.com,rtcg-access.volcvideos.com".split(",").map(Nb),ICE_CONFIG_REQUEST_URLS:[],EXPECTED_ADDR:""};function Pb(e,t){if("VERSION"!==e)return"ICE_CONFIG_REQUEST_URLS"===e?("string"==typeof t&&(t=[t]),void(Db.ICE_CONFIG_REQUEST_URLS=t.map(Nb))):void(Db[e]=t)}function Mb(e){return Db[e]}function xb(e,t){var n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g,y=(null===(n=t.video)||void 0===n?void 0:n.width)||640,S=(null===(r=t.video)||void 0===r?void 0:r.height)||360;return{type:"transcode",action:e,transcodeMeta:{transcode:{url:t.url},audio:{codec:(null===(i=t.audio)||void 0===i?void 0:i.codec)||"AAC",bitRate:1e3*((null===(o=t.audio)||void 0===o?void 0:o.kBitRate)||48),sampleRate:1e3*((null===(a=t.audio)||void 0===a?void 0:a.sampleRate)||44.1),channels:(null===(s=t.audio)||void 0===s?void 0:s.channels)||1,profile:(null===(c=t.audio)||void 0===c?void 0:c.AACProfile)||"LC"},video:{codec:(null===(u=t.video)||void 0===u?void 0:u.codec)||"H264",fps:(null===(d=t.video)||void 0===d?void 0:d.fps)||15,gop:(null===(l=t.video)||void 0===l?void 0:l.gop)||30,lowLatency:null===(h=null===(f=t.video)||void 0===f?void 0:f.lowLatency)||void 0===h||h,bitRate:1e3*((null===(p=t.video)||void 0===p?void 0:p.kBitRate)||40),width:y,height:S},layout:{canvas:{bgnd:(null===(_=t.layout)||void 0===_?void 0:_.backgroundColor)||"#000000"},regions:(null===(m=null===(v=t.layout)||void 0===v?void 0:v.regions)||void 0===m?void 0:m.map((function(e){return{alpha:e.alpha,uid:e.userId,zorder:e.zorder,x:e.x/y,y:e.y/S,w:e.w/y,h:e.h/S,renderMode:e.renderMode||1,contentControl:e.contentControl||0,screen:e.isScreenStream,local_user:e.isLocalUser}})))||[],app_data:(null===(g=t.layout)||void 0===g?void 0:g.appData)||""}}}}var Ub=vi,Lb=Pr.indexOf,jb=rl,Vb=q([].indexOf),Bb=!!Vb&&1/Vb([1],1,-0)<0,Fb=jb("indexOf");Ub({target:"Array",proto:!0,forced:Bb||!Fb},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Bb?Vb(this,e,t)||0:Lb(this,e,t)}});var zb,Hb,Gb,Wb={exports:{}},Yb=kv,Kb=N,qb=A,Jb=de,Xb=fe,Zb=st,$b=kc,Qb=Le,eE=gn,tE=yn.exports,nE=Zt.f,rE=me,iE=Sa,oE=Ka,aE=Tt,sE=ft,cE=qb.Int8Array,uE=cE&&cE.prototype,dE=qb.Uint8ClampedArray,lE=dE&&dE.prototype,fE=cE&&iE(cE),hE=uE&&iE(uE),pE=Object.prototype,_E=qb.TypeError,vE=aE("toStringTag"),mE=sE("TYPED_ARRAY_TAG"),gE=sE("TYPED_ARRAY_CONSTRUCTOR"),yE=Yb&&!!oE&&"Opera"!==$b(qb.opera),SE=!1,bE={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},EE={BigInt64Array:8,BigUint64Array:8},TE=function(e){if(!Xb(e))return!1;var t=$b(e);return Zb(bE,t)||Zb(EE,t)};for(zb in bE)(Gb=(Hb=qb[zb])&&Hb.prototype)?eE(Gb,gE,Hb):yE=!1;for(zb in EE)(Gb=(Hb=qb[zb])&&Hb.prototype)&&eE(Gb,gE,Hb);if((!yE||!Jb(fE)||fE===Function.prototype)&&(fE=function(){throw _E("Incorrect invocation")},yE))for(zb in bE)qb[zb]&&oE(qb[zb],fE);if((!yE||!hE||hE===pE)&&(hE=fE.prototype,yE))for(zb in bE)qb[zb]&&oE(qb[zb].prototype,hE);if(yE&&iE(lE)!==hE&&oE(lE,hE),Kb&&!Zb(hE,vE))for(zb in SE=!0,nE(hE,vE,{get:function(){return Xb(this)?this[mE]:void 0}}),bE)qb[zb]&&eE(qb[zb],mE,zb);var CE={NATIVE_ARRAY_BUFFER_VIEWS:yE,TYPED_ARRAY_CONSTRUCTOR:gE,TYPED_ARRAY_TAG:SE&&mE,aTypedArray:function(e){if(TE(e))return e;throw _E("Target is not a typed array")},aTypedArrayConstructor:function(e){if(Jb(e)&&(!oE||rE(fE,e)))return e;throw _E(Qb(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,r){if(Kb){if(n)for(var i in bE){var o=qb[i];if(o&&Zb(o.prototype,e))try{delete o.prototype[e]}catch(n){try{o.prototype[e]=t}catch(e){}}}hE[e]&&!n||tE(hE,e,n?t:yE&&uE[e]||t,r)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(Kb){if(oE){if(n)for(r in bE)if((i=qb[r])&&Zb(i,e))try{delete i[e]}catch(e){}if(fE[e]&&!n)return;try{return tE(fE,e,n?t:yE&&fE[e]||t)}catch(e){}}for(r in bE)!(i=qb[r])||i[e]&&!n||tE(i,e,t)}},isView:function(e){if(!Xb(e))return!1;var t=$b(e);return"DataView"===t||Zb(bE,t)||Zb(EE,t)},isTypedArray:TE,TypedArray:fE,TypedArrayPrototype:hE},RE=A,wE=k,IE=pu,AE=CE.NATIVE_ARRAY_BUFFER_VIEWS,OE=RE.ArrayBuffer,kE=RE.Int8Array,NE=!AE||!wE((function(){kE(1)}))||!wE((function(){new kE(-1)}))||!IE((function(e){new kE,new kE(null),new kE(1.5),new kE(e)}),!0)||wE((function(){return 1!==new kE(new OE(2),1,void 0).length})),DE=fe,PE=Math.floor,ME=Number.isInteger||function(e){return!DE(e)&&isFinite(e)&&PE(e)===e},xE=yr,UE=A.RangeError,LE=function(e){var t=xE(e);if(t<0)throw UE("The argument can't be less than 0");return t},jE=A.RangeError,VE=function(e,t){var n=LE(e);if(n%t)throw jE("Wrong offset");return n},BE=vc,FE=x,zE=Mf,HE=it,GE=Ar,WE=zc,YE=xc,KE=Sc,qE=CE.aTypedArrayConstructor,JE=vi,XE=A,ZE=x,$E=N,QE=NE,eT=CE,tT=Ym,nT=uu,rT=z,iT=gn,oT=ME,aT=wr,sT=Mv,cT=VE,uT=xt,dT=st,lT=kc,fT=fe,hT=xe,pT=ta,_T=me,vT=Ka,mT=vr.f,gT=function(e){var t,n,r,i,o,a,s=zE(this),c=HE(e),u=arguments.length,d=u>1?arguments[1]:void 0,l=void 0!==d,f=YE(c);if(f&&!KE(f))for(a=(o=WE(c,f)).next,c=[];!(i=FE(a,o)).done;)c.push(i.value);for(l&&u>2&&(d=BE(d,arguments[2])),n=GE(c),r=new(qE(s))(n),t=0;n>t;t++)r[t]=l?d(c[t],t):c[t];return r},yT=zl.forEach,ST=Bu,bT=Zt,ET=O,TT=gu,CT=Qn.get,RT=Qn.set,wT=bT.f,IT=ET.f,AT=Math.round,OT=XE.RangeError,kT=tT.ArrayBuffer,NT=kT.prototype,DT=tT.DataView,PT=eT.NATIVE_ARRAY_BUFFER_VIEWS,MT=eT.TYPED_ARRAY_CONSTRUCTOR,xT=eT.TYPED_ARRAY_TAG,UT=eT.TypedArray,LT=eT.TypedArrayPrototype,jT=eT.aTypedArrayConstructor,VT=eT.isTypedArray,BT="BYTES_PER_ELEMENT",FT="Wrong length",zT=function(e,t){jT(e);for(var n=0,r=t.length,i=new e(r);r>n;)i[n]=t[n++];return i},HT=function(e,t){wT(e,t,{get:function(){return CT(this)[t]}})},GT=function(e){var t;return _T(NT,e)||"ArrayBuffer"==(t=lT(e))||"SharedArrayBuffer"==t},WT=function(e,t){return VT(e)&&!hT(t)&&t in e&&oT(+t)&&t>=0},YT=function(e,t){return t=uT(t),WT(e,t)?rT(2,e[t]):IT(e,t)},KT=function(e,t,n){return t=uT(t),!(WT(e,t)&&fT(n)&&dT(n,"value"))||dT(n,"get")||dT(n,"set")||n.configurable||dT(n,"writable")&&!n.writable||dT(n,"enumerable")&&!n.enumerable?wT(e,t,n):(e[t]=n.value,e)};$E?(PT||(ET.f=YT,bT.f=KT,HT(LT,"buffer"),HT(LT,"byteOffset"),HT(LT,"byteLength"),HT(LT,"length")),JE({target:"Object",stat:!0,forced:!PT},{getOwnPropertyDescriptor:YT,defineProperty:KT}),Wb.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,i=e+(n?"Clamped":"")+"Array",o="get"+e,a="set"+e,s=XE[i],c=s,u=c&&c.prototype,d={},l=function(e,t){wT(e,t,{get:function(){return function(e,t){var n=CT(e);return n.view[o](t*r+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var o=CT(e);n&&(i=(i=AT(i))<0?0:i>255?255:255&i),o.view[a](t*r+o.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};PT?QE&&(c=t((function(e,t,n,i){return nT(e,u),TT(fT(t)?GT(t)?void 0!==i?new s(t,cT(n,r),i):void 0!==n?new s(t,cT(n,r)):new s(t):VT(t)?zT(c,t):ZE(gT,c,t):new s(sT(t)),e,c)})),vT&&vT(c,UT),yT(mT(s),(function(e){e in c||iT(c,e,s[e])})),c.prototype=u):(c=t((function(e,t,n,i){nT(e,u);var o,a,s,d=0,f=0;if(fT(t)){if(!GT(t))return VT(t)?zT(c,t):ZE(gT,c,t);o=t,f=cT(n,r);var h=t.byteLength;if(void 0===i){if(h%r)throw OT(FT);if((a=h-f)<0)throw OT(FT)}else if((a=aT(i)*r)+f>h)throw OT(FT);s=a/r}else s=sT(t),o=new kT(a=s*r);for(RT(e,{buffer:o,byteOffset:f,byteLength:a,length:s,view:new DT(o)});d<s;)l(e,d++)})),vT&&vT(c,UT),u=c.prototype=pT(LT)),u.constructor!==c&&iT(u,"constructor",c),iT(u,MT,c),xT&&iT(u,xT,i),d[i]=c,JE({global:!0,forced:c!=s,sham:!PT},d),BT in c||iT(c,BT,r),BT in u||iT(u,BT,r),ST(i)}):Wb.exports=function(){},(0,Wb.exports)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var qT=it,JT=Tr,XT=Ar,ZT=Math.min,$T=[].copyWithin||function(e,t){var n=qT(this),r=XT(n),i=JT(e,r),o=JT(t,r),a=arguments.length>2?arguments[2]:void 0,s=ZT((void 0===a?r:JT(a,r))-o,r-i),c=1;for(o<i&&i<o+s&&(c=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=c,o+=c;return n},QT=CE,eC=q($T),tC=QT.aTypedArray;(0,QT.exportTypedArrayMethod)("copyWithin",(function(e,t){return eC(tC(this),e,t,arguments.length>2?arguments[2]:void 0)}));var nC=zl.every,rC=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("every",(function(e){return nC(rC(this),e,arguments.length>1?arguments[1]:void 0)}));var iC=x,oC=Wv,aC=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("fill",(function(e){var t=arguments.length;return iC(oC,aC(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}));var sC=Ar,cC=jf,uC=CE.TYPED_ARRAY_CONSTRUCTOR,dC=CE.aTypedArrayConstructor,lC=function(e){return dC(cC(e,e[uC]))},fC=function(e,t){for(var n=0,r=sC(t),i=new e(r);r>n;)i[n]=t[n++];return i},hC=lC,pC=zl.filter,_C=function(e,t){return fC(hC(e),t)},vC=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("filter",(function(e){var t=pC(vC(this),e,arguments.length>1?arguments[1]:void 0);return _C(this,t)}));var mC=zl.find,gC=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("find",(function(e){return mC(gC(this),e,arguments.length>1?arguments[1]:void 0)}));var yC=zl.findIndex,SC=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("findIndex",(function(e){return yC(SC(this),e,arguments.length>1?arguments[1]:void 0)}));var bC=zl.forEach,EC=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("forEach",(function(e){bC(EC(this),e,arguments.length>1?arguments[1]:void 0)}));var TC=Pr.includes,CC=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("includes",(function(e){return TC(CC(this),e,arguments.length>1?arguments[1]:void 0)}));var RC=Pr.indexOf,wC=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("indexOf",(function(e){return RC(wC(this),e,arguments.length>1?arguments[1]:void 0)}));var IC=A,AC=k,OC=q,kC=CE,NC=Rs,DC=Tt("iterator"),PC=IC.Uint8Array,MC=OC(NC.values),xC=OC(NC.keys),UC=OC(NC.entries),LC=kC.aTypedArray,jC=kC.exportTypedArrayMethod,VC=PC&&PC.prototype,BC=!AC((function(){VC[DC].call([1])})),FC=!!VC&&VC.values&&VC[DC]===VC.values&&"values"===VC.values.name,zC=function(){return MC(LC(this))};jC("entries",(function(){return UC(LC(this))}),BC),jC("keys",(function(){return xC(LC(this))}),BC),jC("values",zC,BC||!FC,{name:"values"}),jC(DC,zC,BC||!FC,{name:"values"});var HC=CE.aTypedArray,GC=CE.exportTypedArrayMethod,WC=q([].join);GC("join",(function(e){return WC(HC(this),e)}));var YC=Hf,KC=ue,qC=yr,JC=Ar,XC=rl,ZC=Math.min,$C=[].lastIndexOf,QC=!!$C&&1/[1].lastIndexOf(1,-0)<0,eR=XC("lastIndexOf"),tR=QC||!eR?function(e){if(QC)return YC($C,this,arguments)||0;var t=KC(this),n=JC(t),r=n-1;for(arguments.length>1&&(r=ZC(r,qC(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:$C,nR=Hf,rR=tR,iR=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("lastIndexOf",(function(e){var t=arguments.length;return nR(rR,iR(this),t>1?[e,arguments[1]]:[e])}));var oR=zl.map,aR=lC,sR=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("map",(function(e){return oR(sR(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(aR(e))(t)}))}));var cR=Fe,uR=it,dR=ie,lR=Ar,fR=A.TypeError,hR=function(e){return function(t,n,r,i){cR(n);var o=uR(t),a=dR(o),s=lR(o),c=e?s-1:0,u=e?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,e?c<0:s<=c)throw fR("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},pR={left:hR(!1),right:hR(!0)},_R=pR.left,vR=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("reduce",(function(e){var t=arguments.length;return _R(vR(this),e,t,t>1?arguments[1]:void 0)}));var mR=pR.right,gR=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("reduceRight",(function(e){var t=arguments.length;return mR(gR(this),e,t,t>1?arguments[1]:void 0)}));var yR=CE.aTypedArray,SR=CE.exportTypedArrayMethod,bR=Math.floor;SR("reverse",(function(){for(var e,t=this,n=yR(t).length,r=bR(n/2),i=0;i<r;)e=t[i],t[i++]=t[--n],t[n]=e;return t}));var ER=A,TR=x,CR=CE,RR=Ar,wR=VE,IR=it,AR=k,OR=ER.RangeError,kR=ER.Int8Array,NR=kR&&kR.prototype,DR=NR&&NR.set,PR=CR.aTypedArray,MR=CR.exportTypedArrayMethod,xR=!AR((function(){var e=new Uint8ClampedArray(2);return TR(DR,e,{length:1,0:3},1),3!==e[1]})),UR=xR&&CR.NATIVE_ARRAY_BUFFER_VIEWS&&AR((function(){var e=new kR(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));MR("set",(function(e){PR(this);var t=wR(arguments.length>1?arguments[1]:void 0,1),n=IR(e);if(xR)return TR(DR,this,n,t);var r=this.length,i=RR(n),o=0;if(i+t>r)throw OR("Wrong length");for(;o<i;)this[t+o]=n[o++]}),!xR||UR);var LR=lC,jR=zd,VR=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("slice",(function(e,t){for(var n=jR(VR(this),e,t),r=LR(this),i=0,o=n.length,a=new r(o);o>i;)a[i]=n[i++];return a}),k((function(){new Int8Array(1).slice()})));var BR=zl.some,FR=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("some",(function(e){return BR(FR(this),e,arguments.length>1?arguments[1]:void 0)}));var zR=A,HR=q,GR=k,WR=Fe,YR=D_,KR=CE,qR=M_,JR=x_,XR=Re,ZR=L_,$R=zR.Array,QR=KR.aTypedArray,ew=KR.exportTypedArrayMethod,tw=zR.Uint16Array,nw=tw&&HR(tw.prototype.sort),rw=!(!nw||GR((function(){nw(new tw(2),null)}))&&GR((function(){nw(new tw(2),{})}))),iw=!!nw&&!GR((function(){if(XR)return XR<74;if(qR)return qR<67;if(JR)return!0;if(ZR)return ZR<602;var e,t,n=new tw(516),r=$R(516);for(e=0;e<516;e++)t=e%4,n[e]=515-e,r[e]=e-2*t+3;for(nw(n,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(n[e]!==r[e])return!0}));ew("sort",(function(e){return void 0!==e&&WR(e),iw?nw(this,e):YR(QR(this),function(e){return function(t,n){return void 0!==e?+e(t,n)||0:n!=n?-1:t!=t?1:0===t&&0===n?1/t>0&&1/n<0?1:-1:t>n}}(e))}),!iw||rw);var ow=wr,aw=Tr,sw=lC,cw=CE.aTypedArray;(0,CE.exportTypedArrayMethod)("subarray",(function(e,t){var n=cw(this),r=n.length,i=aw(e,r);return new(sw(n))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,ow((void 0===t?r:aw(t,r))-i))}));var uw=Hf,dw=CE,lw=k,fw=zd,hw=A.Int8Array,pw=dw.aTypedArray,_w=dw.exportTypedArrayMethod,vw=[].toLocaleString,mw=!!hw&&lw((function(){vw.call(new hw(1))}));_w("toLocaleString",(function(){return uw(vw,mw?fw(pw(this)):pw(this),fw(arguments))}),lw((function(){return[1,2].toLocaleString()!=new hw([1,2]).toLocaleString()}))||!lw((function(){hw.prototype.toLocaleString.call([1,2])})));var gw=CE.exportTypedArrayMethod,yw=k,Sw=q,bw=A.Uint8Array,Ew=bw&&bw.prototype||{},Tw=[].toString,Cw=Sw([].join);yw((function(){Tw.call({})}))&&(Tw=function(){return Cw(this)});var Rw=Ew.toString!=Tw;gw("toString",Tw,Rw);var ww={};!function(e){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},e.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},i={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)}(ww);var Iw={},Aw={},Ow={},kw=ww;function Nw(e){for(var t=e.length;--t>=0;)e[t]=0}var Dw=256,Pw=286,Mw=30,xw=15,Uw=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Lw=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],jw=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Vw=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Bw=new Array(576);Nw(Bw);var Fw=new Array(60);Nw(Fw);var zw=new Array(512);Nw(zw);var Hw=new Array(256);Nw(Hw);var Gw=new Array(29);Nw(Gw);var Ww,Yw,Kw,qw=new Array(Mw);function Jw(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function Xw(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function Zw(e){return e<256?zw[e]:zw[256+(e>>>7)]}function $w(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function Qw(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,$w(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function eI(e,t,n){Qw(e,n[2*t],n[2*t+1])}function tI(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function nI(e,t,n){var r,i,o=new Array(16),a=0;for(r=1;r<=xw;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=tI(o[s]++,s))}}function rI(e){var t;for(t=0;t<Pw;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Mw;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function iI(e){e.bi_valid>8?$w(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function oI(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function aI(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&oI(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!oI(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function sI(e,t,n){var r,i,o,a,s=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?eI(e,i,t):(eI(e,(o=Hw[i])+Dw+1,t),0!==(a=Uw[o])&&Qw(e,i-=Gw[o],a),eI(e,o=Zw(--r),n),0!==(a=Lw[o])&&Qw(e,r-=qw[o],a))}while(s<e.last_lit);eI(e,256,t)}function cI(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)aI(e,o,n);i=c;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],aI(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,aI(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,c=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,l=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,_=0;for(o=0;o<=xw;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)>p&&(o=p,_++),c[2*r+1]=o,r>u||(e.bl_count[o]++,a=0,r>=h&&(a=f[r-h]),s=c[2*r],e.opt_len+=s*(o+a),l&&(e.static_len+=s*(d[2*r+1]+a)));if(0!==_){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,_-=2}while(_>0);for(o=p;0!==o;o--)for(r=e.bl_count[o];0!==r;)(i=e.heap[--n])>u||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,t),nI(o,u,e.bl_count)}function uI(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4))}function dI(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<u)do{eI(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(eI(e,i,e.bl_tree),s--),eI(e,16,e.bl_tree),Qw(e,s-3,2)):s<=10?(eI(e,17,e.bl_tree),Qw(e,s-3,3)):(eI(e,18,e.bl_tree),Qw(e,s-11,7));s=0,o=i,0===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4)}}Nw(qw);var lI=!1;function fI(e,t,n,r){Qw(e,0+(r?1:0),3),function(e,t,n,r){iI(e),r&&($w(e,n),$w(e,~n)),kw.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}Ow._tr_init=function(e){lI||(!function(){var e,t,n,r,i,o=new Array(16);for(n=0,r=0;r<28;r++)for(Gw[r]=n,e=0;e<1<<Uw[r];e++)Hw[n++]=r;for(Hw[n-1]=r,i=0,r=0;r<16;r++)for(qw[r]=i,e=0;e<1<<Lw[r];e++)zw[i++]=r;for(i>>=7;r<Mw;r++)for(qw[r]=i<<7,e=0;e<1<<Lw[r]-7;e++)zw[256+i++]=r;for(t=0;t<=xw;t++)o[t]=0;for(e=0;e<=143;)Bw[2*e+1]=8,e++,o[8]++;for(;e<=255;)Bw[2*e+1]=9,e++,o[9]++;for(;e<=279;)Bw[2*e+1]=7,e++,o[7]++;for(;e<=287;)Bw[2*e+1]=8,e++,o[8]++;for(nI(Bw,287,o),e=0;e<Mw;e++)Fw[2*e+1]=5,Fw[2*e]=tI(e,5);Ww=new Jw(Bw,Uw,257,Pw,xw),Yw=new Jw(Fw,Lw,0,Mw,xw),Kw=new Jw(new Array(0),jw,0,19,7)}(),lI=!0),e.l_desc=new Xw(e.dyn_ltree,Ww),e.d_desc=new Xw(e.dyn_dtree,Yw),e.bl_desc=new Xw(e.bl_tree,Kw),e.bi_buf=0,e.bi_valid=0,rI(e)},Ow._tr_stored_block=fI,Ow._tr_flush_block=function(e,t,n,r){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<Dw;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),cI(e,e.l_desc),cI(e,e.d_desc),a=function(e){var t;for(uI(e,e.dyn_ltree,e.l_desc.max_code),uI(e,e.dyn_dtree,e.d_desc.max_code),cI(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Vw[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==t?fI(e,t,n,r):4===e.strategy||o===i?(Qw(e,2+(r?1:0),3),sI(e,Bw,Fw)):(Qw(e,4+(r?1:0),3),function(e,t,n,r){var i;for(Qw(e,t-257,5),Qw(e,n-1,5),Qw(e,r-4,4),i=0;i<r;i++)Qw(e,e.bl_tree[2*Vw[i]+1],3);dI(e,e.dyn_ltree,t-1),dI(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),sI(e,e.dyn_ltree,e.dyn_dtree)),rI(e),r&&iI(e)},Ow._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Hw[n]+Dw+1)]++,e.dyn_dtree[2*Zw(t)]++),e.last_lit===e.lit_bufsize-1},Ow._tr_align=function(e){Qw(e,2,3),eI(e,256,Bw),function(e){16===e.bi_valid?($w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)};var hI=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+t[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0};var pI=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();var _I,vI=function(e,t,n,r){var i=pI,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e},mI={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},gI=ww,yI=Ow,SI=hI,bI=vI,EI=mI,TI=-2,CI=258,RI=262,wI=103,II=113,AI=666;function OI(e,t){return e.msg=EI[t],t}function kI(e){return(e<<1)-(e>4?9:0)}function NI(e){for(var t=e.length;--t>=0;)e[t]=0}function DI(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(gI.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function PI(e,t){yI._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,DI(e.strm)}function MI(e,t){e.pending_buf[e.pending++]=t}function xI(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function UI(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-RI?e.strstart-(e.w_size-RI):0,u=e.window,d=e.w_mask,l=e.prev,f=e.strstart+CI,h=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===p&&u[n+a-1]===h&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<f);if(r=CI-(f-o),o=f-CI,r>a){if(e.match_start=t,a=r,r>=s)break;h=u[o+a-1],p=u[o+a]}}}while((t=l[t&d])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead}function LI(e){var t,n,r,i,o,a,s,c,u,d,l=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=l+(l-RI)){gI.arraySet(e.window,e.window,l,l,0),e.match_start-=l,e.strstart-=l,e.block_start-=l,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=l?r-l:0}while(--n);t=n=l;do{r=e.prev[--t],e.prev[t]=r>=l?r-l:0}while(--n);i+=l}if(0===e.strm.avail_in)break;if(a=e.strm,s=e.window,c=e.strstart+e.lookahead,u=i,d=void 0,(d=a.avail_in)>u&&(d=u),n=0===d?0:(a.avail_in-=d,gI.arraySet(s,a.input,a.next_in,d,c),1===a.state.wrap?a.adler=SI(a.adler,s,d,c):2===a.state.wrap&&(a.adler=bI(a.adler,s,d,c)),a.next_in+=d,a.total_in+=d,d),e.lookahead+=n,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+3-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<RI&&0!==e.strm.avail_in)}function jI(e,t){for(var n,r;;){if(e.lookahead<RI){if(LI(e),e.lookahead<RI&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-RI&&(e.match_length=UI(e,n)),e.match_length>=3)if(r=yI._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=yI._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(PI(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(PI(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(PI(e,!1),0===e.strm.avail_out)?1:2}function VI(e,t){for(var n,r,i;;){if(e.lookahead<RI){if(LI(e),e.lookahead<RI&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-RI&&(e.match_length=UI(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=yI._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(PI(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=yI._tr_tally(e,0,e.window[e.strstart-1]))&&PI(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=yI._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(PI(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(PI(e,!1),0===e.strm.avail_out)?1:2}function BI(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function FI(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new gI.Buf16(1146),this.dyn_dtree=new gI.Buf16(122),this.bl_tree=new gI.Buf16(78),NI(this.dyn_ltree),NI(this.dyn_dtree),NI(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new gI.Buf16(16),this.heap=new gI.Buf16(573),NI(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new gI.Buf16(573),NI(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function zI(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:II,e.adler=2===t.wrap?0:1,t.last_flush=0,yI._tr_init(t),0):OI(e,TI)}function HI(e){var t,n=zI(e);return 0===n&&((t=e.state).window_size=2*t.w_size,NI(t.head),t.max_lazy_match=_I[t.level].max_lazy,t.good_match=_I[t.level].good_length,t.nice_match=_I[t.level].nice_length,t.max_chain_length=_I[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function GI(e,t,n,r,i,o){if(!e)return TI;var a=1;if(-1===t&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),i<1||i>9||8!==n||r<8||r>15||t<0||t>9||o<0||o>4)return OI(e,TI);8===r&&(r=9);var s=new FI;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new gI.Buf8(2*s.w_size),s.head=new gI.Buf16(s.hash_size),s.prev=new gI.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new gI.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,HI(e)}_I=[new BI(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(LI(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,PI(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-RI&&(PI(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(PI(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(PI(e,!1),e.strm.avail_out),1)})),new BI(4,4,8,4,jI),new BI(4,5,16,8,jI),new BI(4,6,32,32,jI),new BI(4,4,16,16,VI),new BI(8,16,32,32,VI),new BI(8,16,128,128,VI),new BI(8,32,128,256,VI),new BI(32,128,258,1024,VI),new BI(32,258,258,4096,VI)],Aw.deflateInit=function(e,t){return GI(e,t,8,15,8,0)},Aw.deflateInit2=GI,Aw.deflateReset=HI,Aw.deflateResetKeep=zI,Aw.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?TI:(e.state.gzhead=t,0):TI},Aw.deflate=function(e,t){var n,r,i,o;if(!e||!e.state||t>5||t<0)return e?OI(e,TI):TI;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||r.status===AI&&4!==t)return OI(e,0===e.avail_out?-5:TI);if(r.strm=e,n=r.last_flush,r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,MI(r,31),MI(r,139),MI(r,8),r.gzhead?(MI(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),MI(r,255&r.gzhead.time),MI(r,r.gzhead.time>>8&255),MI(r,r.gzhead.time>>16&255),MI(r,r.gzhead.time>>24&255),MI(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),MI(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(MI(r,255&r.gzhead.extra.length),MI(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=bI(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(MI(r,0),MI(r,0),MI(r,0),MI(r,0),MI(r,0),MI(r,9===r.level?2:r.strategy>=2||r.level<2?4:0),MI(r,3),r.status=II);else{var a=8+(r.w_bits-8<<4)<<8;a|=(r.strategy>=2||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=II,xI(r,a),0!==r.strstart&&(xI(r,e.adler>>>16),xI(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(e.adler=bI(e.adler,r.pending_buf,r.pending-i,i)),DI(e),i=r.pending,r.pending!==r.pending_buf_size));)MI(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(e.adler=bI(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=bI(e.adler,r.pending_buf,r.pending-i,i)),DI(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,MI(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=bI(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(e.adler=bI(e.adler,r.pending_buf,r.pending-i,i)),DI(e),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,MI(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(e.adler=bI(e.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=wI)}else r.status=wI;if(r.status===wI&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&DI(e),r.pending+2<=r.pending_buf_size&&(MI(r,255&e.adler),MI(r,e.adler>>8&255),e.adler=0,r.status=II)):r.status=II),0!==r.pending){if(DI(e),0===e.avail_out)return r.last_flush=-1,0}else if(0===e.avail_in&&kI(t)<=kI(n)&&4!==t)return OI(e,-5);if(r.status===AI&&0!==e.avail_in)return OI(e,-5);if(0!==e.avail_in||0!==r.lookahead||0!==t&&r.status!==AI){var s=2===r.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(LI(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=yI._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(PI(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(PI(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(PI(e,!1),0===e.strm.avail_out)?1:2}(r,t):3===r.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=CI){if(LI(e),e.lookahead<=CI&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+CI;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=CI-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=yI._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=yI._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(PI(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(PI(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(PI(e,!1),0===e.strm.avail_out)?1:2}(r,t):_I[r.level].func(r,t);if(3!==s&&4!==s||(r.status=AI),1===s||3===s)return 0===e.avail_out&&(r.last_flush=-1),0;if(2===s&&(1===t?yI._tr_align(r):5!==t&&(yI._tr_stored_block(r,0,0,!1),3===t&&(NI(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),DI(e),0===e.avail_out))return r.last_flush=-1,0}return 4!==t?0:r.wrap<=0?1:(2===r.wrap?(MI(r,255&e.adler),MI(r,e.adler>>8&255),MI(r,e.adler>>16&255),MI(r,e.adler>>24&255),MI(r,255&e.total_in),MI(r,e.total_in>>8&255),MI(r,e.total_in>>16&255),MI(r,e.total_in>>24&255)):(xI(r,e.adler>>>16),xI(r,65535&e.adler)),DI(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?0:1)},Aw.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==wI&&t!==II&&t!==AI?OI(e,TI):(e.state=null,t===II?OI(e,-3):0):TI},Aw.deflateSetDictionary=function(e,t){var n,r,i,o,a,s,c,u,d=t.length;if(!e||!e.state)return TI;if(2===(o=(n=e.state).wrap)||1===o&&42!==n.status||n.lookahead)return TI;for(1===o&&(e.adler=SI(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===o&&(NI(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new gI.Buf8(n.w_size),gI.arraySet(u,t,d-n.w_size,n.w_size,0),t=u,d=n.w_size),a=e.avail_in,s=e.next_in,c=e.input,e.avail_in=d,e.next_in=0,e.input=t,LI(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--i);n.strstart=r,n.lookahead=2,LI(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=c,e.avail_in=a,n.wrap=o,0},Aw.deflateInfo="pako deflate (from Nodeca project)";var WI={},YI=ww,KI=!0,qI=!0;try{String.fromCharCode.apply(null,[0])}catch(e){KI=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){qI=!1}for(var JI=new YI.Buf8(256),XI=0;XI<256;XI++)JI[XI]=XI>=252?6:XI>=248?5:XI>=240?4:XI>=224?3:XI>=192?2:1;function ZI(e,t){if(t<65534&&(e.subarray&&qI||!e.subarray&&KI))return String.fromCharCode.apply(null,YI.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}JI[254]=JI[254]=1,WI.string2buf=function(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new YI.Buf8(s),o=0,i=0;o<s;i++)55296==(64512&(n=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(r=e.charCodeAt(i+1)))&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},WI.buf2binstring=function(e){return ZI(e,e.length)},WI.binstring2buf=function(e){for(var t=new YI.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},WI.buf2string=function(e,t){var n,r,i,o,a=t||e.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)s[r++]=i;else if((o=JI[i])>4)s[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return ZI(s,r)},WI.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+JI[e[n]]>t?n:t};var $I=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},QI=Aw,eA=ww,tA=WI,nA=mI,rA=$I,iA=Object.prototype.toString;function oA(e){if(!(this instanceof oA))return new oA(e);this.options=eA.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rA,this.strm.avail_out=0;var n=QI.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(nA[n]);if(t.header&&QI.deflateSetHeader(this.strm,t.header),t.dictionary){var r;if(r="string"==typeof t.dictionary?tA.string2buf(t.dictionary):"[object ArrayBuffer]"===iA.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=QI.deflateSetDictionary(this.strm,r)))throw new Error(nA[n]);this._dict_set=!0}}function aA(e,t){var n=new oA(t);if(n.push(e,!0),n.err)throw n.msg||nA[n.err];return n.result}oA.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=tA.string2buf(e):"[object ArrayBuffer]"===iA.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new eA.Buf8(o),i.next_out=0,i.avail_out=o),1!==(n=QI.deflate(i,r))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==r&&2!==r)||("string"===this.options.to?this.onData(tA.buf2binstring(eA.shrinkBuf(i.output,i.next_out))):this.onData(eA.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==n);return 4===r?(n=QI.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==r||(this.onEnd(0),i.avail_out=0,!0)},oA.prototype.onData=function(e){this.chunks.push(e)},oA.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=eA.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},Iw.Deflate=oA,Iw.deflate=aA,Iw.deflateRaw=function(e,t){return(t=t||{}).raw=!0,aA(e,t)},Iw.gzip=function(e,t){return(t=t||{}).gzip=!0,aA(e,t)};var sA={},cA={},uA=ww,dA=15,lA=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],fA=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],hA=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],pA=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],_A=ww,vA=hI,mA=vI,gA=function(e,t){var n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g,y,S,b,E,T,C,R,w;n=e.state,r=e.next_in,R=e.input,i=r+(e.avail_in-5),o=e.next_out,w=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),c=n.dmax,u=n.wsize,d=n.whave,l=n.wnext,f=n.window,h=n.hold,p=n.bits,_=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;e:do{p<15&&(h+=R[r++]<<p,p+=8,h+=R[r++]<<p,p+=8),y=_[h&m];t:for(;;){if(h>>>=S=y>>>24,p-=S,0===(S=y>>>16&255))w[o++]=65535&y;else{if(!(16&S)){if(0==(64&S)){y=_[(65535&y)+(h&(1<<S)-1)];continue t}if(32&S){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}b=65535&y,(S&=15)&&(p<S&&(h+=R[r++]<<p,p+=8),b+=h&(1<<S)-1,h>>>=S,p-=S),p<15&&(h+=R[r++]<<p,p+=8,h+=R[r++]<<p,p+=8),y=v[h&g];n:for(;;){if(h>>>=S=y>>>24,p-=S,!(16&(S=y>>>16&255))){if(0==(64&S)){y=v[(65535&y)+(h&(1<<S)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&y,p<(S&=15)&&(h+=R[r++]<<p,(p+=8)<S&&(h+=R[r++]<<p,p+=8)),(E+=h&(1<<S)-1)>c){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=S,p-=S,E>(S=o-a)){if((S=E-S)>d&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(T=0,C=f,0===l){if(T+=u-S,S<b){b-=S;do{w[o++]=f[T++]}while(--S);T=o-E,C=w}}else if(l<S){if(T+=u+l-S,(S-=l)<b){b-=S;do{w[o++]=f[T++]}while(--S);if(T=0,l<b){b-=S=l;do{w[o++]=f[T++]}while(--S);T=o-E,C=w}}}else if(T+=l-S,S<b){b-=S;do{w[o++]=f[T++]}while(--S);T=o-E,C=w}for(;b>2;)w[o++]=C[T++],w[o++]=C[T++],w[o++]=C[T++],b-=3;b&&(w[o++]=C[T++],b>1&&(w[o++]=C[T++]))}else{T=o-E;do{w[o++]=w[T++],w[o++]=w[T++],w[o++]=w[T++],b-=3}while(b>2);b&&(w[o++]=w[T++],b>1&&(w[o++]=w[T++]))}break}}break}}while(r<i&&o<s);r-=b=p>>3,h&=(1<<(p-=b<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=h,n.bits=p},yA=function(e,t,n,r,i,o,a,s){var c,u,d,l,f,h,p,_,v,m=s.bits,g=0,y=0,S=0,b=0,E=0,T=0,C=0,R=0,w=0,I=0,A=null,O=0,k=new uA.Buf16(16),N=new uA.Buf16(16),D=null,P=0;for(g=0;g<=dA;g++)k[g]=0;for(y=0;y<r;y++)k[t[n+y]]++;for(E=m,b=dA;b>=1&&0===k[b];b--);if(E>b&&(E=b),0===b)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(S=1;S<b&&0===k[S];S++);for(E<S&&(E=S),R=1,g=1;g<=dA;g++)if(R<<=1,(R-=k[g])<0)return-1;if(R>0&&(0===e||1!==b))return-1;for(N[1]=0,g=1;g<dA;g++)N[g+1]=N[g]+k[g];for(y=0;y<r;y++)0!==t[n+y]&&(a[N[t[n+y]]++]=y);if(0===e?(A=D=a,h=19):1===e?(A=lA,O-=257,D=fA,P-=257,h=256):(A=hA,D=pA,h=-1),I=0,y=0,g=S,f=o,T=E,C=0,d=-1,l=(w=1<<E)-1,1===e&&w>852||2===e&&w>592)return 1;for(;;){p=g-C,a[y]<h?(_=0,v=a[y]):a[y]>h?(_=D[P+a[y]],v=A[O+a[y]]):(_=96,v=0),c=1<<g-C,S=u=1<<T;do{i[f+(I>>C)+(u-=c)]=p<<24|_<<16|v|0}while(0!==u);for(c=1<<g-1;I&c;)c>>=1;if(0!==c?(I&=c-1,I+=c):I=0,y++,0==--k[g]){if(g===b)break;g=t[n+a[y]]}if(g>E&&(I&l)!==d){for(0===C&&(C=E),f+=S,R=1<<(T=g-C);T+C<b&&!((R-=k[T+C])<=0);)T++,R<<=1;if(w+=1<<T,1===e&&w>852||2===e&&w>592)return 1;i[d=I&l]=E<<24|T<<16|f-o|0}}return 0!==I&&(i[f+I]=g-C<<24|64<<16|0),s.bits=E,0},SA=-2,bA=12,EA=30;function TA(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function CA(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _A.Buf16(320),this.work=new _A.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function RA(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new _A.Buf32(852),t.distcode=t.distdyn=new _A.Buf32(592),t.sane=1,t.back=-1,0):SA}function wA(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,RA(e)):SA}function IA(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?SA:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,wA(e))):SA}function AA(e,t){var n,r;return e?(r=new CA,e.state=r,r.window=null,0!==(n=IA(e,t))&&(e.state=null),n):SA}var OA,kA,NA=!0;function DA(e){if(NA){var t;for(OA=new _A.Buf32(512),kA=new _A.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(yA(1,e.lens,0,288,OA,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;yA(2,e.lens,0,32,kA,0,e.work,{bits:5}),NA=!1}e.lencode=OA,e.lenbits=9,e.distcode=kA,e.distbits=5}function PA(e,t,n,r){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new _A.Buf8(o.wsize)),r>=o.wsize?(_A.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),_A.arraySet(o.window,t,n-r,i,o.wnext),(r-=i)?(_A.arraySet(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}cA.inflateReset=wA,cA.inflateReset2=IA,cA.inflateResetKeep=RA,cA.inflateInit=function(e){return AA(e,15)},cA.inflateInit2=AA,cA.inflate=function(e,t){var n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g,y,S,b,E,T,C,R,w=0,I=new _A.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return SA;(n=e.state).mode===bA&&(n.mode=13),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,d=n.bits,l=s,f=c,T=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(2&n.wrap&&35615===u){n.check=0,I[0]=255&u,I[1]=u>>>8&255,n.check=mA(n.check,I,2,0),u=0,d=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=EA;break}if(8!=(15&u)){e.msg="unknown compression method",n.mode=EA;break}if(d-=4,E=8+(15&(u>>>=4)),0===n.wbits)n.wbits=E;else if(E>n.wbits){e.msg="invalid window size",n.mode=EA;break}n.dmax=1<<E,e.adler=n.check=1,n.mode=512&u?10:bA,u=0,d=0;break;case 2:for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(n.flags=u,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=EA;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=EA;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(I[0]=255&u,I[1]=u>>>8&255,n.check=mA(n.check,I,2,0)),u=0,d=0,n.mode=3;case 3:for(;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.head&&(n.head.time=u),512&n.flags&&(I[0]=255&u,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,n.check=mA(n.check,I,4,0)),u=0,d=0,n.mode=4;case 4:for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(I[0]=255&u,I[1]=u>>>8&255,n.check=mA(n.check,I,2,0)),u=0,d=0,n.mode=5;case 5:if(1024&n.flags){for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(I[0]=255&u,I[1]=u>>>8&255,n.check=mA(n.check,I,2,0)),u=0,d=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((h=n.length)>s&&(h=s),h&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),_A.arraySet(n.head.extra,r,o,h,E)),512&n.flags&&(n.check=mA(n.check,r,h,o)),s-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;h=0;do{E=r[o+h++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&h<s);if(512&n.flags&&(n.check=mA(n.check,r,h,o)),s-=h,o+=h,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;h=0;do{E=r[o+h++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&h<s);if(512&n.flags&&(n.check=mA(n.check,r,h,o)),s-=h,o+=h,E)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;d<16;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=EA;break}u=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=bA;break;case 10:for(;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}e.adler=n.check=TA(u),u=0,d=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=d,2;e.adler=n.check=1,n.mode=bA;case bA:if(5===t||6===t)break e;case 13:if(n.last){u>>>=7&d,d-=7&d,n.mode=27;break}for(;d<3;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}switch(n.last=1&u,d-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(DA(n),n.mode=20,6===t){u>>>=2,d-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=EA}u>>>=2,d-=2;break;case 14:for(u>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=EA;break}if(n.length=65535&u,u=0,d=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(h=n.length){if(h>s&&(h=s),h>c&&(h=c),0===h)break e;_A.arraySet(i,r,o,h,a),s-=h,o+=h,c-=h,a+=h,n.length-=h;break}n.mode=bA;break;case 17:for(;d<14;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(n.nlen=257+(31&u),u>>>=5,d-=5,n.ndist=1+(31&u),u>>>=5,d-=5,n.ncode=4+(15&u),u>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=EA;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;d<3;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.lens[A[n.have++]]=7&u,u>>>=3,d-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},T=yA(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid code lengths set",n.mode=EA;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(w=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,g=65535&w,!((v=w>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(g<16)u>>>=v,d-=v,n.lens[n.have++]=g;else{if(16===g){for(R=v+2;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(u>>>=v,d-=v,0===n.have){e.msg="invalid bit length repeat",n.mode=EA;break}E=n.lens[n.have-1],h=3+(3&u),u>>>=2,d-=2}else if(17===g){for(R=v+3;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}d-=v,E=0,h=3+(7&(u>>>=v)),u>>>=3,d-=3}else{for(R=v+7;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}d-=v,E=0,h=11+(127&(u>>>=v)),u>>>=7,d-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=EA;break}for(;h--;)n.lens[n.have++]=E}}if(n.mode===EA)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=EA;break}if(n.lenbits=9,C={bits:n.lenbits},T=yA(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,T){e.msg="invalid literal/lengths set",n.mode=EA;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},T=yA(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,T){e.msg="invalid distances set",n.mode=EA;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=d,gA(e,f),a=e.next_out,i=e.output,c=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,u=n.hold,d=n.bits,n.mode===bA&&(n.back=-1);break}for(n.back=0;m=(w=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,g=65535&w,!((v=w>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(m&&0==(240&m)){for(y=v,S=m,b=g;m=(w=n.lencode[b+((u&(1<<y+S)-1)>>y)])>>>16&255,g=65535&w,!(y+(v=w>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}u>>>=y,d-=y,n.back+=y}if(u>>>=v,d-=v,n.back+=v,n.length=g,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=bA;break}if(64&m){e.msg="invalid literal/length code",n.mode=EA;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(R=n.extra;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(w=n.distcode[u&(1<<n.distbits)-1])>>>16&255,g=65535&w,!((v=w>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(0==(240&m)){for(y=v,S=m,b=g;m=(w=n.distcode[b+((u&(1<<y+S)-1)>>y)])>>>16&255,g=65535&w,!(y+(v=w>>>24)<=d);){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}u>>>=y,d-=y,n.back+=y}if(u>>>=v,d-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=EA;break}n.offset=g,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(R=n.extra;d<R;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=EA;break}n.mode=25;case 25:if(0===c)break e;if(h=f-c,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=EA;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),_=n.window}else _=i,p=a-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do{i[a++]=_[p++]}while(--h);0===n.length&&(n.mode=21);break;case 26:if(0===c)break e;i[a++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;d<32;){if(0===s)break e;s--,u|=r[o++]<<d,d+=8}if(f-=c,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?mA(n.check,i,f,a-f):vA(n.check,i,f,a-f)),f=c,(n.flags?u:TA(u))!==n.check){e.msg="incorrect data check",n.mode=EA;break}u=0,d=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;d<32;){if(0===s)break e;s--,u+=r[o++]<<d,d+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=EA;break}u=0,d=0}n.mode=29;case 29:T=1;break e;case EA:T=-3;break e;case 31:return-4;default:return SA}return e.next_out=a,e.avail_out=c,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=d,(n.wsize||f!==e.avail_out&&n.mode<EA&&(n.mode<27||4!==t))&&PA(e,e.output,e.next_out,f-e.avail_out),l-=e.avail_in,f-=e.avail_out,e.total_in+=l,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?mA(n.check,i,f,e.next_out-f):vA(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===bA?128:0)+(20===n.mode||15===n.mode?256:0),(0===l&&0===f||4===t)&&0===T&&(T=-5),T},cA.inflateEnd=function(e){if(!e||!e.state)return SA;var t=e.state;return t.window&&(t.window=null),e.state=null,0},cA.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?SA:(n.head=t,t.done=!1,0):SA},cA.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?SA:11===n.mode&&vA(1,t,r,0)!==n.check?-3:PA(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):SA},cA.inflateInfo="pako inflate (from Nodeca project)";var MA={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var xA=cA,UA=ww,LA=WI,jA=MA,VA=mI,BA=$I,FA=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},zA=Object.prototype.toString;function HA(e){if(!(this instanceof HA))return new HA(e);this.options=UA.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new BA,this.strm.avail_out=0;var n=xA.inflateInit2(this.strm,t.windowBits);if(n!==jA.Z_OK)throw new Error(VA[n]);if(this.header=new FA,xA.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=LA.string2buf(t.dictionary):"[object ArrayBuffer]"===zA.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=xA.inflateSetDictionary(this.strm,t.dictionary))!==jA.Z_OK))throw new Error(VA[n])}function GA(e,t){var n=new HA(t);if(n.push(e,!0),n.err)throw n.msg||VA[n.err];return n.result}HA.prototype.push=function(e,t){var n,r,i,o,a,s=this.strm,c=this.options.chunkSize,u=this.options.dictionary,d=!1;if(this.ended)return!1;r=t===~~t?t:!0===t?jA.Z_FINISH:jA.Z_NO_FLUSH,"string"==typeof e?s.input=LA.binstring2buf(e):"[object ArrayBuffer]"===zA.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new UA.Buf8(c),s.next_out=0,s.avail_out=c),(n=xA.inflate(s,jA.Z_NO_FLUSH))===jA.Z_NEED_DICT&&u&&(n=xA.inflateSetDictionary(this.strm,u)),n===jA.Z_BUF_ERROR&&!0===d&&(n=jA.Z_OK,d=!1),n!==jA.Z_STREAM_END&&n!==jA.Z_OK)return this.onEnd(n),this.ended=!0,!1;s.next_out&&(0!==s.avail_out&&n!==jA.Z_STREAM_END&&(0!==s.avail_in||r!==jA.Z_FINISH&&r!==jA.Z_SYNC_FLUSH)||("string"===this.options.to?(i=LA.utf8border(s.output,s.next_out),o=s.next_out-i,a=LA.buf2string(s.output,i),s.next_out=o,s.avail_out=c-o,o&&UA.arraySet(s.output,s.output,i,o,0),this.onData(a)):this.onData(UA.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(d=!0)}while((s.avail_in>0||0===s.avail_out)&&n!==jA.Z_STREAM_END);return n===jA.Z_STREAM_END&&(r=jA.Z_FINISH),r===jA.Z_FINISH?(n=xA.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===jA.Z_OK):r!==jA.Z_SYNC_FLUSH||(this.onEnd(jA.Z_OK),s.avail_out=0,!0)},HA.prototype.onData=function(e){this.chunks.push(e)},HA.prototype.onEnd=function(e){e===jA.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=UA.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},sA.Inflate=HA,sA.inflate=GA,sA.inflateRaw=function(e,t){return(t=t||{}).raw=!0,GA(e,t)},sA.ungzip=GA;var WA={};(0,ww.assign)(WA,Iw,sA,MA);var YA=WA,KA=yr,qA=sd,JA=ae,XA=A.RangeError,ZA=q,$A=wr,QA=sd,eO=ae,tO=ZA((function(e){var t=qA(JA(this)),n="",r=KA(e);if(r<0||r==1/0)throw XA("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n})),nO=ZA("".slice),rO=Math.ceil,iO=function(e){return function(t,n,r){var i,o,a=QA(eO(t)),s=$A(n),c=a.length,u=void 0===r?" ":QA(r);return s<=c||""==u?a:((o=tO(u,rO((i=s-c)/u.length))).length>i&&(o=nO(o,0,i)),e?a+o:o+a)}},oO={start:iO(!1),end:iO(!0)},aO=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(ge),sO=oO.end;vi({target:"String",proto:!0,forced:aO},{padEnd:function(e){return sO(this,e,arguments.length>1?arguments[1]:void 0)}});var cO=q,uO=or.PROPER,dO=yn.exports,lO=rn,fO=me,hO=sd,pO=k,_O=pg,vO="toString",mO=RegExp.prototype,gO=mO.toString,yO=cO(_O),SO=pO((function(){return"/a/b"!=gO.call({source:"a",flags:"b"})})),bO=uO&&gO.name!=vO;(SO||bO)&&dO(RegExp.prototype,vO,(function(){var e=lO(this),t=hO(e.source),n=e.flags;return"/"+t+"/"+hO(void 0===n&&fO(mO,e)&&!("flags"in mO)?yO(e):n)}),{unsafe:!0});var EO=vi,TO=A,CO=Tr,RO=yr,wO=Ar,IO=it,AO=Ml,OO=Ds,kO=sf("splice"),NO=TO.TypeError,DO=Math.max,PO=Math.min,MO=9007199254740991,xO="Maximum allowed length exceeded";EO({target:"Array",proto:!0,forced:!kO},{splice:function(e,t){var n,r,i,o,a,s,c=IO(this),u=wO(c),d=CO(e,u),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=u-d):(n=l-2,r=PO(DO(RO(t),0),u-d)),u+n-r>MO)throw NO(xO);for(i=AO(c,r),o=0;o<r;o++)(a=d+o)in c&&OO(i,o,c[a]);if(i.length=r,n<r){for(o=d;o<u-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:delete c[s];for(o=u;o>u-r+n;o--)delete c[o-1]}else if(n>r)for(o=u-r;o>d;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:delete c[s];for(o=0;o<n;o++)c[o+d]=arguments[o+2];return c.length=u-r+n,i}});var UO="\t\n\v\f\r                　\u2028\u2029\ufeff",LO=ae,jO=sd,VO=q("".replace),BO="[\t\n\v\f\r                　\u2028\u2029\ufeff]",FO=RegExp("^"+BO+BO+"*"),zO=RegExp(BO+BO+"*$"),HO=function(e){return function(t){var n=jO(LO(t));return 1&e&&(n=VO(n,FO,"")),2&e&&(n=VO(n,zO,"")),n}},GO={start:HO(1),end:HO(2),trim:HO(3)},WO=A,YO=k,KO=q,qO=sd,JO=GO.trim,XO=UO,ZO=WO.parseInt,$O=WO.Symbol,QO=$O&&$O.iterator,ek=/^[+-]?0x/i,tk=KO(ek.exec),nk=8!==ZO(XO+"08")||22!==ZO(XO+"0x16")||QO&&!YO((function(){ZO(Object(QO))}))?function(e,t){var n=JO(qO(e));return ZO(n,t>>>0||(tk(ek,n)?16:10))}:ZO;vi({target:"Number",stat:!0,forced:Number.parseInt!=nk},{parseInt:nk});var rk=q(1..valueOf),ik=N,ok=A,ak=q,sk=ci,ck=yn.exports,uk=st,dk=gu,lk=me,fk=xe,hk=Dt,pk=k,_k=vr.f,vk=O.f,mk=Zt.f,gk=rk,yk=GO.trim,Sk="Number",bk=ok.Number,Ek=bk.prototype,Tk=ok.TypeError,Ck=ak("".slice),Rk=ak("".charCodeAt),wk=function(e){var t=hk(e,"number");return"bigint"==typeof t?t:Ik(t)},Ik=function(e){var t,n,r,i,o,a,s,c,u=hk(e,"number");if(fk(u))throw Tk("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=yk(u),43===(t=Rk(u,0))||45===t){if(88===(n=Rk(u,2))||120===n)return NaN}else if(48===t){switch(Rk(u,1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=Ck(u,2)).length,s=0;s<a;s++)if((c=Rk(o,s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(sk(Sk,!bk(" 0o1")||!bk("0b1")||bk("+0x1"))){for(var Ak,Ok=function(e){var t=arguments.length<1?0:bk(wk(e)),n=this;return lk(Ek,n)&&pk((function(){gk(n)}))?dk(Object(t),n,Ok):t},kk=ik?_k(bk):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Nk=0;kk.length>Nk;Nk++)uk(bk,Ak=kk[Nk])&&!uk(Ok,Ak)&&mk(Ok,Ak,vk(bk,Ak));Ok.prototype=Ek,Ek.constructor=Ok,ck(ok,Sk,Ok)}function Dk(){for(var e=(+"".concat(Math.random()).slice(-7).padEnd(7,"0")).toString(2).padEnd(28,"1").split(""),t=[];e.length;)t.push(e.splice(0,7));return t.map((function(e,n){var r=n===t.length-1?"0":"1";return Number.parseInt(r+e.join(""),2)}))}function Pk(e){return new Promise((function(t,n){var r=new Blob([e]),i=new FileReader;i.readAsText(r,"utf-8"),i.onload=function(){t(i.result)}}))}var Mk=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},xk=x,Uk=rn,Lk=ae,jk=Mk,Vk=sd,Bk=He,Fk=YS;LS("search",(function(e,t,n){return[function(t){var n=Lk(this),r=null==t?void 0:Bk(t,e);return r?xk(r,t,n):new RegExp(t)[e](Vk(n))},function(e){var r=Uk(this),i=Vk(e),o=n(t,r,i);if(o.done)return o.value;var a=r.lastIndex;jk(a,0)||(r.lastIndex=0);var s=Fk(r,i);return jk(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]}));var zk,Hk,Gk,Wk,Yk,Kk,qk,Jk,Xk,Zk,$k,Qk,eN,tN,nN,rN,iN,oN,aN,sN,cN,uN,dN,lN,fN,hN,pN,_N,vN,mN,gN,yN,SN,bN,EN,TN,CN,RN,wN,IN,AN,ON,kN,NN,DN,PN,MN=N,xN=q,UN=x,LN=k,jN=xo,VN=Hr,BN=U,FN=it,zN=ie,HN=Object.assign,GN=Object.defineProperty,WN=xN([].concat),YN=!HN||LN((function(){if(MN&&1!==HN({b:1},HN(GN({},"a",{enumerable:!0,get:function(){GN(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=HN({},e)[n]||jN(HN({},t)).join("")!=r}))?function(e,t){for(var n=FN(e),r=arguments.length,i=1,o=VN.f,a=BN.f;r>i;)for(var s,c=zN(arguments[i++]),u=o?WN(jN(c),o(c)):jN(c),d=u.length,l=0;d>l;)s=u[l++],MN&&!UN(a,c,s)||(n[s]=c[s]);return n}:HN,KN=YN;vi({target:"Object",stat:!0,forced:Object.assign!==KN},{assign:KN}),function(e){e.RTC_SDK_API_CALL="rtc_sdk_api_call",e.RTC_SDK_CALLBACK="rtc_sdk_callback",e.RTC_RECONNECT="rtc_reconnect",e.RTC_RECONNECTED="rtc_reconnected",e.RTC_GET_ACCESS="rtc_get_access",e.RTC_PRE_ICE_STATE="rtc_pre_ice_state",e.RTC_NODE_CHANGE="rtc_node_change",e.RTC_SIGNALING_MSG_ERROR="rtc_signaling_msg_error",e.RTC_SIGNALING="rtc_signaling",e.RTC_JOIN_ROOM="rtc_join_room",e.RTC_LEAVE_ROOM="rtc_leave_room",e.RTC_BEGIN_CREATE_OFFER="rtc_begin_create_offer",e.RTC_CREATE_OFFER="rtc_create_offer",e.RTC_SET_DESCRIPTION="rtc_set_description",e.RTC_RECV_ANSWER="rtc_recv_answer",e.FIRST_REMOTE_AUDIO_RENDER="first_remote_audio_render",e.FIRST_REMOTE_VIDEO_RENDER="first_remote_video_render",e.RTC_PUBLISH_STAT="rtc_publish_stat",e.RTC_SUBSCRIBE_STAT="rtc_subscribe_stat",e.RTC_AUDIO_DEVICE="rtc_audio_device",e.RTC_MEDIA_STATISTICS="rtc_media_statistics",e.RTC_MESSAGE_STATISTICS="rtc_message_statistics",e.RTC_ERROR="rtc_error",e.RTC_FIRST_FRAME="rtc_first_frame",e.RTC_MUTE_REMOTE="rtc_mute_remote",e.SDK_INIT_ENGINE="sdk_init_engine",e.JOIN_ROOM="join_room",e.P2P_CONNECTION_STATUS="p2p_connection_status",e.P2P_CONNECT_CLOSED="p2p_connect_closed",e.RTC_DEVICE_ERROR="rtc_device_error",e.RTC_VIDEO_DEVICE="rtc_video_device",e.RTC_VIDEO_CAPTURE_EVENT="rtc_video_capture_event",e.RTC_ENCODE_FIRST_FRAME="rtc_encode_first_frame",e.RTC_FIRST_FRAME_ENCODED="rtc_first_frame_encoded",e.RTC_SEND_FIRST_PACKET="rtc_send_first_packet",e.RTC_RECV_FIRST_PACKET="rtc_recv_first_packet",e.RTC_RECV_FIRST_FRAME="rtc_recv_first_frame",e.RTC_DECODE_FIRST_FRAME="rtc_decode_first_frame"}(zk||(zk={})),function(e){e.RTC="rtc"}(Hk||(Hk={})),function(e){e.W_5="5"}(Gk||(Gk={})),function(e){e.IOS="ios",e.ANDROID="android",e.WEB="web",e.WINDOWS="windows",e.MAC="mac",e.LINUX="linux"}(Wk||(Wk={})),function(e){e.UNKNOWN="unknown",e.DISCONNECTED="disconnected",e.LAN="lan",e.WIFI="wifi",e.W_2="2g",e.W_3="3g",e.W_4="4g",e.W_5="5g"}(Yk||(Yk={})),function(e){e.UNKNOWN="unknown",e.BROADCASTER="broadcaster",e.AUDIENCE="audience",e.SILENTAUDIENCE="silentAudience"}(Kk||(Kk={})),function(e){e.WEBSOCKET_RECONNECTING="websocket reconnecting",e.PEERCONNECTION_RECONNECTING="peerconnection reconnecting",e.DISCONNECTED="DISCONNECTED",e.LAN="LAN",e.WIFI="WIFI",e.W_2="2G",e.W_3="3G",e.W_4="4G",e.W_5="5G",e.UNKNOWN="UNKNOWN"}(qk||(qk={})),function(e){e.WEBSOCKET="websocket",e.NETWORKCHANGED="networkChanged",e.PEERCONNECTION="peerconnection"}(Jk||(Jk={})),function(e){e.WEBSOCKET_RECONNECTED="websocket reconnected",e.PEERCONNECTION_RECONNECTED="peerconnection reconnected"}(Xk||(Xk={})),function(e){e.WEBSOCKET="websocket",e.NETWORKCHANGED="networkChanged",e.PEERCONNECTION="peerconnection"}(Zk||(Zk={})),function(e){e.REQUEST="request",e.RESPONSE="response",e.KCP_REQUEST="kcp request",e.KCP_RESPONSE="kcp response",e.QUIC_REQUEST="quic request",e.QUIC_RESPONSE="quic response"}($k||($k={})),function(e){e.NEW="NEW",e.CHECKING="CHECKING",e.CONNECTED="CONNECTED",e.COMPLETED="COMPLETED",e.FAILED="FAILED",e.DISCONNECTED="DISCONNECTED",e.CLOSED="CLOSED",e.DATACHANNEL_CONNECTING="DATACHANNEL_CONNECTING",e.DATACHANNEL_OPEN="DATACHANNEL_OPEN",e.DATACHANNEL_CLOSING="DATACHANNEL_CLOSING",e.DATACHANNEL_CLOSED="DATACHANNEL_CLOSED"}(Qk||(Qk={})),function(e){e.SUCCEED="succeed",e.MESSAGE_ID_ERROR="message id error",e.ZIP_FAILED="zip failed",e.UNZIP_FAILED="unzip failed",e.MESSAGE_KEY_EMPTY="message key empty",e.MESSAGE_KEY_PARSE_FAILED="message key parse failed",e.MESSAGE_KEY_INVALID="message key invalid",e.ENCRYPT_FAILED="encrypt failed",e.DECRYPT_FAILED="decrypt failed",e.MESSAGE_TOO_BIG="message too big",e.INVALID_DATA="invalid data",e.MESSAGE_PARSE_FAILED="message parse failed"}(eN||(eN={})),function(e){e.CALL_JOINROOM="call-joinRoom",e.JOINROOM="joinRoom",e.CALL_RECONNECTED="call-reconnected",e.RECONNECTED="reconnected",e.CALL_PUBLISH="call-publish",e.PUBLISH="publish",e.CALL_UPDATESTREAMATTRIBUTES="call-updateStreamAttributes",e.UPDATESTREAMATTRIBUTES="updateStreamAttributes",e.CALL_UNPUBLISH="call-unpublish",e.UNPUBLISH="unpublish",e.CALL_SUBSCRIBE="call-subscribe",e.SUBSCRIBE="subscribe",e.CALL_UPDATESUBSCRIBE="call-updateSubscribe",e.UPDATESUBSCRIBE="updateSubscribe",e.CALL_UNSUBSCRIBE="call-unsubscribe",e.UNSUBSCRIBE="unsubscribe",e.CALL_UPDATEUSERATTRIBUTES="call-updateUserAttributes",e.UPDATEUSERATTRIBUTES="updateUserAttributes",e.CALL_LEAVEROOM="call-leaveRoom",e.LEAVEROOM="leaveRoom",e.ON_USERCONNECTION="on-userConnection",e.ON_USERDISCONNECTION="on-userDisconnection",e.ON_ONADDSTREAM="on-onAddStream",e.ON_ONPUSHSTREAM="on-onPushStream",e.ON_ONREMOVESTREAM="on-onRemoveStream",e.ON_ONPUSHTRACK="on-onPushTrack",e.ON_ONREMOVETRACK="on-onRemoveTrack",e.ON_ONUPDATEUSERATTRIBUTES="on-onUpdateUserAttributes",e.ON_ONUPDATEROOMATTRIBUTES="on-onUpdateRoomAttributes",e.ON_ONUPDATESTREAMATTRIBUTES="on-onUpdateStreamAttributes",e.ON_STREAMFAILED="on-streamFailed",e.ON_POSTPROCESSINGMESSAGE="on-postProcessingMessage",e.ON_ENGINECONTROLMESSAGE="on-engineControlMessage",e.ON_WEBSOCKETENGINECUSTOMMESSAGE="on-websocketEngineCustomMessage",e.UNKNOWN="unknown",e.CALL_UPDATEPUBLISHSTREAMCHANNEL="call-updatePublishStreamChannel",e.UPDATEPUBLISHSTREAMCHANNEL="updatePublishStreamChannel",e.CALL_UPDATESUBSCRIBESTREAMCHANNEL="call-updateSubscribeStreamChannel",e.UPDATESUBSCRIBESTREAMCHANNEL="updateSubscribeStreamChannel",e.ON_ONSTREAMCHANNELCHANGE="on-onStreamChannelChange",e.P2PDIRECT="p2pdirect",e.INTERNAL_CUSTOM="internal_custom",e.REPORT="report",e.CONNECTION_CONTROL="connection_control",e.ON_INTERNAL_CUSTOM="on_internal_custom",e.CONTROLMESSAGE="controlMessage",e.CALL_LOGIN="call-login",e.LOGIN="login",e.CALL_RECONNECTLOGIN="call-reconnectLogin",e.RECONNECTLOGIN="reconnectLogin",e.CALL_LOGOUT="call-logout",e.LOGOUT="logout",e.CALL_UPDATELOGINTOKEN="call-updateLoginToken",e.UPDATELOGINTOKEN="updateLoginToken",e.CALL_SETSERVERPARAMS="call-setServerParams",e.SETSERVERPARAMS="setServerParams",e.CALL_GETPEERONLINESTATUS="call-getPeerOnlineStatus",e.GETPEERONLINESTATUS="getPeerOnlineStatus",e.ON_ONSCENECONFIG="on-onSceneConfig"}(tN||(tN={})),function(e){e.UP="up",e.DOWN="down",e.DIRECT="direct"}(nN||(nN={})),function(e){e.UP="up",e.DOWN="down",e.PRE="pre"}(rN||(rN={})),function(e){e.UP="up",e.DOWN="down",e.PRE="pre"}(iN||(iN={})),function(e){e.W_0="0",e.W_1="1"}(oN||(oN={})),function(e){e.UP="up",e.DOWN="down"}(aN||(aN={})),function(e){e.ANSWER="answer",e.INCRANSWER="incranswer"}(sN||(sN={})),function(e){e.UP="up",e.DOWN="down"}(cN||(cN={})),function(e){e.SUCCESS="success",e.FAIL="fail"}(uN||(uN={})),function(e){e.W_0="0",e.W_1="1"}(dN||(dN={})),function(e){e.LEAVE_ROOM="leave room",e.ACK_FAILED="ack failed",e.SET_ANSWER_SDP_FAILED="set answer sdp failed",e.ICE_FAILED="ice failed",e.STREAM_FAILED="stream failed",e.NETWORK_RECONNECTED="network reconnected",e.JOIN_ROOM_ACK_FAILED="join room ack failed",e.UNKNOWN="unknown"}(lN||(lN={})),function(e){e.SUCCESS="success",e.FAIL="fail",e.IGNORE="ignore"}(fN||(fN={})),function(e){e.LEAVE_ROOM="leave room",e.ACK_FAILED="ack failed",e.SET_ANSWER_SDP_FAILED="set answer sdp failed",e.ICE_FAILED="ice failed",e.STREAM_FAILED="stream failed",e.NETWORK_RECONNECTED="network reconnected",e.ON_STREAM_REMOVE="on stream remove",e.PUBLISH_MUTE="publish mute",e.UNKNOWN="unknown",e.ON_STREAM_REMOVE_CLIENT_UNPUBLISHED="on stream remove:client unpublished",e.ON_STREAM_REMOVE_PUBLISH_FAILED="on stream remove:publish failed",e.ON_STREAM_REMOVE_STREAM_REMOVED="on stream remove:stream removed",e.ON_STREAM_REMOVE_CLIENT_DISCONNECTED="on stream remove:client disconnected",e.ON_STREAM_REMOVE_CLIENT_REPUBLISH="on stream remove:client republish"}(hN||(hN={})),function(e){e.PLAYOUT_DEVICE_SWITCH="playout_device_switch",e.RECORD_DEVICE_SWITCH="record_device_switch",e.UNKNOWN="unknown"}(pN||(pN={})),function(e){e.BEGIN_SEND="begin_send",e.SENT_END="sent_end",e.BEGIN_RECV="begin_recv",e.RECV_END="recv_end"}(_N||(_N={})),function(e){e.AUDIO="audio",e.VIDEO="video",e.SCREEN_VIDEO="screen_video",e.SCREEN_AUDIO="screen_audio"}(vN||(vN={})),function(e){e.LOGIN="login",e.PUBLISHER="publisher",e.UNMUTE="unmute",e.ENABLE="enable",e.PUSH="push",e.PUBLISH="publish",e.ONDEMAND="ondemand",e.SUBSCRIBE="subscribe",e.PUSH_TRACK="push_track",e.REMOTE_UNMUTE="remote_unmute",e.P2P="p2p"}(mN||(mN={})),function(e){e.TIMEOUT="timeout",e.AUDIENCE="audience",e.MUTE="mute",e.DISABLE="disable",e.STOP_PUSH="stop_push",e.UNPUBLISH="unpublish",e.NO_DEMAND="no_demand",e.LEAVE_ROOM="leave_room",e.UNSUBSCRIBE="unsubscribe",e.REMOVE_TRACK="remove_track",e.REMOTE_MUTE="remote_mute"}(gN||(gN={})),function(e){e.AUDIO="audio",e.VIDEO="video"}(yN||(yN={})),function(e){e.BEGIN="begin",e.END="end"}(SN||(SN={})),function(e){e.BEGIN="begin",e.END="end"}(bN||(bN={})),function(e){e.LEAVE_ROOM="leave_room",e.ACK_FAILED="ack_failed",e.TOKEN_ERROR="token_error",e.SIGNALING_ERROR="signaling_error",e.TIMEOUT_10="timeout_10",e.TIMEOUT_60="timeout_60"}(EN||(EN={})),function(e){e.UNKNOWN="unknown",e.NEW="new",e.CHECKING="checking",e.CONNECTED="connected",e.FAILED="failed",e.SELECTED="selected",e.CLOSING="closing",e.CLOSED="closed"}(TN||(TN={})),function(e){e.NOMINAL="Nominal",e.FAIR="Fair",e.SERIOUS="Serious",e.CRITICAL="Critical",e.UNKNWON="Unknwon"}(CN||(CN={})),function(e){e.UNKNOWN="UNKNOWN",e.AUDIO_RECORD="AUDIO_RECORD",e.AUDIO_PLAYOUT="AUDIO_PLAYOUT",e.VIDEO="VIDEO",e.SHARE_AUDIO_RECORD="SHARE_AUDIO_RECORD",e.SHARE_VIDEO="SHARE_VIDEO"}(RN||(RN={})),function(e){e.P2P="p2p",e.P2P_OUTSIDE_ROOM="p2p_outside_room",e.P2SERVER="p2server"}(wN||(wN={})),function(e){e.START="start",e.START_CAPTURE_RESULT="start_capture_result",e.STARTED="started",e.RUNNING_FAILED="running_failed",e.STOP="stop",e.STOPPED="stopped"}(IN||(IN={})),function(e){e.DSHOW="dshow",e.MF="mf",e.AVCAPTURESESSION="avcapturesession",e.CAMERA1="camera1",e.CAMERA2="camera2"}(AN||(AN={})),function(e){e.SUCCESS="success",e.CAMERA_DEVICE_NO_PERMISSION="camera_device_no_permission",e.CAMERA_DEVICE_BUSY="camera_device_busy",e.CAMERA_DEVICE_FAILURE="camera_device_failure",e.CAMERA_DEVICE_NOT_FOUND="camera_device_not_found",e.CAMERA_DEVICE_DISCONNECTED="camera_device_disconnected",e.TIMEOUT="timeout",e.ABORT="abort"}(ON||(ON={})),function(e){e.UNKNOWN="unknown",e.MUSIC="music",e.HIGHQUALITY_COMMUNICATION="highquality_communication",e.COMMUNICATION="communication",e.MEDIA="media",e.GAME_STREAMING="game_streaming"}(kN||(kN={})),function(e){e.UNKNOWN="unknown",e.MEDIA="media",e.COMMUNICATION="communication"}(NN||(NN={})),function(e){e.UNKNOWN="unknown",e.SLEEP="Sleep",e.AWAKE="Awake"}(DN||(DN={})),function(e){e.UNKNOWN="unknown",e.PRODUCT="product",e.BOE="boe",e.TEST="test"}(PN||(PN={}));var qN,JN,XN,ZN=function(){function e(){}return e.prototype.setStats=function(e){var t=this;Object.keys(e).forEach((function(n){t["_"+n]=e[n]})),eD.StartUp()},Object.defineProperty(e.prototype,"event_key",{get:function(){return this._event_key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_id",{get:function(){return this._device_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_app_id",{get:function(){return this._rtc_app_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"product_line",{get:function(){return this._product_line},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"report_version",{get:function(){return this._report_version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"os",{get:function(){return this._os},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_sdk_version",{get:function(){return this._rtc_sdk_version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_timestamp",{get:function(){return this._rtc_timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_sdk_git_commit",{get:function(){return this._rtc_sdk_git_commit},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"report_id",{get:function(){return this._report_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_sid",{get:function(){return this._rtc_sid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"engine_session_id",{get:function(){return this._engine_session_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_business_id",{get:function(){return this._rtc_business_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"project_key",{get:function(){return this._project_key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"network_type",{get:function(){return this._network_type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app_version",{get:function(){return this._app_version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aid",{get:function(){return this._aid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_model",{get:function(){return this._device_model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"device_brand",{get:function(){return this._device_brand},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"common_extra_info",{get:function(){return this._common_extra_info},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"had_selected_p2p",{get:function(){return this._had_selected_p2p},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_env_type",{get:function(){return this._rtc_env_type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"room_id",{get:function(){return this._room_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"user_id",{get:function(){return this._user_id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rtc_session_id",{get:function(){return this._rtc_session_id},enumerable:!1,configurable:!0}),e}(),$N=new ZN,QN=function(){function e(){var e=this;this.report_id=0,this.dataBuffer=[],this.posting=!1,this.report_common={},this.preSucTime=0,this.errSendDelay=100,"undefined"!=typeof window&&window.addEventListener("beforeunload",(function(){clearTimeout(e.errSendTimer),clearTimeout(e.sucSendTimer),e.send(null,!0)}))}return e.prototype.push=function(e,t){t?this.send(e):(this.dataBuffer.push(e),!this.posting&&!this.errSendTimer&&Date.now()-this.preSucTime>2e3&&(clearTimeout(this.sucSendTimer),this.send()))},e.prototype.unshift=function(e){this.dataBuffer=e.concat(this.dataBuffer)},e.prototype.send=function(e,t){var n=this;if(e||this.dataBuffer.length){var r={data:e||this.dataBuffer.splice(0,4e3),header:this.report_common,from:"web",os:"web",version:"1"},i=new XMLHttpRequest;if(i.timeout=1e4,i.onreadystatechange=function(){if(4===i.readyState){e||(n.posting=!1);var o=void 0;if(200===i.status||304===i.status)try{o=JSON.parse(i.responseText)}catch(e){}o&&0===o.StatusCode?e||t||n.sucSend():e?n.send(e):(n.unshift(r.data),t?n.send():n.errSend())}},i.open("POST","https://log.snssdk.com/video/v1/webrtc_log/",!0),e||(this.posting=!0),location.search.includes("__rtc_debug__"))i.send(JSON.stringify(r));else{var o=YA.gzip(JSON.stringify(r));i.setRequestHeader("Content-Encoding","gzip"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(o)}}},e.prototype.sucSend=function(){this.errSendDelay=100,this.preSucTime=Date.now(),this.sucSendTimer=setTimeout(this.send.bind(this),2e3)},e.prototype.errSend=function(){var e=this;this.errSendTimer=setTimeout((function(){e.send(),e.errSendTimer=null}),this.errSendDelay),this.errSendDelay*=2},e.prototype.StartUp=function(){var e=this.report_common,t=$N.event_key,n=$N.device_id,r=$N.rtc_app_id,i=$N.product_line,o=$N.report_version,a=$N.os,s=$N.rtc_sdk_version,c=$N.rtc_timestamp,u=$N.rtc_sdk_git_commit,d=$N.report_id,l=$N.rtc_sid,f=$N.engine_session_id,h=$N.rtc_business_id,p=$N.project_key,_=$N.network_type,v=$N.app_version,m=$N.aid,g=$N.device_model,y=$N.device_brand,S=$N.common_extra_info,b=$N.had_selected_p2p,E=$N.rtc_env_type;Object.assign(e,{event_key:t,device_id:n,rtc_app_id:r,product_line:i,report_version:o,os:a,rtc_sdk_version:s,rtc_timestamp:c,rtc_sdk_git_commit:u,report_id:d,rtc_sid:l,engine_session_id:f,rtc_business_id:h,project_key:p,network_type:_,app_version:v,aid:m,device_model:g,device_brand:y,common_extra_info:S,had_selected_p2p:b,rtc_env_type:E}),$N.room_id&&(e.room_id=$N.room_id),$N.user_id&&(e.user_id=$N.user_id),$N.rtc_session_id&&(e.rtc_session_id=$N.rtc_session_id)},e.prototype.rtcSdkApiCall=function(e,t,n){var r={event_key:"rtc_sdk_api_call",report_id:this.report_id++,rtc_timestamp:Date.now(),sdk_api_name:e,error_code:t,message:n};this.push(r)},e.prototype.rtcSdkCallback=function(e,t,n){var r={event_key:"rtc_sdk_callback",report_id:this.report_id++,rtc_timestamp:Date.now(),sdk_callback_name:e,error_code:t,message:n};this.push(r)},e.prototype.rtcReconnect=function(e,t,n,r){var i={event_key:"rtc_reconnect",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,reconnect_id:n,reconnect_type:r};this.push(i)},e.prototype.rtcReconnected=function(e,t){var n={event_key:"rtc_reconnected",report_id:this.report_id++,rtc_timestamp:Date.now(),message:e,reconnect_type:t};this.push(n)},e.prototype.rtcGetAccess=function(e,t,n,r,i,o){var a={event_key:"rtc_get_access",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,elapse:n,type:r,host:i,connect_session_id:o};this.push(a)},e.prototype.rtcPreIceState=function(e,t){var n={event_key:"rtc_pre_ice_state",report_id:this.report_id++,rtc_timestamp:Date.now(),message:e,ice_state:t};this.push(n)},e.prototype.rtcNodeChange=function(e,t,n){var r={event_key:"rtc_node_change",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,reason:n};this.push(r)},e.prototype.rtcSignalingMsgError=function(e,t,n){var r={event_key:"rtc_signaling_msg_error",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,reason:n};this.push(r)},e.prototype.rtcSignaling=function(e,t,n,r,i){var o={event_key:"rtc_signaling",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,signaling_event:n,signaling_type:r,direction:i};this.push(o)},e.prototype.rtcJoinRoom=function(e,t,n,r){var i={event_key:"rtc_join_room",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,deviceModel:t,deviceManufacturer:n,elapse:r};this.push(i)},e.prototype.rtcLeaveRoom=function(e,t,n){var r={event_key:"rtc_leave_room",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,elapse:n};this.push(r)},e.prototype.rtcBeginCreateOffer=function(e,t,n){var r={event_key:"rtc_begin_create_offer",report_id:this.report_id++,rtc_timestamp:Date.now(),direction:e,stream_id:t,stream_user_id:n};this.push(r)},e.prototype.rtcCreateOffer=function(e,t,n,r,i){var o={event_key:"rtc_create_offer",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,direction:t,stream_id:n,stream_user_id:r,elapse:i};this.push(o)},e.prototype.rtcSetDescription=function(e,t,n,r,i,o,a){var s={event_key:"rtc_set_description",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,message:t,is_local:n,direction:r,stream_id:i,stream_user_id:o,elapse:a};this.push(s)},e.prototype.rtcRecvAnswer=function(e,t,n,r,i,o){var a={event_key:"rtc_recv_answer",report_id:this.report_id++,rtc_timestamp:Date.now(),error_code:e,answer_type:t,sequence_id:n,direction:r,stream_id:i,stream_user_id:o};this.push(a)},e.prototype.firstRemoteAudioRender=function(e,t){var n={event_key:"first_remote_audio_render",report_id:this.report_id++,rtc_timestamp:Date.now(),stream_id:e,stream_user_id:t};this.push(n)},e.prototype.firstRemoteVideoRender=function(e,t){var n={event_key:"first_remote_video_render",report_id:this.report_id++,rtc_timestamp:Date.now(),stream_id:e,stream_user_id:t};this.push(n)},e.prototype.rtcPublishStat=function(e,t,n,r){var i={event_key:"rtc_publish_stat",report_id:this.report_id++,rtc_timestamp:Date.now(),result:e,is_screen:t,start:n,message:r};this.push(i)},e.prototype.rtcSubscribeStat=function(e,t,n,r){var i={event_key:"rtc_subscribe_stat",report_id:this.report_id++,rtc_timestamp:Date.now(),result:e,start:t,message:n,stream_user_id:r};this.push(i)},e.prototype.rtcAudioDevice=function(e,t,n){var r={event_key:"rtc_audio_device",report_id:this.report_id++,rtc_timestamp:Date.now(),audio_event:e,message:t,error_code:n};this.push(r)},e.prototype.rtcMediaStatistics=function(e,t){var n=m(m({event_key:"rtc_media_statistics",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcMessageStatistics=function(e,t,n){var r=m(m(m({event_key:"rtc_message_statistics",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t),{media_server_ip:n});this.push(r)},e.prototype.rtcError=function(e,t){var n={event_key:"rtc_error",report_id:this.report_id++,rtc_timestamp:Date.now(),message:e,error_code:t};this.push(n)},e.prototype.rtcFirstFrame=function(e){var t=m({event_key:"rtc_first_frame",report_id:this.report_id++,rtc_timestamp:Date.now()},e);this.push(t)},e.prototype.rtcMuteRemote=function(e,t){var n=m(m({event_key:"rtc_mute_remote",report_id:this.report_id++,rtc_timestamp:Date.now()},e),{media_type:t});this.push(n)},e.prototype.sdkInitEngine=function(e,t){var n={event_key:"sdk_init_engine",report_id:this.report_id++,rtc_timestamp:Date.now(),start:e,type:t};this.push(n)},e.prototype.joinRoom=function(e,t,n,r){var i={event_key:"join_room",report_id:this.report_id++,rtc_timestamp:Date.now(),type:e,start:t,result:n,reason:r};this.push(i)},e.prototype.p2pConnectionStatus=function(e,t,n,r,i){var o={event_key:"p2p_connection_status",report_id:this.report_id++,rtc_timestamp:Date.now(),room_id:e,user_id:t,peer_user_id:n,status:r,elapse:i};this.push(o)},e.prototype.p2pConnectClosed=function(e){var t={event_key:"p2p_connect_closed",report_id:this.report_id++,rtc_timestamp:Date.now(),p2p_selected:e};this.push(t)},e.prototype.rtcDeviceError=function(e,t,n,r,i,o,a,s,c,u,d,l,f,h,p,_){var v={event_key:"rtc_device_error",report_id:this.report_id++,rtc_timestamp:Date.now(),device_type:e,device_stage:t,error_code:n,system_error_code:r,system_api:i,call_parameters:o,location:a,message:s,media_device_id:c,media_device_name:u,elapse:d,scenario:l,event_session_id:f,device_pid:h,device_vid:p,media_mode:_};this.push(v)},e.prototype.rtcVideoDevice=function(e,t){var n={event_key:"rtc_video_device",report_id:this.report_id++,rtc_timestamp:Date.now(),media_device_id:e,media_device_name:t};this.push(n)},e.prototype.rtcVideoCaptureEvent=function(e){var t=m({event_key:"rtc_video_capture_event",report_id:this.report_id++,rtc_timestamp:Date.now()},e);this.push(t)},e.prototype.rtcEncodeFirstFrame=function(e,t){var n=m(m({event_key:"rtc_encode_first_frame",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcFirstFrameEncoded=function(e,t){var n=m(m({event_key:"rtc_first_frame_encoded",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcSendFirstPacket=function(e,t){var n=m(m({event_key:"rtc_send_first_packet",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcRecvFirstPacket=function(e,t){var n=m(m({event_key:"rtc_recv_first_packet",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcRecvFirstFrame=function(e,t){var n=m(m({event_key:"rtc_recv_first_frame",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e.prototype.rtcDecodeFirstFrame=function(e,t){var n=m(m({event_key:"rtc_decode_first_frame",report_id:this.report_id++,rtc_timestamp:Date.now()},e),t);this.push(n)},e}(),eD=new QN;!function(e){e.streamRemovedBySchedule308="stream removed",e.clientRePublish="client republish",e.publishStreamFaied="publish failed",e.clientUnPublish="client unpublished",e.clientDisconnected="client disconnected",e.videoMuted="video muted"}(qN||(qN={})),function(e){e.ON_ADD_STREAM="onAddStream",e.ON_REMOVE_STREAM="onRemoveStream",e.USER_DISCONNECTION="userDisconnection",e.USER_CONNECTION="userConnection",e.ON_UPDATE_STREAM_ATTRIBUTES="onUpdateStreamAttributes",e.ON_UPDATE_ROOM_ATTRIBUTES="onUpdateRoomAttributes",e.ON_PUSH_TRACK="onPushTrack",e.ON_REMOVE_TRACK="onRemoveTrack",e.ON_CUSTOM_MESSAGE="onCustomMessage",e.NODE_CHANGE="nodeChange",e.USER_MESSAGE_RECEIVED="userMessageReceived",e.USER_BINARY_MESSAGE_RECEIVED="userBinaryMessageReceived",e.POST_PROCESSING_MESSAGE="postProcessingMessage"}(JN||(JN={})),function(e){e.ON_CONNECTION_STATE_CHANGE="onConnectionStateChange",e.ABNORMAL_DISCONNECTION="normalConnection"}(XN||(XN={}));var tD=function(){for(var e,t,n=-1,r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],i={},o=0;o<r.length;o+=1)i[r[o]]=o;var a=function(n){e=n,t=0},s=function(){if(!e)return n;if(t>=e.length)return n;var r=255&e.charCodeAt(t);return t+=1,r},c=function(){if(!e)return n;for(;;){if(t>=e.length)return n;var r=e.charAt(t);if(t+=1,i[r])return i[r];if("A"===r)return 0}},u=function(e){var t=e.toString(16);return 1===t.length&&(t="0".concat(t)),t="%".concat(t),unescape(t)};return{encodeBase64:function(e){var t,i,o;a(e),t="";var c=new Array(3);for(i=0,o=!1;!o&&(c[0]=s())!==n;)c[1]=s(),c[2]=s(),t+=r[c[0]>>2],c[1]!==n?(t+=r[c[0]<<4&48|c[1]>>4],c[2]!==n?(t+=r[c[1]<<2&60|c[2]>>6],t+=r[63&c[2]]):(t+=r[c[1]<<2&60],t="".concat(t,"="),o=!0)):(t+=r[c[0]<<4&48],t="".concat(t,"="),t="".concat(t,"="),o=!0),(i+=4)>=76&&(t="".concat(t,"\n"),i=0);return t},decodeBase64:function(e){var t,r;a(e),t="";var i=new Array(4);for(r=!1;!r&&(i[0]=c())!==n&&(i[1]=c())!==n;)i[2]=c(),i[3]=c(),t+=u(i[0]<<2&255|i[1]>>4),i[2]!==n?(t+=u(i[1]<<4&255|i[2]>>2),i[3]!==n?t+=u(i[2]<<6&255|i[3]):r=!0):r=!0;return t}}}();function nD(e){return nD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nD(e)}var rD=x,iD=rn,oD=wr,aD=sd,sD=ae,cD=He,uD=VS,dD=YS;LS("match",(function(e,t,n){return[function(t){var n=sD(this),r=null==t?void 0:cD(t,e);return r?rD(r,t,n):new RegExp(t)[e](aD(n))},function(e){var r=iD(this),i=aD(e),o=n(t,r,i);if(o.done)return o.value;if(!r.global)return dD(r,i);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=dD(r,i));){var d=aD(s[0]);c[u]=d,""===d&&(r.lastIndex=uD(i,oD(r.lastIndex),a)),u++}return 0===u?null:c}]}));var lD=function(){return AS()},fD=function(){return Date.now()},hD=function(){function e(){}return e.token2auth=function(t,n,r,i){return i?"Bearer ".concat(i):"Basic ".concat(e.createUnsafeToken(t,n,r))},e.createUnsafeToken=function(e,t,n){return tD.encodeBase64([e,t,n].join(":"))},e.merge=function(t,n){var r,i;void 0===t&&(t={}),void 0===n&&(n={});try{for(var o=b(Object.entries(t)),a=o.next();!a.done;a=o.next()){var s=E(a.value,2),c=s[0],u=s[1];null!==u&&"object"===nD(u)?e.merge(t[c],n[c]):void 0!==n[c]&&(t[c]=n[c])}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.ab2str=function(e){return String.fromCharCode.apply(null,new Uint8Array(e))},e.ab2obj=function(t){try{var n=e.ab2str(t);return JSON.parse(n)}catch(e){return{}}},e.str2ab=function(e){var t=new ArrayBuffer(e.length);try{for(var n=new Uint8Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t}catch(e){return t}},e}();var pD=new Yy("DataChannelSignaling",3),_D=0,vD=1,mD=0,gD=0,yD=function(e){function t(t){var n=t.appId,r=t.roomId,i=t.clientId,o=t.dataChannel,a=e.call(this)||this;return a._appId=n,a._roomId=r,a._clientId=i,a._dataChannel=o,a._resolveCallbacks=new Map,a._rejectCallbacks=new Map,a._p2pResolveCallbacks=new Map,a._p2pRejectCallbacks=new Map,a._p2pMessageId=0,a._rttIds={},a._signalingType=new Map,a._timer={},a._clearDataChannelListener=a._handleHandler(),window.__rtc_mock_signaling__=a.emit.bind(a),a}return n(t,e),t.prototype.destroy=function(){this._dataChannel&&(this._clearDataChannelListener(),this._dataChannel.close()),this._resolveCallbacks=new Map,this._rejectCallbacks=new Map,this._p2pResolveCallbacks=new Map,this._p2pRejectCallbacks=new Map,this._p2pMessageId=0,this._rttIds={},this._signalingType=new Map,this._timer={}},t.prototype.sendSignaling=function(e,t){var n=this;return eD.rtcSignaling(0,JSON.stringify(t),"call-".concat(e),"Send",nN.UP),new Promise((function(r,i){if(!n._dataChannel||"open"!==n._dataChannel.readyState)return i(new Ny(Sy,"DataChannel not open"));var o=[2,1],a=Dk();o=o.concat(a);var s=a.join("-");n._resolveCallbacks.set(s,r),n._rejectCallbacks.set(s,i),n._signalingType.set(s,e),n._timer[s]=setTimeout((function(){i(new Ny(by,"Signaling message time out"))}),1e4),pD.print("Signal",">>>>>> [".concat(e,"][").concat(s,"]"),t),n._sendMessage(e,o,t)}))},t.prototype.sendP2PMessage=function(e,t){var n=t instanceof ArrayBuffer,r=n?tD.encodeBase64(hD.ab2str(t)):JSON.stringify(t);return this._sendP2PMessage(e,r,!1,!1,n)},t.prototype._sendP2PMessage=function(e,t,n,r,i,o){var a=this;void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1);var s=this._p2pMessageId++,c=o||{ver:1,id:+s,time:Date.now(),dir:_D,type:mD,err:gD,app:this._appId,room:this._roomId,from:this._clientId,to:e,binary:i,msg:t};return r||-1!==(null==t?void 0:t.indexOf("__web__rtc__rtt__"))||pD.print("_sendP2PMessage [DC Signaling p2p >>]",JSON.stringify(c)),new Promise((function(e,i){if(!a._dataChannel||"open"!==a._dataChannel.readyState)return i(new Ny(Sy,"DataChannel not open"));var o=[2,5];(null==t?void 0:t.indexOf("__web__rtc__rtt__"))>-1&&(a._rttIds[s]=s,r=!0);var u=Dk();o=o.concat(u),n||(a._p2pResolveCallbacks.set(s,e),a._p2pRejectCallbacks.set(s,i),a._timer[s]=setTimeout((function(){i(new Ny(by,"P2P message timeout"))}),1e4)),a._sendMessage("p2p",o,c)}))},t.prototype._sendMessage=function(e,t,n){return y(this,void 0,void 0,(function(){var r,i;return S(this,(function(o){return r=hD.str2ab(JSON.stringify([e,n])),i=function(e){for(var t,n,r,i,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];var s=0;try{for(var c=b(o),u=c.next();!u.done;u=c.next())s+=(p=u.value).length}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}var d=new e(s),l=0;try{for(var f=b(o),h=f.next();!h.done;h=f.next()){var p=h.value;d.set(p,l),l+=p.length}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d}(Uint8Array,t,new Uint8Array(r)),this._dataChannel.send(i.buffer),[2]}))}))},t.prototype._dispartData=function(e){var t={messageType:0,compress:!1,direction:"ack"},n="",r=(new Uint8Array([]),new Uint8Array(e)),i=r[0],o=r[1],a=1&o;t.messageType=(60&o)>>2,t.compress=16==(16&i),t.direction=2==(2&o)?"ack":"send";var s=0;if(a||"ack"===t.direction){for(var c=2;c<=6;c++){var u=r[c];if(128!=(128&u)){s=c-2+1;break}}n=r.slice(2,2+s).join("-")}return{config:t,id:n,data:r.slice(2+s),needAck:a}},t.prototype._feedbackSignaling=function(e,t){void 0===e&&(e="");var n=e.split("-").map((function(e){return+e})),r=[2,3];r=r.concat(n);var i=n.join("-");pD.print("Signal",">>>>>> [".concat(t,"-res][").concat(i,"]")),this._sendMessage("".concat(t,"-res"),r,"")},t.prototype._feedbackMessage=function(e){var t,n=(null===(t=null==e?void 0:e.msg)||void 0===t?void 0:t.indexOf("__web__rtc__rtt__"))>-1;e.dir=vD,e.msg="",this._sendP2PMessage(e.to,"",!0,n,!1,e)},t.prototype._handleFeedback=function(e){var t=(e=m({},e)).id,n=this._p2pResolveCallbacks.get(t),r=this._p2pRejectCallbacks.get(t);if(clearTimeout(this._timer[t]),this._p2pResolveCallbacks.delete(t),this._p2pRejectCallbacks.delete(t),e.err===gD)"function"==typeof n&&n(t);else"function"==typeof r&&r(e)},t.prototype._handleMessage=function(e){var t,n;return y(this,void 0,void 0,(function(){var r,i,o,a,s,c,u,d,l,f,h,p,_,v,g;return S(this,(function(y){switch(y.label){case 0:return r=this._dispartData(e),i=r.config,o=r.id,a=r.data,s=a,i.compress&&((c=new YA.Inflate).push(s,!0),s=c.result),[4,Pk(s)];case 1:u=y.sent(),d=[];try{d=JSON.parse(u)}catch(e){return e instanceof Error&&eD.rtcSignalingMsgError(-1,e.message,eN.MESSAGE_PARSE_FAILED),[2]}switch(l="p2p",i.messageType){case 0:"ack"===i.direction?(f=this._resolveCallbacks.get(o),h=this._rejectCallbacks.get(o),p=d[0]||{},clearTimeout(this._timer[o]),this._resolveCallbacks.delete(o),this._rejectCallbacks.delete(o),200===(null==p?void 0:p.code)?"function"==typeof f&&f(p):"function"==typeof h&&h(p),(l=this._signalingType.get(o))&&(this._signalingType.delete(o),pD.print("Signal","<<<<<< [".concat(l,"-ack]"),p)),eD.rtcSignaling(0,u,l,"Ack",nN.DOWN)):Array.isArray(d)&&(l=d[0],d=d[1],pD.print("Signal","<<<<<< ".concat(l),d,o),this._feedbackSignaling(o,l),this.emit(l,m({},d)),eD.rtcSignaling(0,u,"on-".concat(l),"Recv",nN.DOWN));break;case 1:switch(Array.isArray(d)&&(l=d[0],d=d[1]),_=null==d?void 0:d.id,this._rttIds[_]||(null==d?void 0:d.dir)===vD||(null===(t=null==d?void 0:d.msg)||void 0===t?void 0:t.indexOf("__web__rtc__rtt__"))>-1?delete this._rttIds[_]:pD.print("Signal","<<<<<< p2p response",d),d.dir){case _D:-1===(null===(n=null==d?void 0:d.msg)||void 0===n?void 0:n.indexOf("__web__rtc__rtt__"))&&(v=d.binary,g=d.msg,this.emit(v?JN.USER_BINARY_MESSAGE_RECEIVED:JN.USER_MESSAGE_RECEIVED,m(m({},d),{msg:v?hD.str2ab(tD.decodeBase64(g)):g}))),this._feedbackMessage(d);break;case vD:this._handleFeedback(d)}}return[2]}}))}))},t.prototype._handleHandler=function(){var e=this,t=function(t){pD.print("_handleHandler","dataChannel close",t),e.emit("close",t)},n=function(t){pD.print("_handleHandler","dataChannel error",t),e.emit("close",t)},r=function(t){e._handleMessage(t.data)};return this._dataChannel.addEventListener("close",t),this._dataChannel.addEventListener("error",n),this._dataChannel.addEventListener("message",r),function(){e._dataChannel.removeEventListener("close",t),e._dataChannel.removeEventListener("error",n),e._dataChannel.removeEventListener("message",r)}},t}(Hy.exports.EventEmitter),SD=function(){function e(){this.isSending=!1}return e.prototype.ajax=function(e){var t=this,n=e.method,r=e.url,i=e.body,o=void 0===i?{}:i,a=e.headers,s=void 0===a?{}:a,c=e.stringify,u=void 0===c||c;return new Promise((function(e,i){var a,c;t.isSending=!0;var d=new XMLHttpRequest;d.open(n,r,!0);try{for(var l=b(Object.entries(s)),f=l.next();!f.done;f=l.next()){var h=E(f.value,2),p=h[0],_=h[1];d.setRequestHeader(p,_)}}catch(e){a={error:e}}finally{try{f&&!f.done&&(c=l.return)&&c.call(l)}finally{if(a)throw a.error}}d.onreadystatechange=function(){4===d.readyState&&(t.isSending=!1,200===d.status?e(JSON.parse(d.responseText)):i({message:d.statusText,code:d.status})),0===d.status&&i({code:0,message:"Request abort"})},d.onerror=function(e){var n=ky;t.isSending=!1,i({code:n,message:d.responseText||"unknown"})},u&&(o=JSON.stringify(o)),d.send(o),t.xhr=d}))},e.prototype.get=function(e,t){return this.ajax({method:"GET",url:e,headers:t})},e.prototype.post=function(e,t,n,r){return this.ajax({method:"POST",url:e,body:t,headers:n,stringify:r})},e.prototype.abort=function(){var e;null===(e=this.xhr)||void 0===e||e.abort()},e}(),bD="RTC_DEVICE_ID",ED="RTC_DEFAULT_SDP",TD="RTC_ACCESS_NODE",CD="RTC_ACCESS_URLS",RD=function(){function e(){}return e.prototype.get=function(e){var t=localStorage.getItem(e);if(!t)return null;try{var n=JSON.parse(t);return n.ttl>0&&Date.now()-n.saveTime>n.ttl?(this.delete(e),null):n.message}catch(e){return null}},e.prototype.set=function(e,t,n){void 0===n&&(n=-1);var r={ttl:n,saveTime:Date.now(),message:t};try{return localStorage.setItem(e,JSON.stringify(r)),!0}catch(e){return!1}},e.prototype.delete=function(e){try{return localStorage.removeItem(e),!0}catch(e){return!1}},e}(),wD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getDeviceId=function(){var e=this.get(bD);return e||(e=AS()),this.set(bD,e),e},t.prototype.getDefaultSdp=function(){return this.get(ED)},t.prototype.setDefaultSdp=function(e){return this.set(ED,e,108e6)},t.prototype.getAccessNode=function(){return this.get(TD)},t.prototype.setAccessNode=function(e,t){return this.set(TD,e,1e3*t)},t.prototype.getAccessUrls=function(){return this.get(CD)},t.prototype.setAccessUrls=function(e){var t=e.map((function(e){var t=e.host,n=e.path;return"https://".concat(t).concat(n)}));return this.set(CD,t)},t.prototype.clearAccessUrls=function(){this.delete(CD)},t}(RD),ID=new wD,AD=new Yy("ICE Request",3),OD=function(){function e(){this._request=new SD}return e.prototype.getAccessNode=function(e,t,n,r,i,o){return y(this,void 0,void 0,(function(){var a;return S(this,(function(s){return(a=ID.getAccessNode())?(this.getAccessNodeFromServer(e,t,n,r,i,o),AD.print("use cache node",JSON.stringify(a)),[2,Promise.resolve(a)]):[2,this.getAccessNodeFromServer(e,t,n,r,i,o)]}))}))},e.prototype.getAccessNodeFromServer=function(e,t,n,r,i,o){return y(this,void 0,void 0,(function(){var a,s,c=this;return S(this,(function(u){return a=ID.getAccessUrls(),s=!0,AD.print("use cache access urls if exist",a),(null==a?void 0:a.length)>0||(a=Db.ICE_CONFIG_REQUEST_URLS,s=!1,AD.print("use external access urls if exist",a)),(null==a?void 0:a.length)>0||(a=Db.ICE_CONFIG_REQUEST_URLS_INTERNAL,s=!1,AD.print("use internal access urls finally",a)),[2,this.getICEConfigFromServer(a,e,t,n,r,i,o).then((function(e){AD.print("request success and will cache");var t=e.nodes[0];return ID.setAccessNode(t,e.ttl||11200),ID.setAccessUrls(e.dispatchDomains),t})).catch((function(a){if(s)return AD.print("use cache access urls fail, will fallback"),ID.clearAccessUrls(),c.getAccessNodeFromServer(e,t,n,r,i,o);throw a}))]}))}))},e.prototype.getICEConfigFromServer=function(e,t,n,r,i,o,a){var s;return y(this,void 0,void 0,(function(){var c,u,d,l=this;return S(this,(function(f){return c={appID:t,roomID:n,userID:r,deviceID:i,connectSessionID:lD(),os:"web",sdkVersion:Db.VERSION,expectedAddr:Mb("EXPECTED_ADDR"),productPlatform:"VolcEngine"},o&&a&&(c.feedbackInfo=[{feedbackIP:null===(s=a.publicIPs[0])||void 0===s?void 0:s.ip,feedbackReason:{type:"NodeChanged",reason:o}}],delete c.expectedAddr),u=Date.now(),eD.rtcGetAccess(0,JSON.stringify(c),0,$k.REQUEST,e.join(","),c.connectSessionID),d=e.map((function(e){return y(l,void 0,void 0,(function(){var t,n,r;return S(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._request.post(e,c)];case 1:return t=i.sent(),[3,3];case 2:throw n=i.sent(),new Ny(my,"get ICE config failed",n);case 3:if(200!==t.code)throw new Ny(my,"get ICE config failed",{server_code:t.code,message:JSON.stringify(t)});if(!(r=t.nodes[0]))throw new Ny(my,"ICE config server return empty nodes",{code:t.code,message:JSON.stringify(t)});return[2,{result:t,firstNode:r}]}}))}))})),[2,Promise.race(d).then((function(t){var n=t.result;return t.firstNode,eD.rtcGetAccess(200,JSON.stringify(n),Date.now()-u,$k.RESPONSE,e.join(","),c.connectSessionID),n})).catch((function(t){throw eD.rtcGetAccess(t.error.code||t.error.server_code,t.error.message,Date.now()-u,$k.RESPONSE,e.join(","),c.connectSessionID),t}))]}))}))},e.prototype.abort=function(){this._request.isSending&&(AD.print("abort","HTTP Request of [getICEConfigFromServer] abort"),this._request.abort())},e}(),kD=pR.left,ND=Re,DD=Kf;vi({target:"Array",proto:!0,forced:!rl("reduce")||!DD&&ND>79&&ND<83},{reduce:function(e){var t=arguments.length;return kD(this,e,t,t>1?arguments[1]:void 0)}});var PD={},MD={},xD={exports:{}},UD=xD.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(UD).forEach((function(e){UD[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))})),function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,r){var i=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:i&&!n[e.name]&&(n[e.name]={});var o=e.push?{}:i?n[e.name]:n;!function(e,n,r,i){if(i&&!r)n[i]=t(e[1]);else for(var o=0;o<r.length;o+=1)null!=e[o+1]&&(n[r[o]]=t(e[o+1]))}(r.match(e.reg),o,e.names,e.name),e.push&&n[e.push].push(o)},r=xD.exports,i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach((function(e){var t=e[0],i=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),a=o[o.length-1]);for(var s=0;s<(r[t]||[]).length;s+=1){var c=r[t][s];if(c.reg.test(i))return n(c,a,i)}})),t.media=o,t};var o=function(e,n){var r=n.split(/=(.+)/,2);return 2===r.length?e[r[0]]=t(r[1]):1===r.length&&n.length>1&&(e[r[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],r=e.split(" ").map(t),i=0;i<r.length;i+=3)n.push({component:r[i],ip:r[i+1],port:r[i+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,r=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),r=!0),{scid:n,paused:r}}))}))}}(MD);var LD=xD.exports,jD=/%[sdv%]/g,VD=function(e){var t=1,n=arguments,r=n.length;return e.replace(jD,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},BD=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return VD.apply(null,r)},FD=["v","o","s","i","u","e","p","c","b","t","r","z","a"],zD=["i","c","b","a"],HD=MD,GD=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||FD,r=t.innerOrder||zD,i=[];return n.forEach((function(t){LD[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(BD(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(BD(t,n,e))}))}))})),e.media.forEach((function(e){i.push(BD("m",LD.m[0],e)),r.forEach((function(t){LD[t].forEach((function(n){n.name in e&&null!=e[n.name]?i.push(BD(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){i.push(BD(t,n,e))}))}))}))})),i.join("\r\n")+"\r\n"};PD.write=GD,PD.parse=HD.parse,PD.parseParams=HD.parseParams,PD.parseFmtpConfig=HD.parseFmtpConfig,PD.parsePayloads=HD.parsePayloads,PD.parseRemoteCandidates=HD.parseRemoteCandidates,PD.parseImageAttributes=HD.parseImageAttributes,PD.parseSimulcastStreamList=HD.parseSimulcastStreamList;var WD=function(){function e(e){this._iceConfigNode=e}return e.prototype.modifyByIceNode=function(e){var t,n=this._iceConfigNode.iceParams,r=PD.parse(e);return null===(t=r.media)||void 0===t||t.forEach((function(e){e.iceUfrag=null==n?void 0:n.clientIceUfrag,e.icePwd=null==n?void 0:n.clientIcePwd,e.iceOptions="renomination"})),PD.write(r)},e}(),YD=function(){function e(e){this._iceConfigNode=e}return e.prototype.modifyByIceNode=function(e){var t,n=this,r=this._iceConfigNode.certFingerprint,i=PD.parse(e);return(null==i?void 0:i.fingerprint)&&(i.fingerprint={type:"sha-256",hash:r}),null===(t=null==i?void 0:i.media)||void 0===t||t.forEach((function(e){return n.modifyMlineByIceNode(e)})),PD.write(i)},e.prototype.modifyMlineByIceNode=function(e){var t=this._iceConfigNode,n=t.publicIPs,r=t.certFingerprint,i=t.iceParams;e.fingerprint&&(e.fingerprint={type:"sha-256",hash:r}),e.icePwd=i.serverIcePwd,this._iceUfrag||(this._iceUfrag=nP(i.serverIceUfrag)),e.iceUfrag=this._iceUfrag,e.setup="active",this._candidates||(this._candidates=tP(n)),e.candidates=this._candidates,e.iceOptions="renomination","application"===e.type&&(e.sctpmap={sctpmapNumber:5e3,app:"webrtc-datachannel",maxMessageSize:262144})},e}();function KD(e,t){var n,r=PD.parse(e),i=[];return r.media=r.media.map((function(e){return t.includes(e.mid+"")?(e.direction="inactive",e.port=0,delete e.ext,delete e.ssrcs,delete e.ssrcGroups,delete e.simulcast,delete e.simulcast_03,delete e.rids,delete e.extmapAllowMixed,delete e.bundleOnly):"inactive"!==e.direction&&i.push(e.mid),e})),(null===(n=r.groups)||void 0===n?void 0:n[0])&&(r.groups[0].mids=i.join(" ")),r}var qD,JD,XD,ZD,$D,QD=function(e,t){var n,r;try{var i=PD.parse(e),o=PD.parse(t),a="".concat(null===(n=o.groups)||void 0===n?void 0:n[0].mids).split(" "),s="".concat(null===(r=i.groups)||void 0===r?void 0:r[0].mids).split(" "),c={};a.forEach((function(e){return c[e]=e}));var u={};s.forEach((function(e){c[e]||(u[e]=e)}));var d="",l="";return i.media=i.media.filter((function(e){return u[e.mid]&&"audio"===e.type?d="".concat(e.mid):u[e.mid]&&"video"===e.type&&(l="".concat(e.mid)),u[e.mid]})),delete i.groups,delete i.msidSemantic,{partialSdp:PD.write(i),audioMid:d,videoMid:l}}catch(e){return null}},eP=function(e,t){var n;try{var r=PD.parse(e),i=[];return null===(n=r.media)||void 0===n||n.forEach((function(e){(null==t?void 0:t.includes("".concat(e.mid)))&&i.push(e)})),r.media=i,delete r.groups,delete r.msidSemantic,PD.write(r)}catch(e){return""}},tP=function(e){if(!Array.isArray(e))return[];var t=0,n=2130706431,r=[];return e.forEach((function(e){var i={component:1,ip:e.ip,type:"host",generation:e.generation};e.udpPorts&&e.udpPorts.forEach((function(e){r.push(m(m({},i),{foundation:t++,transport:"udp",port:e,priority:n}))})),e.tcpPorts&&e.tcpPorts.forEach((function(e){r.push(m(m({},i),{foundation:t++,transport:"tcp",port:e,tcptype:"passive",priority:2130705431}))}))})),r},nP=function(e){var t=new TextEncoder,n=t.encode("PREC"),r=new Uint8Array(hD.str2ab(e)),i=t.encode(Date.now().toString()).slice(-4),o=new Uint8Array(4);o[0]=0,o[1]=1,o[2]=1,o[3]=1;var a=function(e){for(var t,n,r,i,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];var s=0;try{for(var c=b(o),u=c.next();!u.done;u=c.next())s+=(p=u.value).length}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}var d=new e(s),l=0;try{for(var f=b(o),h=f.next();!h.done;h=f.next()){var p=h.value;d.set(p,l),l+=p.length}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d}(Uint8Array,n,r,i,o),s=hD.ab2str(a.buffer);return tD.encodeBase64(s)},rP="safari"===(qD="none",null!==window.navigator.userAgent.match("Firefox")?qD="mozilla":null!==window.navigator.userAgent.match("Chrome")?(qD="chrome-stable",null!==window.navigator.userAgent.match("Electron")&&(qD="electron")):(null!==window.navigator.userAgent.match("Safari")||null!==window.navigator.userAgent.match("AppleWebKit"))&&(qD="safari"),qD);!function(e){e.codec="codec",e.inboundRtp="inbound-rtp",e.outboundRtp="outbound-rtp",e.remoteInboundRtp="remote-inbound-rtp",e.remoteOutboundRtp="remote-outbound-rtp",e.mediaSource="media-source",e.csrc="csrc",e.peerConnection="peer-connection",e.dataChannel="data-channel",e.stream="stream",e.track="track",e.transceiver="transceiver",e.sender="sender",e.receiver="receiver",e.transport="transport",e.sctpTransport="sctp-transport",e.candidatePair="candidate-pair",e.localCandidate="local-candidate",e.remoteCandidate="remote-candidate",e.certificate="certificate",e.iceServer="ice-server"}(JD||(JD={})),function(e){e[e.encode=0]="encode",e[e.decode=1]="decode"}(XD||(XD={})),function(e){e[e.none=0]="none",e[e.cpu=1]="cpu",e[e.bandwidth=2]="bandwidth",e[e.other=3]="other"}(ZD||(ZD={})),function(e){e[e.unknown=0]="unknown",e[e.controlling=1]="controlling",e[e.controlled=2]="controlled"}($D||($D={}));var iP,oP,aP=function(){function e(e){this.peer=e,this.stats=[]}return e.prototype.handleCodec=function(e){return e},e.prototype.handleInboundRtp=function(e){return e},e.prototype.handleOutboundRtp=function(e){var t=e.ssrc;return t&&(e.rtxSsrc=t),e},e.prototype.handleRemoteInboundRtp=function(e){return e},e.prototype.handleRemoteOutboundRtp=function(e){return e},e.prototype.handleMediaSource=function(e){return e},e.prototype.handleCsrc=function(e){return e},e.prototype.handlePeerConnection=function(e){return e},e.prototype.handleDataChannel=function(e){return e},e.prototype.handleStream=function(e){return e},e.prototype.handleTrack=function(e){return e},e.prototype.handleTransceiver=function(e){return e},e.prototype.handleSender=function(e){return e},e.prototype.handleReceiver=function(e){return e},e.prototype.handleTransport=function(e){return e},e.prototype.handleSctpTransport=function(e){return e},e.prototype.handleCandidatePair=function(e){return e},e.prototype.handleLocalCandidate=function(e){return e},e.prototype.handleRemoteCandidate=function(e){return e},e.prototype.handleCertificate=function(e){return e},e.prototype.handleIceServer=function(e){return e},e.prototype.processStats=function(e){var t=this;e.forEach((function(e){var n;switch(e.type){case JD.candidatePair:n=t.handleCandidatePair;break;case JD.certificate:n=t.handleCertificate;break;case JD.remoteCandidate:n=t.handleRemoteCandidate;break;case JD.remoteInboundRtp:n=t.handleInboundRtp;break;case JD.remoteOutboundRtp:n=t.handleOutboundRtp;break;case JD.sctpTransport:n=t.handleSctpTransport;break;case JD.sender:n=t.handleSender;break;case JD.stream:n=t.handleStream;break;case JD.track:n=t.handleTrack;break;case JD.transceiver:n=t.handleTransceiver;break;case JD.transport:n=t.handleTransport;break;case JD.codec:n=t.handleCodec;break;case JD.csrc:n=t.handleCsrc;break;case JD.dataChannel:n=t.handleDataChannel;break;case JD.iceServer:n=t.handleIceServer;break;case JD.mediaSource:n=t.handleMediaSource;break;case JD.outboundRtp:n=t.handleOutboundRtp;break;case JD.inboundRtp:n=t.handleInboundRtp;break;case JD.peerConnection:n=t.handlePeerConnection;break;case JD.receiver:n=t.handleReceiver;break;case JD.localCandidate:n=t.handleLocalCandidate;break;default:n=function(e){return e}}n=n.bind(t),t.stats.push(n(e))}))},e.prototype.getExtraStats=function(){return y(this,void 0,void 0,(function(){var e=this;return S(this,(function(t){return[2,new Promise((function(t,n){if(rP||void 0!==window.InstallTrigger)return t(e.stats);try{e.peer.getStats((function(n){n.result().forEach((function(t){if(!sP.includes(t.type)){var n={};t.names().forEach((function(e){n[e]=t.stat(e)})),n.id=t.id,n.type=t.type,n.timestamp=t.timestamp,e.stats.push(n)}})),t(e.stats)}))}catch(e){n(e)}}))]}))}))},e.prototype.getStats=function(e){return y(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),[4,this.peer.getStats(e)];case 1:t=n.sent(),this.processStats(t),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.getExtraStats()];case 3:case 4:return n.sent(),[3,5];case 5:return[3,7];case 6:return n.sent(),[3,7];case 7:return[2,this.stats]}}))}))},e}(),sP=["codec","inbound-rtp","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp","media-source","csrc","peer-connection","data-channel","stream","track","transceiver","sender","receiver","transport","sctp-transport","candidate-pair","local-candidate","remote-candidate","certificate","ice-server"],cP=function(e,t){return y(void 0,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:return n=[],e instanceof RTCPeerConnection?[4,new aP(e).getStats(t)]:[2,n];case 1:return[2,n=r.sent()]}}))}))};!function(e){e[e.AUTO=0]="AUTO",e[e.MODE_L=1]="MODE_L",e[e.MODE_R=2]="MODE_R",e[e.MODE_MIX=3]="MODE_MIX"}(iP||(iP={})),function(e){e[e.PLAYOUT=0]="PLAYOUT",e[e.PUBLISH=1]="PUBLISH",e[e.PLAYOUT_AND_PUBLISH=2]="PLAYOUT_AND_PUBLISH"}(oP||(oP={}));var uP=new Yy("BasicHandler",3),dP={iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"},lP=function(e){function t(){var t=e.call(this)||this;return t._peerConnection=new RTCPeerConnection(dP),t._dataChannel=t._peerConnection.createDataChannel("signaling"),t._dataChannel.binaryType="arraybuffer",t._peerConnection.ontrack=function(e){var n,r;uP.print("constructor","pc.ontrack ".concat(e.track.kind," ").concat(e.track.id," ").concat(null===(r=null===(n=e.streams)||void 0===n?void 0:n[0])||void 0===r?void 0:r.id)),t.emit("ontrack",e)},t._peerConnection.onconnectionstatechange=function(e){uP.print("constructor","onconnectionstatechange ".concat(t._peerConnection.iceConnectionState," -> ").concat(t._peerConnection.connectionState)),"failed"!==t._peerConnection.iceConnectionState&&"closed"!==t._peerConnection.iceConnectionState&&"failed"!==t._peerConnection.connectionState||t.emit("disconnect")},t._peerConnection.oniceconnectionstatechange=function(){var e=t._peerConnection.iceConnectionState;eD.rtcPreIceState(e,Qk["RTCPREICESTATE_ICESTATE_".concat(e.toUpperCase())])},t}return n(t,e),t.prototype.connect=function(e){return y(this,void 0,void 0,(function(){var t,n,r=this;return S(this,(function(i){switch(i.label){case 0:return uP.print("connect","invoke connect"),[4,this._peerConnection.createOffer()];case 1:return t=i.sent(),this._localSdp=new WD(e),[4,this.setLocalDescription(t.sdp)];case 2:return i.sent(),this._remoteSdp=new YD(e),n=this._remoteSdp.modifyByIceNode(t.sdp),[4,this.setRemoteDescription(n)];case 3:return i.sent(),[4,new Promise((function(e,t){r._dataChannel.onopen=function(){uP.print("connect","dataChannel open"),e("")},r._dataChannel.onerror=function(e){eD.rtcSignalingMsgError(e.error.sdpLineNumber,e.error.errorDetail,eN.INVALID_DATA),t(e)},r._dataChannel.onclose=function(e){t(e)}}))];case 4:return i.sent(),uP.print("connect","dataChannel establish success"),[2,this._dataChannel]}}))}))},t.prototype.disconnect=function(){this._peerConnection.close(),this._dataChannel.close(),this._peerConnection.ontrack=null},t.prototype.destroy=function(){this.disconnect(),this._localSdp=void 0,this._remoteSdp=void 0},t.prototype.publish=function(e){var t;return y(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,g,y;return S(this,(function(S){switch(S.label){case 0:if(n=e.stream,r=null==e?void 0:e.videoTrack,i=null==e?void 0:e.audioTrack,o={},a=[],Array.isArray(null==e?void 0:e.videoEncodeConfig))for(s=null==e?void 0:e.videoEncodeConfig.length,c=null==r?void 0:r.getTrack(),u={width:640,height:480,framerate:30},c&&(d=null==c?void 0:c.getSettings(),u={width:Math.floor(d.width),height:Math.floor(d.height),framerate:Math.floor(d.frameRate)}),o.sendEncodings=[],l=0;l<s;l++)f=null==e?void 0:e.videoEncodeConfig[l],h={maxBitrate:1e3*f.maxKbps},p=Math.pow(2,l),s>1&&(h.rid="".concat(l),h.scaleResolutionDownBy=p),null===(t=o.sendEncodings)||void 0===t||t.unshift(h),a.push({width:Math.floor(u.width/p),height:Math.floor(u.height/p),framerate:u.framerate,maxkbps:f.maxKbps,rid:"".concat(l)});return uP.print("publish videoTransceiverInit videoDescriptions","",o,a),_=null==i?void 0:i.getTrack(),(null==i?void 0:i.mixType)!==oP.PLAYOUT&&(null==i?void 0:i.mixedAudioTrack)&&(_=null==i?void 0:i.mixedAudioTrack),e.audioTransceiver=this._peerConnection.addTransceiver(_||"audio",{direction:"sendonly",streams:[n]}),e.videoTransceiver=this._peerConnection.addTransceiver((null==r?void 0:r.getTrack())||"video",m({direction:"sendonly",streams:[n]},o)),uP.print("sender.getParameters()",e.videoTransceiver.sender.getParameters()),v=fD(),eD.rtcBeginCreateOffer(rN.UP,e.streamId,e.userId),[4,this._peerConnection.createOffer()];case 1:if(g=S.sent(),eD.rtcCreateOffer(0,iN.UP,e.streamId,e.userId,fD()-v),y=QD(g.sdp,this.getLocalDescriptionSdp()),!g.sdp||!y)throw new Ny(Ty,"createOffer failed");return[2,m(m({sdp:g.sdp},y),{type:"incroffer",semantics:"unified-plan",videoDescriptions:a})]}}))}))},t.prototype.subscribe=function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o,a;return S(this,(function(s){switch(s.label){case 0:return n="incroffer",r="unified-plan",t?[2,{sdp:this.getLocalDescriptionSdp(),partialSdp:eP(this.getLocalDescriptionSdp(),[t.audioMid,t.videoMid]),audioMid:t.audioMid,videoMid:t.videoMid,type:n,semantics:r}]:(e.audioTransceiver=this._peerConnection.addTransceiver("audio",{direction:"recvonly"}),e.videoTransceiver=this._peerConnection.addTransceiver("video",{direction:"recvonly"}),i=fD(),eD.rtcBeginCreateOffer(rN.DOWN,e.streamId,e.userId),[4,this._peerConnection.createOffer()]);case 1:if(o=s.sent(),eD.rtcCreateOffer(0,iN.DOWN,e.streamId,e.userId,fD()-i),a=QD(o.sdp,this.getLocalDescriptionSdp()),!o.sdp||!a)throw new Ny(Ty,"createOffer failed");return[2,m(m({sdp:o.sdp},a),{type:n,semantics:r})]}}))}))},t.prototype.setAnswerSdp=function(e,t,n,r,i){var o;return y(this,void 0,void 0,(function(){var a,s,c,u,d,l;return S(this,(function(f){switch(f.label){case 0:return eD.rtcRecvAnswer(0,sN.INCRANSWER,0,i,r.streamId,r.userId),a=this._peerConnection.remoteDescription,s=PD.parse(null==a?void 0:a.sdp),c=null===(o=s.media)||void 0===o?void 0:o.reduce((function(e,t){return e[t.mid]=t,e}),{}),PD.parse(t).media.forEach((function(e){return c[e.mid]=e})),u=[],d=PD.parse(e),l=d.media.map((function(e){return n&&n[e.mid]&&(e.mid=n[e.mid]),"inactive"!==e.direction&&u.push(e.mid),c[e.mid]})),s.media=l,d.groups=[{mids:u.join(" "),type:"BUNDLE"}],s.groups=d.groups,[4,this.setLocalDescription(PD.write(d),r,i)];case 1:return f.sent(),[4,this.setRemoteDescription(PD.write(s),r,i)];case 2:return f.sent(),[2]}}))}))},t.prototype.setLocalDescription=function(e,t,n){var r;return y(this,void 0,void 0,(function(){var i,o,a,s;return S(this,(function(c){switch(c.label){case 0:i=null===(r=this._localSdp)||void 0===r?void 0:r.modifyByIceNode(e),o=new RTCSessionDescription({type:"offer",sdp:i}),a=fD(),c.label=1;case 1:return c.trys.push([1,3,,4]),uP.print("setOffer","set offer: ",o),[4,this._peerConnection.setLocalDescription(o)];case 2:return c.sent(),t&&eD.rtcSetDescription(0,"",oN.W_1,n,t.streamId,t.userId,fD()-a),[3,4];case 3:throw(s=c.sent())instanceof Error&&t&&eD.rtcSetDescription(-1,s.message,oN.W_1,n,t.streamId,t.userId,fD()-a),s;case 4:return[2]}}))}))},t.prototype.setRemoteDescription=function(e,t,n){return y(this,void 0,void 0,(function(){var r,i,o;return S(this,(function(a){switch(a.label){case 0:r=new RTCSessionDescription({type:"answer",sdp:e}),i=fD(),a.label=1;case 1:return a.trys.push([1,3,,4]),uP.print("setAnswer","set answer: ",r),[4,this._peerConnection.setRemoteDescription(r)];case 2:return a.sent(),t&&eD.rtcSetDescription(0,"",oN.W_0,n,t.streamId,t.userId,fD()-i),[3,4];case 3:throw(o=a.sent())instanceof Error&&t&&eD.rtcSetDescription(-1,o.message,oN.W_0,n,t.streamId,t.userId,fD()-i),o;case 4:return[2]}}))}))},t.prototype.getLocalDescriptionSdp=function(){var e,t,n,r;if(null===(t=null===(e=this._peerConnection)||void 0===e?void 0:e.localDescription)||void 0===t?void 0:t.sdp)return null===(r=null===(n=this._peerConnection)||void 0===n?void 0:n.localDescription)||void 0===r?void 0:r.sdp;throw Error()},t.prototype.getRemoteDescriptionSdp=function(){var e,t,n,r;if(null===(t=null===(e=this._peerConnection)||void 0===e?void 0:e.remoteDescription)||void 0===t?void 0:t.sdp)return null===(r=null===(n=this._peerConnection)||void 0===n?void 0:n.remoteDescription)||void 0===r?void 0:r.sdp;throw Error()},t.prototype.closeMLine=function(e){var t,n;return y(this,void 0,void 0,(function(){var r,i,o,a,s=this;return S(this,(function(c){switch(c.label){case 0:return uP.print("closeMids","closeMids: ",e),r=this.getLocalDescriptionSdp(),i=KD(r,e),o=this.getRemoteDescriptionSdp(),a=KD(o,e),[4,this.setLocalDescription(PD.write(i))];case 1:return c.sent(),(null===(t=null==i?void 0:i.media)||void 0===t?void 0:t.length)!==(null===(n=null==a?void 0:a.media)||void 0===n?void 0:n.length)&&i.media.slice(a.media.length).forEach((function(e){var t;null===(t=s._remoteSdp)||void 0===t||t.modifyMlineByIceNode(e),a.media.push(e)})),[4,this.setRemoteDescription(PD.write(a))];case 2:return c.sent(),[2]}}))}))},t.prototype.getDefaultSdp=function(){return y(this,void 0,void 0,(function(){var e,t,n;return S(this,(function(r){switch(r.label){case 0:return(e=ID.getDefaultSdp())?[3,2]:((t=new RTCPeerConnection(dP)).createDataChannel("default"),t.addTransceiver("audio",{direction:"recvonly"}),t.addTransceiver("video",{direction:"recvonly"}),[4,t.createOffer()]);case 1:n=r.sent(),e=null==n?void 0:n.sdp,t.close(),ID.setDefaultSdp(e),r.label=2;case 2:return[2,{sdp:e,semantics:"unified-plan",type:"offer"}]}}))}))},t.prototype.getStats=function(e){return cP(this._peerConnection,e)},t.prototype.rollback=function(e,t){var n;return y(this,void 0,void 0,(function(){return S(this,(function(r){switch(r.label){case 0:return"stable"!==this._peerConnection.signalingState?[3,2]:[4,null===(n=this._peerConnection)||void 0===n?void 0:n.setLocalDescription(new RTCSessionDescription({sdp:e,type:"offer"}))];case 1:r.sent(),r.label=2;case 2:return this.closeMLine(t),[2]}}))}))},Object.defineProperty(t.prototype,"pc",{get:function(){return this._peerConnection},enumerable:!1,configurable:!0}),t}(Hy.exports.EventEmitter),fP=N,hP=or.EXISTS,pP=q,_P=Zt.f,vP=Function.prototype,mP=pP(vP.toString),gP=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,yP=pP(gP.exec);fP&&!hP&&_P(vP,"name",{configurable:!0,get:function(){try{return yP(gP,mP(this))[1]}catch(e){return""}}});var SP=new Yy("Locker",2),bP=1,EP=function(){function e(e){this.lockingPromise=Promise.resolve(),this.locks=0,this.name="",this.lockId=bP++,e&&(this.name=e),SP.print("[lock-".concat(this.name,"-").concat(this.lockId,"] is created."))}return Object.defineProperty(e.prototype,"isLocked",{get:function(){return this.locks>0},enumerable:!1,configurable:!0}),e.prototype.lock=function(){var e,t=this;this.locks+=1,SP.print("[lock-".concat(this.name,"-").concat(this.lockId,"] locked, current queue ").concat(this.locks,"."));var n=new Promise((function(n){e=function(){t.locks-=1,SP.print("[lock-".concat(t.name,"-").concat(t.lockId,"] unlocked, current queue ").concat(t.locks,".")),n()}})),r=this.lockingPromise.then((function(){return e}));return this.lockingPromise=this.lockingPromise.then((function(){return n})),r},e}(),TP=Math.log,CP=Math.LOG10E;vi({target:"Math",stat:!0},{log10:Math.log10||function(e){return TP(e)*CP}}),vi({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),new Yy("Stats",2);var RP,wP=function(){function e(e,t){this._client=e,this._handler=t,this.dataChannelRTT={},this._rttTimer={},this._remoteStreamStasEvtIntervals={},this._localStreamStasEvtIntervals={},this._firstFrameStarted={}}return e.prototype.setRemoteStreamStatsEvtInterval=function(e){var t,n,r=this;this.getDataChannelRTT(e.userId);var i={audio:{},video:{},remoteStream:e},o=null===(t=e.audioTrack)||void 0===t?void 0:t.getTrack(),a=null===(n=e.videoTrack)||void 0===n?void 0:n.getTrack();this.getRemoteAudioStats(o,i),this.getRemoteVideoStats(a,i),this.delRemoteStreamStatsEvtInterval(e);this._remoteStreamStasEvtIntervals[e.streamId]=setInterval((function(){return y(r,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:return[4,y(r,void 0,void 0,(function(){var t,n,r,o,a,s,c;return S(this,(function(u){switch(u.label){case 0:return t=null===(s=e.audioTrack)||void 0===s?void 0:s.getTrack(),n=null===(c=e.videoTrack)||void 0===c?void 0:c.getTrack(),[4,this.getRemoteAudioStats(t,i)];case 1:return r=u.sent(),[4,this.getRemoteVideoStats(n,i)];case 2:return(o=u.sent()).isScreen=e.isScreen,this.dataChannelRTT[e.userId]&&(a=this.dataChannelRTT[e.userId]/2,r.e2eDelay=a+r.jitterBufferDelay,o.e2eDelay=a+i.video.jitterBufferDelay),[2,{audioStats:r,videoStats:o,isScreen:e.isScreen,userId:e.userId}]}}))}))];case 1:return t=n.sent(),this._client.emit("onRemoteStreamStats",t),[2]}}))}))}),2e3)},e.prototype.delRemoteStreamStatsEvtInterval=function(e){clearInterval(this._remoteStreamStasEvtIntervals[e.streamId])},e.prototype.unsubscribe=function(e){this.delRemoteStreamStatsEvtInterval(e),this._firstFrameStarted["".concat(e.streamId,"-audio")]&&(eD.rtcFirstFrame({event_type:_N.RECV_END,media_type:e.isScreen?vN.SCREEN_AUDIO:vN.AUDIO,type:mN.PUBLISH,start:this._firstFrameStarted["".concat(e.streamId,"-audio")],event_session_id:+e.streamId,result:!1,reason:gN.UNSUBSCRIBE,stream_user_id:e.userId}),delete this._firstFrameStarted["".concat(e.streamId,"-audio")]),this._firstFrameStarted["".concat(e.streamId,"-video")]&&(eD.rtcFirstFrame({event_type:_N.RECV_END,media_type:e.isScreen?vN.SCREEN_VIDEO:vN.VIDEO,type:mN.PUBLISH,start:this._firstFrameStarted["".concat(e.streamId,"-video")],event_session_id:+e.streamId,result:!1,reason:gN.UNSUBSCRIBE,stream_user_id:e.userId}),delete this._firstFrameStarted["".concat(e.streamId,"-video")])},e.prototype.getRemoteAudioStats=function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d,l,f,h=this;return S(this,(function(p){switch(p.label){case 0:return n={},r={timestamp:Date.now()},i=t.remoteStream,o=i.streamId,a=i.userId,s=i.isScreen,c=i.audioMid,u=i.hasAudio,d={media_type:"audio",direction:"down",stream_id:o,stream_user_id:a,vid:c},e&&this._handler?(t.audioStart||(t.audioStart=fD(),eD.rtcFirstFrame({event_type:_N.BEGIN_RECV,media_type:s?vN.SCREEN_AUDIO:vN.AUDIO,type:mN.SUBSCRIBE,start:t.audioStart,event_session_id:+o,stream_user_id:a}),u?this._firstFrameStarted["".concat(o,"-audio")]=t.audioStart:eD.rtcFirstFrame({event_type:_N.RECV_END,media_type:s?vN.SCREEN_AUDIO:vN.AUDIO,type:mN.PUBLISH,start:t.audioStart,event_session_id:+o,result:!1,reason:gN.DISABLE,stream_user_id:a})),[4,this._handler.getStats(e)]):[2,n];case 1:return p.sent().forEach((function(e){var i=e.type,c=e.packetsLost,u=e.packetsReceived,l=e.bytesReceived,f=e.jitterBufferDelay,p=e.jitterBufferEmittedCount,_=e.clockRate,v=e.channels,m=e.totalSamplesReceived,g=e.concealedSamples,y=e.concealmentEvents,S=e.totalRoundTripTime,b=e.state,E=e.currentRoundTripTime,T=e.audioLevel,C=e.totalAudioEnergy,R=e.totalSamplesDuration,w=e.mimeType,I=e.googDecodingNormal,A=e.fecPacketsReceived,O=e.availableIncomingBitrate,k=e.availableOutgoingBitrate,N=e.bytesSent,D=e.nominated,P=e.id,M=e.writable,x=e.jitter,U=e.candidateType,L=e.ip,j=e.networkType,V=e.port,B=e.protocol,F=e.audioOutputLevel,z=e.requestsReceived,H=e.responsesReceived,G=e.requestsSent,W=e.consentRequestsSent,Y=e.responsesSent,K=e.ssrc,q=e.kind;"inbound-rtp"===i?(r.packetsLost=c,r.packetsReceived=u,d.packets=u,r.bytesReceived=l,d.bytes=l,n.jitterBufferDelay=f/p*1e3,d.jitter_buffer_delay=n.jitterBufferDelay,r.totalSamplesReceived=m,n.concealedSamples=g,r.concealedSamples=g,d.concealed_samples=g,n.concealmentEvents=y,d.fec_packets_received=A,d.jitter=1e3*x,d.ssrc=K,d.total_samples_received=m,m>0&&h._firstFrameStarted["".concat(o,"-audio")]&&(eD.rtcFirstFrame({event_type:_N.RECV_END,media_type:s?vN.SCREEN_AUDIO:vN.AUDIO,type:mN.SUBSCRIBE,event_session_id:+o,result:!0,start:t.audioStart,stream_user_id:a}),delete h._firstFrameStarted["".concat(o,"-audio")])):"codec"===i?(n.recordSampleRate=_,n.numChannels=v,d.codec=w):"candidate-pair"===i?(d.ice_available_incoming_bitrate=O,d.ice_available_outgoing_bitrate=k,d.ice_bytes_received=l,d.ice_bytes_sent=N,d.ice_nominated=+D,d.ice_pair_id=P,d.ice_pair_rtt=E,d.rtt=1e3*E,d.ice_pair_state=b,d.ice_pair_writable=M,d.recv_ping_requests=z,d.recv_ping_responses=H,d.sent_ping_requests_before_first_response=G,d.sent_ping_requests_total=G+W,d.sent_ping_responses=Y):"candidate-pair"===i&&"succeeded"===b?(n.rtt=1e3*E,n.total_rtt=1e3*S,d.total_rtt_ms=n.total_rtt):"track"===i&&"audio"===q?(d.audio_level=-10*Math.log10(Math.pow(T,2)),d.volume=255*T,d.total_audio_energy=C,d.total_samples_duration=R):"ssrc"===i?(d.decoding_normal=I,d.recv_level=F):"local-candidate"===i?(d.local_candidate_type=U,d.local_ip=L,d.local_network_type=j,d.local_port=V,d.protocol=B):"remote-candidate"===i&&(d.remote_candidate_type=U,d.remote_ip=L,d.remote_port=V)})),(l=t.audio).timestamp?(n.audioLossRate=(r.packetsLost-l.packetsLost)/(r.packetsReceived-l.packetsReceived+(r.packetsLost-l.packetsLost)),n.audioLossRate=Number.isNaN(n.audioLossRate)?0:n.audioLossRate,d.packets_lost=Math.round(r.packetsLost-l.packetsLost),d.fraction_lost=n.audioLossRate,d.packets_lost_rate=n.audioLossRate,n.statsInterval=r.timestamp-l.timestamp,n.receivedKBitrate=(r.bytesReceived-l.bytesReceived||0)/n.statsInterval,d.bitrate=Math.round(8e3*n.receivedKBitrate),d.bandwidth=Math.round(d.bitrate/1024),d.interval_concealed_samples=r.concealedSamples-l.concealedSamples,d.interval_samples_received=r.totalSamplesReceived-l.totalSamplesReceived,n.receivedSampleRate=1e3*d.interval_samples_received/n.statsInterval,t.audio=r,this.dataChannelRTT[t.remoteStream.userId]&&(f=this.dataChannelRTT[t.remoteStream.userId]/2,n.e2eDelay=f+n.jitterBufferDelay,d.web_e2e_delay=n.e2eDelay),eD.rtcMediaStatistics(d,{}),[2,n]):(t.audio=r,[2,n])}}))}))},e.prototype.getRemoteVideoStats=function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d,l,f,h=this;return S(this,(function(p){switch(p.label){case 0:return n={},r={timestamp:Date.now()},i=t.remoteStream,o=i.streamId,a=i.userId,s=i.isScreen,c=i.hasVideo,u={media_type:"video",direction:"down",stream_id:o,stream_user_id:a,vid:t.remoteStream.videoMid},e&&this._handler?(t.videoStart||(t.videoStart=fD(),eD.rtcFirstFrame({event_type:_N.BEGIN_RECV,media_type:s?vN.SCREEN_VIDEO:vN.VIDEO,type:mN.SUBSCRIBE,start:t.videoStart,event_session_id:+o,stream_user_id:a}),c?this._firstFrameStarted["".concat(o,"-video")]=t.videoStart:eD.rtcFirstFrame({event_type:_N.RECV_END,media_type:s?vN.SCREEN_VIDEO:vN.VIDEO,type:mN.PUBLISH,start:t.videoStart,event_session_id:+o,result:!1,reason:gN.DISABLE,stream_user_id:a})),[4,this._handler.getStats(e)]):[2,n];case 1:return p.sent().forEach((function(e){var i=e.type,c=e.frameHeight,d=e.frameWidth,l=e.packetsLost,f=e.packetsReceived,p=e.bytesReceived,_=e.framesDecoded,v=e.roundTripTime,m=e.jitterBufferDelay,g=e.jitterBufferEmittedCount,y=e.mimeType,S=e.firCount,b=e.availableIncomingBitrate,E=e.availableOutgoingBitrate,T=e.bytesSent,C=e.nominated,R=e.id,w=e.currentRoundTripTime,I=e.state,A=e.writable,O=e.candidateType,k=e.ip,N=e.networkType,D=e.port,P=e.nackCount,M=e.pliCount,x=e.protocol,U=e.requestsReceived,L=e.responsesReceived,j=e.requestsSent,V=e.consentRequestsSent,B=e.responsesSent,F=e.ssrc,z=e.totalRoundTripTime,H=e.jitter,G=e.framesReceived,W=e.keyFramesDecoded,Y=e.totalDecodeTime,K=e.decoderImplementation,q=e.lastPacketReceivedTimestamp;"inbound-rtp"===i?(n.width=d,u.frame_size_width=d,n.height=c,u.frame_size_height=c,r.packetsLost=l,u.packets_lost=l,r.packetsReceived=f,u.packets=f,r.bytesReceived=p,u.bytes=p,r.framesDecoded=_,r.jitterBufferDelay=m/g*1e3,u.jitter_buffer_delay=r.jitterBufferDelay,u.fir_count=S,u.nack_count=P,u.pli_count=M,u.ssrc=F,u.jitter=H,u.frames_received=G,u.frames_decoded=_,u.key_frames_decoded=W,u.total_decode_time=Y,u.decoder_implementation=K,u.last_packet_received_timestamp=q,_>0&&h._firstFrameStarted["".concat(o,"-video")]&&(eD.rtcFirstFrame({event_type:_N.RECV_END,media_type:s?vN.SCREEN_VIDEO:vN.VIDEO,type:mN.SUBSCRIBE,event_session_id:+o,result:!0,start:t.videoStart,stream_user_id:a}),delete h._firstFrameStarted["".concat(o,"-video")])):"remote-outbound-rtp"===i?(n.rtt=1e3*v,u.rtt=v,u.total_rtt_ms=z):"codec"===i?u.codec=y:"candidate-pair"===i?(u.ice_available_incoming_bitrate=b,u.ice_available_outgoing_bitrate=E,u.ice_bytes_received=p,u.ice_bytes_sent=T,u.ice_nominated=+C,u.ice_pair_id=R,u.ice_pair_rtt=w,u.rtt=1e3*w,u.ice_pair_state=I,u.ice_pair_writable=A,u.recv_ping_requests=U,u.recv_ping_responses=L,u.sent_ping_requests_before_first_response=j,u.sent_ping_requests_total=j+V,u.sent_ping_responses=B):"local-candidate"===i?(u.local_candidate_type=O,u.local_ip=k,u.local_network_type=N,u.local_port=D,u.protocol=x):"remote-candidate"===i&&(u.remote_candidate_type=O,u.remote_ip=k,u.remote_port=D)})),d=t.video,l=t.remoteStream,d.timestamp?(n.videoLossRate=(r.packetsLost-d.packetsLost)/(r.packetsReceived-d.packetsReceived+(r.packetsLost-d.packetsLost)),n.videoLossRate=Number.isNaN(n.videoLossRate)?0:n.videoLossRate,u.fraction_lost=n.videoLossRate,u.packets_lost_rate=n.videoLossRate,n.statsInterval=r.timestamp-d.timestamp,n.receivedKBitrate=(r.bytesReceived-d.bytesReceived||0)/n.statsInterval,u.bitrate=Math.round(8e3*n.receivedKBitrate),u.bandwidth=Math.round(u.bitrate/1024),n.decoderOutputFrameRate=1e3*(r.framesDecoded-d.framesDecoded)/n.statsInterval,u.frame_rate_decoded=Math.round(n.decoderOutputFrameRate),u.frame_rate_received=u.frame_rate_decoded,t.video=r,this.dataChannelRTT[t.remoteStream.userId]&&(f=this.dataChannelRTT[t.remoteStream.userId]/2,n.e2eDelay=f+r.jitterBufferDelay,u.web_e2e_delay=n.e2eDelay,u.total_rtt_ms=this.dataChannelRTT[t.remoteStream.userId]),this.processStall(l,u),eD.rtcMediaStatistics(u,{}),[2,n]):(t.video=r,[2,n])}}))}))},e.prototype.processStall=function(e,t){var n=0,r=0,i=0;e.recordedVideoFrames.forEach((function(e){e.isStall&&(n+=e.stallCount,r+=e.stallDuration),i=e.playTime})),e.recordedVideoFrames.length||(r=2e3),e.recordedVideoFrames=[],t.stall_count=n,t.stall_duration=r,t.play_time=i},e.prototype.setLocalStreamStatsEvtInterval=function(e){var t,n,r=this,i={audio:{},video:{},localStream:e,firstframeReported:!1},o=null===(t=e.audioTrack)||void 0===t?void 0:t.getTrack(),a=null===(n=e.videoTrack)||void 0===n?void 0:n.getTrack();this.getAudioStats(o,i),this.getVideoStats(a,i),this.delLocalStreamStatsEvtInterval(e);this._localStreamStasEvtIntervals[e.streamId]=setInterval((function(){return y(r,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:return[4,y(r,void 0,void 0,(function(){var t,n,r,o,a,s;return S(this,(function(c){switch(c.label){case 0:return t=null===(a=e.audioTrack)||void 0===a?void 0:a.getTrack(),n=null===(s=e.videoTrack)||void 0===s?void 0:s.getTrack(),[4,this.getAudioStats(t,i)];case 1:return r=c.sent(),[4,this.getVideoStats(n,i)];case 2:return(o=c.sent()).isScreen=e.isScreen,[2,{audioStats:r,videoStats:o,isScreen:e.isScreen}]}}))}))];case 1:return t=n.sent(),this._client.emit("onLocalStreamStats",t),[2]}}))}))}),2e3)},e.prototype.delLocalStreamStatsEvtInterval=function(e){clearInterval(this._localStreamStasEvtIntervals[e.streamId])},e.prototype.unpublish=function(e){this.delLocalStreamStatsEvtInterval(e),this._firstFrameStarted["".concat(e.streamId,"-audio")]&&(eD.rtcFirstFrame({event_type:_N.SENT_END,media_type:e.isScreen?vN.SCREEN_AUDIO:vN.AUDIO,type:mN.PUBLISH,start:this._firstFrameStarted["".concat(e.streamId,"-audio")],event_session_id:+e.streamId,result:!1,reason:gN.UNPUBLISH}),delete this._firstFrameStarted["".concat(e.streamId,"-audio")]),this._firstFrameStarted["".concat(e.streamId,"-video")]&&(eD.rtcFirstFrame({event_type:_N.SENT_END,media_type:e.isScreen?vN.SCREEN_VIDEO:vN.VIDEO,type:mN.PUBLISH,start:this._firstFrameStarted["".concat(e.streamId,"-video")],event_session_id:+e.streamId,result:!1,reason:gN.UNPUBLISH}),delete this._firstFrameStarted["".concat(e.streamId,"-video")])},e.prototype.getAudioStats=function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d=this;return S(this,(function(l){switch(l.label){case 0:return n={},r={timestamp:Date.now()},i=t.localStream,o=i.streamId,a=i.audioMid,s=i.isScreen,c={media_type:"audio",direction:"up",stream_id:o,vid:a},e&&this._handler?(t.audioStart||(t.audioStart=fD(),eD.rtcFirstFrame({event_type:_N.BEGIN_SEND,media_type:s?vN.SCREEN_AUDIO:vN.AUDIO,type:mN.PUBLISH,start:t.audioStart,event_session_id:+o}),this._firstFrameStarted["".concat(o,"-audio")]=t.audioStart),[4,this._handler.getStats(e)]):[2,n];case 1:return l.sent().forEach((function(e){var i=e.type,a=e.packetsSent,u=e.packetsLost,l=e.bytesSent,f=e.clockRate,h=e.roundTripTime,p=e.channels,_=e.audioLevel,v=e.googRtt,m=e.mimeType,g=e.availableIncomingBitrate,y=e.availableOutgoingBitrate,S=e.bytesReceived,b=e.nominated,E=e.id,T=e.currentRoundTripTime,C=e.state,R=e.writable,w=e.requestsReceived,I=e.responsesReceived,A=e.requestsSent,O=e.consentRequestsSent,k=e.responsesSent,N=e.jitter,D=e.candidateType,P=e.ip,M=e.networkType,x=e.port,U=e.protocol,L=e.nackCount,j=e.retransmittedBytesSent,V=e.retransmittedPacketsSent,B=e.roundTripTimeMeasurements,F=e.audioInputLevel,z=e.ssrc,H=e.totalAudioEnergy,G=e.totalSamplesDuration,W=e.mediaType;"outbound-rtp"===i?(r.packetsSent=a,a>0&&d._firstFrameStarted["".concat(o,"-audio")]&&(eD.rtcFirstFrame({event_type:_N.SENT_END,media_type:s?vN.SCREEN_AUDIO:vN.AUDIO,type:mN.PUBLISH,event_session_id:+o,result:!0,start:t.audioStart}),delete d._firstFrameStarted["".concat(o,"-audio")]),r.bytesSent=l,c.bytes=l,c.packets=a,c.nack_count=L,c.ssrc=z,c.retransmitted_bytes_sent=j,c.retransmitted_packets_sent=V):"remote-inbound-rtp"===i?(r.packetsLost=u,c.packets_lost=u,c.jitter=1e3*N,n.rtt=1e3*h,c.rtt=n.rtt,c.round_trip_time_measurements=B):"codec"===i?(n.recordSampleRate=f,n.numChannels=p,c.codec=m):"media-source"===i?(c.audio_level=-10*Math.log10(Math.pow(_,2)),c.volume=255*_,c.total_audio_energy=H,c.total_samples_duration=G):"ssrc"===i&&"audio"===W?(c.audio_network_elapse=v,c.send_level=F):"candidate-pair"===i?(c.ice_available_incoming_bitrate=g,c.ice_available_outgoing_bitrate=y,c.ice_bytes_received=S,c.ice_bytes_sent=l,c.ice_nominated=+b,c.ice_pair_id=E,c.ice_pair_rtt=T,c.ice_pair_state=C,c.ice_pair_writable=R,c.recv_ping_requests=w,c.recv_ping_responses=I,c.sent_ping_requests_before_first_response=A,c.sent_ping_requests_total=A+O,c.sent_ping_responses=k):"local-candidate"===i?(c.local_candidate_type=D,c.local_ip=P,c.local_network_type=M,c.local_port=x,c.protocol=U):"remote-candidate"===i&&(c.remote_candidate_type=D,c.remote_ip=P,c.remote_port=x)})),(u=t.audio).timestamp?(n.audioLossRate=(r.packetsLost-u.packetsLost)/(r.packetsSent-u.packetsSent),n.audioLossRate=Number.isNaN(n.audioLossRate)?0:n.audioLossRate,c.fraction_lost=n.audioLossRate,n.statsInterval=r.timestamp-u.timestamp,n.sentKBitrate=(r.bytesSent-u.bytesSent||0)/n.statsInterval,c.bitrate=Math.round(8e3*n.sentKBitrate),c.bandwidth=Math.round(c.bitrate/1024),t.audio=r,eD.rtcMediaStatistics(c,{}),[2,n]):(t.audio=r,[2,n])}}))}))},e.prototype.getVideoStats=function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o,a,s,c,u,d=this;return S(this,(function(l){switch(l.label){case 0:return n={},r={timestamp:Date.now()},i=t.localStream,o=i.streamId,a=i.videoMid,s=i.isScreen,c={media_type:"video",direction:"up",stream_id:o,vid:a},e&&this._handler?(t.videoStart||(t.videoStart=fD(),eD.rtcFirstFrame({event_type:_N.BEGIN_SEND,media_type:s?vN.SCREEN_VIDEO:vN.VIDEO,type:mN.PUBLISH,start:t.videoStart,event_session_id:+o}),this._firstFrameStarted["".concat(o,"-video")]=t.videoStart),[4,this._handler.getStats(e)]):[2,n];case 1:return l.sent().forEach((function(e){var i=e.type,a=e.framesEncoded,u=e.packetsLost,l=e.bytesSent,f=e.framesSent,h=e.roundTripTime,p=e.mimeType,_=e.totalSamplesReceived,v=e.frameWidth,m=e.frameHeight,g=e.clockRate,y=e.packetsSent,S=e.googActualEncBitrate,b=e.googAvailableReceiveBandwidth,E=e.googAvailableSendBandwidth,T=e.googAvgEncodeMs,C=e.googBucketDelay,R=e.googEncodeUsagePercent,w=e.googFrameRateInput,I=e.availableIncomingBitrate,A=e.availableOutgoingBitrate,O=e.bytesReceived,k=e.nominated,N=e.id,D=e.currentRoundTripTime,P=e.state,M=e.writable,x=e.candidateType,U=e.ip,L=e.networkType,j=e.port,V=e.nackCount,B=e.pliCount,F=e.protocol,z=e.qpSum,H=e.requestsReceived,G=e.responsesReceived,W=e.googRetransmitBitrate,Y=e.requestsSent,K=e.consentRequestsSent,q=e.responsesSent,J=e.ssrc,X=e.googTargetEncBitrate,Z=e.googTransmitBitrate,$=e.googRtt,Q=e.retransmittedPacketsSent,ee=e.encoderImplementation,te=e.jitter;"outbound-rtp"===i?(r.framesEncoded=a,r.bytesSent=l,c.bytes=l,r.framesSent=f,f>0&&d._firstFrameStarted["".concat(o,"-video")]&&(t.firstframeVideoReported=!0,eD.rtcFirstFrame({event_type:_N.SENT_END,media_type:s?vN.SCREEN_VIDEO:vN.VIDEO,type:mN.PUBLISH,start:t.videoStart,event_session_id:+o,result:!0}),delete d._firstFrameStarted["".concat(o,"-video")]),n.encodedFrameWidth=v,n.encodedFrameHeight=m,c.frame_size_height=m,c.frame_size_width=v,r.packetsSent=y,c.packets=y,c.nack_count=V,c.pli_count=B,c.qp_sum=z,c.ssrc=J,c.retransmitted_packets_sent=Q,c.encoder_implementation=ee):"remote-inbound-rtp"===i?(r.packetsLost=u,n.rtt=1e3*h,c.rtt=n.rtt,c.jitter=te,c.packets_lost=u):"codec"===i?(n.codecType=p,c.codec=p,n.inputFrameRate=g):"track"===i?r.totalSamplesReceived=_:"candidate-pair"===i?(c.ice_available_incoming_bitrate=I,c.ice_available_outgoing_bitrate=A,c.ice_bytes_received=O,c.ice_bytes_sent=l,c.ice_nominated=+k,c.ice_pair_id=N,c.ice_pair_rtt=D,c.ice_pair_state=P,c.ice_pair_writable=M,c.recv_ping_requests=H,c.recv_ping_responses=G,c.sent_ping_requests_before_first_response=Y,c.sent_ping_requests_total=Y+K,c.sent_ping_responses=q):"local-candidate"===i?(c.local_candidate_type=x,c.local_ip=U,c.local_network_type=L,c.local_port=j,c.protocol=F):"remote-candidate"===i?(c.remote_candidate_type=x,c.remote_ip=U,c.remote_port=j):"VideoBwe"===i?(c.actual_enc_bitrate=S,c.available_receive_bandwidth=b,c.available_send_bandwidth=E,c.bucket_delay=C,c.retransmit_bitrate=W,c.target_enc_bitrate=X,c.transmit_bitrate=Z):"ssrc"===i&&(c.video_network_elapse=$,c.avg_encode_ms=T,c.encode_usage_percent=R,c.frame_rate_input=w)})),(u=t.video).timestamp?(n.statsInterval=r.timestamp-u.timestamp,n.encodedFrameCount=r.framesSent-u.framesSent,n.sentKBitrate=(r.bytesSent-u.bytesSent||0)/n.statsInterval,c.bitrate=Math.round(8e3*n.sentKBitrate),c.bandwidth=Math.round(c.bitrate/1024),n.encoderOutputFrameRate=1e3*(r.framesEncoded-u.framesEncoded)/n.statsInterval,c.frame_rate_encoded=Math.round(n.encoderOutputFrameRate),n.sentFrameRate=1e3*(r.framesSent-u.framesSent)/n.statsInterval,c.frame_rate_sent=Math.round(n.sentFrameRate),n.videoLossRate=(r.packetsLost-u.packetsLost)/(r.packetsSent-u.packetsSent),n.videoLossRate=Number.isNaN(n.videoLossRate)?0:n.videoLossRate,c.fraction_lost=n.videoLossRate,t.video=r,eD.rtcMediaStatistics(c,{}),[2,n]):(t.video=r,[2,n])}}))}))},e.prototype.getDataChannelRTT=function(e){var t,n=this,r=fD();null===(t=this._client.sendUserMessage(e,"__web__rtc__rtt__"))||void 0===t||t.then((function(t){if("timeout"!==t){var i=Date.now()-r;i>0&&i<2e3&&(n.dataChannelRTT[e]=i)}else clearTimeout(n._rttTimer[e])})).catch((function(){clearTimeout(n._rttTimer[e])})),this._rttTimer[e]=setTimeout((function(){n.getDataChannelRTT(e)}),2e3)},e.prototype.destroy=function(){var e=this;Object.keys(this._localStreamStasEvtIntervals).forEach((function(t){clearInterval(e._localStreamStasEvtIntervals[t])})),Object.keys(this._remoteStreamStasEvtIntervals).forEach((function(t){clearInterval(e._remoteStreamStasEvtIntervals[t])})),Object.keys(this._rttTimer).forEach((function(t){clearTimeout(e._rttTimer[t])})),this._rttTimer={},this.dataChannelRTT={}},e}(),IP=new Yy("MediaServerClient",2);!function(e){e.DISCONNECTED="disconnected",e.DISCONNECTING="disconnecting",e.CONNECTED="connected",e.CONNECTING="connecting"}(RP||(RP={}));var AP=function(e){function t(){var t=e.call(this)||this;return t._pubSubLock=new EP("pubSubLock"),t._joinLeaveLock=new EP("joinLeaveLock"),t._state=RP.DISCONNECTED,t._roomAttributes={multiChatMode:!1,bigRoomMode:!1},t}return n(t,e),t.prototype._addHandlerEvents=function(){var e,t=this;null===(e=this._handler)||void 0===e||e.once("disconnect",(function(){IP.print("emit ABNORMAL_DISCONNECTION ice"),t.safeEmit(XN.ABNORMAL_DISCONNECTION)}))},t.prototype._addSignalEventHandler=function(){var e,t=this;[JN.ON_ADD_STREAM,JN.ON_REMOVE_STREAM,JN.USER_CONNECTION,JN.USER_DISCONNECTION,JN.ON_UPDATE_STREAM_ATTRIBUTES,JN.ON_UPDATE_ROOM_ATTRIBUTES,JN.ON_PUSH_TRACK,JN.ON_REMOVE_TRACK,JN.NODE_CHANGE,JN.ON_CUSTOM_MESSAGE,JN.USER_MESSAGE_RECEIVED,JN.USER_BINARY_MESSAGE_RECEIVED,JN.POST_PROCESSING_MESSAGE].forEach((function(e){var n;null===(n=t._dataChannelSignal)||void 0===n||n.on(e,(function(n){t.safeEmit(e,n)}))})),null===(e=this._dataChannelSignal)||void 0===e||e.once("close",(function(){IP.print("emit ABNORMAL_DISCONNECTION datachannel"),t.safeEmit(XN.ABNORMAL_DISCONNECTION)}))},t.prototype._removeSignalEventHandler=function(){var e,t;null===(e=this._dataChannelSignal)||void 0===e||e.removeAllListeners(),null===(t=this._handler)||void 0===t||t.removeAllListeners()},Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._state},set:function(e){this._state!==e&&(this.safeEmit(XN.ON_CONNECTION_STATE_CHANGE,{prev:this._state,next:e}),this._state=e)},enumerable:!1,configurable:!0}),t.prototype.join=function(e,t,n,r){var i,o;return void 0===t&&(t={}),void 0===n&&(n=!1),y(this,void 0,void 0,(function(){var a,s,c,u,d,l,f,h,p=this;return S(this,(function(_){switch(_.label){case 0:return IP.print("join","Invoke MediaServerClient.join"),this._appId=e.appId,this._token=e.token,this._roomId=e.roomId,this._clientId=e.userInfo.userId,this._businessId=e.userInfo.businessId,this._userInfo=e.userInfo,this._sessionId=AS(),$N.setStats({rtc_session_id:this._sessionId}),this.connectionState=RP.CONNECTING,this._handler&&(this._removeSignalEventHandler(),this._handler.destroy()),t.node?(a=t.node,[3,3]):[3,1];case 1:return Promise.resolve().then((function(){return p.emit("onGetIceConfigHook")})),this._iceConfigRequestManager=new OD,[4,null===(i=this._iceConfigRequestManager)||void 0===i?void 0:i.getAccessNode(this._appId,this._roomId,this._clientId,ID.getDeviceId(),null==t?void 0:t.reason,this._prevICENode)];case 2:if(!(a=_.sent()))throw new Ny(my,"get ICE config failed");IP.print("join","get ICE config success"),_.label=3;case 3:this._prevICENode=a,this._handler=new lP,this._addHandlerEvents(),this._statsReport=new wP(this,this._handler),Promise.resolve().then((function(){return p.emit("onEstablishConnectionHook")})),_.label=4;case 4:return _.trys.push([4,6,,7]),[4,this._handler.connect(a)];case 5:return s=_.sent(),IP.print("join","establish peerConnection success"),[3,7];case 6:throw c=_.sent(),this.connectionState=RP.DISCONNECTED,new Ny(gy,"establish dataChannel failed",c);case 7:return this._dataChannelSignal=new yD({appId:this._appId,roomId:this._roomId,clientId:this._clientId,dataChannel:s}),this._addSignalEventHandler(),[4,null===(o=this._handler)||void 0===o?void 0:o.getDefaultSdp()];case 8:u=_.sent(),d={Authorization:hD.token2auth(this._appId,this._roomId,this._clientId,this._token),sessionId:this._sessionId,timestamp:Date.now(),controlMessage:r,userAttributes:{extra_info:this._userInfo.extraInfo,role:this._userInfo.role},params:{deviceType:"web",userAgent:window.navigator.userAgent,sdkVersion:Db.VERSION,deviceId:ID.getDeviceId(),appId:this._appId,roomId:this._roomId,userId:this._clientId,businessId:this._businessId},options:{enableUnBundleMode:!0},sdpInfo:u},Promise.resolve().then((function(){return p.emit("onSendingJoinMessageHook")})),_.label=9;case 9:return _.trys.push([9,11,,12]),l=n?"reconnected":"joinRoom",[4,this._dataChannelSignal.sendSignaling(l,d)];case 10:return f=_.sent(),IP.print("join","send join message success"),this._authorization=d.Authorization,this.connectionState=RP.CONNECTED,[2,f];case 11:if(h=_.sent(),this.connectionState=RP.DISCONNECTED,705===(null==h?void 0:h.code))throw new Ny(Jg,(null==h?void 0:h.message)||"Invalid token");if(200!==(null==h?void 0:h.code))throw new Ny(Xg,(null==h?void 0:h.message)||"Join room failed");return[3,12];case 12:return[2]}}))}))},t.prototype.publish=function(e){var t,n,r,i,o,a,s,c;return y(this,void 0,void 0,(function(){var u,d,l,f,h,p,_,v,g,y,b;return S(this,(function(S){switch(S.label){case 0:IP.print("publish","Invoke MediaServerClient.publish"),u=e.videoTrack,d=e.audioTrack,l=fD(),f="",h="",p="",S.label=1;case 1:return S.trys.push([1,5,,8]),[4,null===(t=this._handler)||void 0===t?void 0:t.publish(e)];case 2:if(!(_=S.sent()))throw new Ny(Ty,"add transceiver failed");return f=_.audioMid,h=_.videoMid,p=_.sdp,e.pubAttributes={localaudio:!!d,localvideo:!!u,videostream:!!(null===(n=null==u?void 0:u.getTrack())||void 0===n?void 0:n.enabled),audiostream:!!(null===(r=null==d?void 0:d.getTrack())||void 0===r?void 0:r.enabled)},v={attributes:m({videoDescriptions:_.videoDescriptions},e.pubAttributes),audio:!0,video:!0,screen:e.isScreen,audioMid:f,videoMid:h,sdpInfo:{msid:e.stream.id,type:_.type,sdp:_.partialSdp,semantics:_.semantics}},[4,null===(i=this._dataChannelSignal)||void 0===i?void 0:i.sendSignaling("publish",v)];case 3:if(200!==(null==(g=S.sent())?void 0:g.code))throw new Ny(Ry,(null==g?void 0:g.message)||"publish failed");return y=null===(o=null==g?void 0:g.relayMessage)||void 0===o?void 0:o.sdp,[4,null===(a=this._handler)||void 0===a?void 0:a.setAnswerSdp(_.sdp,y,void 0,e,aN.UP)];case 4:return S.sent(),e.streamId=g.streamId,e.videoMid=h,e.audioMid=f,eD.rtcPublishStat(uN.SUCCESS,dN.W_0,l,lN.UNKNOWN),null===(s=this._statsReport)||void 0===s||s.setLocalStreamStatsEvtInterval(e),[2];case 5:return(b=S.sent())instanceof Error&&eD.rtcPublishStat(uN.FAIL,dN.W_0,l,b.message),f&&h?[4,null===(c=this._handler)||void 0===c?void 0:c.rollback(p,[f,h])]:[3,7];case 6:S.sent(),S.label=7;case 7:throw b;case 8:return[2]}}))}))},t.prototype.updatePubTrack=function(e){var t,n,r,i,o;return y(this,void 0,void 0,(function(){var a,s,c,u,d,l,f,h,p,_,v,m,g,y,T,C;return S(this,(function(S){switch(S.label){case 0:IP.print("updatePubTrack","Invoke MediaServerClient.updatePubTrack"),a=e.videoTrack,s=e.audioTrack,a&&(null===(t=e.videoTransceiver)||void 0===t||t.sender.replaceTrack(a.getTrack())),s&&(c=s.mixType,u=s.mixedAudioTrack,d=null==s?void 0:s.getTrack(),u&&c!==oP.PLAYOUT&&(d=u),null===(n=e.audioTransceiver)||void 0===n||n.sender.replaceTrack(d)),l={localaudio:!!s,localvideo:!!a,videostream:!!(null===(r=null==a?void 0:a.getTrack())||void 0===r?void 0:r.enabled),audiostream:!!(null===(i=null==s?void 0:s.getTrack())||void 0===i?void 0:i.enabled)},f={};try{for(h=b(Object.entries(l)),p=h.next();!p.done;p=h.next())_=E(p.value,2),v=_[0],(m=_[1])!==Reflect.get(e.pubAttributes,v)&&Reflect.set(f,v,m)}catch(e){T={error:e}}finally{try{p&&!p.done&&(C=h.return)&&C.call(h)}finally{if(T)throw T.error}}return Object.keys(f).length?(e.pubAttributes=l,g={roomId:this._roomId,streamId:e.streamId,attributes:f},[4,null===(o=this._dataChannelSignal)||void 0===o?void 0:o.sendSignaling("updateStreamAttributes",g)]):[2];case 1:if(200!==(null==(y=S.sent())?void 0:y.code))throw new Ny(Cy,(null==y?void 0:y.message)||"update track failed");return[2]}}))}))},t.prototype.unpublish=function(e){var t,n,r;return y(this,void 0,void 0,(function(){var i,o;return S(this,(function(a){switch(a.label){case 0:return IP.print("unpublish","Invoke MediaServerClient.unpublish"),i={roomId:this._roomId,initStreamId:e.initStreamId,streamId:e.streamId},[4,null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("unpublish",i)];case 1:if(200!==(null==(o=a.sent())?void 0:o.code))throw new Ny(wy,(null==o?void 0:o.message)||"unpublish failed");return[4,null===(n=this._handler)||void 0===n?void 0:n.closeMLine([e.videoMid||"",e.audioMid||""])];case 2:return a.sent(),null===(r=this._statsReport)||void 0===r||r.unpublish(e),[2]}}))}))},t.prototype.subscribe=function(e,t,n){var r,i,o,a,s,c,u;return y(this,void 0,void 0,(function(){var d,l,f,p,_,v,m,g,y,b,E,T,C,R,w,I,A,O;return S(this,(function(S){switch(S.label){case 0:IP.print("subscribe","Invoke MediaServerClient.subscribe"),d=!1,l=!1,t===h.VIDEO_ONLY?d=!0:t===h.AUDIO_ONLY?l=!0:t===h.AUDIO_AND_VIDEO?(d=!0,l=!0):t===h.NONE&&(d=!1,l=!1),this._multiChatMode()&&(l=!0),f=fD(),p=e.audioMid,_=e.videoMid,S.label=1;case 1:return S.trys.push([1,9,,12]),p&&_?[4,null===(r=this._handler)||void 0===r?void 0:r.subscribe(e,{audioMid:p,videoMid:_})]:[3,3];case 2:return v=S.sent(),[3,5];case 3:return[4,null===(i=this._handler)||void 0===i?void 0:i.subscribe(e)];case 4:if(!(v=S.sent()))throw new Ny(Ty,"add transceiver failed");p=v.audioMid,_=v.videoMid,S.label=5;case 5:return m={audio:!this._multiChatMode(),video:!0,data:!0,screen:e.isScreen,browser:"chrome-stable",videoMid:_,audioMid:p,sdpInfo:{sdp:null==v?void 0:v.partialSdp,semantics:null==v?void 0:v.semantics,type:null==v?void 0:v.type},streamUserId:e.userId,streamId:e.streamId,config:{enableMediaType:{audio:l,video:d},qualityLayer:{spatialLayer:n.videoIndex,temporalLayer:n.videoIndex}}},[4,null===(o=this._dataChannelSignal)||void 0===o?void 0:o.sendSignaling("subscribe",m)];case 6:if(200!==(null==(g=S.sent())?void 0:g.code))throw new Ny(Iy,(null==g?void 0:g.message)||"subscribe failed");return this._multiChatMode()||(e.subAudio=l),e.subVideo=d,e.subConfig=n,y=[],b=!this._multiChatMode(),!e._workaround_1_&&y.push(new Promise((function(t,n){var r=setTimeout((function(){return n(new Ny(by,"wait video timeout"))}),2e3);e.on("ontrack",(function n(i){"video"===i.mediaType&&(IP.print("remoteStream ".concat(e.userId," received video track")),e.off("ontrack",n),clearTimeout(r),t(0))}))}))),b&&y.push(new Promise((function(t,n){var r=setTimeout((function(){return n(new Ny(by,"wait audio timeout"))}),2e3);e.on("ontrack",(function n(i){"audio"===i.mediaType&&(IP.print("remoteStream ".concat(e.userId," received audio track")),e.off("ontrack",n),clearTimeout(r),t(0))}))}))),null===(a=this._handler)||void 0===a||a.on("ontrack",(function(t){e.ontrack(t)})),E=null==g?void 0:g.relayMessage,T=E.audioMid,C=E.videoMid,R=E.sequenceId,w=E.sdp,(O={})[p]=T,O[_]=C,I=O,e.videoMid=C,e.audioMid=T,e.sequenceId=R,e.subMediaType=t,[4,null===(s=this._handler)||void 0===s?void 0:s.setAnswerSdp(null==v?void 0:v.sdp,w,I,e,aN.DOWN)];case 7:return S.sent(),[4,Promise.all(y)];case 8:return S.sent(),e.subAudio=l,e.subVideo=d,eD.rtcSubscribeStat(fN.SUCCESS,f,hN.UNKNOWN,e.userId),null===(c=this._statsReport)||void 0===c||c.setRemoteStreamStatsEvtInterval(e),[2];case 9:return(A=S.sent())instanceof Error&&eD.rtcSubscribeStat(fN.FAIL,f,A.message,e.userId),p&&_?[4,null===(u=this._handler)||void 0===u?void 0:u.rollback(null==v?void 0:v.sdp,[p,_])]:[3,11];case 10:S.sent(),S.label=11;case 11:throw A;case 12:return[2]}}))}))},t.prototype.controlMessage=function(e){var t;return y(this,void 0,void 0,(function(){return S(this,(function(n){switch(n.label){case 0:return IP.print("controlMessage","Invoke MediaServerClient.controlMessage"),[4,null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("controlMessage",m(m({},e),{roomId:this._roomId}))];case 1:return n.sent(),[2]}}))}))},t.prototype.updateUserAttributes=function(e){var t;return y(this,void 0,void 0,(function(){return S(this,(function(n){switch(n.label){case 0:return IP.print("updateUserAttributes","Invoke MediaServerClient.updateUserAttributes"),[4,null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("updateUserAttributes",{roomId:this._roomId,sessionId:this._sessionId,attributes:e})];case 1:return n.sent(),[2]}}))}))},t.prototype.updateSubTrack=function(e,t,n){var r;return y(this,void 0,void 0,(function(){var i,o,a,s;return S(this,(function(c){switch(c.label){case 0:return IP.print("updateSubTrack","Invoke MediaServerClient.updateSubTrack"),i=!1,o=!1,t===h.VIDEO_ONLY?(i=!0,o=!1):t===h.AUDIO_ONLY?(o=!0,i=!1):t===h.AUDIO_AND_VIDEO?(i=!0,o=!0):t===h.NONE&&(i=!1,o=!1),this._multiChatMode()&&(o=!0),a={roomId:this._roomId,streamList:[e.streamId],config:{enableMediaType:{video:i,audio:o},qualityLayer:{spatialLayer:n.videoIndex,temporalLayer:n.videoIndex}}},[4,null===(r=this._dataChannelSignal)||void 0===r?void 0:r.sendSignaling("updateSubscribe",a)];case 1:if(200!==(null==(s=c.sent())?void 0:s.code))throw new Ny(Cy,(null==s?void 0:s.message)||"update track failed");return e.subAudio=o,e.subVideo=i,e.subMediaType=t,e.subConfig=n,[2,e]}}))}))},t.prototype.subscribe4pushTrack=function(e,t){var n,r,i,o,a;return y(this,void 0,void 0,(function(){var s,c,u,d,l,f,h,p,_,v,m,g;return S(this,(function(y){switch(y.label){case 0:if(IP.print("subscribe4pushTrack","Invoke MediaServerClient.subscribe4pushTrack"),s=null==t?void 0:t.message,c=s.audioMid,u=s.videoMid,d=s.sequenceId,l=s.sdp,e.subAudio=!0,d<e.sequenceId)return[2];f=e.audioMid,h=e.videoMid,y.label=1;case 1:return y.trys.push([1,8,,11]),f&&h?[4,null===(n=this._handler)||void 0===n?void 0:n.subscribe(e,{audioMid:f,videoMid:h})]:[3,3];case 2:return p=y.sent(),[3,5];case 3:return[4,null===(r=this._handler)||void 0===r?void 0:r.subscribe(e)];case 4:if(!(p=y.sent()))throw new Ny(Ty,"add transceiver failed");f=p.audioMid,h=p.videoMid,y.label=5;case 5:return(g={})[f]=c,g[h]=u,_=g,IP.print("onpushtrack midmap",e.streamId,_),e.audioMid=c,e.videoMid=u,e.sequenceId=d,v=[],e.audioTrack||v.push(new Promise((function(t,n){var r=setTimeout((function(){return n(new Ny(by,"wait audio timeout"))}),2e3);e.on("ontrack",(function n(i){"audio"===i.mediaType&&(IP.print("remoteStream ".concat(e.userId," received audio track")),e.off("ontrack",n),clearTimeout(r),t(0))}))}))),null===(i=this._handler)||void 0===i||i.on("ontrack",(function(t){e.ontrack(t)})),[4,null===(o=this._handler)||void 0===o?void 0:o.setAnswerSdp(null==p?void 0:p.sdp,l,_,e,aN.DOWN)];case 6:return y.sent(),[4,Promise.all(v)];case 7:return y.sent(),[2];case 8:return m=y.sent(),p?[4,null===(a=this._handler)||void 0===a?void 0:a.rollback(null==p?void 0:p.sdp,[f,h])]:[3,10];case 9:y.sent(),y.label=10;case 10:throw m;case 11:return[2]}}))}))},t.prototype.unsubscribe4removeTrack=function(e){var t;return y(this,void 0,void 0,(function(){return S(this,(function(n){switch(n.label){case 0:return IP.print("unsubscribe4removeTrack","Invoke MediaServerClient.unsubscribe4removeTrack"),e.subAudio=!1,e.subVideo?[2]:[4,null===(t=this._handler)||void 0===t?void 0:t.closeMLine([e.videoMid||"",e.audioMid||""])];case 1:return n.sent(),IP.print("clean unsubscribe4removeTrack"),e.clean(),[2]}}))}))},t.prototype.unsubscribe=function(e){var t,n,r;return y(this,void 0,void 0,(function(){var i,o;return S(this,(function(a){switch(a.label){case 0:return IP.print("unsubscribe","Invoke MediaServerClient.unsubscribe"),i={roomId:this._roomId,streamId:e.streamId},IP.print("unsubscribe",e.audioMid,e.videoMid,e.subAudio),[4,null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("unsubscribe",i)];case 1:if(200!==(null==(o=a.sent())?void 0:o.code))throw new Ny(Ay,(null==o?void 0:o.message)||"unsubscribe failed");return e.subVideo=!1,this._multiChatMode()||(e.subAudio=!1),e.subAudio?[3,3]:[4,null===(n=this._handler)||void 0===n?void 0:n.closeMLine([e.videoMid||"",e.audioMid||""])];case 2:a.sent(),IP.print("unsubscribe","clean unsub"),e.clean(),a.label=3;case 3:return null===(r=this._statsReport)||void 0===r||r.unsubscribe(e),[2]}}))}))},t.prototype.handleRemoveStream=function(e){var t;return y(this,void 0,void 0,(function(){return S(this,(function(n){switch(n.label){case 0:return IP.print("handleRemoveStream","Invoke MediaServerClient.handleRemoveStream"),e.subVideo=!1,e._workaround_1_||(e.subAudio=!1),e.subAudio?[3,2]:[4,null===(t=this._handler)||void 0===t?void 0:t.closeMLine([e.videoMid||"",e.audioMid||""])];case 1:n.sent(),IP.print("handleRemoveStream","clean remove stream"),e.clean(),n.label=2;case 2:return[2]}}))}))},t.prototype.leave=function(){var e;return y(this,void 0,void 0,(function(){var t,n;return S(this,(function(r){switch(r.label){case 0:return IP.print("leave","Invoke MediaServerClient.leave"),(this.connectionState=RP.CONNECTED)?(this.connectionState=RP.DISCONNECTING,t={Authorization:this._authorization,roomId:this._roomId,sessionId:this._sessionId},[4,this._joinLeaveLock.lock()]):[3,7];case 1:n=r.sent(),r.label=2;case 2:return r.trys.push([2,4,5,6]),[4,null===(e=this._dataChannelSignal)||void 0===e?void 0:e.sendSignaling("leaveRoom",t)];case 3:case 4:return r.sent(),[3,6];case 5:return n(),[7];case 6:return[3,8];case 7:return[2,Promise.resolve()];case 8:return[2]}}))}))},t.prototype.destroy=function(){var e,t,n,r;IP.print("destroy","Invoke MediaServerClient.destroy"),this._token=void 0,this._appId=void 0,this._roomId=void 0,this._clientId=void 0,this._authorization=void 0,this._sessionId=void 0,null===(e=this._handler)||void 0===e||e.destroy(),null===(t=this._dataChannelSignal)||void 0===t||t.destroy(),null===(n=this._iceConfigRequestManager)||void 0===n||n.abort(),this._handler=void 0,this._dataChannelSignal=void 0,this._iceConfigRequestManager=void 0,this._removeSignalEventHandler(),null===(r=this._statsReport)||void 0===r||r.destroy(),this.connectionState=RP.DISCONNECTED,this.emit("INTERRUPT")},t.prototype.sendUserMessage=function(e,t){var n;return null===(n=this._dataChannelSignal)||void 0===n?void 0:n.sendP2PMessage(e,t)},t.prototype.sendRoomMessage=function(e){var t;return null===(t=this._dataChannelSignal)||void 0===t?void 0:t.sendSignaling("customMessage",e)},t.prototype._multiChatMode=function(){var e;return null===(e=this._roomAttributes)||void 0===e?void 0:e.multiChatMode},Object.defineProperty(t.prototype,"handler",{get:function(){return this._handler},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roomAttributes",{set:function(e){this._roomAttributes=e},enumerable:!1,configurable:!0}),g([NP],t.prototype,"join",null),g([kP,OP],t.prototype,"publish",null),g([kP,OP],t.prototype,"updatePubTrack",null),g([kP,OP],t.prototype,"unpublish",null),g([kP,OP],t.prototype,"subscribe",null),g([OP],t.prototype,"controlMessage",null),g([OP],t.prototype,"updateUserAttributes",null),g([kP,OP],t.prototype,"updateSubTrack",null),g([kP,OP],t.prototype,"subscribe4pushTrack",null),g([kP,OP],t.prototype,"unsubscribe4removeTrack",null),g([kP,OP],t.prototype,"unsubscribe",null),g([kP,OP],t.prototype,"handleRemoveStream",null),t}(qy);function OP(e,t,n){var r=n.value;return n.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return y(this,void 0,void 0,(function(){return S(this,(function(n){switch(n.label){case 0:return this._handler&&this._state===RP.CONNECTED?[4,r.apply(this,e)]:[3,2];case 1:return n.sent(),[3,3];case 2:throw new Ny(iy,"error in ".concat(t,": try again after joined"));case 3:return[2]}}))}))},n}function kP(e,t,n){var r=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return y(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:return[4,this._pubSubLock.lock()];case 1:t=n.sent(),n.label=2;case 2:return n.trys.push([2,,4,5]),[4,r.apply(this,e)];case 3:return[2,n.sent()];case 4:return t(),[7];case 5:return[2]}}))}))},n}function NP(e,t,n){var r=n.value;return n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return y(this,void 0,void 0,(function(){var t,n=this;return S(this,(function(i){return t=!1,[2,new Promise((function(i,o){return y(n,void 0,void 0,(function(){var n,a;return S(this,(function(s){switch(s.label){case 0:this.on("INTERRUPT",(function(){t=!0,o(new Ny(Oy,"operation not finish when leave"))})),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,r.apply(this,e)];case 2:return n=s.sent(),i(n),[3,4];case 3:return a=s.sent(),t||o(a),[3,4];case 4:return[2]}}))}))}))]}))}))},n}var DP=q,PP=xu,MP=Is.exports.getWeakData,xP=rn,UP=fe,LP=uu,jP=au,VP=st,BP=Qn.set,FP=Qn.getterFor,zP=zl.find,HP=zl.findIndex,GP=DP([].splice),WP=0,YP=function(e){return e.frozen||(e.frozen=new KP)},KP=function(){this.entries=[]},qP=function(e,t){return zP(e.entries,(function(e){return e[0]===t}))};KP.prototype={get:function(e){var t=qP(this,e);if(t)return t[1]},has:function(e){return!!qP(this,e)},set:function(e,t){var n=qP(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=HP(this.entries,(function(t){return t[0]===e}));return~t&&GP(this.entries,t,1),!!~t}};var JP,XP={getConstructor:function(e,t,n,r){var i=e((function(e,i){LP(e,o),BP(e,{type:t,id:WP++,frozen:void 0}),null!=i&&jP(i,e[r],{that:e,AS_ENTRIES:n})})),o=i.prototype,a=FP(t),s=function(e,t,n){var r=a(e),i=MP(xP(t),!0);return!0===i?YP(r).set(t,n):i[r.id]=n,e};return PP(o,{delete:function(e){var t=a(this);if(!UP(e))return!1;var n=MP(e);return!0===n?YP(t).delete(e):n&&VP(n,t.id)&&delete n[t.id]},has:function(e){var t=a(this);if(!UP(e))return!1;var n=MP(e);return!0===n?YP(t).has(e):n&&VP(n,t.id)}}),PP(o,n?{get:function(e){var t=a(this);if(UP(e)){var n=MP(e);return!0===n?YP(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return s(this,e,t)}}:{add:function(e){return s(this,e,!0)}}),i}},ZP=A,$P=q,QP=xu,eM=Is.exports,tM=Pu,nM=XP,rM=fe,iM=Xs,oM=Qn.enforce,aM=kn,sM=!ZP.ActiveXObject&&"ActiveXObject"in ZP,cM=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},uM=tM("WeakMap",cM,nM);if(aM&&sM){JP=nM.getConstructor(cM,"WeakMap",!0),eM.enable();var dM=uM.prototype,lM=$P(dM.delete),fM=$P(dM.has),hM=$P(dM.get),pM=$P(dM.set);QP(dM,{delete:function(e){if(rM(e)&&!iM(e)){var t=oM(this);return t.frozen||(t.frozen=new JP),lM(this,e)||t.frozen.delete(e)}return lM(this,e)},has:function(e){if(rM(e)&&!iM(e)){var t=oM(this);return t.frozen||(t.frozen=new JP),fM(this,e)||t.frozen.has(e)}return fM(this,e)},get:function(e){if(rM(e)&&!iM(e)){var t=oM(this);return t.frozen||(t.frozen=new JP),fM(this,e)?hM(this,e):t.frozen.get(e)}return hM(this,e)},set:function(e,t){if(rM(e)&&!iM(e)){var n=oM(this);n.frozen||(n.frozen=new JP),fM(this,e)?pM(this,e,t):n.frozen.set(e,t)}else pM(this,e,t);return this}})}var _M=rn,vM=Yc,mM=vc,gM=x,yM=it,SM=function(e,t,n,r){try{return r?t(_M(n)[0],n[1]):t(n)}catch(t){vM(e,"throw",t)}},bM=Sc,EM=wl,TM=Ar,CM=Ds,RM=zc,wM=xc,IM=A.Array,AM=function(e){var t=yM(e),n=EM(this),r=arguments.length,i=r>1?arguments[1]:void 0,o=void 0!==i;o&&(i=mM(i,r>2?arguments[2]:void 0));var a,s,c,u,d,l,f=wM(t),h=0;if(!f||this==IM&&bM(f))for(a=TM(t),s=n?new this(a):IM(a);a>h;h++)l=o?i(t[h],h):t[h],CM(s,h,l);else for(d=(u=RM(t,f)).next,s=n?new this:[];!(c=gM(d,u)).done;h++)l=o?SM(u,i,[c.value,h],!0):c.value,CM(s,h,l);return s.length=h,s},OM=AM;vi({target:"Array",stat:!0,forced:!pu((function(e){Array.from(e)}))},{from:OM});var kM=new(function(e){function t(){var t=e.call(this)||this;return t._hasVideoPermission=!1,t._hasAudioPermission=!1,t.inited=!1,t.deviceMap=new Map,t._handleDeviceChange=t._handleDeviceChange.bind(t),t.refreshDevices(),t}return n(t,e),t.prototype.refreshDevices=function(){return y(this,void 0,void 0,(function(){var e=this;return S(this,(function(t){switch(t.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:return t.sent().filter((function(e){return""!==e.deviceId})).forEach((function(t){e.deviceMap.set(t.deviceId,{device:t,updateAt:Date.now(),state:"active"})})),this.inited||this.initListener(),this.inited=!0,[2]}}))}))},t.prototype.initListener=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){return navigator.mediaDevices.addEventListener("devicechange",this._handleDeviceChange),[2]}))}))},t.prototype._handleDeviceChange=function(){return y(this,void 0,void 0,(function(){var e,t,n=this;return S(this,(function(r){switch(r.label){case 0:return e=Array.from(this.deviceMap.values()).filter((function(e){return"active"===e.state})),[4,navigator.mediaDevices.enumerateDevices()];case 1:return(t=r.sent()).forEach((function(e){var t=n.deviceMap.get(e.deviceId);n.deviceMap.set(e.deviceId,{device:e,updateAt:Date.now(),state:"active"}),t&&"inactive"!==t.state||n.emit("onMediaDeviceStateChanged",{device:e,updateAt:Date.now(),state:"active"})})),e.forEach((function(e){t.find((function(t){return t.deviceId===e.device.deviceId}))||(e.state="inactive",n.emit("onMediaDeviceStateChanged",e))})),[2]}}))}))},t.prototype.getVideoPermission=function(){return y(this,void 0,void 0,(function(){var e=this;return S(this,(function(t){switch(t.label){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Ny(vy,"GetUserMedia not supported");if(this.hasVideoPermission)return[2,!0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((function(t){t&&(t.getTracks().forEach((function(e){return e.stop()})),e.hasVideoPermission=!0,e.inited||e.refreshDevices())}))];case 2:case 3:return t.sent(),[3,4];case 4:return[2,this.hasVideoPermission]}}))}))},t.prototype.getAudioPermission=function(){return y(this,void 0,void 0,(function(){var e=this;return S(this,(function(t){switch(t.label){case 0:if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Ny(vy,"GetUserMedia not supported");if(this.hasAudioPermission)return[2,!0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){t&&(t.getTracks().forEach((function(e){return e.stop()})),e.hasAudioPermission=!0,e.inited||e.refreshDevices())}))];case 2:case 3:return t.sent(),[3,4];case 4:return[2,this.hasAudioPermission]}}))}))},t.prototype.getDevices=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.getAudioPermission()];case 1:case 2:return e.sent(),[3,3];case 3:return e.trys.push([3,5,,6]),[4,this.getVideoPermission()];case 4:case 5:return e.sent(),[3,6];case 6:return[4,this.refreshDevices()];case 7:return e.sent(),[2,Array.from(this.deviceMap.values()).filter((function(e){return"active"===e.state})).map((function(e){return e.device}))]}}))}))},t.prototype.getMicrophones=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return[4,this.refreshDevices()];case 1:return e.sent(),[2,Array.from(this.deviceMap.values()).filter((function(e){return"active"===e.state})).map((function(e){return e.device})).filter((function(e){return"audioinput"===e.kind}))]}}))}))},t.prototype.getCameras=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){return this.refreshDevices(),[2,Array.from(this.deviceMap.values()).filter((function(e){return"active"===e.state})).map((function(e){return e.device})).filter((function(e){return"videoinput"===e.kind}))]}))}))},t.prototype.getAudioPlayback=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){return this.refreshDevices(),[2,Array.from(this.deviceMap.values()).filter((function(e){return"active"===e.state})).map((function(e){return e.device})).filter((function(e){return"audiooutput"===e.kind}))]}))}))},t.prototype.getDeviceById=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,this.getDevices()];case 1:return[2,t.sent().find((function(t){return t.deviceId===e}))]}}))}))},Object.defineProperty(t.prototype,"hasAudioPermission",{get:function(){return this._hasAudioPermission},set:function(e){if(!e)throw new Ny(_y,"Cannot revoke audio permission");this.refreshDevices(),this._hasAudioPermission=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVideoPermission",{get:function(){return this._hasVideoPermission},set:function(e){if(!e)throw new Ny(_y,"Cannot revoke Video permission");this.inited||this.refreshDevices(),this._hasVideoPermission=!0},enumerable:!1,configurable:!0}),t}(qy)),NM=window.AudioContext||window.webkitAudioContext,DM=function(){function e(){}return e.prototype.getAudioContextInstance=function(){return this._audioContextInstance||(this._audioContextInstance=new NM),this._audioContextInstance},e}(),PM=function(){function e(e){var t=MM.getAudioContextInstance();this._track=e;var n=new MediaStream;n.addTrack(e);var r=t.createMediaStreamSource(n),i=t.createAnalyser();r.connect(i),this._analyserNode=i}return e.prototype.getAudioLevel=function(){var e=new Uint8Array(2048);this._analyserNode.getByteTimeDomainData(e);var t=0;return e.forEach((function(e){return t=Math.max(t,Math.abs(e-128))})),t/128*255},e}(),MM=new DM,xM=new Yy("VERTC",0),UM=new WeakMap,LM=function(e){function t(t,n){var r=e.call(this)||this;return r._trackId=t,r.mediaType=n,r}return n(t,e),t.prototype.getId=function(){return this._trackId},t}(qy),jM=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i._mediaTrack=t,i._initListeners(),i}return n(t,e),t.prototype.getTrack=function(){return this._mediaTrack},t.prototype.close=function(){var e;return null===(e=this._mediaTrack)||void 0===e?void 0:e.stop()},t.prototype._initListeners=function(){var e=this;this._mediaTrack instanceof MediaStreamTrack&&this._mediaTrack.addEventListener("ended",(function(){eD.rtcError("track-ended mediaType: ".concat(e._mediaTrack.kind),-1001),e.emit("track-ended",e)}))},t}(LM),VM=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i._mediaTrack=t,i}return n(t,e),t.prototype.getTrack=function(){return this._mediaTrack},t}(LM),BM=function(e){function t(t,n){return e.call(this,t,n,"video")||this}return n(t,e),t.prototype.updateVideoCaptureConfig=function(){var e;return y(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return this.videoCaptureConfig?(xM.print("updateVideoEncoderConfig","update localVideoTrack: ",this.videoCaptureConfig),[4,null===(e=this.getTrack())||void 0===e?void 0:e.applyConstraints(this.videoCaptureConfig)]):[2];case 1:return t.sent(),[2]}}))}))},t}(jM),FM=function(e){function t(t,n){var r=e.call(this,t,n,"audio")||this;return r.mixType=oP.PLAYOUT_AND_PUBLISH,r}return n(t,e),t.prototype.getAudioLevel=function(){return this._audioLevelFetcher||(this._audioLevelFetcher=new PM(this.getTrack())),this._audioLevelFetcher.getAudioLevel()},t.prototype.updateAudioCaptureConfig=function(){var e;return y(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return this.audioCaptureConfig?(xM.print("updateAudioCaptureConfig","update localAudioTrack: ",this.audioCaptureConfig),[4,null===(e=this.getTrack())||void 0===e?void 0:e.applyConstraints(this.audioCaptureConfig)]):[2];case 1:return t.sent(),[2]}}))}))},t}(jM),zM=function(e){function t(t,n){return e.call(this,t,n,"video")||this}return n(t,e),t}(VM),HM=function(e){function t(t,n){return e.call(this,t,n,"audio")||this}return n(t,e),t.prototype.getAudioLevel=function(){return this._audioLevelFetcher||(this._audioLevelFetcher=new PM(this.getTrack())),this._audioLevelFetcher.getAudioLevel()},t}(VM),GM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(FM),WM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(BM),YM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(BM),KM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(FM),qM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(BM),JM=function(e){function t(t,n){return e.call(this,t,n)||this}return n(t,e),t}(FM);function XM(e){var t;return y(this,void 0,void 0,(function(){var n,r,i,o,a,s;return S(this,(function(c){switch(c.label){case 0:r=(null===(t=null==e?void 0:e.deviceId)||void 0===t?void 0:t.exact)||"default",c.label=1;case 1:return c.trys.push([1,3,,4]),xM.print("createCameraVideoTrack","constraints:",e),eD.rtcVideoCaptureEvent({event_type:IN.START,media_device_id:r}),i=fD(),[4,navigator.mediaDevices.getUserMedia({video:e})];case 2:return n=c.sent(),eD.rtcVideoCaptureEvent({event_type:IN.START_CAPTURE_RESULT,media_device_id:r,reason:ON.SUCCESS,elapse:fD()-i}),kM.hasVideoPermission=!0,[3,4];case 3:throw o=c.sent(),eD.rtcVideoCaptureEvent({event_type:IN.RUNNING_FAILED,media_device_id:r,error_code:o.code,reason:JSON.stringify(o)}),new Ny(uy,"throw error from getUserMedia",o);case 4:return a=n.getVideoTracks()[0],UM.set(a,n),(s=new WM(a,lD())).videoCaptureConfig=e,[2,s]}}))}))}function ZM(e){var t;return y(this,void 0,void 0,(function(){var n,r,i,o,a;return S(this,(function(s){switch(s.label){case 0:xM.print("createCameraVideoTrack","constraints:",e),r=(null===(t=null==e?void 0:e.deviceId)||void 0===t?void 0:t.exact)||"default",s.label=1;case 1:return s.trys.push([1,3,,4]),eD.rtcVideoCaptureEvent({event_type:IN.START,media_device_id:r}),i=fD(),[4,navigator.mediaDevices.getUserMedia({audio:e})];case 2:return n=s.sent(),eD.rtcVideoCaptureEvent({event_type:IN.START_CAPTURE_RESULT,media_device_id:r,reason:ON.SUCCESS,elapse:fD()-i}),kM.hasAudioPermission=!0,[3,4];case 3:throw o=s.sent(),eD.rtcVideoCaptureEvent({event_type:IN.RUNNING_FAILED,media_device_id:r,error_code:o.code,reason:JSON.stringify(o)}),new Ny(dy,"throw error from getUserMedia",o);case 4:return a=n.getAudioTracks()[0],UM.set(a,n),[2,new GM(a,lD())]}}))}))}function $M(e){return void 0===e&&(e=!1),y(this,void 0,void 0,(function(){var t,n,r;return S(this,(function(i){switch(i.label){case 0:xM.print("createScreenStream","withAudio:",e),i.label=1;case 1:return i.trys.push([1,3,,4]),eD.rtcVideoCaptureEvent({event_type:IN.START,media_device_id:"screen"}),n=fD(),[4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:e})];case 2:return t=i.sent(),eD.rtcVideoCaptureEvent({event_type:IN.START_CAPTURE_RESULT,media_device_id:"screen",reason:ON.SUCCESS,elapse:fD()-n}),[3,4];case 3:throw r=i.sent(),eD.rtcVideoCaptureEvent({event_type:IN.RUNNING_FAILED,media_device_id:"screen",error_code:r.code,reason:JSON.stringify(r)}),new Ny(ly,"throw error from getDisplayMedia",r);case 4:return[2,t]}}))}))}var QM,ex,tx=new Yy("Stream",0),nx=function(){function e(){this.isScreen=!1,this.stream=new MediaStream,this.pubAttributes={localaudio:!1,localvideo:!1,videostream:!1,audiostream:!1}}return Object.defineProperty(e.prototype,"hasPublished",{get:function(){return this.videoTransceiver&&this.audioTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmptyStream",{get:function(){return!this.audioTrack&&!this.videoTrack},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initStreamId",{get:function(){return this.stream.id},enumerable:!1,configurable:!0}),e.prototype.clean=function(){this.audioMid=void 0,this.videoMid=void 0,this.videoTransceiver=void 0,this.audioTransceiver=void 0},e.prototype.updateVideoBitrate=function(e){var t,n=null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.maxKbps;if("number"==typeof n&&n&&this.videoTransceiver){var r=this.videoTransceiver.sender,i=r.getParameters();i.encodings&&0!==i.encodings.length||(i.encodings=[{}]),i.encodings[0].maxBitrate=1e3*n,tx.print("updateVideoBitrate","set sendEncodings: ",i),r.setParameters(i)}},e.prototype.switchTrackEnableState=function(e,t){var n;"audio"===e?n=this.audioTrack:"video"===e&&(n=this.videoTrack);var r=null==n?void 0:n.getTrack();return!(!r||(null==r?void 0:r.enabled)===t)&&(r.enabled=t,!0)},e}(),rx=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.userId=t,o.isScreen=r,o.streamId=n,o.hasAudio=i.localaudio,o.hasVideo=i.localvideo,o._attributes=i,o.subVideo=!1,o.subAudio=!1,o._sequenceId=0,o.subMediaType=h.NONE,o.recordedVideoFrames=[],o.subConfig={videoIndex:0},o}return n(t,e),Object.defineProperty(t.prototype,"hasSubscribed",{get:function(){return this.videoTrack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sequenceId",{get:function(){return this._sequenceId||-1},set:function(e){"number"==typeof e&&(this._sequenceId=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this._attributes},set:function(e){this.hasVideo=e.localvideo,this.hasAudio=e.localaudio,this._attributes=e},enumerable:!1,configurable:!0}),t.prototype.ontrack=function(e){var t,n,r;if((null===(n=null===(t=e.streams)||void 0===t?void 0:t[0])||void 0===n?void 0:n.id)===this.streamId){var i=e.track;"video"===(null==i?void 0:i.kind)?this._setVideoTrack(i):"audio"===(null===(r=e.track)||void 0===r?void 0:r.kind)&&this._setAudioTrack(i),this._setStream(e.streams[0])}this.safeEmit("ontrack",e)},t.prototype.clean=function(){tx.print("clean","exec stream.clean ".concat(this.streamId," ").concat(this.userId)),this.subAudio=!1,this.subVideo=!1,this.audioMid=void 0,this.videoMid=void 0,this.sequenceId=0,this.videoTrack=void 0,this.audioTrack=void 0,this.stream=void 0,this.videoTransceiver=void 0,this.audioTransceiver=void 0,this.recordedVideoFrames=[]},t.prototype._setStream=function(e){var t=this;this.stream=e,e.onaddtrack=function(e){"video"===e.track.kind?t._setVideoTrack(e.track):"audio"===e.track.kind&&t._setAudioTrack(e.track)}},t.prototype._setAudioTrack=function(e){var t,n;(null===(n=null===(t=this.audioTrack)||void 0===t?void 0:t.getTrack())||void 0===n?void 0:n.id)!==(null==e?void 0:e.id)&&(this.audioTrack=new HM(e,lD()),this.emit("ontrack",this.audioTrack))},t.prototype._setVideoTrack=function(e){var t,n;(null===(n=null===(t=this.videoTrack)||void 0===t?void 0:t.getTrack())||void 0===n?void 0:n.id)!==(null==e?void 0:e.id)&&(this.videoTrack=new zM(e,lD()),this.emit("ontrack",this.videoTrack))},t}(qy);!function(e){e[e.CHANNEL_PROFILE_COMMUNICATION=0]="CHANNEL_PROFILE_COMMUNICATION",e[e.CHANNEL_PROFILE_LIVE_BROADCASTING=1]="CHANNEL_PROFILE_LIVE_BROADCASTING"}(QM||(QM={})),function(e){e.RESUBSCRIBE="resubscribe",e.STREAM_FAILED="stream_failed",e.SUBSCRIBE_PUSH_TRACK="subscribe_push_track",e.REMOVE_PUSH_TRACK="remove_push_track",e.VIDEO_FIRST_FRAME="video_first_frame",e.ON_USER_MUTE_AUDIO="on_user_mute_audio",e.ON_USER_MUTE_VIDEO="on_user_mute_video",e.ON_USER_START_AUDIO_CAPTURE="on_user_start_audio_capture",e.ON_USER_STOP_AUDIO_CAPTURE="on_user_stop_audio_capture",e.ON_USER_START_VIDEO_CAPTURE="on_user_start_video_capture",e.ON_USER_STOP_VIDEO_CAPTURE="on_user_stop_video_capture"}(ex||(ex={}));var ix=new Yy("Room",1),ox=function(e){function t(t){var n=e.call(this)||this;return n._remoteUsers=new Map,n._remoteStreams=new Map,n._roomConfig=t,n._mediaServerClient=new AP,n._addHandlerEventHandler(),n._isReconnecting=!1,n}return n(t,e),Object.defineProperty(t.prototype,"hasScreenPublished",{get:function(){var e;return null===(e=this._localScreenStream)||void 0===e?void 0:e.hasPublished},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPublished",{get:function(){var e;return null===(e=this._localStream)||void 0===e?void 0:e.hasPublished},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connectionState",{get:function(){return this._mediaServerClient.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteUsers",{get:function(){return this._remoteUsers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStreams",{get:function(){return this._remoteStreams},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScreenStream",{get:function(){return this._localScreenStream},enumerable:!1,configurable:!0}),t.prototype._addHandlerEventHandler=function(){var e,t,n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m=this;null===(e=this._mediaServerClient)||void 0===e||e.on(JN.ON_ADD_STREAM,this._onAddStream.bind(this)),null===(t=this._mediaServerClient)||void 0===t||t.on(JN.ON_REMOVE_STREAM,this._onRemoveStream.bind(this)),null===(n=this._mediaServerClient)||void 0===n||n.on(JN.USER_CONNECTION,this._onUserConnection.bind(this)),null===(r=this._mediaServerClient)||void 0===r||r.on(JN.USER_DISCONNECTION,this._onUserDisconnection.bind(this)),null===(i=this._mediaServerClient)||void 0===i||i.on(JN.ON_UPDATE_ROOM_ATTRIBUTES,this._onUpdateRoomAttributes.bind(this)),null===(o=this._mediaServerClient)||void 0===o||o.on(JN.ON_UPDATE_STREAM_ATTRIBUTES,this._onUpdateStreamAttributes.bind(this)),null===(a=this._mediaServerClient)||void 0===a||a.on(JN.ON_PUSH_TRACK,this._onPushTrack.bind(this)),null===(s=this._mediaServerClient)||void 0===s||s.on(JN.ON_REMOVE_TRACK,this._onRemoveTrack.bind(this)),null===(c=this._mediaServerClient)||void 0===c||c.on(JN.NODE_CHANGE,this._nodeChange.bind(this)),null===(u=this._mediaServerClient)||void 0===u||u.on(JN.ON_CUSTOM_MESSAGE,this._onCustomMessage.bind(this)),null===(d=this._mediaServerClient)||void 0===d||d.on(JN.USER_MESSAGE_RECEIVED,this._onUserMessageReceived.bind(this)),null===(l=this._mediaServerClient)||void 0===l||l.on(JN.USER_BINARY_MESSAGE_RECEIVED,this._onUserBinaryMessageReceived.bind(this)),null===(f=this._mediaServerClient)||void 0===f||f.on(JN.POST_PROCESSING_MESSAGE,this._onPostProcessingMessage.bind(this)),null===(h=this._mediaServerClient)||void 0===h||h.on(XN.ON_CONNECTION_STATE_CHANGE,this._onConnectionStateChange.bind(this)),null===(p=this._mediaServerClient)||void 0===p||p.on(XN.ABNORMAL_DISCONNECTION,this._handleAbnormalDisconnection.bind(this)),null===(_=this._mediaServerClient)||void 0===_||_.on("onRemoteStreamStats",(function(e){m.emit("onRemoteStreamStats",e)})),null===(v=this._mediaServerClient)||void 0===v||v.on("onLocalStreamStats",(function(e){m.emit("onLocalStreamStats",e)}))},t.prototype._removeHandlerEventHandler=function(){var e;null===(e=this._mediaServerClient)||void 0===e||e.removeAllListeners()},t.prototype.join=function(e,t,n,r,i){return y(this,void 0,void 0,(function(){var o=this;return S(this,(function(a){return $N.setStats({rtc_app_id:e,room_id:t,user_id:r.userId}),ix.print("join","Invoke join"),[2,new Promise((function(a,s){return y(o,void 0,void 0,(function(){var o;return S(this,(function(c){return this._joinResolveCallback=a,this._joinRejectCallback=s,this._controlMessage=i,this._roomInfo={appId:e,roomId:t,token:n,userInfo:r},o=fD(),eD.joinRoom(bN.BEGIN,o,!1,""),this._join((function(e){eD.joinRoom(bN.END,o,!0,e.message),a(e)}),(function(e){eD.joinRoom(bN.END,o,!1,e.message),s(e)})),[2]}))}))}))]}))}))},t.prototype._join=function(e,t,n){var r;return void 0===n&&(n=!1),y(this,void 0,void 0,(function(){var i,o,a;return S(this,(function(s){switch(s.label){case 0:i=fD(),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._mediaServerClient.join(this._roomInfo,{node:this._getAccessNode,reason:this._getAccessFeedback},n,this._controlMessage)];case 2:return o=s.sent(),this._mediaServerClient.roomAttributes=o.roomAttributes,this._joinResolveCallback=void 0,this._joinRejectCallback=void 0,this._getAccessFeedback=void 0,this._getAccessNode=void 0,"function"==typeof e&&e(null===(r=this._roomInfo)||void 0===r?void 0:r.userInfo),this._isReconnecting=!1,eD.rtcJoinRoom(0,"web","web",fD()-i),this._onJoinSucc(o),[3,4];case 3:return(a=s.sent()).code!==Oy&&"function"==typeof t?[2,t(a)]:[3,4];case 4:return[2]}}))}))},t.prototype.publishScreen=function(e,t,n){return y(this,void 0,void 0,(function(){return S(this,(function(r){switch(r.label){case 0:if(ix.print("publishScreen","Invoke publishScreen"),this._localScreenStream||(this._localScreenStream=new nx,this._localScreenStream.isScreen=!0),this._localScreenStream.videoTrack=t,this._localScreenStream.audioTrack=n,this._localScreenStream.videoEncodeConfig=e,this._localScreenStream.hasPublished)return[3,2];if(this._localScreenStream.isEmptyStream)throw new Ny(ry,"invoke startScreenVideoCapture before publishScreen");return[4,this._mediaServerClient.publish(this._localScreenStream)];case 1:return r.sent(),[3,6];case 2:return this._localScreenStream.isEmptyStream?[3,4]:[4,this.updatePubScreenTrack()];case 3:return r.sent(),[3,6];case 4:return[4,this.unpublishScreen()];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))},t.prototype.updatePubScreenTrack=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return ix.print("updatePubTrack","Invoke updatePubTrack"),this._localScreenStream?[4,this._mediaServerClient.updatePubTrack(this._localScreenStream)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.unpublishScreen=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return ix.print("unpublish","Invoke unpublishScreen"),this._localScreenStream?[4,this._mediaServerClient.unpublish(this._localScreenStream)]:[3,2];case 1:e.sent(),this._localScreenStream.clean(),this._localScreenStream=void 0,e.label=2;case 2:return[2]}}))}))},t.prototype.controlMessage=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return ix.print("controlMessage","Invoke controlMessage"),this._controlMessage=e,[4,this._mediaServerClient.controlMessage(e)];case 1:return t.sent(),"stopped"===e.action&&delete this._controlMessage,[2]}}))}))},t.prototype.updateUserAttributes=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return ix.print("updateUserAttributes","Invoke updateUserAttributes"),e.role&&this._roomInfo&&(this._roomInfo.userInfo.role=e.role),[4,this._mediaServerClient.updateUserAttributes(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.publish=function(e,t,n){return y(this,void 0,void 0,(function(){return S(this,(function(r){switch(r.label){case 0:if(ix.print("publish","Invoke publish"),this._localStream||(this._localStream=new nx),this._localStream.videoTrack=t,this._localStream.audioTrack=n,this._localStream.videoEncodeConfig=e,this._localStream.hasPublished)return[3,2];if(this._localStream.isEmptyStream)throw new Ny(ry,"invoke startVideoCapture or startAudioCapture before publish");return[4,this._mediaServerClient.publish(this._localStream)];case 1:return r.sent(),[3,6];case 2:return this._localStream.isEmptyStream?[3,4]:[4,this.updatePubTrack()];case 3:return r.sent(),[3,6];case 4:return[4,this.unpublish()];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))},t.prototype.updatePubTrack=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return ix.print("updatePubTrack","Invoke updatePubTrack"),this._localStream?[4,this._mediaServerClient.updatePubTrack(this._localStream)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.unpublish=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return ix.print("unpublish","Invoke unpublish"),this._localStream?[4,this._mediaServerClient.unpublish(this._localStream)]:[3,2];case 1:e.sent(),this._localStream.clean(),this._localStream=void 0,e.label=2;case 2:return[2]}}))}))},t.prototype.subscribe=function(e,t,n){return y(this,void 0,void 0,(function(){return S(this,(function(r){switch(r.label){case 0:return ix.print("subscribe","Invoke subscribe"),e.hasSubscribed&&!(null==e?void 0:e._workaround_1_)?[3,2]:[4,this._mediaServerClient.subscribe(e,t,n)];case 1:return r.sent(),[3,4];case 2:return[4,this.updateSubTrack(e,t,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},t.prototype.updateSubTrack=function(e,t,n){var r,i;return y(this,void 0,void 0,(function(){return S(this,(function(o){return ix.print("updateSubTrack","Invoke updateSubTrack"),e.subMediaType===t&&(null===(r=null==e?void 0:e.subConfig)||void 0===r?void 0:r.videoIndex)===(null==n?void 0:n.videoIndex)?[2,Promise.resolve(e)]:[2,null===(i=this._mediaServerClient)||void 0===i?void 0:i.updateSubTrack(e,t,n)]}))}))},t.prototype.unsubscribe=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return ix.print("unsubscribe","Invoke unsubscribe"),[4,this._mediaServerClient.unsubscribe(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.leave=function(){return y(this,void 0,void 0,(function(){var e,t;return S(this,(function(n){switch(n.label){case 0:ix.print("leave","Invoke leave"),e=fD(),n.label=1;case 1:return n.trys.push([1,3,4,5]),clearTimeout(this._reconnectTimer),[4,this._mediaServerClient.leave()];case 2:return n.sent(),eD.rtcLeaveRoom(0,"",fD()-e),[3,5];case 3:return(t=n.sent())instanceof Error&&eD.rtcLeaveRoom(-1,t.message,fD()-e),[3,5];case 4:return this.destroy(),[7];case 5:return[2]}}))}))},t.prototype.destroy=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return ix.print("destroy","Invoke destroy"),this.connectionState!==RP.CONNECTED?[3,2]:[4,this.leave()];case 1:e.sent(),e.label=2;case 2:return this._destroyAndInitMediaServerClient(),this._roomInfo=void 0,this._remoteUsers=new Map,this._remoteStreams=new Map,this._localStream=void 0,this._localScreenStream=void 0,this._removeHandlerEventHandler(),[2]}}))}))},t.prototype.updateToken=function(e){ix.print("updateToken","Invoke updateToken"),this._roomInfo&&(this._roomInfo.token=e)},t.prototype.muteLocalTrack=function(e,t){var n,r;return y(this,void 0,void 0,(function(){var i,o;return S(this,(function(a){switch(a.label){case 0:return this._localStream&&(null===(n=this._localStream)||void 0===n?void 0:n.hasPublished)?(i=t!==s.MUTE_STATE_OFF,(o=this._localStream.switchTrackEnableState(e,i))?[4,null===(r=this._mediaServerClient)||void 0===r?void 0:r.updatePubTrack(this._localStream)]:[3,2]):[2,!1];case 1:a.sent(),a.label=2;case 2:return[2,o]}}))}))},t.prototype.pauseAllSubscribedStream=function(e){return y(this,void 0,void 0,(function(){var t,n,r,i,o,a,s=this;return S(this,(function(c){t=[];try{for(n=b(this._remoteStreams.values()),r=n.next();!r.done;r=n.next())i=r.value,Array.isArray(i)&&i.forEach((function(n){if(n.hasSubscribed){var r=null;switch(e){case d.RTC_PAUSE_RESUME_CONTROL_AUDIO:n.subMediaType===h.AUDIO_ONLY?r=h.NONE:n.subMediaType===h.AUDIO_AND_VIDEO&&(r=h.VIDEO_ONLY);break;case d.RTC_PAUSE_RESUME_CONTROL_VIDEO:n.subMediaType===h.VIDEO_ONLY?r=h.NONE:n.subMediaType===h.AUDIO_AND_VIDEO&&(r=h.AUDIO_ONLY);break;case d.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO:n.subMediaType!==h.NONE&&(r=h.NONE)}if(null!==r){var i=s.updateSubTrack(n,r,n.subConfig);i&&t.push(i)}}}))}catch(e){o={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(o)throw o.error}}return[2,Promise.all(t)]}))}))},t.prototype.resumeAllSubscribedStream=function(e){return y(this,void 0,void 0,(function(){var t,n,r,i,o,a,s=this;return S(this,(function(c){t=[];try{for(n=b(this._remoteStreams.values()),r=n.next();!r.done;r=n.next())i=r.value,Array.isArray(i)&&i.forEach((function(n){if(n.hasSubscribed){var r=null;switch(e){case d.RTC_PAUSE_RESUME_CONTROL_AUDIO:n.subMediaType===h.NONE?r=h.AUDIO_ONLY:n.subMediaType===h.VIDEO_ONLY&&(r=h.AUDIO_AND_VIDEO);break;case d.RTC_PAUSE_RESUME_CONTROL_VIDEO:n.subMediaType===h.NONE?r=h.VIDEO_ONLY:n.subMediaType===h.AUDIO_ONLY&&(r=h.AUDIO_AND_VIDEO);break;case d.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO:n.subMediaType!==h.AUDIO_AND_VIDEO&&(r=h.AUDIO_AND_VIDEO)}if(null!==r){var i=s.updateSubTrack(n,r,n.subConfig);i&&t.push(i)}}}))}catch(e){o={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(o)throw o.error}}return[2,Promise.all(t)]}))}))},t.prototype.sendUserMessage=function(e,t){var n;return this._remoteUsers.has(e)?null===(n=this._mediaServerClient)||void 0===n?void 0:n.sendUserMessage(e,t):Promise.reject(new Ny(ay,"User does not exist"))},t.prototype.sendRoomMessage=function(e){var t,n;return null===(t=this._mediaServerClient)||void 0===t?void 0:t.sendRoomMessage({message:JSON.stringify(e),clientId:null===(n=this._roomInfo)||void 0===n?void 0:n.userInfo.userId,binary:!1})},t.prototype._destroyAndInitMediaServerClient=function(){console.log("_destroyAndInitMediaServerClient()"),this._mediaServerClient&&(this._mediaServerClient.destroy(),this._removeHandlerEventHandler()),this._mediaServerClient=new AP,this._addHandlerEventHandler()},t.prototype._onJoinSucc=function(e){var t,n,r,i,o,a=this,s=[],c=[],u=[],d=[];null===(o=e.clientsDetail)||void 0===o||o.forEach((function(t){if(t.clientId!==e.clientId){var n=a._remoteUsers.get(t.clientId);n?n._stillExist=!0:s.push(t)}}));try{for(var l=b(this._remoteUsers.values()),f=l.next();!f.done;f=l.next()){var h=f.value;h._stillExist?delete h._stillExist:c.push({clientId:h.userId,leaveReason:"Left during disconnection"})}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}e.streams.forEach((function(e){var t=a._findRemoteStream(e.clientId,e.streamId);t?t.stillExist=!0:d.push(e)}));try{for(var p=b(this._remoteStreams.values()),_=p.next();!_.done;_=p.next()){var v=_.value;Array.isArray(v)&&v.forEach((function(e){e.stillExist?delete e.stillExist:u.push({clientId:e.userId,streamId:e.streamId,message:qN.clientDisconnected})}))}}catch(e){r={error:e}}finally{try{_&&!_.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this._handleSendOrRecvStreamAfterReconnect(),setTimeout((function(){s.forEach((function(e){return a._onUserConnection(e)})),c.forEach((function(e){return a._onUserDisconnection(e)})),u.forEach((function(e){return a._onRemoveStream(e)})),d.forEach((function(e){return a._onAddStream(e)}))}))},t.prototype._handleSendOrRecvStreamAfterReconnect=function(){var e,t,n=this;this._localStream&&(this._localStream.clean(),this._mediaServerClient.publish(this._localStream).catch((function(e){}))),this._localScreenStream&&(this._localScreenStream.clean(),this._mediaServerClient.publish(this._localScreenStream).catch((function(e){})));try{for(var r=b(this._remoteStreams.values()),i=r.next();!i.done;i=r.next()){var o=i.value;Array.isArray(o)&&o.forEach((function(e){return y(n,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:if(!e.hasSubscribed)return[3,4];e.clean(),n.label=1;case 1:return n.trys.push([1,3,,4]),console.log("start resubscribe ".concat(e.userId," with ").concat(e.subMediaType)),[4,this._mediaServerClient.subscribe(e,e.subMediaType,e.subConfig)];case 2:return n.sent(),console.log("success resubscribe ".concat(e.userId," with ").concat(e.subMediaType)),this.safeEmit(ex.RESUBSCRIBE,{stream:e}),[3,4];case 3:return t=n.sent(),console.log("failed resubscribe ".concat(e.userId," with ").concat(e.subMediaType,", error:").concat(t)),e.clean(),[3,4];case 4:return[2]}}))}))}))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t.prototype._findRemoteStream=function(e,t){var n=this._remoteStreams.get(e);return Array.isArray(n)?n.find((function(e){return e.streamId===t})):null},t.prototype._onAddStream=function(e,t){var n;if(void 0===t&&(t=!0),e.clientId!==(null===(n=this._roomInfo)||void 0===n?void 0:n.userInfo.userId)){var r=this._findRemoteStream(e.clientId,e.streamId);if(!r){r=new rx(e.clientId,e.streamId,e.screen,e.attributes),this._initStreamListeners(r);var i=this._remoteStreams.get(e.clientId);i?i.push(r):this._remoteStreams.set(e.clientId,[r])}return t&&this.safeEmit(JN.ON_ADD_STREAM,{stream:r}),!r.isScreen&&r.hasVideo&&this.safeEmit(ex.ON_USER_START_VIDEO_CAPTURE,{userId:r.userId}),!r.isScreen&&r.hasAudio&&this.safeEmit(ex.ON_USER_START_AUDIO_CAPTURE,{userId:r.userId}),r}},t.prototype._onUserConnection=function(e){var t;if(e.clientId!==(null===(t=this._roomInfo)||void 0===t?void 0:t.userInfo.userId)){var n={userId:e.clientId,extraInfo:e.attributes.extra_info};this._remoteUsers.set(e.clientId,m(m({},n),{_stillExist:!0})),this.safeEmit(JN.USER_CONNECTION,{userInfo:n})}},t.prototype._onUserDisconnection=function(e){var t=this,n=e.clientId,r=e.leaveReason,i=this._remoteUsers.get(n);this._remoteUsers.delete(n);var o=this._remoteStreams.get(n);Array.isArray(o)&&o.length&&(o.forEach((function(e){t.safeEmit(JN.ON_REMOVE_STREAM,{stream:e,reason:"Client leave"})})),this._remoteStreams.delete(n)),this.safeEmit(JN.USER_DISCONNECTION,{userInfo:i,reason:r})},t.prototype._onRemoveStream=function(e){var t,n;if(e.clientId!==(null===(t=this._roomInfo)||void 0===t?void 0:t.userInfo.userId)){var r=this._remoteStreams.get(e.clientId);if(r){var i=r.find((function(t){return t.streamId==e.streamId}));i&&(e.message&&e.message!==qN.videoMuted?i._workaround_1_=!1:i._workaround_1_=!0),(null==i?void 0:i._workaround_1_)||(r=r.filter((function(t){return t.streamId!==e.streamId})),this._remoteStreams.set(e.clientId,r)),i&&(null===(n=this._mediaServerClient)||void 0===n||n.handleRemoveStream(i),this.safeEmit(JN.ON_REMOVE_STREAM,{stream:i,reason:e.message}))}}},t.prototype._onUpdateRoomAttributes=function(e){e.roomAttributes&&(this._mediaServerClient.roomAttributes=e.roomAttributes)},t.prototype._onUpdateStreamAttributes=function(e){var t=e.clientId,n=e.streamId,r=e.attributes,i=this._findRemoteStream(t,n);if(i){var o=i.attributes,a=m(m({},o),r);i.attributes=a,a.localaudio!==o.localaudio&&(a.localaudio?this.safeEmit(ex.ON_USER_START_AUDIO_CAPTURE,{userId:t}):this.safeEmit(ex.ON_USER_STOP_AUDIO_CAPTURE,{userId:t})),a.localvideo!==o.localvideo&&(a.localvideo?this.safeEmit(ex.ON_USER_START_VIDEO_CAPTURE,{userId:t}):this.safeEmit(ex.ON_USER_STOP_VIDEO_CAPTURE,{userId:t})),a.audiostream!==o.audiostream&&(a.audiostream?this.safeEmit(ex.ON_USER_MUTE_AUDIO,{userInfo:{userId:t},muteState:s.MUTE_STATE_ON}):this.safeEmit(ex.ON_USER_MUTE_AUDIO,{userInfo:{userId:t},muteState:s.MUTE_STATE_OFF})),a.videostream!==o.videostream&&(a.videostream?this.safeEmit(ex.ON_USER_MUTE_VIDEO,{userInfo:{userId:t},muteState:s.MUTE_STATE_ON}):this.safeEmit(ex.ON_USER_MUTE_VIDEO,{userInfo:{userId:t},muteState:s.MUTE_STATE_OFF}))}},t.prototype._onPushTrack=function(e){var t=this,n=e.clientId,r=e.streamId,i=this._findRemoteStream(n,r);i||(i=this._onAddStream(e,!1)),this._mediaServerClient.subscribe4pushTrack(i,e).then((function(){return t.safeEmit(ex.SUBSCRIBE_PUSH_TRACK,{stream:i})})).catch((function(e){console.log("subscribe push track failed: ".concat(e))}))},t.prototype._onRemoveTrack=function(e){var t,n=this,r=e.clientId,i=e.streamId,o=this._findRemoteStream(r,i);if(o){if(!o.subVideo){var a=null===(t=this._remoteStreams.get(r))||void 0===t?void 0:t.filter((function(e){return e.streamId!==i}));this._remoteStreams.set(r,a||[])}this._mediaServerClient.unsubscribe4removeTrack(o).then((function(){return n.safeEmit(ex.REMOVE_PUSH_TRACK,{stream:o})})).catch((function(e){console.log("remove push track failed: ".concat(e))}))}},t.prototype._nodeChange=function(e){var t=e.nodes,n=e.reason;this._destroyAndInitMediaServerClient(),Array.isArray(t)&&t.length?this._getAccessNode=t[0]:this._getAccessFeedback=n,eD.rtcNodeChange(0,JSON.stringify(e),JSON.stringify(n)),this._joinResolveCallback&&this._joinRejectCallback?this._join(this._joinResolveCallback,this._joinRejectCallback):this._reconnect()},t.prototype._reconnect=function(){var e=this;this._isReconnecting=!0,eD.rtcReconnect(1002,qk.PEERCONNECTION_RECONNECTING,this._roomInfo.userInfo.userId,Jk.PEERCONNECTION),this._join((function(){eD.rtcReconnected(Xk.PEERCONNECTION_RECONNECTED,Zk.PEERCONNECTION)}),(function(t){console.log("Reconnecting error, will reconnect after 3s",t),e._reconnectTimer=setTimeout(e._reconnect.bind(e),3e3)}),!0)},t.prototype._handleAbnormalDisconnection=function(){console.log("on ABNORMAL_DISCONNECTION"),this._destroyAndInitMediaServerClient(),navigator.onLine?this._reconnect():this._reconnectTimer=setTimeout(this._reconnect.bind(this),3e3)},t.prototype._onConnectionStateChange=function(e){var t;if(e.next===RP.DISCONNECTED)t=_.CONNECTION_STATE_DISCONNECTED;else if(e.next===RP.CONNECTED)t=this._isReconnecting?_.CONNECTION_STATE_RECONNECTED:_.CONNECTION_STATE_CONNECTED;else{if(e.next!==RP.CONNECTING)return;t=this._isReconnecting?_.CONNECTION_STATE_RECONNECTING:_.CONNECTION_STATE_CONNECTING}this.safeEmit(XN.ON_CONNECTION_STATE_CHANGE,{state:t})},t.prototype._initStreamListeners=function(e){var t=this;e.on("ontrack",(function(n){n.track&&"video"===n.track.kind&&t._watchVideoFirstFrameDecoded(n.track,e.userId)}))},t.prototype._watchVideoFirstFrameDecoded=function(e,t){return y(this,void 0,void 0,(function(){var n,r,i,o=this;return S(this,(function(a){return n=Date.now(),r=-1,i=function(){return y(o,void 0,void 0,(function(){var i,o,a;return S(this,(function(s){switch(s.label){case 0:return this._mediaServerClient.handler?[4,cP(this._mediaServerClient.handler.pc,e)]:[2];case 1:return i=s.sent(),(o=i.find((function(e){return"inbound-rtp"===e.type})))&&o.framesDecoded>0?(a={userId:t,height:o.frameHeight,width:o.frameWidth},this.emit(ex.VIDEO_FIRST_FRAME,a),clearInterval(r)):Date.now()-n>2e4&&clearInterval(r),[2]}}))}))},r=window.setInterval((function(){i()}),200),[2]}))}))},t.prototype._onCustomMessage=function(e){this.safeEmit(JN.ON_CUSTOM_MESSAGE,e)},t.prototype._onUserMessageReceived=function(e){var t=e.msg;try{t=JSON.parse(t)}catch(e){}this.safeEmit(JN.USER_MESSAGE_RECEIVED,{userId:e.from,message:t})},t.prototype._onUserBinaryMessageReceived=function(e){this.safeEmit(JN.USER_BINARY_MESSAGE_RECEIVED,{userId:e.from,message:e.msg})},t.prototype._onPostProcessingMessage=function(e){var t,n=(null===(t=e.body)||void 0===t?void 0:t.error)||0;this.safeEmit(JN.POST_PROCESSING_MESSAGE,{code:n,message:["success","parameter error","subscription timeout","ffmpeg error","cdn error"][n]})},t}(qy),ax=function(e,t){return void 0===t&&(t={}),t.id&&(e.id=t.id),t.classList&&t.classList.forEach((function(t){e.classList.add(t)})),t.style&&Object.assign(e.style,t.style),t.attributes&&Object.entries(t.attributes).forEach((function(t){var n=E(t,2),r=n[0],i=n[1];e.setAttribute(r,i)})),e},sx=new Yy("Player",0),cx=["play","playing","pause","ended","error","seeking","seeked","waiting","canplay","canplaythrough","durationchange","volumechange","loadedmetadata","loadeddata","loadstart","timeupdate"],ux=function(){function e(){this.videoCache=[],this.audioCache=[]}return e.prototype.getOrCreate=function(e,t){if("video"===e&&this.videoCache.length>0){if(n=this.videoCache.pop())return ax(n,{style:t}),n}else if("audio"===e&&this.audioCache.length>0){var n;if(n=this.audioCache.pop())return ax(n,{style:t}),n}return function(e,t){void 0===t&&(t={});var n=document.createElement(e);return t.id&&(n.id=t.id),t.classList&&t.classList.forEach((function(e){n.classList.add(e)})),t.style&&Object.assign(n.style,t.style),t.attributes&&Object.entries(t.attributes).forEach((function(e){var t=E(e,2),r=t[0],i=t[1];n.setAttribute(r,i)})),n}(e,{style:t})},e.prototype.recycle=function(e){for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);e instanceof HTMLVideoElement?this.videoCache.push(e):this.audioCache.push(e)},e}(),dx=new ux,lx=function(e){function t(t){var n=e.call(this)||this;n.emitVideoEvent=function(e){var t,r,i={type:"video",rawEvent:e,readyState:(null===(t=n._videoDom)||void 0===t?void 0:t.readyState)||0,userId:n.userId,eventName:e.type,currentTime:(null===(r=n._videoDom)||void 0===r?void 0:r.currentTime)||0,isScreen:n.isScreen};n.emit("playback_event",i)};var r=t.renderDom,i=t.userId;n.isPlaying=!1,n.renderMode=void 0!==t.renderMode?t.renderMode:l.RENDER_MODE_FIT;var o="string"==typeof r?document.getElementById(r):r;if(!o)throw new Ny(hy,"can't find dom");return n._containerDom=o,n.userId=i,n.isScreen=!!t.isScreen,n._initVideo(),n}return n(t,e),t.prototype._initVideo=function(){this._videoDom||(this._videoDom=dx.getOrCreate("video",{width:"100%",height:"100%",background:"black"}),this._videoDom.id=lD(),this.renderMode===l.RENDER_MODE_FIT?this._videoDom.style.objectFit="contain":this._videoDom.style.objectFit="cover"),this._initListeners()},t.prototype._initListeners=function(){var e=this;this._videoDom&&cx.forEach((function(t){var n;null===(n=e._videoDom)||void 0===n||n.addEventListener(t,e.emitVideoEvent)}))},t.prototype._removeListeners=function(){var e=this;this._videoDom&&cx.forEach((function(t){var n;null===(n=e._videoDom)||void 0===n||n.removeEventListener(t,e.emitVideoEvent)}))},t.prototype._recordFrame=function(e){var t=this;this.on("playback_event",(function(n){var r;if("timeupdate"===n.eventName){if(void 0===t.__cumulativeTime&&(t.__cumulativeTime=0),0===(null===(r=t._videoDom)||void 0===r?void 0:r.currentTime))return;if(t._videoDom.currentTime>t.__cumulativeTime){var i=Math.floor(1e3*(t._videoDom.currentTime-t.__cumulativeTime)),o=t._videoDom.currentTime-t.__cumulativeTime>.5;e.recordedVideoFrames.push({playTime:t._videoDom.currentTime,isStall:o,stallCount:o?1:0,stallDuration:i%2e3})}t.__cumulativeTime=t._videoDom.currentTime}}))},t.prototype.playVideo=function(e,t){var n;return y(this,void 0,void 0,(function(){var r;return S(this,(function(i){return sx.print("playVideo","play video track: ".concat(this.userId)),this._videoDom||this._initVideo(),sx.print("playVideo","play video by dom: ".concat(null===(n=this._videoDom)||void 0===n?void 0:n.id)),(r=new MediaStream).addTrack(e.getTrack()),this._videoDom.srcObject=r,this._containerDom.appendChild(this._videoDom),this._videoDom.play(),t&&this._recordFrame(t),this.isPlaying=!0,[2]}))}))},t.prototype.updateSrcObject=function(e){var t=e.getTrack();if(t&&this._videoDom){var n=new MediaStream;n.addTrack(t),this._videoDom.srcObject=n}},t.prototype.mirror=function(e){sx.print("mirror","".concat(this.userId," set mirror: ").concat(e)),this._videoDom&&(this._videoDom.style.transform=e?"rotateY(180deg)":"")},t.prototype.stop=function(){var e;sx.print("stop","stop video track: ".concat(this.userId)),this._videoDom&&(this._videoDom.srcObject=null,null===(e=this._containerDom)||void 0===e||e.removeChild(this._videoDom),dx.recycle(this._videoDom),this._removeListeners(),delete this._videoDom),this._videoDom=void 0,this.isPlaying=!1,this.__cumulativeTime=void 0},Object.defineProperty(t.prototype,"domElement",{get:function(){return this._videoDom},enumerable:!1,configurable:!0}),t}(Hy.exports.EventEmitter),fx=function(e){function t(t,n){var r=e.call(this)||this;if(r.emitVideoEvent=function(e){var t,n,i={type:"audio",rawEvent:e,readyState:(null===(t=r._audioDom)||void 0===t?void 0:t.readyState)||0,userId:r.userId,eventName:e.type,currentTime:(null===(n=r._audioDom)||void 0===n?void 0:n.currentTime)||0};r.emit("playback_event",i)},r.isPlaying=!1,n){var i=document.getElementById(n);if(!i)throw new Ny(hy,"can't find dom");r._containerDom=i}else r._containerDom=document.body;return r.userId=t,r._initAudio(),r}return n(t,e),t.prototype._initAudio=function(){this._audioDom||(this._audioDom=dx.getOrCreate("video",{display:"none"}),this._containerDom.appendChild(this._audioDom)),this._initListeners()},t.prototype._initListeners=function(){var e=this;this._audioDom&&cx.forEach((function(t){var n;null===(n=e._audioDom)||void 0===n||n.addEventListener(t,e.emitVideoEvent)}))},t.prototype._removeListeners=function(){var e=this;this._audioDom&&cx.forEach((function(t){var n;null===(n=e._audioDom)||void 0===n||n.removeEventListener(t,e.emitVideoEvent)}))},t.prototype.playAudio=function(e){return y(this,void 0,void 0,(function(){var t,n,r=this;return S(this,(function(i){return sx.print("playAudio","play audio track: ".concat(this.userId)),this._audioDom||this._initAudio(),(t=new MediaStream).addTrack(e.getTrack()),this._audioDom.srcObject=t,(null==(n=this._audioDom.play())?void 0:n.then)&&n.catch((function(e){var t;eD.rtcError("autoplay failed, userId: ".concat(r.userId),-1e3),r.emit("playback_event",{type:"audio",rawEvent:e,readyState:r._audioDom.readyState||0,userId:r.userId,eventName:"autoplay-error",currentTime:(null===(t=r._audioDom)||void 0===t?void 0:t.currentTime)||0})})),this.isPlaying=!0,[2]}))}))},t.prototype.manuallyPlay=function(){if(sx.print("Invoke AudioPlayer.manuallyPlay"),!this._audioDom)throw new Ny(qg,"Player not found");var e=this._audioDom.play();return(null==e?void 0:e.then)?e:Promise.resolve(e)},t.prototype.setPlaybackDevice=function(e){return y(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:return sx.print("setPlaybackDevice","setPlaybackDevice: ".concat(e)),[4,kM.getAudioPlayback()];case 1:return t=n.sent(),t.map((function(e){return e.deviceId})).includes(e)&&this._audioDom&&this._audioDom.setSinkId?[4,this._audioDom.setSinkId(e)]:[2];case 2:return n.sent(),[2]}}))}))},t.prototype.stop=function(){var e;sx.print("stopAudio","stop audio track: ".concat(this.userId)),this._audioDom&&(this._audioDom.srcObject=null,null===(e=this._containerDom)||void 0===e||e.removeChild(this._audioDom),dx.recycle(this._audioDom),this._removeListeners(),delete this._audioDom),this._audioDom=void 0,this.isPlaying=!1},Object.defineProperty(t.prototype,"domElement",{get:function(){return this._audioDom},enumerable:!1,configurable:!0}),t}(Hy.exports.EventEmitter),hx={exports:{}};!function(e,t){(function(){var n,r="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",a=16,s=32,c=64,u=128,d=256,l=1/0,f=9007199254740991,h=NaN,p=4294967295,_=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",s],["partialRight",c],["rearg",d]],v="[object Arguments]",m="[object Array]",g="[object Boolean]",y="[object Date]",S="[object Error]",b="[object Function]",E="[object GeneratorFunction]",T="[object Map]",C="[object Number]",R="[object Object]",I="[object Promise]",A="[object RegExp]",O="[object Set]",k="[object String]",N="[object Symbol]",D="[object WeakMap]",P="[object ArrayBuffer]",M="[object DataView]",x="[object Float32Array]",U="[object Float64Array]",L="[object Int8Array]",j="[object Int16Array]",V="[object Int32Array]",B="[object Uint8Array]",F="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",G=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,Y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,K=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,J=RegExp(K.source),X=RegExp(q.source),Z=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(re.source),oe=/^\s+/,ae=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,_e=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,Ee=/['\n\r\u2028\u2029\\]/g,Te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",Re="a-z\\xdf-\\xf6\\xf8-\\xff",we="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oe="['’]",ke="[\\ud800-\\udfff]",Ne="["+Ae+"]",De="["+Te+"]",Pe="\\d+",Me="[\\u2700-\\u27bf]",xe="["+Re+"]",Ue="[^\\ud800-\\udfff"+Ae+Pe+Ce+Re+we+"]",Le="\\ud83c[\\udffb-\\udfff]",je="[^\\ud800-\\udfff]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Be="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+we+"]",ze="(?:"+xe+"|"+Ue+")",He="(?:"+Fe+"|"+Ue+")",Ge="(?:['’](?:d|ll|m|re|s|t|ve))?",We="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ye="(?:"+De+"|"+Le+")"+"?",Ke="[\\ufe0e\\ufe0f]?",qe=Ke+Ye+("(?:\\u200d(?:"+[je,Ve,Be].join("|")+")"+Ke+Ye+")*"),Je="(?:"+[Me,Ve,Be].join("|")+")"+qe,Xe="(?:"+[je+De+"?",De,Ve,Be,ke].join("|")+")",Ze=RegExp(Oe,"g"),$e=RegExp(De,"g"),Qe=RegExp(Le+"(?="+Le+")|"+Xe+qe,"g"),et=RegExp([Fe+"?"+xe+"+"+Ge+"(?="+[Ne,Fe,"$"].join("|")+")",He+"+"+We+"(?="+[Ne,Fe+ze,"$"].join("|")+")",Fe+"?"+ze+"+"+Ge,Fe+"+"+We,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pe,Je].join("|"),"g"),tt=RegExp("[\\u200d\\ud800-\\udfff"+Te+Ie+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[x]=ot[U]=ot[L]=ot[j]=ot[V]=ot[B]=ot[F]=ot[z]=ot[H]=!0,ot[v]=ot[m]=ot[P]=ot[g]=ot[M]=ot[y]=ot[S]=ot[b]=ot[T]=ot[C]=ot[R]=ot[A]=ot[O]=ot[k]=ot[D]=!1;var at={};at[v]=at[m]=at[P]=at[M]=at[g]=at[y]=at[x]=at[U]=at[L]=at[j]=at[V]=at[T]=at[C]=at[R]=at[A]=at[O]=at[k]=at[N]=at[B]=at[F]=at[z]=at[H]=!0,at[S]=at[b]=at[D]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ct=parseFloat,ut=parseInt,dt="object"==typeof w&&w&&w.Object===Object&&w,lt="object"==typeof self&&self&&self.Object===Object&&self,ft=dt||lt||Function("return this")(),ht=t&&!t.nodeType&&t,pt=ht&&e&&!e.nodeType&&e,_t=pt&&pt.exports===ht,vt=_t&&dt.process,mt=function(){try{var e=pt&&pt.require&&pt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(e){}}(),gt=mt&&mt.isArrayBuffer,yt=mt&&mt.isDate,St=mt&&mt.isMap,bt=mt&&mt.isRegExp,Et=mt&&mt.isSet,Tt=mt&&mt.isTypedArray;function Ct(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Rt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function wt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function kt(e,t){return!!(null==e?0:e.length)&&Bt(e,t,0)>-1}function Nt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Pt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Mt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function xt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Lt=Gt("length");function jt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Bt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,zt,n)}function Ft(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function zt(e){return e!=e}function Ht(e,t){var n=null==e?0:e.length;return n?Kt(e,t)/n:h}function Gt(e){return function(t){return null==t?n:t[e]}}function Wt(e){return function(t){return null==e?n:e[t]}}function Yt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Kt(e,t){for(var r,i=-1,o=e.length;++i<o;){var a=t(e[i]);a!==n&&(r=r===n?a:r+a)}return r}function qt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Jt(e){return e?e.slice(0,pn(e)+1).replace(oe,""):e}function Xt(e){return function(t){return e(t)}}function Zt(e,t){return Dt(t,(function(t){return e[t]}))}function $t(e,t){return e.has(t)}function Qt(e,t){for(var n=-1,r=e.length;++n<r&&Bt(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length;n--&&Bt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var nn=Wt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=Wt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+st[e]}function an(e){return tt.test(e)}function sn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function cn(e,t){return function(n){return e(t(n))}}function un(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var s=e[n];s!==t&&s!==o||(e[n]=o,a[i++]=n)}return a}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return an(e)?function(e){var t=Qe.lastIndex=0;for(;Qe.test(e);)++t;return t}(e):Lt(e)}function hn(e){return an(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function pn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var _n=Wt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function e(t){var w=(t=null==t?ft:vn.defaults(ft.Object(),t,vn.pick(ft,rt))).Array,ae=t.Date,Te=t.Error,Ce=t.Function,Re=t.Math,we=t.Object,Ie=t.RegExp,Ae=t.String,Oe=t.TypeError,ke=w.prototype,Ne=Ce.prototype,De=we.prototype,Pe=t["__core-js_shared__"],Me=Ne.toString,xe=De.hasOwnProperty,Ue=0,Le=function(){var e=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),je=De.toString,Ve=Me.call(we),Be=ft._,Fe=Ie("^"+Me.call(xe).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=_t?t.Buffer:n,He=t.Symbol,Ge=t.Uint8Array,We=ze?ze.allocUnsafe:n,Ye=cn(we.getPrototypeOf,we),Ke=we.create,qe=De.propertyIsEnumerable,Je=ke.splice,Xe=He?He.isConcatSpreadable:n,Qe=He?He.iterator:n,tt=He?He.toStringTag:n,st=function(){try{var e=ho(we,"defineProperty");return e({},"",{}),e}catch(e){}}(),dt=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,lt=ae&&ae.now!==ft.Date.now&&ae.now,ht=t.setTimeout!==ft.setTimeout&&t.setTimeout,pt=Re.ceil,vt=Re.floor,mt=we.getOwnPropertySymbols,Lt=ze?ze.isBuffer:n,Wt=t.isFinite,mn=ke.join,gn=cn(we.keys,we),yn=Re.max,Sn=Re.min,bn=ae.now,En=t.parseInt,Tn=Re.random,Cn=ke.reverse,Rn=ho(t,"DataView"),wn=ho(t,"Map"),In=ho(t,"Promise"),An=ho(t,"Set"),On=ho(t,"WeakMap"),kn=ho(we,"create"),Nn=On&&new On,Dn={},Pn=Bo(Rn),Mn=Bo(wn),xn=Bo(In),Un=Bo(An),Ln=Bo(On),jn=He?He.prototype:n,Vn=jn?jn.valueOf:n,Bn=jn?jn.toString:n;function Fn(e){if(rs(e)&&!Ya(e)&&!(e instanceof Wn)){if(e instanceof Gn)return e;if(xe.call(e,"__wrapped__"))return Fo(e)}return new Gn(e)}var zn=function(){function e(){}return function(t){if(!ns(t))return{};if(Ke)return Ke(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Hn(){}function Gn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new Kn(e);this.size=t.size}function Zn(e,t){var n=Ya(e),r=!n&&Wa(e),i=!n&&!r&&Xa(e),o=!n&&!r&&!i&&ls(e),a=n||r||i||o,s=a?qt(e.length,Ae):[],c=s.length;for(var u in e)!t&&!xe.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||So(u,c))||s.push(u);return s}function $n(e){var t=e.length;return t?e[Jr(0,t-1)]:n}function Qn(e,t){return Lo(ki(e),cr(t,0,e.length))}function er(e){return Lo(ki(e))}function tr(e,t,r){(r!==n&&!za(e[t],r)||r===n&&!(t in e))&&ar(e,t,r)}function nr(e,t,r){var i=e[t];xe.call(e,t)&&za(i,r)&&(r!==n||t in e)||ar(e,t,r)}function rr(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function ir(e,t,n,r){return hr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Ni(t,Ps(t),e)}function ar(e,t,n){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,i=t.length,o=w(i),a=null==e;++r<i;)o[r]=a?n:As(e,t[r]);return o}function cr(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function ur(e,t,r,i,o,a){var s,c=1&t,u=2&t,d=4&t;if(r&&(s=o?r(e,i,o,a):r(e)),s!==n)return s;if(!ns(e))return e;var l=Ya(e);if(l){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&xe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return ki(e,s)}else{var f=vo(e),h=f==b||f==E;if(Xa(e))return Ci(e,c);if(f==R||f==v||h&&!o){if(s=u||h?{}:go(e),!c)return u?function(e,t){return Ni(e,_o(e),t)}(e,function(e,t){return e&&Ni(t,Ms(t),e)}(s,e)):function(e,t){return Ni(e,po(e),t)}(e,or(s,e))}else{if(!at[f])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case P:return Ri(e);case g:case y:return new r(+e);case M:return function(e,t){var n=t?Ri(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case x:case U:case L:case j:case V:case B:case F:case z:case H:return wi(e,n);case T:return new r;case C:case k:return new r(e);case A:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new r;case N:return i=e,Vn?we(Vn.call(i)):{}}var i}(e,f,c)}}a||(a=new Xn);var p=a.get(e);if(p)return p;a.set(e,s),cs(e)?e.forEach((function(n){s.add(ur(n,t,r,n,e,a))})):is(e)&&e.forEach((function(n,i){s.set(i,ur(n,t,r,i,e,a))}));var _=l?n:(d?u?oo:io:u?Ms:Ps)(e);return wt(_||e,(function(n,i){_&&(n=e[i=n]),nr(s,i,ur(n,t,r,i,e,a))})),s}function dr(e,t,r){var i=r.length;if(null==e)return!i;for(e=we(e);i--;){var o=r[i],a=t[o],s=e[o];if(s===n&&!(o in e)||!a(s))return!1}return!0}function lr(e,t,i){if("function"!=typeof e)throw new Oe(r);return Po((function(){e.apply(n,i)}),t)}function fr(e,t,n,r){var i=-1,o=kt,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=Dt(t,Xt(n))),r?(o=Nt,a=!1):t.length>=200&&(o=$t,a=!1,t=new Jn(t));e:for(;++i<s;){var d=e[i],l=null==n?d:n(d);if(d=r||0!==d?d:0,a&&l==l){for(var f=u;f--;)if(t[f]===l)continue e;c.push(d)}else o(t,l,r)||c.push(d)}return c}Fn.templateSettings={escape:Z,evaluate:$,interpolate:Q,variable:"",imports:{_:Fn}},Fn.prototype=Hn.prototype,Fn.prototype.constructor=Fn,Gn.prototype=zn(Hn.prototype),Gn.prototype.constructor=Gn,Wn.prototype=zn(Hn.prototype),Wn.prototype.constructor=Wn,Yn.prototype.clear=function(){this.__data__=kn?kn(null):{},this.size=0},Yn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Yn.prototype.get=function(e){var t=this.__data__;if(kn){var r=t[e];return r===i?n:r}return xe.call(t,e)?t[e]:n},Yn.prototype.has=function(e){var t=this.__data__;return kn?t[e]!==n:xe.call(t,e)},Yn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=kn&&t===n?i:t,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Je.call(t,n,1),--this.size,!0)},Kn.prototype.get=function(e){var t=this.__data__,r=rr(t,e);return r<0?n:t[r][1]},Kn.prototype.has=function(e){return rr(this.__data__,e)>-1},Kn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Yn,map:new(wn||Kn),string:new Yn}},qn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return lo(this,e).get(e)},qn.prototype.has=function(e){return lo(this,e).has(e)},qn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Jn.prototype.add=Jn.prototype.push=function(e){return this.__data__.set(e,i),this},Jn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!wn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var hr=Mi(br),pr=Mi(Er,!0);function _r(e,t){var n=!0;return hr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function vr(e,t,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(c===n?s==s&&!ds(s):r(s,c)))var c=s,u=a}return u}function mr(e,t){var n=[];return hr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function gr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=yo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?gr(s,t-1,n,r,i):Pt(i,s):r||(i[i.length]=s)}return i}var yr=xi(),Sr=xi(!0);function br(e,t){return e&&yr(e,t,Ps)}function Er(e,t){return e&&Sr(e,t,Ps)}function Tr(e,t){return Ot(t,(function(t){return Qa(e[t])}))}function Cr(e,t){for(var r=0,i=(t=Si(t,e)).length;null!=e&&r<i;)e=e[Vo(t[r++])];return r&&r==i?e:n}function Rr(e,t,n){var r=t(e);return Ya(e)?r:Pt(r,n(e))}function wr(e){return null==e?e===n?"[object Undefined]":"[object Null]":tt&&tt in we(e)?function(e){var t=xe.call(e,tt),r=e[tt];try{e[tt]=n;var i=!0}catch(e){}var o=je.call(e);i&&(t?e[tt]=r:delete e[tt]);return o}(e):function(e){return je.call(e)}(e)}function Ir(e,t){return e>t}function Ar(e,t){return null!=e&&xe.call(e,t)}function Or(e,t){return null!=e&&t in we(e)}function kr(e,t,r){for(var i=r?Nt:kt,o=e[0].length,a=e.length,s=a,c=w(a),u=1/0,d=[];s--;){var l=e[s];s&&t&&(l=Dt(l,Xt(t))),u=Sn(l.length,u),c[s]=!r&&(t||o>=120&&l.length>=120)?new Jn(s&&l):n}l=e[0];var f=-1,h=c[0];e:for(;++f<o&&d.length<u;){var p=l[f],_=t?t(p):p;if(p=r||0!==p?p:0,!(h?$t(h,_):i(d,_,r))){for(s=a;--s;){var v=c[s];if(!(v?$t(v,_):i(e[s],_,r)))continue e}h&&h.push(_),d.push(p)}}return d}function Nr(e,t,r){var i=null==(e=Oo(e,t=Si(t,e)))?e:e[Vo($o(t))];return null==i?n:Ct(i,e,r)}function Dr(e){return rs(e)&&wr(e)==v}function Pr(e,t,r,i,o){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!=e&&t!=t:function(e,t,r,i,o,a){var s=Ya(e),c=Ya(t),u=s?m:vo(e),d=c?m:vo(t),l=(u=u==v?R:u)==R,f=(d=d==v?R:d)==R,h=u==d;if(h&&Xa(e)){if(!Xa(t))return!1;s=!0,l=!1}if(h&&!l)return a||(a=new Xn),s||ls(e)?no(e,t,r,i,o,a):function(e,t,n,r,i,o,a){switch(n){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!o(new Ge(e),new Ge(t)));case g:case y:case C:return za(+e,+t);case S:return e.name==t.name&&e.message==t.message;case A:case k:return e==t+"";case T:var s=sn;case O:var c=1&r;if(s||(s=dn),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var d=no(s(e),s(t),r,i,o,a);return a.delete(e),d;case N:if(Vn)return Vn.call(e)==Vn.call(t)}return!1}(e,t,u,r,i,o,a);if(!(1&r)){var p=l&&xe.call(e,"__wrapped__"),_=f&&xe.call(t,"__wrapped__");if(p||_){var b=p?e.value():e,E=_?t.value():t;return a||(a=new Xn),o(b,E,r,i,a)}}if(!h)return!1;return a||(a=new Xn),function(e,t,r,i,o,a){var s=1&r,c=io(e),u=c.length,d=io(t).length;if(u!=d&&!s)return!1;var l=u;for(;l--;){var f=c[l];if(!(s?f in t:xe.call(t,f)))return!1}var h=a.get(e),p=a.get(t);if(h&&p)return h==t&&p==e;var _=!0;a.set(e,t),a.set(t,e);var v=s;for(;++l<u;){var m=e[f=c[l]],g=t[f];if(i)var y=s?i(g,m,f,t,e,a):i(m,g,f,e,t,a);if(!(y===n?m===g||o(m,g,r,i,a):y)){_=!1;break}v||(v="constructor"==f)}if(_&&!v){var S=e.constructor,b=t.constructor;S==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof b&&b instanceof b||(_=!1)}return a.delete(e),a.delete(t),_}(e,t,r,i,o,a)}(e,t,r,i,Pr,o))}function Mr(e,t,r,i){var o=r.length,a=o,s=!i;if(null==e)return!a;for(e=we(e);o--;){var c=r[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=r[o])[0],d=e[u],l=c[1];if(s&&c[2]){if(d===n&&!(u in e))return!1}else{var f=new Xn;if(i)var h=i(d,l,u,e,t,f);if(!(h===n?Pr(l,d,3,i,f):h))return!1}}return!0}function xr(e){return!(!ns(e)||(t=e,Le&&Le in t))&&(Qa(e)?Fe:me).test(Bo(e));var t}function Ur(e){return"function"==typeof e?e:null==e?oc:"object"==typeof e?Ya(e)?zr(e[0],e[1]):Fr(e):pc(e)}function Lr(e){if(!Ro(e))return gn(e);var t=[];for(var n in we(e))xe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function jr(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in we(e))t.push(n);return t}(e);var t=Ro(e),n=[];for(var r in e)("constructor"!=r||!t&&xe.call(e,r))&&n.push(r);return n}function Vr(e,t){return e<t}function Br(e,t){var n=-1,r=qa(e)?w(e.length):[];return hr(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function Fr(e){var t=fo(e);return 1==t.length&&t[0][2]?Io(t[0][0],t[0][1]):function(n){return n===e||Mr(n,e,t)}}function zr(e,t){return Eo(e)&&wo(t)?Io(Vo(e),t):function(r){var i=As(r,e);return i===n&&i===t?Os(r,e):Pr(t,i,3)}}function Hr(e,t,r,i,o){e!==t&&yr(t,(function(a,s){if(o||(o=new Xn),ns(a))!function(e,t,r,i,o,a,s){var c=No(e,r),u=No(t,r),d=s.get(u);if(d)return void tr(e,r,d);var l=a?a(c,u,r+"",e,t,s):n,f=l===n;if(f){var h=Ya(u),p=!h&&Xa(u),_=!h&&!p&&ls(u);l=u,h||p||_?Ya(c)?l=c:Ja(c)?l=ki(c):p?(f=!1,l=Ci(u,!0)):_?(f=!1,l=wi(u,!0)):l=[]:as(u)||Wa(u)?(l=c,Wa(c)?l=ys(c):ns(c)&&!Qa(c)||(l=go(u))):f=!1}f&&(s.set(u,l),o(l,u,i,a,s),s.delete(u));tr(e,r,l)}(e,t,s,r,Hr,i,o);else{var c=i?i(No(e,s),a,s+"",e,t,o):n;c===n&&(c=a),tr(e,s,c)}}),Ms)}function Gr(e,t){var r=e.length;if(r)return So(t+=t<0?r:0,r)?e[t]:n}function Wr(e,t,n){t=t.length?Dt(t,(function(e){return Ya(e)?function(t){return Cr(t,1===e.length?e[0]:e)}:e})):[oc];var r=-1;t=Dt(t,Xt(uo()));var i=Br(e,(function(e,n,i){var o=Dt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var c=Ii(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Yr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Cr(e,a);n(s,a)&&ei(o,Si(a,e),s)}return o}function Kr(e,t,n,r){var i=r?Ft:Bt,o=-1,a=t.length,s=e;for(e===t&&(t=ki(t)),n&&(s=Dt(e,Xt(n)));++o<a;)for(var c=0,u=t[o],d=n?n(u):u;(c=i(s,d,c,r))>-1;)s!==e&&Je.call(s,c,1),Je.call(e,c,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;So(i)?Je.call(e,i,1):fi(e,i)}}return e}function Jr(e,t){return e+vt(Tn()*(t-e+1))}function Xr(e,t){var n="";if(!e||t<1||t>f)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Zr(e,t){return Mo(Ao(e,t,oc),e+"")}function $r(e){return $n(zs(e))}function Qr(e,t){var n=zs(e);return Lo(n,cr(t,0,n.length))}function ei(e,t,r,i){if(!ns(e))return e;for(var o=-1,a=(t=Si(t,e)).length,s=a-1,c=e;null!=c&&++o<a;){var u=Vo(t[o]),d=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var l=c[u];(d=i?i(l,u,c):n)===n&&(d=ns(l)?l:So(t[o+1])?[]:{})}nr(c,u,d),c=c[u]}return e}var ti=Nn?function(e,t){return Nn.set(e,t),e}:oc,ni=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:nc(t),writable:!0})}:oc;function ri(e){return Lo(zs(e))}function ii(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=w(i);++r<i;)o[r]=e[r+t];return o}function oi(e,t){var n;return hr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ds(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,oc,n)}function si(e,t,r,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=r(t))!=t,c=null===t,u=ds(t),d=t===n;o<a;){var l=vt((o+a)/2),f=r(e[l]),h=f!==n,p=null===f,_=f==f,v=ds(f);if(s)var m=i||_;else m=d?_&&(i||h):c?_&&h&&(i||!p):u?_&&h&&!p&&(i||!v):!p&&!v&&(i?f<=t:f<t);m?o=l+1:a=l}return Sn(a,4294967294)}function ci(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!za(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function ui(e){return"number"==typeof e?e:ds(e)?h:+e}function di(e){if("string"==typeof e)return e;if(Ya(e))return Dt(e,di)+"";if(ds(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=kt,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=Nt;else if(o>=200){var u=t?null:Xi(e);if(u)return dn(u);a=!1,i=$t,c=new Jn}else c=t?[]:s;e:for(;++r<o;){var d=e[r],l=t?t(d):d;if(d=n||0!==d?d:0,a&&l==l){for(var f=c.length;f--;)if(c[f]===l)continue e;t&&c.push(l),s.push(d)}else i(c,l,n)||(c!==s&&c.push(l),s.push(d))}return s}function fi(e,t){return null==(e=Oo(e,t=Si(t,e)))||delete e[Vo($o(t))]}function hi(e,t,n,r){return ei(e,t,n(Cr(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function _i(e,t){var n=e;return n instanceof Wn&&(n=n.value()),Mt(t,(function(e,t){return t.func.apply(t.thisArg,Pt([e],t.args))}),n)}function vi(e,t,n){var r=e.length;if(r<2)return r?li(e[0]):[];for(var i=-1,o=w(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=fr(o[i]||a,e[s],t,n));return li(gr(o,1),t,n)}function mi(e,t,r){for(var i=-1,o=e.length,a=t.length,s={};++i<o;){var c=i<a?t[i]:n;r(s,e[i],c)}return s}function gi(e){return Ja(e)?e:[]}function yi(e){return"function"==typeof e?e:oc}function Si(e,t){return Ya(e)?e:Eo(e,t)?[e]:jo(Ss(e))}var bi=Zr;function Ei(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:ii(e,t,r)}var Ti=dt||function(e){return ft.clearTimeout(e)};function Ci(e,t){if(t)return e.slice();var n=e.length,r=We?We(n):new e.constructor(n);return e.copy(r),r}function Ri(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function wi(e,t){var n=t?Ri(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ii(e,t){if(e!==t){var r=e!==n,i=null===e,o=e==e,a=ds(e),s=t!==n,c=null===t,u=t==t,d=ds(t);if(!c&&!d&&!a&&e>t||a&&s&&u&&!c&&!d||i&&s&&u||!r&&u||!o)return 1;if(!i&&!a&&!d&&e<t||d&&r&&o&&!i&&!a||c&&r&&o||!s&&o||!u)return-1}return 0}function Ai(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,c=t.length,u=yn(o-a,0),d=w(c+u),l=!r;++s<c;)d[s]=t[s];for(;++i<a;)(l||i<o)&&(d[n[i]]=e[i]);for(;u--;)d[s++]=e[i++];return d}function Oi(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,c=-1,u=t.length,d=yn(o-s,0),l=w(d+u),f=!r;++i<d;)l[i]=e[i];for(var h=i;++c<u;)l[h+c]=t[c];for(;++a<s;)(f||i<o)&&(l[h+n[a]]=e[i++]);return l}function ki(e,t){var n=-1,r=e.length;for(t||(t=w(r));++n<r;)t[n]=e[n];return t}function Ni(e,t,r,i){var o=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var c=t[a],u=i?i(r[c],e[c],c,r,e):n;u===n&&(u=e[c]),o?ar(r,c,u):nr(r,c,u)}return r}function Di(e,t){return function(n,r){var i=Ya(n)?Rt:ir,o=t?t():{};return i(n,e,uo(r,2),o)}}function Pi(e){return Zr((function(t,r){var i=-1,o=r.length,a=o>1?r[o-1]:n,s=o>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(o--,a):n,s&&bo(r[0],r[1],s)&&(a=o<3?n:a,o=1),t=we(t);++i<o;){var c=r[i];c&&e(t,c,i,a)}return t}))}function Mi(e,t){return function(n,r){if(null==n)return n;if(!qa(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=we(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function xi(e){return function(t,n,r){for(var i=-1,o=we(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}function Ui(e){return function(t){var r=an(t=Ss(t))?hn(t):n,i=r?r[0]:t.charAt(0),o=r?Ei(r,1).join(""):t.slice(1);return i[e]()+o}}function Li(e){return function(t){return Mt(Qs(Ws(t).replace(Ze,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=zn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Vi(e){return function(t,r,i){var o=we(t);if(!qa(t)){var a=uo(r,3);t=Ps(t),r=function(e){return a(o[e],e,o)}}var s=e(t,r,i);return s>-1?o[a?t[s]:s]:n}}function Bi(e){return ro((function(t){var i=t.length,o=i,a=Gn.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new Oe(r);if(a&&!c&&"wrapper"==so(s))var c=new Gn([],!0)}for(o=c?o:i;++o<i;){var u=so(s=t[o]),d="wrapper"==u?ao(s):n;c=d&&To(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?c[so(d[0])].apply(c,d[3]):1==s.length&&To(s)?c[u]():c.thru(s)}return function(){var e=arguments,n=e[0];if(c&&1==e.length&&Ya(n))return c.plant(n).value();for(var r=0,o=i?t[r].apply(this,e):n;++r<i;)o=t[r].call(this,o);return o}}))}function Fi(e,t,r,i,o,a,s,c,d,l){var f=t&u,h=1&t,p=2&t,_=24&t,v=512&t,m=p?n:ji(e);return function n(){for(var u=arguments.length,g=w(u),y=u;y--;)g[y]=arguments[y];if(_)var S=co(n),b=tn(g,S);if(i&&(g=Ai(g,i,o,_)),a&&(g=Oi(g,a,s,_)),u-=b,_&&u<l){var E=un(g,S);return qi(e,t,Fi,n.placeholder,r,g,E,c,d,l-u)}var T=h?r:this,C=p?T[e]:e;return u=g.length,c?g=ko(g,c):v&&u>1&&g.reverse(),f&&d<u&&(g.length=d),this&&this!==ft&&this instanceof n&&(C=m||ji(C)),C.apply(T,g)}}function zi(e,t){return function(n,r){return function(e,t,n,r){return br(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Hi(e,t){return function(r,i){var o;if(r===n&&i===n)return t;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=di(r),i=di(i)):(r=ui(r),i=ui(i)),o=e(r,i)}return o}}function Gi(e){return ro((function(t){return t=Dt(t,Xt(uo())),Zr((function(n){var r=this;return e(t,(function(e){return Ct(e,r,n)}))}))}))}function Wi(e,t){var r=(t=t===n?" ":di(t)).length;if(r<2)return r?Xr(t,e):t;var i=Xr(t,pt(e/fn(t)));return an(t)?Ei(hn(i),0,e).join(""):i.slice(0,e)}function Yi(e){return function(t,r,i){return i&&"number"!=typeof i&&bo(t,r,i)&&(r=i=n),t=_s(t),r===n?(r=t,t=0):r=_s(r),function(e,t,n,r){for(var i=-1,o=yn(pt((t-e)/(n||1)),0),a=w(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,r,i=i===n?t<r?1:-1:_s(i),e)}}function Ki(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function qi(e,t,r,i,o,a,u,d,l,f){var h=8&t;t|=h?s:c,4&(t&=~(h?c:s))||(t&=-4);var p=[e,t,o,h?a:n,h?u:n,h?n:a,h?n:u,d,l,f],_=r.apply(n,p);return To(e)&&Do(_,p),_.placeholder=i,xo(_,e,t)}function Ji(e){var t=Re[e];return function(e,n){if(e=gs(e),(n=null==n?0:Sn(vs(n),292))&&Wt(e)){var r=(Ss(e)+"e").split("e");return+((r=(Ss(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xi=An&&1/dn(new An([,-0]))[1]==l?function(e){return new An(e)}:dc;function Zi(e){return function(t){var n=vo(t);return n==T?sn(t):n==O?ln(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function $i(e,t,i,l,f,h,p,_){var v=2&t;if(!v&&"function"!=typeof e)throw new Oe(r);var m=l?l.length:0;if(m||(t&=-97,l=f=n),p=p===n?p:yn(vs(p),0),_=_===n?_:vs(_),m-=f?f.length:0,t&c){var g=l,y=f;l=f=n}var S=v?n:ao(e),b=[e,t,i,l,f,g,y,h,p,_];if(S&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,s=r==u&&8==n||r==u&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Ai(l,c,t[4]):c,e[4]=l?un(e[3],o):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Oi(l,c,t[6]):c,e[6]=l?un(e[5],o):t[6]);(c=t[7])&&(e[7]=c);r&u&&(e[8]=null==e[8]?t[8]:Sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(b,S),e=b[0],t=b[1],i=b[2],l=b[3],f=b[4],!(_=b[9]=b[9]===n?v?0:e.length:yn(b[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||t==a?function(e,t,r){var i=ji(e);return function o(){for(var a=arguments.length,s=w(a),c=a,u=co(o);c--;)s[c]=arguments[c];var d=a<3&&s[0]!==u&&s[a-1]!==u?[]:un(s,u);return(a-=d.length)<r?qi(e,t,Fi,o.placeholder,n,s,d,n,n,r-a):Ct(this&&this!==ft&&this instanceof o?i:e,this,s)}}(e,t,_):t!=s&&33!=t||f.length?Fi.apply(n,b):function(e,t,n,r){var i=1&t,o=ji(e);return function t(){for(var a=-1,s=arguments.length,c=-1,u=r.length,d=w(u+s),l=this&&this!==ft&&this instanceof t?o:e;++c<u;)d[c]=r[c];for(;s--;)d[c++]=arguments[++a];return Ct(l,i?n:this,d)}}(e,t,i,l);else var E=function(e,t,n){var r=1&t,i=ji(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,i);return xo((S?ti:Do)(E,b),e,t)}function Qi(e,t,r,i){return e===n||za(e,De[r])&&!xe.call(i,r)?t:e}function eo(e,t,r,i,o,a){return ns(e)&&ns(t)&&(a.set(t,e),Hr(e,t,n,eo,a),a.delete(t)),e}function to(e){return as(e)?n:e}function no(e,t,r,i,o,a){var s=1&r,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var d=a.get(e),l=a.get(t);if(d&&l)return d==t&&l==e;var f=-1,h=!0,p=2&r?new Jn:n;for(a.set(e,t),a.set(t,e);++f<c;){var _=e[f],v=t[f];if(i)var m=s?i(v,_,f,t,e,a):i(_,v,f,e,t,a);if(m!==n){if(m)continue;h=!1;break}if(p){if(!Ut(t,(function(e,t){if(!$t(p,t)&&(_===e||o(_,e,r,i,a)))return p.push(t)}))){h=!1;break}}else if(_!==v&&!o(_,v,r,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function ro(e){return Mo(Ao(e,n,Ko),e+"")}function io(e){return Rr(e,Ps,po)}function oo(e){return Rr(e,Ms,_o)}var ao=Nn?function(e){return Nn.get(e)}:dc;function so(e){for(var t=e.name+"",n=Dn[t],r=xe.call(Dn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function co(e){return(xe.call(Fn,"placeholder")?Fn:e).placeholder}function uo(){var e=Fn.iteratee||ac;return e=e===ac?Ur:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function fo(e){for(var t=Ps(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,wo(i)]}return t}function ho(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return xr(r)?r:n}var po=mt?function(e){return null==e?[]:(e=we(e),Ot(mt(e),(function(t){return qe.call(e,t)})))}:mc,_o=mt?function(e){for(var t=[];e;)Pt(t,po(e)),e=Ye(e);return t}:mc,vo=wr;function mo(e,t,n){for(var r=-1,i=(t=Si(t,e)).length,o=!1;++r<i;){var a=Vo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ts(i)&&So(a,i)&&(Ya(e)||Wa(e))}function go(e){return"function"!=typeof e.constructor||Ro(e)?{}:zn(Ye(e))}function yo(e){return Ya(e)||Wa(e)||!!(Xe&&e&&e[Xe])}function So(e,t){var n=typeof e;return!!(t=null==t?f:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function bo(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?qa(n)&&So(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function Eo(e,t){if(Ya(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ds(e))||(te.test(e)||!ee.test(e)||null!=t&&e in we(t))}function To(e){var t=so(e),n=Fn[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(Rn&&vo(new Rn(new ArrayBuffer(1)))!=M||wn&&vo(new wn)!=T||In&&vo(In.resolve())!=I||An&&vo(new An)!=O||On&&vo(new On)!=D)&&(vo=function(e){var t=wr(e),r=t==R?e.constructor:n,i=r?Bo(r):"";if(i)switch(i){case Pn:return M;case Mn:return T;case xn:return I;case Un:return O;case Ln:return D}return t});var Co=Pe?Qa:gc;function Ro(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function wo(e){return e==e&&!ns(e)}function Io(e,t){return function(r){return null!=r&&(r[e]===t&&(t!==n||e in we(r)))}}function Ao(e,t,r){return t=yn(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=yn(n.length-t,0),a=w(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=w(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),Ct(e,this,s)}}function Oo(e,t){return t.length<2?e:Cr(e,ii(t,0,-1))}function ko(e,t){for(var r=e.length,i=Sn(t.length,r),o=ki(e);i--;){var a=t[i];e[i]=So(a,r)?o[a]:n}return e}function No(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Do=Uo(ti),Po=ht||function(e,t){return ft.setTimeout(e,t)},Mo=Uo(ni);function xo(e,t,n){var r=t+"";return Mo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return wt(_,(function(n){var r="_."+n[0];t&n[1]&&!kt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Uo(e){var t=0,r=0;return function(){var i=bn(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Lo(e,t){var r=-1,i=e.length,o=i-1;for(t=t===n?i:t;++r<t;){var a=Jr(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=t,e}var jo=function(e){var t=Ua(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function Vo(e){if("string"==typeof e||ds(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bo(e){if(null!=e){try{return Me.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fo(e){if(e instanceof Wn)return e.clone();var t=new Gn(e.__wrapped__,e.__chain__);return t.__actions__=ki(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zo=Zr((function(e,t){return Ja(e)?fr(e,gr(t,1,Ja,!0)):[]})),Ho=Zr((function(e,t){var r=$o(t);return Ja(r)&&(r=n),Ja(e)?fr(e,gr(t,1,Ja,!0),uo(r,2)):[]})),Go=Zr((function(e,t){var r=$o(t);return Ja(r)&&(r=n),Ja(e)?fr(e,gr(t,1,Ja,!0),n,r):[]}));function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=yn(r+i,0)),Vt(e,uo(t,3),i)}function Yo(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==n&&(o=vs(r),o=r<0?yn(i+o,0):Sn(o,i-1)),Vt(e,uo(t,3),o,!0)}function Ko(e){return(null==e?0:e.length)?gr(e,1):[]}function qo(e){return e&&e.length?e[0]:n}var Jo=Zr((function(e){var t=Dt(e,gi);return t.length&&t[0]===e[0]?kr(t):[]})),Xo=Zr((function(e){var t=$o(e),r=Dt(e,gi);return t===$o(r)?t=n:r.pop(),r.length&&r[0]===e[0]?kr(r,uo(t,2)):[]})),Zo=Zr((function(e){var t=$o(e),r=Dt(e,gi);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?kr(r,n,t):[]}));function $o(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Qo=Zr(ea);function ea(e,t){return e&&e.length&&t&&t.length?Kr(e,t):e}var ta=ro((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return qr(e,Dt(t,(function(e){return So(e,n)?+e:e})).sort(Ii)),r}));function na(e){return null==e?e:Cn.call(e)}var ra=Zr((function(e){return li(gr(e,1,Ja,!0))})),ia=Zr((function(e){var t=$o(e);return Ja(t)&&(t=n),li(gr(e,1,Ja,!0),uo(t,2))})),oa=Zr((function(e){var t=$o(e);return t="function"==typeof t?t:n,li(gr(e,1,Ja,!0),n,t)}));function aa(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(Ja(e))return t=yn(e.length,t),!0})),qt(t,(function(t){return Dt(e,Gt(t))}))}function sa(e,t){if(!e||!e.length)return[];var r=aa(e);return null==t?r:Dt(r,(function(e){return Ct(t,n,e)}))}var ca=Zr((function(e,t){return Ja(e)?fr(e,t):[]})),ua=Zr((function(e){return vi(Ot(e,Ja))})),da=Zr((function(e){var t=$o(e);return Ja(t)&&(t=n),vi(Ot(e,Ja),uo(t,2))})),la=Zr((function(e){var t=$o(e);return t="function"==typeof t?t:n,vi(Ot(e,Ja),n,t)})),fa=Zr(aa);var ha=Zr((function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,sa(e,r)}));function pa(e){var t=Fn(e);return t.__chain__=!0,t}function _a(e,t){return t(e)}var va=ro((function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,o=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Wn&&So(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:_a,args:[o],thisArg:n}),new Gn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(n),e}))):this.thru(o)}));var ma=Di((function(e,t,n){xe.call(e,n)?++e[n]:ar(e,n,1)}));var ga=Vi(Wo),ya=Vi(Yo);function Sa(e,t){return(Ya(e)?wt:hr)(e,uo(t,3))}function ba(e,t){return(Ya(e)?It:pr)(e,uo(t,3))}var Ea=Di((function(e,t,n){xe.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Ta=Zr((function(e,t,n){var r=-1,i="function"==typeof t,o=qa(e)?w(e.length):[];return hr(e,(function(e){o[++r]=i?Ct(t,e,n):Nr(e,t,n)})),o})),Ca=Di((function(e,t,n){ar(e,n,t)}));function Ra(e,t){return(Ya(e)?Dt:Br)(e,uo(t,3))}var wa=Di((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ia=Zr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&bo(e,t[0],t[1])?t=[]:n>2&&bo(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,gr(t,1),[])})),Aa=lt||function(){return ft.Date.now()};function Oa(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,$i(e,u,n,n,n,n,t)}function ka(e,t){var i;if("function"!=typeof t)throw new Oe(r);return e=vs(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Na=Zr((function(e,t,n){var r=1;if(n.length){var i=un(n,co(Na));r|=s}return $i(e,r,t,n,i)})),Da=Zr((function(e,t,n){var r=3;if(n.length){var i=un(n,co(Da));r|=s}return $i(t,r,e,n,i)}));function Pa(e,t,i){var o,a,s,c,u,d,l=0,f=!1,h=!1,p=!0;if("function"!=typeof e)throw new Oe(r);function _(t){var r=o,i=a;return o=a=n,l=t,c=e.apply(i,r)}function v(e){return l=e,u=Po(g,t),f?_(e):c}function m(e){var r=e-d;return d===n||r>=t||r<0||h&&e-l>=s}function g(){var e=Aa();if(m(e))return y(e);u=Po(g,function(e){var n=t-(e-d);return h?Sn(n,s-(e-l)):n}(e))}function y(e){return u=n,p&&o?_(e):(o=a=n,c)}function S(){var e=Aa(),r=m(e);if(o=arguments,a=this,d=e,r){if(u===n)return v(d);if(h)return Ti(u),u=Po(g,t),_(d)}return u===n&&(u=Po(g,t)),c}return t=gs(t)||0,ns(i)&&(f=!!i.leading,s=(h="maxWait"in i)?yn(gs(i.maxWait)||0,t):s,p="trailing"in i?!!i.trailing:p),S.cancel=function(){u!==n&&Ti(u),l=0,o=d=a=u=n},S.flush=function(){return u===n?c:y(Aa())},S}var Ma=Zr((function(e,t){return lr(e,1,t)})),xa=Zr((function(e,t,n){return lr(e,gs(t)||0,n)}));function Ua(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ua.Cache||qn),n}function La(e){if("function"!=typeof e)throw new Oe(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ua.Cache=qn;var ja=bi((function(e,t){var n=(t=1==t.length&&Ya(t[0])?Dt(t[0],Xt(uo())):Dt(gr(t,1),Xt(uo()))).length;return Zr((function(r){for(var i=-1,o=Sn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Ct(e,this,r)}))})),Va=Zr((function(e,t){var r=un(t,co(Va));return $i(e,s,n,t,r)})),Ba=Zr((function(e,t){var r=un(t,co(Ba));return $i(e,c,n,t,r)})),Fa=ro((function(e,t){return $i(e,d,n,n,n,t)}));function za(e,t){return e===t||e!=e&&t!=t}var Ha=Ki(Ir),Ga=Ki((function(e,t){return e>=t})),Wa=Dr(function(){return arguments}())?Dr:function(e){return rs(e)&&xe.call(e,"callee")&&!qe.call(e,"callee")},Ya=w.isArray,Ka=gt?Xt(gt):function(e){return rs(e)&&wr(e)==P};function qa(e){return null!=e&&ts(e.length)&&!Qa(e)}function Ja(e){return rs(e)&&qa(e)}var Xa=Lt||gc,Za=yt?Xt(yt):function(e){return rs(e)&&wr(e)==y};function $a(e){if(!rs(e))return!1;var t=wr(e);return t==S||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Qa(e){if(!ns(e))return!1;var t=wr(e);return t==b||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==vs(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=f}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=St?Xt(St):function(e){return rs(e)&&vo(e)==T};function os(e){return"number"==typeof e||rs(e)&&wr(e)==C}function as(e){if(!rs(e)||wr(e)!=R)return!1;var t=Ye(e);if(null===t)return!0;var n=xe.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Me.call(n)==Ve}var ss=bt?Xt(bt):function(e){return rs(e)&&wr(e)==A};var cs=Et?Xt(Et):function(e){return rs(e)&&vo(e)==O};function us(e){return"string"==typeof e||!Ya(e)&&rs(e)&&wr(e)==k}function ds(e){return"symbol"==typeof e||rs(e)&&wr(e)==N}var ls=Tt?Xt(Tt):function(e){return rs(e)&&ts(e.length)&&!!ot[wr(e)]};var fs=Ki(Vr),hs=Ki((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(qa(e))return us(e)?hn(e):ki(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=vo(e);return(t==T?sn:t==O?dn:zs)(e)}function _s(e){return e?(e=gs(e))===l||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vs(e){var t=_s(e),n=t%1;return t==t?n?t-n:t:0}function ms(e){return e?cr(vs(e),0,p):0}function gs(e){if("number"==typeof e)return e;if(ds(e))return h;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ve.test(e);return n||ge.test(e)?ut(e.slice(2),n?2:8):_e.test(e)?h:+e}function ys(e){return Ni(e,Ms(e))}function Ss(e){return null==e?"":di(e)}var bs=Pi((function(e,t){if(Ro(t)||qa(t))Ni(t,Ps(t),e);else for(var n in t)xe.call(t,n)&&nr(e,n,t[n])})),Es=Pi((function(e,t){Ni(t,Ms(t),e)})),Ts=Pi((function(e,t,n,r){Ni(t,Ms(t),e,r)})),Cs=Pi((function(e,t,n,r){Ni(t,Ps(t),e,r)})),Rs=ro(sr);var ws=Zr((function(e,t){e=we(e);var r=-1,i=t.length,o=i>2?t[2]:n;for(o&&bo(t[0],t[1],o)&&(i=1);++r<i;)for(var a=t[r],s=Ms(a),c=-1,u=s.length;++c<u;){var d=s[c],l=e[d];(l===n||za(l,De[d])&&!xe.call(e,d))&&(e[d]=a[d])}return e})),Is=Zr((function(e){return e.push(n,eo),Ct(Us,n,e)}));function As(e,t,r){var i=null==e?n:Cr(e,t);return i===n?r:i}function Os(e,t){return null!=e&&mo(e,t,Or)}var ks=zi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=n}),nc(oc)),Ns=zi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),xe.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Ds=Zr(Nr);function Ps(e){return qa(e)?Zn(e):Lr(e)}function Ms(e){return qa(e)?Zn(e,!0):jr(e)}var xs=Pi((function(e,t,n){Hr(e,t,n)})),Us=Pi((function(e,t,n,r){Hr(e,t,n,r)})),Ls=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,(function(t){return t=Si(t,e),r||(r=t.length>1),t})),Ni(e,oo(e),n),r&&(n=ur(n,7,to));for(var i=t.length;i--;)fi(n,t[i]);return n}));var js=ro((function(e,t){return null==e?{}:function(e,t){return Yr(e,t,(function(t,n){return Os(e,n)}))}(e,t)}));function Vs(e,t){if(null==e)return{};var n=Dt(oo(e),(function(e){return[e]}));return t=uo(t),Yr(e,n,(function(e,n){return t(e,n[0])}))}var Bs=Zi(Ps),Fs=Zi(Ms);function zs(e){return null==e?[]:Zt(e,Ps(e))}var Hs=Li((function(e,t,n){return t=t.toLowerCase(),e+(n?Gs(t):t)}));function Gs(e){return $s(Ss(e).toLowerCase())}function Ws(e){return(e=Ss(e))&&e.replace(Se,nn).replace($e,"")}var Ys=Li((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ks=Li((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),qs=Ui("toLowerCase");var Js=Li((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xs=Li((function(e,t,n){return e+(n?" ":"")+$s(t)}));var Zs=Li((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$s=Ui("toUpperCase");function Qs(e,t,r){return e=Ss(e),(t=r?n:t)===n?function(e){return nt.test(e)}(e)?function(e){return e.match(et)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var ec=Zr((function(e,t){try{return Ct(e,n,t)}catch(e){return $a(e)?e:new Te(e)}})),tc=ro((function(e,t){return wt(t,(function(t){t=Vo(t),ar(e,t,Na(e[t],e))})),e}));function nc(e){return function(){return e}}var rc=Bi(),ic=Bi(!0);function oc(e){return e}function ac(e){return Ur("function"==typeof e?e:ur(e,1))}var sc=Zr((function(e,t){return function(n){return Nr(n,e,t)}})),cc=Zr((function(e,t){return function(n){return Nr(e,n,t)}}));function uc(e,t,n){var r=Ps(t),i=Tr(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Tr(t,Ps(t)));var o=!(ns(n)&&"chain"in n&&!n.chain),a=Qa(e);return wt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=ki(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Pt([this.value()],arguments))})})),e}function dc(){}var lc=Gi(Dt),fc=Gi(At),hc=Gi(Ut);function pc(e){return Eo(e)?Gt(Vo(e)):function(e){return function(t){return Cr(t,e)}}(e)}var _c=Yi(),vc=Yi(!0);function mc(){return[]}function gc(){return!1}var yc=Hi((function(e,t){return e+t}),0),Sc=Ji("ceil"),bc=Hi((function(e,t){return e/t}),1),Ec=Ji("floor");var Tc,Cc=Hi((function(e,t){return e*t}),1),Rc=Ji("round"),wc=Hi((function(e,t){return e-t}),0);return Fn.after=function(e,t){if("function"!=typeof t)throw new Oe(r);return e=vs(e),function(){if(--e<1)return t.apply(this,arguments)}},Fn.ary=Oa,Fn.assign=bs,Fn.assignIn=Es,Fn.assignInWith=Ts,Fn.assignWith=Cs,Fn.at=Rs,Fn.before=ka,Fn.bind=Na,Fn.bindAll=tc,Fn.bindKey=Da,Fn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ya(e)?e:[e]},Fn.chain=pa,Fn.chunk=function(e,t,r){t=(r?bo(e,t,r):t===n)?1:yn(vs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=w(pt(i/t));o<i;)s[a++]=ii(e,o,o+=t);return s},Fn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Fn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=w(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Pt(Ya(n)?ki(n):[n],gr(t,1))},Fn.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Oe(r);return[n(e[0]),e[1]]})):[],Zr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Ct(i[0],this,n))return Ct(i[1],this,n)}}))},Fn.conforms=function(e){return function(e){var t=Ps(e);return function(n){return dr(n,e,t)}}(ur(e,1))},Fn.constant=nc,Fn.countBy=ma,Fn.create=function(e,t){var n=zn(e);return null==t?n:or(n,t)},Fn.curry=function e(t,r,i){var o=$i(t,8,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},Fn.curryRight=function e(t,r,i){var o=$i(t,a,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},Fn.debounce=Pa,Fn.defaults=ws,Fn.defaultsDeep=Is,Fn.defer=Ma,Fn.delay=xa,Fn.difference=zo,Fn.differenceBy=Ho,Fn.differenceWith=Go,Fn.drop=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,(t=r||t===n?1:vs(t))<0?0:t,i):[]},Fn.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,0,(t=i-(t=r||t===n?1:vs(t)))<0?0:t):[]},Fn.dropRightWhile=function(e,t){return e&&e.length?pi(e,uo(t,3),!0,!0):[]},Fn.dropWhile=function(e,t){return e&&e.length?pi(e,uo(t,3),!0):[]},Fn.fill=function(e,t,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&bo(e,t,r)&&(r=0,i=o),function(e,t,r,i){var o=e.length;for((r=vs(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:vs(i))<0&&(i+=o),i=r>i?0:ms(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},Fn.filter=function(e,t){return(Ya(e)?Ot:mr)(e,uo(t,3))},Fn.flatMap=function(e,t){return gr(Ra(e,t),1)},Fn.flatMapDeep=function(e,t){return gr(Ra(e,t),l)},Fn.flatMapDepth=function(e,t,r){return r=r===n?1:vs(r),gr(Ra(e,t),r)},Fn.flatten=Ko,Fn.flattenDeep=function(e){return(null==e?0:e.length)?gr(e,l):[]},Fn.flattenDepth=function(e,t){return(null==e?0:e.length)?gr(e,t=t===n?1:vs(t)):[]},Fn.flip=function(e){return $i(e,512)},Fn.flow=rc,Fn.flowRight=ic,Fn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Fn.functions=function(e){return null==e?[]:Tr(e,Ps(e))},Fn.functionsIn=function(e){return null==e?[]:Tr(e,Ms(e))},Fn.groupBy=Ea,Fn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Fn.intersection=Jo,Fn.intersectionBy=Xo,Fn.intersectionWith=Zo,Fn.invert=ks,Fn.invertBy=Ns,Fn.invokeMap=Ta,Fn.iteratee=ac,Fn.keyBy=Ca,Fn.keys=Ps,Fn.keysIn=Ms,Fn.map=Ra,Fn.mapKeys=function(e,t){var n={};return t=uo(t,3),br(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Fn.mapValues=function(e,t){var n={};return t=uo(t,3),br(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Fn.matches=function(e){return Fr(ur(e,1))},Fn.matchesProperty=function(e,t){return zr(e,ur(t,1))},Fn.memoize=Ua,Fn.merge=xs,Fn.mergeWith=Us,Fn.method=sc,Fn.methodOf=cc,Fn.mixin=uc,Fn.negate=La,Fn.nthArg=function(e){return e=vs(e),Zr((function(t){return Gr(t,e)}))},Fn.omit=Ls,Fn.omitBy=function(e,t){return Vs(e,La(uo(t)))},Fn.once=function(e){return ka(2,e)},Fn.orderBy=function(e,t,r,i){return null==e?[]:(Ya(t)||(t=null==t?[]:[t]),Ya(r=i?n:r)||(r=null==r?[]:[r]),Wr(e,t,r))},Fn.over=lc,Fn.overArgs=ja,Fn.overEvery=fc,Fn.overSome=hc,Fn.partial=Va,Fn.partialRight=Ba,Fn.partition=wa,Fn.pick=js,Fn.pickBy=Vs,Fn.property=pc,Fn.propertyOf=function(e){return function(t){return null==e?n:Cr(e,t)}},Fn.pull=Qo,Fn.pullAll=ea,Fn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,uo(n,2)):e},Fn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Kr(e,t,n,r):e},Fn.pullAt=ta,Fn.range=_c,Fn.rangeRight=vc,Fn.rearg=Fa,Fn.reject=function(e,t){return(Ya(e)?Ot:mr)(e,La(uo(t,3)))},Fn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=uo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return qr(e,i),n},Fn.rest=function(e,t){if("function"!=typeof e)throw new Oe(r);return Zr(e,t=t===n?t:vs(t))},Fn.reverse=na,Fn.sampleSize=function(e,t,r){return t=(r?bo(e,t,r):t===n)?1:vs(t),(Ya(e)?Qn:Qr)(e,t)},Fn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Fn.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:ei(e,t,r,i)},Fn.shuffle=function(e){return(Ya(e)?er:ri)(e)},Fn.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&bo(e,t,r)?(t=0,r=i):(t=null==t?0:vs(t),r=r===n?i:vs(r)),ii(e,t,r)):[]},Fn.sortBy=Ia,Fn.sortedUniq=function(e){return e&&e.length?ci(e):[]},Fn.sortedUniqBy=function(e,t){return e&&e.length?ci(e,uo(t,2)):[]},Fn.split=function(e,t,r){return r&&"number"!=typeof r&&bo(e,t,r)&&(t=r=n),(r=r===n?p:r>>>0)?(e=Ss(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=di(t))&&an(e)?Ei(hn(e),0,r):e.split(t,r):[]},Fn.spread=function(e,t){if("function"!=typeof e)throw new Oe(r);return t=null==t?0:yn(vs(t),0),Zr((function(n){var r=n[t],i=Ei(n,0,t);return r&&Pt(i,r),Ct(e,this,i)}))},Fn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Fn.take=function(e,t,r){return e&&e.length?ii(e,0,(t=r||t===n?1:vs(t))<0?0:t):[]},Fn.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?ii(e,(t=i-(t=r||t===n?1:vs(t)))<0?0:t,i):[]},Fn.takeRightWhile=function(e,t){return e&&e.length?pi(e,uo(t,3),!1,!0):[]},Fn.takeWhile=function(e,t){return e&&e.length?pi(e,uo(t,3)):[]},Fn.tap=function(e,t){return t(e),e},Fn.throttle=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new Oe(r);return ns(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Pa(e,t,{leading:i,maxWait:t,trailing:o})},Fn.thru=_a,Fn.toArray=ps,Fn.toPairs=Bs,Fn.toPairsIn=Fs,Fn.toPath=function(e){return Ya(e)?Dt(e,Vo):ds(e)?[e]:ki(jo(Ss(e)))},Fn.toPlainObject=ys,Fn.transform=function(e,t,n){var r=Ya(e),i=r||Xa(e)||ls(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ns(e)&&Qa(o)?zn(Ye(e)):{}}return(i?wt:br)(e,(function(e,r,i){return t(n,e,r,i)})),n},Fn.unary=function(e){return Oa(e,1)},Fn.union=ra,Fn.unionBy=ia,Fn.unionWith=oa,Fn.uniq=function(e){return e&&e.length?li(e):[]},Fn.uniqBy=function(e,t){return e&&e.length?li(e,uo(t,2)):[]},Fn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?li(e,n,t):[]},Fn.unset=function(e,t){return null==e||fi(e,t)},Fn.unzip=aa,Fn.unzipWith=sa,Fn.update=function(e,t,n){return null==e?e:hi(e,t,yi(n))},Fn.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:hi(e,t,yi(r),i)},Fn.values=zs,Fn.valuesIn=function(e){return null==e?[]:Zt(e,Ms(e))},Fn.without=ca,Fn.words=Qs,Fn.wrap=function(e,t){return Va(yi(t),e)},Fn.xor=ua,Fn.xorBy=da,Fn.xorWith=la,Fn.zip=fa,Fn.zipObject=function(e,t){return mi(e||[],t||[],nr)},Fn.zipObjectDeep=function(e,t){return mi(e||[],t||[],ei)},Fn.zipWith=ha,Fn.entries=Bs,Fn.entriesIn=Fs,Fn.extend=Es,Fn.extendWith=Ts,uc(Fn,Fn),Fn.add=yc,Fn.attempt=ec,Fn.camelCase=Hs,Fn.capitalize=Gs,Fn.ceil=Sc,Fn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=gs(r))==r?r:0),t!==n&&(t=(t=gs(t))==t?t:0),cr(gs(e),t,r)},Fn.clone=function(e){return ur(e,4)},Fn.cloneDeep=function(e){return ur(e,5)},Fn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:n)},Fn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:n)},Fn.conformsTo=function(e,t){return null==t||dr(e,t,Ps(t))},Fn.deburr=Ws,Fn.defaultTo=function(e,t){return null==e||e!=e?t:e},Fn.divide=bc,Fn.endsWith=function(e,t,r){e=Ss(e),t=di(t);var i=e.length,o=r=r===n?i:cr(vs(r),0,i);return(r-=t.length)>=0&&e.slice(r,o)==t},Fn.eq=za,Fn.escape=function(e){return(e=Ss(e))&&X.test(e)?e.replace(q,rn):e},Fn.escapeRegExp=function(e){return(e=Ss(e))&&ie.test(e)?e.replace(re,"\\$&"):e},Fn.every=function(e,t,r){var i=Ya(e)?At:_r;return r&&bo(e,t,r)&&(t=n),i(e,uo(t,3))},Fn.find=ga,Fn.findIndex=Wo,Fn.findKey=function(e,t){return jt(e,uo(t,3),br)},Fn.findLast=ya,Fn.findLastIndex=Yo,Fn.findLastKey=function(e,t){return jt(e,uo(t,3),Er)},Fn.floor=Ec,Fn.forEach=Sa,Fn.forEachRight=ba,Fn.forIn=function(e,t){return null==e?e:yr(e,uo(t,3),Ms)},Fn.forInRight=function(e,t){return null==e?e:Sr(e,uo(t,3),Ms)},Fn.forOwn=function(e,t){return e&&br(e,uo(t,3))},Fn.forOwnRight=function(e,t){return e&&Er(e,uo(t,3))},Fn.get=As,Fn.gt=Ha,Fn.gte=Ga,Fn.has=function(e,t){return null!=e&&mo(e,t,Ar)},Fn.hasIn=Os,Fn.head=qo,Fn.identity=oc,Fn.includes=function(e,t,n,r){e=qa(e)?e:zs(e),n=n&&!r?vs(n):0;var i=e.length;return n<0&&(n=yn(i+n,0)),us(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Bt(e,t,n)>-1},Fn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=yn(r+i,0)),Bt(e,t,i)},Fn.inRange=function(e,t,r){return t=_s(t),r===n?(r=t,t=0):r=_s(r),function(e,t,n){return e>=Sn(t,n)&&e<yn(t,n)}(e=gs(e),t,r)},Fn.invoke=Ds,Fn.isArguments=Wa,Fn.isArray=Ya,Fn.isArrayBuffer=Ka,Fn.isArrayLike=qa,Fn.isArrayLikeObject=Ja,Fn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&wr(e)==g},Fn.isBuffer=Xa,Fn.isDate=Za,Fn.isElement=function(e){return rs(e)&&1===e.nodeType&&!as(e)},Fn.isEmpty=function(e){if(null==e)return!0;if(qa(e)&&(Ya(e)||"string"==typeof e||"function"==typeof e.splice||Xa(e)||ls(e)||Wa(e)))return!e.length;var t=vo(e);if(t==T||t==O)return!e.size;if(Ro(e))return!Lr(e).length;for(var n in e)if(xe.call(e,n))return!1;return!0},Fn.isEqual=function(e,t){return Pr(e,t)},Fn.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?Pr(e,t,n,r):!!i},Fn.isError=$a,Fn.isFinite=function(e){return"number"==typeof e&&Wt(e)},Fn.isFunction=Qa,Fn.isInteger=es,Fn.isLength=ts,Fn.isMap=is,Fn.isMatch=function(e,t){return e===t||Mr(e,t,fo(t))},Fn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Mr(e,t,fo(t),r)},Fn.isNaN=function(e){return os(e)&&e!=+e},Fn.isNative=function(e){if(Co(e))throw new Te("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return xr(e)},Fn.isNil=function(e){return null==e},Fn.isNull=function(e){return null===e},Fn.isNumber=os,Fn.isObject=ns,Fn.isObjectLike=rs,Fn.isPlainObject=as,Fn.isRegExp=ss,Fn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=f},Fn.isSet=cs,Fn.isString=us,Fn.isSymbol=ds,Fn.isTypedArray=ls,Fn.isUndefined=function(e){return e===n},Fn.isWeakMap=function(e){return rs(e)&&vo(e)==D},Fn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==wr(e)},Fn.join=function(e,t){return null==e?"":mn.call(e,t)},Fn.kebabCase=Ys,Fn.last=$o,Fn.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=vs(r))<0?yn(i+o,0):Sn(o,i-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Vt(e,zt,o,!0)},Fn.lowerCase=Ks,Fn.lowerFirst=qs,Fn.lt=fs,Fn.lte=hs,Fn.max=function(e){return e&&e.length?vr(e,oc,Ir):n},Fn.maxBy=function(e,t){return e&&e.length?vr(e,uo(t,2),Ir):n},Fn.mean=function(e){return Ht(e,oc)},Fn.meanBy=function(e,t){return Ht(e,uo(t,2))},Fn.min=function(e){return e&&e.length?vr(e,oc,Vr):n},Fn.minBy=function(e,t){return e&&e.length?vr(e,uo(t,2),Vr):n},Fn.stubArray=mc,Fn.stubFalse=gc,Fn.stubObject=function(){return{}},Fn.stubString=function(){return""},Fn.stubTrue=function(){return!0},Fn.multiply=Cc,Fn.nth=function(e,t){return e&&e.length?Gr(e,vs(t)):n},Fn.noConflict=function(){return ft._===this&&(ft._=Be),this},Fn.noop=dc,Fn.now=Aa,Fn.pad=function(e,t,n){e=Ss(e);var r=(t=vs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Wi(vt(i),n)+e+Wi(pt(i),n)},Fn.padEnd=function(e,t,n){e=Ss(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?e+Wi(t-r,n):e},Fn.padStart=function(e,t,n){e=Ss(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?Wi(t-r,n)+e:e},Fn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),En(Ss(e).replace(oe,""),t||0)},Fn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&bo(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=_s(e),t===n?(t=e,e=0):t=_s(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var o=Tn();return Sn(e+o*(t-e+ct("1e-"+((o+"").length-1))),t)}return Jr(e,t)},Fn.reduce=function(e,t,n){var r=Ya(e)?Mt:Yt,i=arguments.length<3;return r(e,uo(t,4),n,i,hr)},Fn.reduceRight=function(e,t,n){var r=Ya(e)?xt:Yt,i=arguments.length<3;return r(e,uo(t,4),n,i,pr)},Fn.repeat=function(e,t,r){return t=(r?bo(e,t,r):t===n)?1:vs(t),Xr(Ss(e),t)},Fn.replace=function(){var e=arguments,t=Ss(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Fn.result=function(e,t,r){var i=-1,o=(t=Si(t,e)).length;for(o||(o=1,e=n);++i<o;){var a=null==e?n:e[Vo(t[i])];a===n&&(i=o,a=r),e=Qa(a)?a.call(e):a}return e},Fn.round=Rc,Fn.runInContext=e,Fn.sample=function(e){return(Ya(e)?$n:$r)(e)},Fn.size=function(e){if(null==e)return 0;if(qa(e))return us(e)?fn(e):e.length;var t=vo(e);return t==T||t==O?e.size:Lr(e).length},Fn.snakeCase=Js,Fn.some=function(e,t,r){var i=Ya(e)?Ut:oi;return r&&bo(e,t,r)&&(t=n),i(e,uo(t,3))},Fn.sortedIndex=function(e,t){return ai(e,t)},Fn.sortedIndexBy=function(e,t,n){return si(e,t,uo(n,2))},Fn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&za(e[r],t))return r}return-1},Fn.sortedLastIndex=function(e,t){return ai(e,t,!0)},Fn.sortedLastIndexBy=function(e,t,n){return si(e,t,uo(n,2),!0)},Fn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if(za(e[n],t))return n}return-1},Fn.startCase=Xs,Fn.startsWith=function(e,t,n){return e=Ss(e),n=null==n?0:cr(vs(n),0,e.length),t=di(t),e.slice(n,n+t.length)==t},Fn.subtract=wc,Fn.sum=function(e){return e&&e.length?Kt(e,oc):0},Fn.sumBy=function(e,t){return e&&e.length?Kt(e,uo(t,2)):0},Fn.template=function(e,t,r){var i=Fn.templateSettings;r&&bo(e,t,r)&&(t=n),e=Ss(e),t=Ts({},t,i,Qi);var o,a,s=Ts({},t.imports,i.imports,Qi),c=Ps(s),u=Zt(s,c),d=0,l=t.interpolate||be,f="__p += '",h=Ie((t.escape||be).source+"|"+l.source+"|"+(l===Q?he:be).source+"|"+(t.evaluate||be).source+"|$","g"),p="//# sourceURL="+(xe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(h,(function(t,n,r,i,s,c){return r||(r=i),f+=e.slice(d,c).replace(Ee,on),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=c+t.length,t})),f+="';\n";var _=xe.call(t,"variable")&&t.variable;if(_){if(le.test(_))throw new Te("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(G,""):f).replace(W,"$1").replace(Y,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=ec((function(){return Ce(c,p+"return "+f).apply(n,u)}));if(v.source=f,$a(v))throw v;return v},Fn.times=function(e,t){if((e=vs(e))<1||e>f)return[];var n=p,r=Sn(e,p);t=uo(t),e-=p;for(var i=qt(r,t);++n<e;)t(n);return i},Fn.toFinite=_s,Fn.toInteger=vs,Fn.toLength=ms,Fn.toLower=function(e){return Ss(e).toLowerCase()},Fn.toNumber=gs,Fn.toSafeInteger=function(e){return e?cr(vs(e),-9007199254740991,f):0===e?e:0},Fn.toString=Ss,Fn.toUpper=function(e){return Ss(e).toUpperCase()},Fn.trim=function(e,t,r){if((e=Ss(e))&&(r||t===n))return Jt(e);if(!e||!(t=di(t)))return e;var i=hn(e),o=hn(t);return Ei(i,Qt(i,o),en(i,o)+1).join("")},Fn.trimEnd=function(e,t,r){if((e=Ss(e))&&(r||t===n))return e.slice(0,pn(e)+1);if(!e||!(t=di(t)))return e;var i=hn(e);return Ei(i,0,en(i,hn(t))+1).join("")},Fn.trimStart=function(e,t,r){if((e=Ss(e))&&(r||t===n))return e.replace(oe,"");if(!e||!(t=di(t)))return e;var i=hn(e);return Ei(i,Qt(i,hn(t))).join("")},Fn.truncate=function(e,t){var r=30,i="...";if(ns(t)){var o="separator"in t?t.separator:o;r="length"in t?vs(t.length):r,i="omission"in t?di(t.omission):i}var a=(e=Ss(e)).length;if(an(e)){var s=hn(e);a=s.length}if(r>=a)return e;var c=r-fn(i);if(c<1)return i;var u=s?Ei(s,0,c).join(""):e.slice(0,c);if(o===n)return u+i;if(s&&(c+=u.length-c),ss(o)){if(e.slice(c).search(o)){var d,l=u;for(o.global||(o=Ie(o.source,Ss(pe.exec(o))+"g")),o.lastIndex=0;d=o.exec(l);)var f=d.index;u=u.slice(0,f===n?c:f)}}else if(e.indexOf(di(o),c)!=c){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i},Fn.unescape=function(e){return(e=Ss(e))&&J.test(e)?e.replace(K,_n):e},Fn.uniqueId=function(e){var t=++Ue;return Ss(e)+t},Fn.upperCase=Zs,Fn.upperFirst=$s,Fn.each=Sa,Fn.eachRight=ba,Fn.first=qo,uc(Fn,(Tc={},br(Fn,(function(e,t){xe.call(Fn.prototype,t)||(Tc[t]=e)})),Tc),{chain:!1}),Fn.VERSION="4.17.21",wt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Fn[e].placeholder=Fn})),wt(["drop","take"],(function(e,t){Wn.prototype[e]=function(r){r=r===n?1:yn(vs(r),0);var i=this.__filtered__&&!t?new Wn(this):this.clone();return i.__filtered__?i.__takeCount__=Sn(r,i.__takeCount__):i.__views__.push({size:Sn(r,p),type:e+(i.__dir__<0?"Right":"")}),i},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),wt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),wt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),wt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(oc)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Zr((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return Nr(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(La(uo(e)))},Wn.prototype.slice=function(e,t){e=vs(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Wn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=vs(t))<0?r.dropRight(-t):r.take(t-e)),r)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(p)},br(Wn.prototype,(function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=Fn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(Fn.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,c=t instanceof Wn,u=s[0],d=c||Ya(t),l=function(e){var t=o.apply(Fn,Pt([e],s));return i&&f?t[0]:t};d&&r&&"function"==typeof u&&1!=u.length&&(c=d=!1);var f=this.__chain__,h=!!this.__actions__.length,p=a&&!f,_=c&&!h;if(!a&&d){t=_?t:new Wn(this);var v=e.apply(t,s);return v.__actions__.push({func:_a,args:[l],thisArg:n}),new Gn(v,f)}return p&&_?e.apply(this,s):(v=this.thru(l),p?i?v.value()[0]:v.value():v)})})),wt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ke[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Fn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ya(i)?i:[],e)}return this[n]((function(n){return t.apply(Ya(n)?n:[],e)}))}})),br(Wn.prototype,(function(e,t){var n=Fn[t];if(n){var r=n.name+"";xe.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:t,func:n})}})),Dn[Fi(n,2).name]=[{name:"wrapper",func:n}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=ki(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=ki(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=ki(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ya(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Sn(t,e+a);break;case"takeRight":e=yn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,d=this.__iteratees__,l=d.length,f=0,h=Sn(c,this.__takeCount__);if(!n||!r&&i==c&&h==c)return _i(e,this.__actions__);var p=[];e:for(;c--&&f<h;){for(var _=-1,v=e[u+=t];++_<l;){var m=d[_],g=m.iteratee,y=m.type,S=g(v);if(2==y)v=S;else if(!S){if(1==y)continue e;break e}}p[f++]=v}return p},Fn.prototype.at=va,Fn.prototype.chain=function(){return pa(this)},Fn.prototype.commit=function(){return new Gn(this.value(),this.__chain__)},Fn.prototype.next=function(){this.__values__===n&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},Fn.prototype.plant=function(e){for(var t,r=this;r instanceof Hn;){var i=Fo(r);i.__index__=0,i.__values__=n,t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t},Fn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:_a,args:[na],thisArg:n}),new Gn(t,this.__chain__)}return this.thru(na)},Fn.prototype.toJSON=Fn.prototype.valueOf=Fn.prototype.value=function(){return _i(this.__wrapped__,this.__actions__)},Fn.prototype.first=Fn.prototype.head,Qe&&(Fn.prototype[Qe]=function(){return this}),Fn}();pt?((pt.exports=vn)._=vn,ht._=vn):ft._=vn}).call(w)}(hx,hx.exports);var px=k,_x=Tt("iterator"),vx=!px((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[_x]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),mx=q,gx=2147483647,yx=/[^\0-\u007E]/,Sx=/[.\u3002\uFF0E\uFF61]/g,bx="Overflow: input needs wider integers to process",Ex=A.RangeError,Tx=mx(Sx.exec),Cx=Math.floor,Rx=String.fromCharCode,wx=mx("".charCodeAt),Ix=mx([].join),Ax=mx([].push),Ox=mx("".replace),kx=mx("".split),Nx=mx("".toLowerCase),Dx=function(e){return e+22+75*(e<26)},Px=function(e,t,n){var r=0;for(e=n?Cx(e/700):e>>1,e+=Cx(e/t);e>455;)e=Cx(e/35),r+=36;return Cx(r+36*e/(e+38))},Mx=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=wx(e,n++);if(i>=55296&&i<=56319&&n<r){var o=wx(e,n++);56320==(64512&o)?Ax(t,((1023&i)<<10)+(1023&o)+65536):(Ax(t,i),n--)}else Ax(t,i)}return t}(e);var n,r,i=e.length,o=128,a=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&Ax(t,Rx(r));var c=t.length,u=c;for(c&&Ax(t,"-");u<i;){var d=gx;for(n=0;n<e.length;n++)(r=e[n])>=o&&r<d&&(d=r);var l=u+1;if(d-o>Cx((gx-a)/l))throw Ex(bx);for(a+=(d-o)*l,o=d,n=0;n<e.length;n++){if((r=e[n])<o&&++a>gx)throw Ex(bx);if(r==o){for(var f=a,h=36;;){var p=h<=s?1:h>=s+26?26:h-s;if(f<p)break;var _=f-p,v=36-p;Ax(t,Rx(Dx(p+_%v))),f=Cx(_/v),h+=36}Ax(t,Rx(Dx(f))),s=Px(a,l,u==c),a=0,u++}}a++,o++}return Ix(t,"")},xx=vi,Ux=A,Lx=ve,jx=x,Vx=q,Bx=vx,Fx=yn.exports,zx=xu,Hx=Da,Gx=Va,Wx=Qn,Yx=uu,Kx=de,qx=st,Jx=vc,Xx=kc,Zx=rn,$x=fe,Qx=sd,eU=ta,tU=z,nU=zc,rU=xc,iU=Wf,oU=D_,aU=Tt("iterator"),sU="URLSearchParams",cU="URLSearchParamsIterator",uU=Wx.set,dU=Wx.getterFor(sU),lU=Wx.getterFor(cU),fU=Lx("fetch"),hU=Lx("Request"),pU=Lx("Headers"),_U=hU&&hU.prototype,vU=pU&&pU.prototype,mU=Ux.RegExp,gU=Ux.TypeError,yU=Ux.decodeURIComponent,SU=Ux.encodeURIComponent,bU=Vx("".charAt),EU=Vx([].join),TU=Vx([].push),CU=Vx("".replace),RU=Vx([].shift),wU=Vx([].splice),IU=Vx("".split),AU=Vx("".slice),OU=/\+/g,kU=Array(4),NU=function(e){return kU[e-1]||(kU[e-1]=mU("((?:%[\\da-f]{2}){"+e+"})","gi"))},DU=function(e){try{return yU(e)}catch(t){return e}},PU=function(e){var t=CU(e,OU," "),n=4;try{return yU(t)}catch(e){for(;n;)t=CU(t,NU(n--),DU);return t}},MU=/[!'()~]|%20/g,xU={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},UU=function(e){return xU[e]},LU=function(e){return CU(SU(e),MU,UU)},jU=Gx((function(e,t){uU(this,{type:cU,iterator:nU(dU(e).entries),kind:t})}),"Iterator",(function(){var e=lU(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),VU=function(e){this.entries=[],this.url=null,void 0!==e&&($x(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===bU(e,0)?AU(e,1):e:Qx(e)))};VU.prototype={type:sU,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,i,o,a,s,c=rU(e);if(c)for(n=(t=nU(e,c)).next;!(r=jx(n,t)).done;){if(o=(i=nU(Zx(r.value))).next,(a=jx(o,i)).done||(s=jx(o,i)).done||!jx(o,i).done)throw gU("Expected sequence with length 2");TU(this.entries,{key:Qx(a.value),value:Qx(s.value)})}else for(var u in e)qx(e,u)&&TU(this.entries,{key:u,value:Qx(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=IU(e,"&"),i=0;i<r.length;)(t=r[i++]).length&&(n=IU(t,"="),TU(this.entries,{key:PU(RU(n)),value:PU(EU(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],TU(n,LU(e.key)+"="+LU(e.value));return EU(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var BU=function(){Yx(this,FU);var e=arguments.length>0?arguments[0]:void 0;uU(this,new VU(e))},FU=BU.prototype;if(zx(FU,{append:function(e,t){iU(arguments.length,2);var n=dU(this);TU(n.entries,{key:Qx(e),value:Qx(t)}),n.updateURL()},delete:function(e){iU(arguments.length,1);for(var t=dU(this),n=t.entries,r=Qx(e),i=0;i<n.length;)n[i].key===r?wU(n,i,1):i++;t.updateURL()},get:function(e){iU(arguments.length,1);for(var t=dU(this).entries,n=Qx(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){iU(arguments.length,1);for(var t=dU(this).entries,n=Qx(e),r=[],i=0;i<t.length;i++)t[i].key===n&&TU(r,t[i].value);return r},has:function(e){iU(arguments.length,1);for(var t=dU(this).entries,n=Qx(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){iU(arguments.length,1);for(var n,r=dU(this),i=r.entries,o=!1,a=Qx(e),s=Qx(t),c=0;c<i.length;c++)(n=i[c]).key===a&&(o?wU(i,c--,1):(o=!0,n.value=s));o||TU(i,{key:a,value:s}),r.updateURL()},sort:function(){var e=dU(this);oU(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=dU(this).entries,r=Jx(e,arguments.length>1?arguments[1]:void 0),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new jU(this,"keys")},values:function(){return new jU(this,"values")},entries:function(){return new jU(this,"entries")}},{enumerable:!0}),Fx(FU,aU,FU.entries,{name:"entries"}),Fx(FU,"toString",(function(){return dU(this).serialize()}),{enumerable:!0}),Hx(BU,sU),xx({global:!0,forced:!Bx},{URLSearchParams:BU}),!Bx&&Kx(pU)){var zU=Vx(vU.has),HU=Vx(vU.set),GU=function(e){if($x(e)){var t,n=e.body;if(Xx(n)===sU)return t=e.headers?new pU(e.headers):new pU,zU(t,"content-type")||HU(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),eU(e,{body:tU(0,Qx(n)),headers:tU(0,t)})}return e};if(Kx(fU)&&xx({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return fU(e,arguments.length>1?GU(arguments[1]):{})}}),Kx(hU)){var WU=function(e){return Yx(this,_U),new hU(e,arguments.length>1?GU(arguments[1]):{})};_U.constructor=WU,WU.prototype=_U,xx({global:!0,forced:!0},{Request:WU})}}var YU,KU={URLSearchParams:BU,getState:dU},qU=vi,JU=N,XU=vx,ZU=A,$U=vc,QU=q,eL=Do.f,tL=yn.exports,nL=uu,rL=st,iL=YN,oL=AM,aL=js,sL=vd.codeAt,cL=function(e){var t,n,r=[],i=kx(Ox(Nx(e),Sx,"."),".");for(t=0;t<i.length;t++)n=i[t],Ax(r,Tx(yx,n)?"xn--"+Mx(n):n);return Ix(r,".")},uL=sd,dL=Da,lL=Wf,fL=KU,hL=Qn,pL=hL.set,_L=hL.getterFor("URL"),vL=fL.URLSearchParams,mL=fL.getState,gL=ZU.URL,yL=ZU.TypeError,SL=ZU.parseInt,bL=Math.floor,EL=Math.pow,TL=QU("".charAt),CL=QU(/./.exec),RL=QU([].join),wL=QU(1..toString),IL=QU([].pop),AL=QU([].push),OL=QU("".replace),kL=QU([].shift),NL=QU("".split),DL=QU("".slice),PL=QU("".toLowerCase),ML=QU([].unshift),xL="Invalid scheme",UL="Invalid host",LL="Invalid port",jL=/[a-z]/i,VL=/[\d+-.a-z]/i,BL=/\d/,FL=/^0x/i,zL=/^[0-7]+$/,HL=/^\d+$/,GL=/^[\da-f]+$/i,WL=/[\0\t\n\r #%/:<>?@[\\\]^|]/,YL=/[\0\t\n\r #/:<>?@[\\\]^|]/,KL=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,qL=/[\t\n\r]/g,JL=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)ML(t,e%256),e=bL(e/256);return RL(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=wL(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},XL={},ZL=iL({},XL,{" ":1,'"':1,"<":1,">":1,"`":1}),$L=iL({},ZL,{"#":1,"?":1,"{":1,"}":1}),QL=iL({},$L,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ej=function(e,t){var n=sL(e,0);return n>32&&n<127&&!rL(t,e)?e:encodeURIComponent(e)},tj={ftp:21,file:null,http:80,https:443,ws:80,wss:443},nj=function(e,t){var n;return 2==e.length&&CL(jL,TL(e,0))&&(":"==(n=TL(e,1))||!t&&"|"==n)},rj=function(e){var t;return e.length>1&&nj(DL(e,0,2))&&(2==e.length||"/"===(t=TL(e,2))||"\\"===t||"?"===t||"#"===t)},ij=function(e){return"."===e||"%2e"===PL(e)},oj={},aj={},sj={},cj={},uj={},dj={},lj={},fj={},hj={},pj={},_j={},vj={},mj={},gj={},yj={},Sj={},bj={},Ej={},Tj={},Cj={},Rj={},wj=function(e,t,n){var r,i,o,a=uL(e);if(t){if(i=this.parse(a))throw yL(i);this.searchParams=null}else{if(void 0!==n&&(r=new wj(n,!0)),i=this.parse(a,null,r))throw yL(i);(o=mL(new vL)).bindURL(this),this.searchParams=o}};wj.prototype={type:"URL",parse:function(e,t,n){var r,i,o,a,s,c=this,u=t||oj,d=0,l="",f=!1,h=!1,p=!1;for(e=uL(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=OL(e,KL,"")),e=OL(e,qL,""),r=oL(e);d<=r.length;){switch(i=r[d],u){case oj:if(!i||!CL(jL,i)){if(t)return xL;u=sj;continue}l+=PL(i),u=aj;break;case aj:if(i&&(CL(VL,i)||"+"==i||"-"==i||"."==i))l+=PL(i);else{if(":"!=i){if(t)return xL;l="",u=sj,d=0;continue}if(t&&(c.isSpecial()!=rL(tj,l)||"file"==l&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=l,t)return void(c.isSpecial()&&tj[c.scheme]==c.port&&(c.port=null));l="","file"==c.scheme?u=gj:c.isSpecial()&&n&&n.scheme==c.scheme?u=cj:c.isSpecial()?u=fj:"/"==r[d+1]?(u=uj,d++):(c.cannotBeABaseURL=!0,AL(c.path,""),u=Tj)}break;case sj:if(!n||n.cannotBeABaseURL&&"#"!=i)return xL;if(n.cannotBeABaseURL&&"#"==i){c.scheme=n.scheme,c.path=aL(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,u=Rj;break}u="file"==n.scheme?gj:dj;continue;case cj:if("/"!=i||"/"!=r[d+1]){u=dj;continue}u=hj,d++;break;case uj:if("/"==i){u=pj;break}u=Ej;continue;case dj:if(c.scheme=n.scheme,i==YU)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=aL(n.path),c.query=n.query;else if("/"==i||"\\"==i&&c.isSpecial())u=lj;else if("?"==i)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=aL(n.path),c.query="",u=Cj;else{if("#"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=aL(n.path),c.path.length--,u=Ej;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=aL(n.path),c.query=n.query,c.fragment="",u=Rj}break;case lj:if(!c.isSpecial()||"/"!=i&&"\\"!=i){if("/"!=i){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,u=Ej;continue}u=pj}else u=hj;break;case fj:if(u=hj,"/"!=i||"/"!=TL(l,d+1))continue;d++;break;case hj:if("/"!=i&&"\\"!=i){u=pj;continue}break;case pj:if("@"==i){f&&(l="%40"+l),f=!0,o=oL(l);for(var _=0;_<o.length;_++){var v=o[_];if(":"!=v||p){var m=ej(v,QL);p?c.password+=m:c.username+=m}else p=!0}l=""}else if(i==YU||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(f&&""==l)return"Invalid authority";d-=oL(l).length+1,l="",u=_j}else l+=i;break;case _j:case vj:if(t&&"file"==c.scheme){u=Sj;continue}if(":"!=i||h){if(i==YU||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()){if(c.isSpecial()&&""==l)return UL;if(t&&""==l&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(l))return a;if(l="",u=bj,t)return;continue}"["==i?h=!0:"]"==i&&(h=!1),l+=i}else{if(""==l)return UL;if(a=c.parseHost(l))return a;if(l="",u=mj,t==vj)return}break;case mj:if(!CL(BL,i)){if(i==YU||"/"==i||"?"==i||"#"==i||"\\"==i&&c.isSpecial()||t){if(""!=l){var g=SL(l,10);if(g>65535)return LL;c.port=c.isSpecial()&&g===tj[c.scheme]?null:g,l=""}if(t)return;u=bj;continue}return LL}l+=i;break;case gj:if(c.scheme="file","/"==i||"\\"==i)u=yj;else{if(!n||"file"!=n.scheme){u=Ej;continue}if(i==YU)c.host=n.host,c.path=aL(n.path),c.query=n.query;else if("?"==i)c.host=n.host,c.path=aL(n.path),c.query="",u=Cj;else{if("#"!=i){rj(RL(aL(r,d),""))||(c.host=n.host,c.path=aL(n.path),c.shortenPath()),u=Ej;continue}c.host=n.host,c.path=aL(n.path),c.query=n.query,c.fragment="",u=Rj}}break;case yj:if("/"==i||"\\"==i){u=Sj;break}n&&"file"==n.scheme&&!rj(RL(aL(r,d),""))&&(nj(n.path[0],!0)?AL(c.path,n.path[0]):c.host=n.host),u=Ej;continue;case Sj:if(i==YU||"/"==i||"\\"==i||"?"==i||"#"==i){if(!t&&nj(l))u=Ej;else if(""==l){if(c.host="",t)return;u=bj}else{if(a=c.parseHost(l))return a;if("localhost"==c.host&&(c.host=""),t)return;l="",u=bj}continue}l+=i;break;case bj:if(c.isSpecial()){if(u=Ej,"/"!=i&&"\\"!=i)continue}else if(t||"?"!=i)if(t||"#"!=i){if(i!=YU&&(u=Ej,"/"!=i))continue}else c.fragment="",u=Rj;else c.query="",u=Cj;break;case Ej:if(i==YU||"/"==i||"\\"==i&&c.isSpecial()||!t&&("?"==i||"#"==i)){if(".."===(s=PL(s=l))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"==i||"\\"==i&&c.isSpecial()||AL(c.path,"")):ij(l)?"/"==i||"\\"==i&&c.isSpecial()||AL(c.path,""):("file"==c.scheme&&!c.path.length&&nj(l)&&(c.host&&(c.host=""),l=TL(l,0)+":"),AL(c.path,l)),l="","file"==c.scheme&&(i==YU||"?"==i||"#"==i))for(;c.path.length>1&&""===c.path[0];)kL(c.path);"?"==i?(c.query="",u=Cj):"#"==i&&(c.fragment="",u=Rj)}else l+=ej(i,$L);break;case Tj:"?"==i?(c.query="",u=Cj):"#"==i?(c.fragment="",u=Rj):i!=YU&&(c.path[0]+=ej(i,XL));break;case Cj:t||"#"!=i?i!=YU&&("'"==i&&c.isSpecial()?c.query+="%27":c.query+="#"==i?"%23":ej(i,XL)):(c.fragment="",u=Rj);break;case Rj:i!=YU&&(c.fragment+=ej(i,ZL))}d++}},parseHost:function(e){var t,n,r;if("["==TL(e,0)){if("]"!=TL(e,e.length-1))return UL;if(t=function(e){var t,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,d=null,l=0,f=function(){return TL(e,l)};if(":"==f()){if(":"!=TL(e,1))return;l+=2,d=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=n=0;n<4&&CL(GL,f());)t=16*t+SL(f(),16),l++,n++;if("."==f()){if(0==n)return;if(l-=n,u>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;l++}if(!CL(BL,f()))return;for(;CL(BL,f());){if(o=SL(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;l++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==f()){if(l++,!f())return}else if(f())return;c[u++]=t}else{if(null!==d)return;l++,d=++u}}if(null!==d)for(a=u-d,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[d+a-1],c[d+--a]=s;else if(8!=u)return;return c}(DL(e,1,-1)),!t)return UL;this.host=t}else if(this.isSpecial()){if(e=cL(e),CL(WL,e))return UL;if(t=function(e){var t,n,r,i,o,a,s,c=NL(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==TL(i,0)&&(o=CL(FL,i)?16:8,i=DL(i,8==o?1:2)),""===i)a=0;else{if(!CL(10==o?HL:8==o?zL:GL,i))return e;a=SL(i,o)}AL(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=EL(256,5-t))return null}else if(a>255)return null;for(s=IL(n),r=0;r<n.length;r++)s+=n[r]*EL(256,3-r);return s}(e),null===t)return UL;this.host=t}else{if(CL(YL,e))return UL;for(t="",n=oL(e),r=0;r<n.length;r++)t+=ej(n[r],XL);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return rL(tj,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&nj(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",e.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=JL(i),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+RL(a,"/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw yL(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Ij(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+JL(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(uL(e)+":",oj)},getUsername:function(){return this.username},setUsername:function(e){var t=oL(uL(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ej(t[n],QL)}},getPassword:function(){return this.password},setPassword:function(e){var t=oL(uL(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ej(t[n],QL)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?JL(e):JL(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,_j)},getHostname:function(){var e=this.host;return null===e?"":JL(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,vj)},getPort:function(){var e=this.port;return null===e?"":uL(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=uL(e))?this.port=null:this.parse(e,mj))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+RL(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,bj))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=uL(e))?this.query=null:("?"==TL(e,0)&&(e=DL(e,1)),this.query="",this.parse(e,Cj)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=uL(e))?("#"==TL(e,0)&&(e=DL(e,1)),this.fragment="",this.parse(e,Rj)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ij=function(e){var t=nL(this,Aj),n=lL(arguments.length,1)>1?arguments[1]:void 0,r=pL(t,new wj(e,!1,n));JU||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Aj=Ij.prototype,Oj=function(e,t){return{get:function(){return _L(this)[e]()},set:t&&function(e){return _L(this)[t](e)},configurable:!0,enumerable:!0}};if(JU&&eL(Aj,{href:Oj("serialize","setHref"),origin:Oj("getOrigin"),protocol:Oj("getProtocol","setProtocol"),username:Oj("getUsername","setUsername"),password:Oj("getPassword","setPassword"),host:Oj("getHost","setHost"),hostname:Oj("getHostname","setHostname"),port:Oj("getPort","setPort"),pathname:Oj("getPathname","setPathname"),search:Oj("getSearch","setSearch"),searchParams:Oj("getSearchParams"),hash:Oj("getHash","setHash")}),tL(Aj,"toJSON",(function(){return _L(this).serialize()}),{enumerable:!0}),tL(Aj,"toString",(function(){return _L(this).serialize()}),{enumerable:!0}),gL){var kj=gL.createObjectURL,Nj=gL.revokeObjectURL;kj&&tL(Ij,"createObjectURL",$U(kj,gL)),Nj&&tL(Ij,"revokeObjectURL",$U(Nj,gL))}dL(Ij,"URL"),qU({global:!0,forced:!XU,sham:!JU},{URL:Ij});var Dj,Pj=function(){function e(e){this._sharedAudioContext=new AudioContext,this._audioDestination=this._sharedAudioContext.createMediaStreamDestination(),this._localGainNode=this._sharedAudioContext.createGain(),this._bufferGainNode=this._sharedAudioContext.createGain(),this.mixingMap=new Map,this.resourcesCache=new Map,this.volumeConfig=new Map,this.cachedBuffer=[],this._context=e,this._localGainNode.gain.value=1}return e.prototype.mixMediaStream=function(e){this._localSource&&this._localSource.disconnect(this._localGainNode),this._localSource=this._sharedAudioContext.createMediaStreamSource(e),this._localSource.connect(this._localGainNode).connect(this._audioDestination)},e.prototype.startAudioMixing=function(e,t,n){return y(this,void 0,void 0,(function(){var r,i,o,a,s,c,u,d,l,f,h,p;return S(this,(function(_){switch(_.label){case 0:if(r=n.playCount,i=n.type,!(o=this._context.getLocalAudioTrack()))return[2];if(v=o.getTrack(),(a=UM.get(v))&&this.mixMediaStream(a),(s=this.mixingMap.get(e))&&s.audioNode){s.audioNode.pause();try{s.gainNode.disconnect(this._audioDestination),s.audioSource.disconnect(s.gainNode)}catch(e){}}return(u=this.resourcesCache.get(e))&&u.filePath===t?(c=u.getAudioNode(),[3,3]):[3,1];case 1:return[4,fetch(t,{mode:"cors",credentials:"include"}).then((function(e){if(e.ok)return e.arrayBuffer();throw new Ny(yy,e.statusText)}))];case 2:d=_.sent(),c=new Audio(URL.createObjectURL(new Blob([d]))),_.label=3;case 3:return c.crossOrigin="anonymous",r<=0?c.loop=!0:r>0&&(l=r,c.onended=function(){l-- >0&&c.play()}),[4,c.play()];case 4:if(_.sent(),f=this._sharedAudioContext.createMediaElementSource(c),h=this._sharedAudioContext.createGain(),p=this.volumeConfig.get(e),h.gain.value=p?p/100:1,f.connect(h).connect(this._audioDestination),this.mixingMap.set(e,{audioSource:f,audioNode:c,gainNode:h,type:"file"}),i!==oP.PUBLISH)try{h.disconnect(this._sharedAudioContext.destination)}catch(e){}else h.connect(this._sharedAudioContext.destination);return this._context.updateLocalAudioTrack(this._audioDestination.stream.getAudioTracks()[0],n.type||oP.PLAYOUT_AND_PUBLISH),[2]}var v}))}))},e.prototype.stopAudioMixing=function(e){var t=this.mixingMap.get(e);t&&"file"===t.type&&(this.mixingMap.delete(e),t.audioNode.pause(),t.audioSource.disconnect(t.gainNode),t.gainNode.disconnect(this._audioDestination),this._context.updateLocalAudioTrack())},e.prototype.pauseAudioMixing=function(e){var t=this.mixingMap.get(e);t&&t.audioNode.pause()},e.prototype.resumeAudioMixing=function(e){var t=this.mixingMap.get(e);t&&t.audioNode.play()},e.prototype.preloadAudioMixing=function(e,t){return y(this,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:return this.stopAudioMixing(e),[4,fetch(t,{mode:"cors",credentials:"include"}).then((function(e){if(e.ok)return e.arrayBuffer();throw new Ny(yy,e.statusText)})).catch((function(e){throw new Ny(yy,"Load resources failed",e)}))];case 1:return n=r.sent(),this.resourcesCache.set(e,{getAudioNode:function(){return new Audio(URL.createObjectURL(new Blob([n])))},filePath:t}),[2]}}))}))},e.prototype.unloadAudioMixing=function(e){this.resourcesCache.has(e)&&this.resourcesCache.delete(e)},e.prototype.getAudioMixingVolume=function(e){var t=this.mixingMap.get(e);return t?100*t.gainNode.gain.value:0},e.prototype.setAudioMixingVolume=function(e,t){t<0?t=0:t>400&&(t=400),this.volumeConfig.set(e,t);var n=this.mixingMap.get(e);n&&(n.gainNode.gain.value=Number(t)/100)},e.prototype.getAudioMixingDuration=function(e){var t=this.mixingMap.get(e),n=this.mixingMap.get(e);return t||n?t?1e3*t.audioNode.duration:n?1e3*n.audioNode.duration:0:0},e.prototype.getAudioMixingCurrentPosition=function(e){var t=this.mixingMap.get(e);return t?1e3*t.audioNode.currentTime:0},e.prototype.setAudioMixingPosition=function(e,t){var n=this.mixingMap.get(e);n&&(n.audioNode.currentTime=t/1e3,n.audioNode.play())},e.prototype.enableAudioMixingBuffer=function(e){this._bufferGainNode.connect(this._audioDestination),this._bufferGainNode.connect(this._sharedAudioContext.destination)},e.prototype.disableAudioMixingBuffer=function(){this.cachedBuffer=[],this._audioBufferSource&&(this._audioBufferSource.disconnect(this._bufferGainNode),this._audioBufferSource=void 0,this._bufferGainNode.disconnect(this._audioDestination),this._bufferGainNode.disconnect(this._sharedAudioContext.destination))},e.prototype.pushAudioMixingBuffer=function(e){var t=this;this._audioBufferSource&&this.cachedBuffer.push(e),this._audioBufferSource=this._sharedAudioContext.createBufferSource(),this._audioBufferSource.buffer=e,this._audioBufferSource.connect(this._bufferGainNode),this._audioBufferSource.start(),this._audioBufferSource.onended=function(){var e;if(null===(e=t._audioBufferSource)||void 0===e||e.disconnect(t._bufferGainNode),t._audioBufferSource=void 0,t.cachedBuffer.length){var n=t.cachedBuffer.shift();n&&t.pushAudioMixingBuffer(n)}}},Object.defineProperty(e.prototype,"mixTrack",{get:function(){return this._audioDestination.stream.getAudioTracks()[0]},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e=this._sharedAudioContext;"closed"!==e.state&&"function"==typeof e.close&&e.close(),this.cachedBuffer=[],this.mixingMap.clear(),this.resourcesCache.clear(),this.volumeConfig.clear()},e}();!function(e){e.NORMAL_USER="normalUser",e.SILENT_USER="silentUser"}(Dj||(Dj={}));var Mj=new Yy("Engine",0),xj=function(e){function t(t){var n=e.call(this)||this;return n._visibility=!0,n._remoteVideoPlayer=new Map,n._remoteScreenPlayer=new Map,n._remoteAudioPlayer=new Map,n._videoStreamConstraints={},n._audioStreamConstraints={},n._videoStreamEncodeConfig=[{maxKbps:500}],n._screenStreamEncodeConfig=[{maxKbps:500}],n._pauseAllSubscribeState={audio:!1,video:!1},n._mirrorType=v.MIRROR_TYPE_RENDER,n._updateMixAudioTrack=function(e,t){return void 0===t&&(t=oP.PLAYOUT_AND_PUBLISH),y(n,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:return this._localAudioTrack?(e?(this._localAudioTrack.mixType=t,this._localAudioTrack.mixedAudioTrack=e):(delete this._localAudioTrack.mixType,delete this._localAudioTrack.mixedAudioTrack),(null===(n=this._room)||void 0===n?void 0:n.hasPublished)?[4,this._updatePublish()]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},n._appId=t,n._pubLock=new EP("pubLock"),n._addDeviceEventHandler(),n._audioMixingManager=new Pj({getLocalAudioTrack:function(){return n._localAudioTrack},updateLocalAudioTrack:n._updateMixAudioTrack}),window["__rtc_engine__".concat(Math.floor(100*Math.random()+1))]=n,n._trackSourceType={video:r.VIDEO_SOURCE_TYPE_INTERNAL,screenVideo:r.VIDEO_SOURCE_TYPE_INTERNAL,audio:i.AUDIO_SOURCE_TYPE_INTERNAL,screenAudio:i.AUDIO_SOURCE_TYPE_INTERNAL},n}return n(t,e),Object.defineProperty(t.prototype,"appId",{get:function(){return this._appId},enumerable:!1,configurable:!0}),t.prototype.updateToken=function(e){var t;Mj.print("updateToken","Invoke updateToken: ",e),Dy(e,"token"),null===(t=this._room)||void 0===t||t.updateToken(e)},t.prototype.switchCamera=function(e){var t,n;return y(this,void 0,void 0,(function(){var r,i;return S(this,(function(o){switch(o.label){case 0:return Mj.print("switchCamera","Invoke switchCamera: ",e),Dy(e,"deviceId"),e===(null===(n=null===(t=this._videoStreamConstraints)||void 0===t?void 0:t.deviceId)||void 0===n?void 0:n.exact)?[2]:((r=this._videoStreamConstraints).deviceId={exact:e},this._videoStreamConstraints=r,[4,XM(r)]);case 1:return i=o.sent(),this._initLocalTrackEvents(i),this._localVideoTrack&&this._localVideoTrack.close(),this._localVideoTrack=i,this._videoPlayer&&(this._videoPlayer.stop(),this._videoPlayer.playVideo(i),this._videoPlayer.mirror(!!this._mirrorType)),this._room?this._room.hasPublished?[4,this._updatePublish()]:[3,3]:[2];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.switchMicrophone=function(e){var t,n;return y(this,void 0,void 0,(function(){var r,i;return S(this,(function(o){switch(o.label){case 0:return Mj.print("switchMicrophone","Invoke switchMicrophone: ",e),Dy(e,"deviceId"),e===(null===(n=null===(t=this._videoStreamConstraints)||void 0===t?void 0:t.deviceId)||void 0===n?void 0:n.exact)?[2]:((r=this._audioStreamConstraints).deviceId={exact:e},this._audioStreamConstraints=r,[4,ZM(r)]);case 1:return i=o.sent(),this._initLocalTrackEvents(i),this._localAudioTrack&&this._localAudioTrack.close(),this._localAudioTrack=i,this._audioPlayer&&(this._audioPlayer.stop(),this._audioPlayer.playAudio(i)),this._room?this._room.hasPublished?[4,this._updatePublish()]:[3,3]:[2];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype._addDeviceEventHandler=function(){kM.on("onMediaDeviceStateChanged",this._onDeviceStateChange.bind(this))},t.prototype._addHandlerEventHandler=function(){var e,t,n,r,i,o,a,s,c,u,d,l,f,h,p,_,v,m,g,y,S,b=this;null===(e=this._room)||void 0===e||e.on(JN.ON_ADD_STREAM,this._onAddStream.bind(this)),null===(t=this._room)||void 0===t||t.on(JN.ON_REMOVE_STREAM,this._onRemoveStream.bind(this)),null===(n=this._room)||void 0===n||n.on(JN.USER_CONNECTION,this._onUserConnection.bind(this)),null===(r=this._room)||void 0===r||r.on(JN.USER_DISCONNECTION,this._onUserDisconnection.bind(this)),null===(i=this._room)||void 0===i||i.on(JN.ON_CUSTOM_MESSAGE,this._onCustomMessage.bind(this)),null===(o=this._room)||void 0===o||o.on(JN.USER_MESSAGE_RECEIVED,this._onUserMessageReceived.bind(this)),null===(a=this._room)||void 0===a||a.on(JN.USER_BINARY_MESSAGE_RECEIVED,this._onUserBinaryMessageReceived.bind(this)),null===(s=this._room)||void 0===s||s.on(JN.POST_PROCESSING_MESSAGE,this._onLiveTranscodingResult.bind(this)),null===(c=this._room)||void 0===c||c.on(XN.ON_CONNECTION_STATE_CHANGE,this._onConnectionStateChange.bind(this)),null===(u=this._room)||void 0===u||u.on(ex.RESUBSCRIBE,this._onResubscribe.bind(this)),null===(d=this._room)||void 0===d||d.on(ex.SUBSCRIBE_PUSH_TRACK,this._onSubscribePushTrack.bind(this)),null===(l=this._room)||void 0===l||l.on(ex.REMOVE_PUSH_TRACK,this._onRemovePushTrack.bind(this)),null===(f=this._room)||void 0===f||f.on(ex.VIDEO_FIRST_FRAME,this._onVideoFirstFrameDecoded.bind(this)),null===(h=this._room)||void 0===h||h.on("onRemoteStreamStats",(function(e){b.safeEmit(C.onRemoteStreamStats,e)})),null===(p=this._room)||void 0===p||p.on("onLocalStreamStats",(function(e){b.safeEmit(C.onLocalStreamStats,e)})),null===(_=this._room)||void 0===_||_.on(ex.ON_USER_MUTE_AUDIO,this._onUserMuteAudio.bind(this)),null===(v=this._room)||void 0===v||v.on(ex.ON_USER_MUTE_VIDEO,this._onUserMuteVideo.bind(this)),null===(m=this._room)||void 0===m||m.on(ex.ON_USER_START_AUDIO_CAPTURE,(function(e){var t=e.userId;b.safeEmit(C.onUserStartAudioCapture,{userId:t})})),null===(g=this._room)||void 0===g||g.on(ex.ON_USER_STOP_AUDIO_CAPTURE,(function(e){var t=e.userId;b.safeEmit(C.onUserStopAudioCapture,{userId:t})})),null===(y=this._room)||void 0===y||y.on(ex.ON_USER_START_VIDEO_CAPTURE,(function(e){var t=e.userId;b.safeEmit(C.onUserStartVideoCapture,{userId:t})})),null===(S=this._room)||void 0===S||S.on(ex.ON_USER_STOP_VIDEO_CAPTURE,(function(e){var t=e.userId;b.safeEmit(C.onUserStopVideoCapture,{userId:t})}))},t.prototype.safeEmit=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return Fy(t)&&jj(t,JSON.stringify(n)),e.prototype.safeEmit.apply(this,T([t],E(n),!1))},t.prototype._removeHandlerEventHandler=function(){var e;null===(e=this._room)||void 0===e||e.removeAllListeners()},t.prototype.joinRoom=function(e,t,n,r){return void 0===r&&(r={isAutoPublish:!1,isAutoSubscribeAudio:!1,isAutoSubscribeVideo:!1}),y(this,void 0,void 0,(function(){var i;return S(this,(function(o){switch(o.label){case 0:if(Mj.print("joinRoom","Invoke joinRoom: ",e,t,n,r),Uy(e)||Dy(e,"token"),function(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \_\-\@]{1,128}$/.test(e))throw new Ny(qg,"The RoomId must be within 128 bytes. The supported characters: a-z,A-Z,0-9,@,-,_")}(t),Ly(n),!this._room||this._room.connectionState===RP.DISCONNECTED)return[3,1];throw new Ny(Zg,"Already joined");case 1:return this._room=new ox(r),this._addHandlerEventHandler(),i=this._liveTranscodeConfig&&xb("started",this._liveTranscodeConfig),[4,this._room.join(this._appId,t,e,m(m({},n),{businessId:this._businessId,role:this._visibility?Dj.NORMAL_USER:Dj.SILENT_USER}),i)];case 2:return o.sent(),this._roomConfig=r,(this._localAudioTrack||this._localVideoTrack)&&r.isAutoPublish?[4,this._updatePublish()]:[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},t.prototype.leaveRoom=function(){var e;Mj.print("leaveRoom","Invoke leaveRoom"),this._removeHandlerEventHandler(),null===(e=this._room)||void 0===e||e.leave().catch,this._liveTranscodeConfig&&this.stopLiveTranscoding(),this._room=void 0,this._remoteAudioPlayer.forEach((function(e){return e.stop()})),this._remoteAudioPlayer=new Map,this._remoteScreenPlayer.forEach((function(e){return e.stop()})),this._remoteScreenPlayer=new Map,this._remoteVideoPlayer.forEach((function(e){return e.stop()})),this._remoteVideoPlayer=new Map,this._roomConfig=void 0},t.prototype.destroy=function(){var e,t,n;Mj.print("destroy","Invoke destroy"),this.removeAllListeners(),this._removeHandlerEventHandler(),null===(e=this._room)||void 0===e||e.destroy(),this._room=void 0,null===(t=this._videoPlayer)||void 0===t||t.stop(),null===(n=this._audioPlayer)||void 0===n||n.stop(),this._videoPlayer=void 0,this._audioPlayer=void 0,this._screenPlayer=void 0,this._videoStreamConstraints={},this._audioStreamConstraints={},this._videoStreamEncodeConfig=[{maxKbps:500}],this._screenStreamEncodeConfig=[{maxKbps:500}],this._pauseAllSubscribeState={audio:!1,video:!1},clearInterval(this._audioVolumeIndicationTimer),this._audioVolumeIndicationTimer=void 0,this._localAudioTrack&&(this._localAudioTrack.close(),this._localAudioTrack=void 0),this._localVideoTrack&&(this._localVideoTrack.close(),this._localVideoTrack=void 0),this._localScreenAudioTrack&&(this._localScreenAudioTrack.close(),this._localScreenAudioTrack=void 0),this._localScreenVideoTrack&&(this._localScreenVideoTrack.close(),this._localScreenVideoTrack=void 0),this._remoteAudioPlayer.forEach((function(e){return e.stop()})),this._remoteAudioPlayer=new Map,this._remoteScreenPlayer.forEach((function(e){return e.stop()})),this._remoteScreenPlayer=new Map,this._remoteVideoPlayer.forEach((function(e){return e.stop()})),this._remoteVideoPlayer=new Map,this._roomConfig=void 0,this._audioMixingManager.destroy()},t.prototype.publish=function(){return y(this,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:if(Mj.print("publish","Invoke publish"),!this._room||this._room.connectionState!==RP.CONNECTED)throw new Ny($g,"join first");return[4,this._updatePublish()];case 1:return e.sent(),[2]}}))}))},t.prototype.unpublish=function(){return y(this,void 0,void 0,(function(){var e,t;return S(this,(function(n){switch(n.label){case 0:if(Mj.print("unpublish","Invoke unpublish"),!this._room)throw new Ny(Qg,"join first");return[4,this._pubLock.lock()];case 1:e=n.sent(),n.label=2;case 2:return n.trys.push([2,4,5,6]),[4,this._room.unpublish()];case 3:return n.sent(),[3,6];case 4:throw(t=n.sent())instanceof Ny?t:new Ny(ky,"unexpected error",t);case 5:return e(),[7];case 6:return[2]}}))}))},t.prototype.subscribeUserStream=function(e,t,n,r){var i,o,a,s;return void 0===n&&(n=f.STREAM_INDEX_MAIN),void 0===r&&(r={videoIndex:0}),y(this,void 0,void 0,(function(){var u,d,l,p,_,v;return S(this,(function(m){switch(m.label){case 0:if(Mj.print("subscribeStream","Invoke subscribeStream: ",e,t,n,r),Dy(e,"userId"),Py(t,"mediaType",[h.AUDIO_AND_VIDEO,h.AUDIO_ONLY,h.VIDEO_ONLY,h.NONE]),Py(n,"streamType",[f.STREAM_INDEX_MAIN,f.STREAM_INDEX_SCREEN]),Vy(r),!this._room||this._room.connectionState!==RP.CONNECTED)throw new Ny(ey,"join first");if(u=this._room.remoteStreams.get(e),l=n===f.STREAM_INDEX_SCREEN,!(d=l?null==u?void 0:u.find((function(e){return e.isScreen})):null==u?void 0:u.find((function(e){return!e.isScreen}))))throw new Ny(ny,"stream not exist");m.label=1;case 1:return m.trys.push([1,3,,4]),p=t,this._pauseAllSubscribeState.audio&&this._pauseAllSubscribeState.video?t=h.NONE:this._pauseAllSubscribeState.audio&&!this._pauseAllSubscribeState.video?t===h.AUDIO_AND_VIDEO?t=h.VIDEO_ONLY:t===h.AUDIO_ONLY&&(t=h.NONE):!this._pauseAllSubscribeState.audio&&this._pauseAllSubscribeState.video&&(t===h.AUDIO_AND_VIDEO?t=h.AUDIO_ONLY:t===h.VIDEO_ONLY&&(t=h.NONE)),t!==p&&Mj.print("subscribeUserStream","due to pauseAllState change sub mediaType from ".concat(p," to ").concat(t)),[4,this._room.subscribe(d,t,r)];case 2:return m.sent(),this._updateVideoPlayerState(d),this._updateAudioPlayerState(d),((null===(i=this._roomConfig)||void 0===i?void 0:i.isAutoSubscribeAudio)||(null===(o=this._roomConfig)||void 0===o?void 0:o.isAutoSubscribeVideo))&&(d.audioTrack||d.videoTrack)&&(v={userId:e,isScreen:l,state:c.SUBSCRIBE_SUCC},this.safeEmit(C.onAudioSubscribeResult,v)),[3,4];case 3:throw _=m.sent(),((null===(a=this._roomConfig)||void 0===a?void 0:a.isAutoSubscribeAudio)||(null===(s=this._roomConfig)||void 0===s?void 0:s.isAutoSubscribeVideo))&&(v={userId:e,isScreen:l,state:c.SUBSCRIBE_FAIL},this.safeEmit(C.onAudioSubscribeResult,v)),_;case 4:return[2]}}))}))},t.prototype.unSubscribe=function(e,t){return y(this,void 0,void 0,(function(){var n,r;return S(this,(function(i){switch(i.label){case 0:if(Mj.print("unSubscribe","Invoke unSubscribe"),Dy(e,"userId"),function(e,t){if("boolean"!=typeof e)throw new Ny(qg,"Invalid ".concat(t,": The value should be boolean type."))}(t,"isScreen"),!this._room||this._room.connectionState!==RP.CONNECTED)throw new Ny(ey,"join first");if(n=this._room.remoteStreams.get(e),!(r=t?null==n?void 0:n.find((function(e){return e.isScreen})):null==n?void 0:n.find((function(e){return!e.isScreen}))))throw new Ny(ny,"stream not exist");return[4,this._room.unsubscribe(r)];case 1:return i.sent(),this._updateAudioPlayerState(r),this._updateVideoPlayerState(r),[2]}}))}))},t.prototype.startVideoCapture=function(e){return y(this,void 0,void 0,(function(){var t,n,r;return S(this,(function(i){switch(i.label){case 0:if(Mj.print("startVideoCapture","Invoke startVideoCapture: ",e),Uy(e)||Dy(e,"deviceId"),this._localVideoTrack)throw new Ny(cy,"Has already capture");return t=this._videoStreamConstraints,e&&(t.deviceId={exact:e},this._videoStreamConstraints=t),[4,XM(t)];case 1:return n=i.sent(),this._initLocalTrackEvents(n),this._localVideoTrack=n,this._videoPlayer&&this._videoPlayer.playVideo(n),this._room?(r=this._room._roomConfig.isAutoPublish,this._room.hasPublished||r?[4,this._updatePublish()]:[3,3]):[2];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.stopVideoCapture=function(){var e;return y(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:if(Mj.print("stopVideoCapture","Invoke stopVideoCapture"),this._trackSourceType.video===r.VIDEO_SOURCE_TYPE_EXTERNAL)throw new Ny(fy,"setVideoSourceType as internal first");return this._videoPlayer&&this._videoPlayer.stop(),null===(e=this._localVideoTrack)||void 0===e||e.close(),this._localVideoTrack=void 0,this._room?this._room.hasPublished?[4,this._updatePublish()]:[3,2]:[2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.startAudioCapture=function(e){return y(this,void 0,void 0,(function(){var t,n,r;return S(this,(function(i){switch(i.label){case 0:if(Mj.print("startAudioCapture","Invoke startAudioCapture: ",e),Uy(e)||Dy(e,"deviceId"),this._localAudioTrack)throw new Ny(cy,"Has already capture");return t=this._audioStreamConstraints,e&&(t.deviceId={exact:e},this._audioStreamConstraints=t),[4,ZM(t)];case 1:return n=i.sent(),this._initLocalTrackEvents(n),this._localAudioTrack=n,this._room?(r=this._room._roomConfig.isAutoPublish,this._room.hasPublished||r?[4,this._updatePublish()]:[3,3]):[2];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.stopAudioCapture=function(){var e;return y(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:if(Mj.print("stopAudioCapture","Invoke stopAudioCapture"),null===(e=this._localAudioTrack)||void 0===e||e.close(),this._localAudioTrack=void 0,this._trackSourceType.audio===i.AUDIO_SOURCE_TYPE_EXTERNAL)throw new Ny(fy,"setAudioSourceType as internal first");return this._room?this._room.hasPublished?[4,this._updatePublish()]:[3,2]:[2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.getAudioMixingManager=function(){return this._audioMixingManager},t.prototype.startScreenCapture=function(e){var t,n;return void 0===e&&(e={}),y(this,void 0,void 0,(function(){var o,a,s,c;return S(this,(function(u){switch(u.label){case 0:if(Mj.print("startScreenCapture","Invoke startScreenCapture"),null===(t=this._localScreenVideoTrack)||void 0===t||t.close(),this._localScreenVideoTrack=void 0,o=e.enableAudio,a=void 0!==o&&o,this._trackSourceType.screenVideo===r.VIDEO_SOURCE_TYPE_EXTERNAL)throw new Ny(fy,"setVideoSourceType as internal first");if(this._trackSourceType.screenAudio===i.AUDIO_SOURCE_TYPE_EXTERNAL)throw new Ny(fy,"setAudioSourceType as internal first");return[4,$M(a)];case 1:return s=u.sent(),this._localScreenVideoTrack=new YM(s.getVideoTracks()[0],lD()),(c=s.getAudioTracks()).length&&(this._localScreenAudioTrack=new KM(c[0],lD())),null===(n=this._screenPlayer)||void 0===n||n.playVideo(this._localScreenVideoTrack),[2]}}))}))},t.prototype.stopScreenCapture=function(){var e,t,n;return y(this,void 0,void 0,(function(){return S(this,(function(r){return Mj.print("stopScreenCapture","Invoke stopCapture"),null===(e=this._screenPlayer)||void 0===e||e.stop(),null===(t=this._localScreenVideoTrack)||void 0===t||t.close(),this._localScreenVideoTrack=void 0,null===(n=this._localScreenAudioTrack)||void 0===n||n.close(),this._localScreenAudioTrack=void 0,[2]}))}))},t.prototype.publishScreen=function(){return y(this,void 0,void 0,(function(){var e;return S(this,(function(t){switch(t.label){case 0:if(Mj.print("publishScreen","Invoke publishScreen"),!this._room||this._room.connectionState!==RP.CONNECTED)throw new Ny($g,"join first");if(!this._visibility)throw new Ny(ty,"no publish permission");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._room.publishScreen(this._screenStreamEncodeConfig,this._localScreenVideoTrack,this._localScreenAudioTrack)];case 2:return t.sent(),[3,4];case 3:throw(e=t.sent())instanceof Ny?e:new Ny(ky,"unexpected error",e);case 4:return[2]}}))}))},t.prototype.unpublishScreen=function(){return y(this,void 0,void 0,(function(){var e;return S(this,(function(t){switch(t.label){case 0:if(Mj.print("unpublishScreen","Invoke unpublishScreen"),!this._room)throw new Ny(Qg,"join first");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._room.unpublishScreen()];case 2:return t.sent(),[3,4];case 3:throw(e=t.sent())instanceof Ny?e:new Ny(ky,"unexpected error",e);case 4:return[2]}}))}))},t.prototype.setupLocalVideoPlayer=function(e,t){Mj.print("setupLocalVideoPlayer","Invoke setupLocalVideoPlayer: ",e,t),Py(e,"streamIndex",[f.STREAM_INDEX_MAIN,f.STREAM_INDEX_SCREEN]),jy(t),e==f.STREAM_INDEX_MAIN?(this._videoPlayer=new lx(t),this._initPlayerEvents(this._videoPlayer),this._localVideoTrack&&this._videoPlayer.playVideo(this._localVideoTrack),this._videoPlayer.mirror(!!this._mirrorType)):(t.isScreen=!0,this._screenPlayer=new lx(t),this._initPlayerEvents(this._screenPlayer),this._localScreenVideoTrack&&this._screenPlayer.playVideo(this._localScreenVideoTrack))},t.prototype.startLiveTranscoding=function(e){var t;return y(this,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:Mj.print("startLiveTranscoding","Invoke startLiveTranscoding: ",e),Dy(e.url,"liveTranscode.url"),this._liveTranscodeConfig=e,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,null===(t=this._room)||void 0===t?void 0:t.controlMessage(xb("started",this._liveTranscodeConfig))];case 2:return r.sent(),[3,4];case 3:throw(n=r.sent())instanceof Ny?n:new Ny(ky,"unexpected error",n);case 4:return[2]}}))}))},t.prototype.updateLiveTranscoding=function(e){var t;return y(this,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:if(Mj.print("updateLiveTranscoding","Invoke updateLiveTranscoding: ",e),!this._liveTranscodeConfig)return[2];this._liveTranscodeConfig=hx.exports.assignIn(this._liveTranscodeConfig,e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,null===(t=this._room)||void 0===t?void 0:t.controlMessage(xb("layoutChanged",this._liveTranscodeConfig))];case 2:return r.sent(),[3,4];case 3:throw(n=r.sent())instanceof Ny?n:new Ny(ky,"unexpected error",n);case 4:return[2]}}))}))},t.prototype.stopLiveTranscoding=function(){var e;return y(this,void 0,void 0,(function(){var t;return S(this,(function(n){switch(n.label){case 0:if(Mj.print("stopLiveTranscoding","Invoke stopLiveTranscoding"),!this._liveTranscodeConfig)return[2];delete this._liveTranscodeConfig,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,null===(e=this._room)||void 0===e?void 0:e.controlMessage({action:"stopped",type:"transcode"})];case 2:return n.sent(),[3,4];case 3:throw(t=n.sent())instanceof Ny?t:new Ny(ky,"unexpected error",t);case 4:return[2]}}))}))},t.prototype.setBusinessId=function(e){if(Mj.print("setBusinessId","Invoke setBusinessId: ",e),function(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \_\-\@]{1,128}$/.test(e))throw new Ny(qg,"The businessId must be within 128 bytes. The supported characters: a-z,A-Z,0-9,@,-,_")}(e),this._room)throw new Ny(sy,"You should invoke setBusinessId before joinRoom");this._businessId=e},t.prototype.setUserVisibility=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:if(Mj.print("setUserVisibility","Invoke setUserVisibility: ",e),e=!!e,this._visibility===e)return[2];if(!this._room)return this._visibility=e,[2];if(this._room.connectionState!==RP.CONNECTED)throw new Ny(iy,"server not connected");return!e?[4,this._room.unpublish()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,this._room.updateUserAttributes({role:e?Dj.NORMAL_USER:Dj.SILENT_USER})];case 3:return t.sent(),this._visibility=e,[2]}}))}))},t.prototype._initPlayerEvents=function(e){var t=this;e.on("playback_event",(function(n){var r,i;switch(n.eventName){case"loadeddata":if("audio"===n.type)t.safeEmit(C.onAudioFirstFrameDecoded,{userId:e.userId}),eD.firstRemoteAudioRender("","");else{var o={userId:e.userId,height:(null===(r=e.domElement)||void 0===r?void 0:r.videoHeight)||0,width:(null===(i=e.domElement)||void 0===i?void 0:i.videoWidth)||0};t.safeEmit(C.onVideoFirstFrameRendered,o),eD.firstRemoteVideoRender("","")}break;case"autoplay-error":return void t.safeEmit(C.onAutoplayFailed,n)}t.safeEmit(C.onPlayerEvent,n)}))},t.prototype._initLocalTrackEvents=function(e){var t=this;e.on("track-ended",(function(e){var n=!1;e!==t._localScreenAudioTrack&&e!==t._localScreenVideoTrack||(n=!0),t.safeEmit(C.onTrackEnded,{kind:e.getTrack().kind,isScreen:n})}))},t.prototype.setupRemoteVideoPlayer=function(e,t){var n,r,i,o;Mj.print("setupRemoteVideoPlayer","Invoke setupRemoteVideoPlayer: ",e,t),Py(e,"streamIndex",[f.STREAM_INDEX_MAIN,f.STREAM_INDEX_SCREEN]),jy(t);var a=t.userId;if(e==f.STREAM_INDEX_MAIN){var s=new lx(t);this._initPlayerEvents(s),this._remoteVideoPlayer.set(a,s),(c=null===(r=null===(n=this._room)||void 0===n?void 0:n.remoteStreams.get(a))||void 0===r?void 0:r.find((function(e){return!e.isScreen})))&&this._updateVideoPlayerState(c)}else{t.isScreen=!0;var c;s=new lx(t);this._remoteScreenPlayer.set(a,s),this._initPlayerEvents(s),(c=null===(o=null===(i=this._room)||void 0===i?void 0:i.remoteStreams.get(a))||void 0===o?void 0:o.find((function(e){return e.isScreen})))&&this._updateVideoPlayerState(c)}},t.prototype.setLocalVideoMirrorType=function(e){Py(e,"mirrorType",[v.MIRROR_TYPE_NONE,v.MIRROR_TYPE_RENDER]),Mj.print("setLocalVideoMirrorType","Invoke setLocalVideoMirrorType: ",e),this._mirrorType=e,this._videoPlayer&&this._videoPlayer.mirror(!!e)},t.prototype.setAudioPlaybackDevice=function(e){var t;return y(this,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:return Mj.print("setAudioPlaybackDevice","Invoke setAudioPlaybackDevice: ",e),Dy(e,"deviceId"),void 0===HTMLAudioElement.prototype.setSinkId?(Mj.print("setAudioPlaybackDevice failed","setSinkId not supported by current browser"),[2]):[4,kM.getDeviceById(e)];case 1:if(!(n=r.sent()))throw new Ny(py,"audio playback device id ".concat(e," is invalid"));return this._remoteAudioPlayer.forEach((function(t){t.setPlaybackDevice(e)})),null===(t=this._audioPlayer)||void 0===t||t.setPlaybackDevice(e),n&&this.safeEmit(C.onAudioPlaybackDeviceChanged,n),eD.rtcAudioDevice(pN.PLAYOUT_DEVICE_SWITCH,e,0),[2]}}))}))},t.prototype.play=function(e){return y(this,void 0,void 0,(function(){var t;return S(this,(function(n){if(Mj.print("play","Invoke play: ",e),Dy(e,"userId"),(t=this._remoteAudioPlayer.get(e))||(t=this._audioPlayer),!t)throw new Ny(qg,"Player not found");return[2,t.manuallyPlay()]}))}))},t.prototype.muteLocalAudio=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){if(Mj.print("muteLocalAudio","Invoke muteLocalAudio: ",e),Py(e,"muteState",[s.MUTE_STATE_OFF,s.MUTE_STATE_ON]),!this._room)throw new Ny(Qg,"join first");return[2,this._room.muteLocalTrack("audio",e)]}))}))},t.prototype.muteLocalVideo=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){if(Mj.print("muteLocalVideo","Invoke muteLocalVideo: ",e),Py(e,"muteState",[s.MUTE_STATE_OFF,s.MUTE_STATE_ON]),!this._room)throw new Ny(Qg,"join first");return[2,this._room.muteLocalTrack("video",e)]}))}))},t.prototype.pauseAllSubscribedStream=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){if(!this._room||this._room.connectionState!==RP.CONNECTED)throw new Ny(Ey,"Refuse all operation in disconnect");return Mj.print("pauseAllSubscribedStream","".concat(e)),Py(e,"mediaType",[d.RTC_PAUSE_RESUME_CONTROL_AUDIO,d.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO,d.RTC_PAUSE_RESUME_CONTROL_VIDEO]),this._pauseAllSubscribeState.audio&&this._pauseAllSubscribeState.video?[2,Promise.resolve()]:(e===d.RTC_PAUSE_RESUME_CONTROL_AUDIO?this._pauseAllSubscribeState.audio=!0:e===d.RTC_PAUSE_RESUME_CONTROL_VIDEO?this._pauseAllSubscribeState.video=!0:e===d.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO&&(this._pauseAllSubscribeState.audio=!0,this._pauseAllSubscribeState.video=!0),this._room?[2,this._room.pauseAllSubscribedStream(e).then((function(){}))]:[2,Promise.resolve()])}))}))},t.prototype.resumeAllSubscribedStream=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){return Mj.print("resumeAllSubscribedStream","".concat(e)),Py(e,"mediaType",[d.RTC_PAUSE_RESUME_CONTROL_AUDIO,d.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO,d.RTC_PAUSE_RESUME_CONTROL_VIDEO]),this._pauseAllSubscribeState.audio||this._pauseAllSubscribeState.video?(e===d.RTC_PAUSE_RESUME_CONTROL_AUDIO?this._pauseAllSubscribeState.audio=!1:e===d.RTC_PAUSE_RESUME_CONTROL_VIDEO?this._pauseAllSubscribeState.video=!1:e===d.RTC_PAUSE_RESUME_CONTROL_AUDIO_AND_VIDEO&&(this._pauseAllSubscribeState.audio=!1,this._pauseAllSubscribeState.video=!1),this._room?[2,this._room.resumeAllSubscribedStream(e).then((function(){}))]:[2,Promise.resolve()]):[2,Promise.resolve()]}))}))},t.prototype.sendUserMessage=function(e,t){return y(this,void 0,void 0,(function(){return S(this,(function(n){if(Dy(e,"uid",1,128),By(t),!this._room||this._room.connectionState!==RP.CONNECTED)throw new Ny(oy,"join first");return[2,this._room.sendUserMessage(e,t)]}))}))},t.prototype.sendUserBinaryMessage=function(e,t){return y(this,void 0,void 0,(function(){return S(this,(function(n){if(Dy(e,"uid",1,128),function(e,t){if(!(e instanceof ArrayBuffer))throw new Ny(qg,"Invalid ".concat(t,", should be ArrayBuffer"))}(t,"message"),By(t),!this._room||this._room.connectionState!==RP.CONNECTED)throw new Ny(oy,"join first");return[2,this._room.sendUserMessage(e,t)]}))}))},t.prototype.sendRoomMessage=function(e){return y(this,void 0,void 0,(function(){return S(this,(function(t){if(By(e),!this._room||this._room.connectionState!==RP.CONNECTED)throw new Ny(oy,"join first");return[2,this._room.sendRoomMessage(e)]}))}))},t.prototype.setAudioCaptureConfig=function(e){var t;return void 0===e&&(e={}),y(this,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:return delete e.deviceId,xy(e),n=this._audioStreamConstraints.deviceId,this._audioStreamConstraints=e,n&&(this._audioStreamConstraints.deviceId=n),this._localAudioTrack?(this._localAudioTrack.audioCaptureConfig=this._audioStreamConstraints,[4,null===(t=this._localAudioTrack)||void 0===t?void 0:t.updateAudioCaptureConfig()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.setVideoCaptureConfig=function(e){var t;return void 0===e&&(e={}),y(this,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:return delete e.deviceId,xy(e),n=this._videoStreamConstraints.deviceId,this._videoStreamConstraints=e,n&&(this._videoStreamConstraints.deviceId=n),this._localVideoTrack?(this._localVideoTrack.videoCaptureConfig=this._videoStreamConstraints,[4,null===(t=this._localVideoTrack)||void 0===t?void 0:t.updateVideoCaptureConfig()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.setVideoEncoderConfig=function(e,t){var n,r,i,o,a,s,c,u;return y(this,void 0,void 0,(function(){return S(this,(function(d){if(Mj.print("setVideoEncoderConfig","streamIndex: ".concat(e,", descriptions: "),t),Py(e,"streamIndex",[f.STREAM_INDEX_MAIN,f.STREAM_INDEX_SCREEN]),function(e,t){if(!Array.isArray(e))throw new Ny(qg,"Invalid ".concat(t,", should be array"))}(t,"descriptions"),t.length>3&&(t=t.slice(0,3)),t.sort((function(e,t){return t.maxKbps-e.maxKbps})),e===f.STREAM_INDEX_MAIN){if(null===(r=null===(n=this._room)||void 0===n?void 0:n.localStream)||void 0===r?void 0:r.hasPublished){if(1!==this._videoStreamEncodeConfig.length||1!==(null==t?void 0:t.length))throw new Ny(qg,"After publishing, only non simulcast streams can be modified");null===(o=null===(i=this._room)||void 0===i?void 0:i.localStream)||void 0===o||o.updateVideoBitrate(t)}this._videoStreamEncodeConfig=t}else{if(null===(s=null===(a=this._room)||void 0===a?void 0:a.localScreenStream)||void 0===s?void 0:s.hasPublished){if(1!==this._screenStreamEncodeConfig.length||1!==(null==t?void 0:t.length))throw new Ny(qg,"After publishing, only non simulcast streams can be modified");null===(u=null===(c=this._room)||void 0===c?void 0:c.localScreenStream)||void 0===u||u.updateVideoBitrate([t[0]])}this._screenStreamEncodeConfig=t}return[2]}))}))},t.prototype.setAudioVolumeIndicationInterval=function(e){var t=this;Mj.print("setAudioVolumeIndicationInterval","interval: ".concat(e)),("number"!=typeof e||e<200)&&(e=200);var n=[];this._audioVolumeIndicationTimer&&clearInterval(this._audioVolumeIndicationTimer),this._audioVolumeIndicationTimer=setInterval((function(){var e,r,i,o;n=[],null===(e=t._room)||void 0===e||e.remoteStreams.forEach((function(e,t){var r,i,o=null===(i=null===(r=e[0])||void 0===r?void 0:r.audioTrack)||void 0===i?void 0:i.getAudioLevel();n.push({userId:t,volume:o||0})}));var a=null===(r=t._localAudioTrack)||void 0===r?void 0:r.getAudioLevel();n.push({userId:(null===(o=null===(i=t._room)||void 0===i?void 0:i._roomInfo)||void 0===o?void 0:o.userInfo.userId)||"local_user",volume:a||0}),t.safeEmit(C.onAudioVolumeIndication,{speakers:n})}),e)},t.prototype.setVideoSourceType=function(e,t){var n,i,o,a,s;return y(this,void 0,void 0,(function(){var c,u;return S(this,(function(d){switch(d.label){case 0:return Mj.print("setVideoSourceType","Invoke setVideoSourceType: ",e,t),Py(e,"streamIndex",[f.STREAM_INDEX_MAIN,f.STREAM_INDEX_SCREEN]),Py(t,"VideoSourceType",[r.VIDEO_SOURCE_TYPE_EXTERNAL,r.VIDEO_SOURCE_TYPE_INTERNAL]),c=e===f.STREAM_INDEX_MAIN?"video":"screenVideo",this._trackSourceType[c]===t?[3,4]:(this._trackSourceType[c]=t,Mj.print("setVideoSourceType","set ".concat(c," source type to ").concat(t)),this._localVideoTrack&&e===f.STREAM_INDEX_MAIN?(t===r.VIDEO_SOURCE_TYPE_EXTERNAL&&this._localVideoTrack.close(),null===(n=this._videoPlayer)||void 0===n||n.stop(),this._localVideoTrack,u=null===(i=this._room)||void 0===i?void 0:i._roomConfig.isAutoPublish,(null===(o=this._room)||void 0===o?void 0:o.hasPublished)||u?[4,this._updatePublish()]:[3,2]):[3,2]);case 1:d.sent(),d.label=2;case 2:return this._localScreenVideoTrack&&e===f.STREAM_INDEX_SCREEN?(t===r.VIDEO_SOURCE_TYPE_EXTERNAL&&this._localScreenVideoTrack.close(),null===(a=this._screenPlayer)||void 0===a||a.stop(),this._localScreenVideoTrack,(null===(s=this._room)||void 0===s?void 0:s.hasScreenPublished)?[4,this._updateScreenPublish()]:[3,4]):[3,4];case 3:d.sent(),d.label=4;case 4:return[2]}}))}))},t.prototype.setExternalVideoTrack=function(e,t){var n,i,o,a,s;return y(this,void 0,void 0,(function(){var c;return S(this,(function(u){switch(u.label){case 0:if(Mj.print("setExternalVideoTrack","Invoker setExternalVideoTrack: ",e,t),Py(e,"streamIndex",[f.STREAM_INDEX_MAIN,f.STREAM_INDEX_SCREEN]),e!==f.STREAM_INDEX_MAIN)return[3,2];if(this._trackSourceType.video!==r.VIDEO_SOURCE_TYPE_EXTERNAL)throw new Ny(fy,"setVideoSourceType as external first");return this._localVideoTrack=new qM(t,lD()),this._initLocalTrackEvents(this._localVideoTrack),null===(n=this._videoPlayer)||void 0===n||n.playVideo(this._localVideoTrack),c=null===(i=this._room)||void 0===i?void 0:i._roomConfig.isAutoPublish,(null===(o=this._room)||void 0===o?void 0:o.hasPublished)||c?[4,this._updatePublish()]:[3,2];case 1:u.sent(),u.label=2;case 2:if(e!==f.STREAM_INDEX_SCREEN)return[3,4];if(this._trackSourceType.screenVideo!==r.VIDEO_SOURCE_TYPE_EXTERNAL)throw new Ny(fy,"setVideoSourceType as external first");return this._localScreenVideoTrack=new qM(t,lD()),this._initLocalTrackEvents(this._localScreenVideoTrack),null===(a=this._screenPlayer)||void 0===a||a.playVideo(this._localScreenVideoTrack),(null===(s=this._room)||void 0===s?void 0:s.hasScreenPublished)?[4,this._updateScreenPublish()]:[3,4];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},t.prototype.setAudioSourceType=function(e,t){var n,r,o;return y(this,void 0,void 0,(function(){var a,s;return S(this,(function(c){switch(c.label){case 0:return Mj.print("setAudioSourceType","Invoke setAudioSourceType: ",e,t),Py(e,"streamIndex",[f.STREAM_INDEX_MAIN,f.STREAM_INDEX_SCREEN]),Py(t,"audioSourceType",[i.AUDIO_SOURCE_TYPE_EXTERNAL,i.AUDIO_SOURCE_TYPE_INTERNAL]),a=e===f.STREAM_INDEX_MAIN?"audio":"screenAudio",this._trackSourceType[a]===t?[3,4]:(this._trackSourceType[a]=t,Mj.print("setVideoSourceType","set ".concat(a," source type to ").concat(t)),this._localAudioTrack&&e===f.STREAM_INDEX_MAIN?(this._trackSourceType.audio===i.AUDIO_SOURCE_TYPE_EXTERNAL&&this._localAudioTrack.close(),this._localAudioTrack,s=null===(n=this._room)||void 0===n?void 0:n._roomConfig.isAutoPublish,(null===(r=this._room)||void 0===r?void 0:r.hasPublished)||s?[4,this._updatePublish()]:[3,2]):[3,2]);case 1:c.sent(),c.label=2;case 2:return this._localScreenAudioTrack&&e===f.STREAM_INDEX_SCREEN?(this._trackSourceType.audio===i.AUDIO_SOURCE_TYPE_EXTERNAL&&this._localScreenAudioTrack.close(),this._localScreenAudioTrack,(null===(o=this._room)||void 0===o?void 0:o.hasScreenPublished)?[4,this._updateScreenPublish()]:[3,4]):[3,4];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))},t.prototype.setExternalAudioTrack=function(e,t){var n,r,o;return y(this,void 0,void 0,(function(){var a;return S(this,(function(s){switch(s.label){case 0:if(Mj.print("setExternalAudioTrack","Invoker setExternalAudioTrack: ",e,t),Py(e,"streamIndex",[f.STREAM_INDEX_MAIN,f.STREAM_INDEX_SCREEN]),e!==f.STREAM_INDEX_MAIN)return[3,2];if(this._trackSourceType.audio!==i.AUDIO_SOURCE_TYPE_EXTERNAL)throw new Ny(fy,"setAudioSourceType as external first");return this._localAudioTrack=new JM(t,lD()),this._initLocalTrackEvents(this._localAudioTrack),a=null===(n=this._room)||void 0===n?void 0:n._roomConfig.isAutoPublish,(null===(r=this._room)||void 0===r?void 0:r.hasPublished)||a?[4,this._updatePublish()]:[3,2];case 1:s.sent(),s.label=2;case 2:if(e!==f.STREAM_INDEX_SCREEN)return[3,4];if(this._trackSourceType.screenAudio!==i.AUDIO_SOURCE_TYPE_EXTERNAL)throw new Ny(fy,"setAudioSourceType as external first");return this._localScreenAudioTrack=new JM(t,lD()),this._initLocalTrackEvents(this._localScreenAudioTrack),(null===(o=this._room)||void 0===o?void 0:o.hasScreenPublished)?[4,this._updateScreenPublish()]:[3,4];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))},t.prototype._updatePublish=function(){return y(this,void 0,void 0,(function(){var e,t;return S(this,(function(n){switch(n.label){case 0:if(!this._visibility)throw new Ny(ty,"no publish permission");return[4,this._pubLock.lock()];case 1:if(e=n.sent(),!this._room||this._room.connectionState!==RP.CONNECTED)return e(),[2];n.label=2;case 2:return n.trys.push([2,4,5,6]),[4,this._room.publish(this._videoStreamEncodeConfig,this._localVideoTrack,this._localAudioTrack)];case 3:return n.sent(),[3,6];case 4:throw(t=n.sent())instanceof Ny?t:new Ny(ky,"unexpected error",t);case 5:return e(),[7];case 6:return[2]}}))}))},t.prototype._updateScreenPublish=function(){return y(this,void 0,void 0,(function(){var e,t;return S(this,(function(n){switch(n.label){case 0:return[4,this._pubLock.lock()];case 1:if(e=n.sent(),!this._room||this._room.connectionState!==RP.CONNECTED)return e(),[2];n.label=2;case 2:return n.trys.push([2,4,5,6]),[4,this._room.publishScreen(this._screenStreamEncodeConfig,this._localScreenVideoTrack,this._localScreenAudioTrack)];case 3:return n.sent(),[3,6];case 4:throw(t=n.sent())instanceof Ny?t:new Ny(ky,"unexpected error",t);case 5:return e(),[7];case 6:return[2]}}))}))},t.prototype._updateAudioPlayerState=function(e){var t,n=e.userId,r=e.isScreen;if(t=r?this._remoteAudioPlayer.get("".concat(n,"_screen")):this._remoteAudioPlayer.get(n),e.audioTrack){if(!t){var i=r?"".concat(n,"_screen"):n;t=new fx(i),this._initPlayerEvents(t),this._remoteAudioPlayer.set(i,t)}t.playAudio(e.audioTrack)}else(null==t?void 0:t.isPlaying)&&t.stop()},t.prototype._updateVideoPlayerState=function(e){var t,n=e.userId;t=e.isScreen?this._remoteScreenPlayer.get(n):this._remoteVideoPlayer.get(n),e.videoTrack?t&&t.playVideo(e.videoTrack,e):(null==t?void 0:t.isPlaying)&&t.stop()},t.prototype._onAddStream=function(e){var t,n,r,i,o=e.stream,a={userId:o.userId,isScreen:o.isScreen,hasVideo:o.hasVideo,hasAudio:o.hasAudio,videoStreamDescriptions:o.attributes.videoDescriptions};this.safeEmit(C.onStreamAdd,{stream:a});var s=null;(null===(t=this._roomConfig)||void 0===t?void 0:t.isAutoSubscribeAudio)&&(s=h.AUDIO_ONLY),(null===(n=this._roomConfig)||void 0===n?void 0:n.isAutoSubscribeVideo)&&(s=h.VIDEO_ONLY),(null===(r=this._roomConfig)||void 0===r?void 0:r.isAutoSubscribeVideo)&&(null===(i=this._roomConfig)||void 0===i?void 0:i.isAutoSubscribeAudio)&&(s=h.AUDIO_AND_VIDEO),Mj.print("_onAddStream","autoSubType: ".concat(s)),null===s||o.isScreen||this.subscribeUserStream(o.userId,s)},t.prototype._onRemoveStream=function(e){var t=e.stream,n={userId:t.userId,isScreen:t.isScreen,hasVideo:t.hasVideo,hasAudio:t.hasAudio,videoStreamDescriptions:[]},r=Uj[e.reason]||p.STREAM_REMOVE_REASON_OTHER;this.safeEmit(C.onStreamRemove,{stream:n,reason:r})},t.prototype._onUserConnection=function(e){this.safeEmit(C.onUserJoined,e)},t.prototype._onUserDisconnection=function(e){this.safeEmit(C.onUserLeave,e)},t.prototype._onConnectionStateChange=function(e){this.safeEmit(C.onConnectionStateChanged,e)},t.prototype._onResubscribe=function(e){e.stream&&(this._updateAudioPlayerState(e.stream),this._updateVideoPlayerState(e.stream))},t.prototype._onSubscribePushTrack=function(e){e.stream&&this._updateAudioPlayerState(e.stream)},t.prototype._onRemovePushTrack=function(e){e.stream&&this._updateAudioPlayerState(e.stream)},t.prototype._onVideoFirstFrameDecoded=function(e){this.safeEmit(C.onVideoFirstFrameDecoded,e)},t.prototype._onDeviceStateChange=function(e){this.safeEmit(C.onMediaDeviceStateChanged,e)},t.prototype._onUserMuteAudio=function(e){this.safeEmit(C.onUserMuteAudio,e)},t.prototype._onUserMuteVideo=function(e){this.safeEmit(C.onUserMuteVideo,e)},t.prototype._onCustomMessage=function(e){var t=e.message;try{"string"==typeof t&&(t=JSON.parse(t))}catch(e){}this.safeEmit(C.onRoomMessageReceived,{message:t,userId:e.clientId})},t.prototype._onUserMessageReceived=function(e){this.safeEmit(C.onUserMessageReceived,e)},t.prototype._onUserBinaryMessageReceived=function(e){this.safeEmit(C.onUserBinaryMessageReceived,e)},t.prototype._onLiveTranscodingResult=function(e){this.safeEmit(C.onLiveTranscodingResult,e)},g([Lj()],t.prototype,"updateToken",null),g([Lj()],t.prototype,"switchCamera",null),g([Lj()],t.prototype,"switchMicrophone",null),g([Lj()],t.prototype,"joinRoom",null),g([Lj()],t.prototype,"leaveRoom",null),g([Lj()],t.prototype,"destroy",null),g([Lj()],t.prototype,"publish",null),g([Lj()],t.prototype,"unpublish",null),g([Lj()],t.prototype,"subscribeUserStream",null),g([Lj()],t.prototype,"unSubscribe",null),g([Lj()],t.prototype,"startVideoCapture",null),g([Lj()],t.prototype,"stopVideoCapture",null),g([Lj()],t.prototype,"startAudioCapture",null),g([Lj()],t.prototype,"stopAudioCapture",null),g([Lj()],t.prototype,"startScreenCapture",null),g([Lj()],t.prototype,"stopScreenCapture",null),g([Lj()],t.prototype,"publishScreen",null),g([Lj()],t.prototype,"unpublishScreen",null),g([Lj()],t.prototype,"setupLocalVideoPlayer",null),g([Lj()],t.prototype,"startLiveTranscoding",null),g([Lj()],t.prototype,"updateLiveTranscoding",null),g([Lj()],t.prototype,"stopLiveTranscoding",null),g([Lj()],t.prototype,"setBusinessId",null),g([Lj()],t.prototype,"setUserVisibility",null),g([Lj()],t.prototype,"setupRemoteVideoPlayer",null),g([Lj()],t.prototype,"setLocalVideoMirrorType",null),g([Lj()],t.prototype,"setAudioPlaybackDevice",null),g([Lj()],t.prototype,"play",null),g([Lj()],t.prototype,"muteLocalAudio",null),g([Lj()],t.prototype,"muteLocalVideo",null),g([Lj()],t.prototype,"pauseAllSubscribedStream",null),g([Lj()],t.prototype,"resumeAllSubscribedStream",null),g([Lj()],t.prototype,"sendUserMessage",null),g([Lj()],t.prototype,"sendUserBinaryMessage",null),g([Lj()],t.prototype,"sendRoomMessage",null),g([Lj()],t.prototype,"setAudioCaptureConfig",null),g([Lj()],t.prototype,"setVideoCaptureConfig",null),g([Lj()],t.prototype,"setVideoEncoderConfig",null),g([Lj()],t.prototype,"setAudioVolumeIndicationInterval",null),g([Lj()],t.prototype,"setVideoSourceType",null),g([Lj()],t.prototype,"setExternalVideoTrack",null),g([Lj()],t.prototype,"setAudioSourceType",null),g([Lj()],t.prototype,"setExternalAudioTrack",null),t}(qy),Uj={"client unpublished":p.STREAM_REMOVE_REASON_UNPUBLISH,"publish failed":p.STREAM_REMOVE_REASON_PUBLISH_FAILED,"stream removed":p.STREAM_REMOVE_REASON_KEEP_LIVE_FAILED,"client disconnected":p.STREAM_REMOVE_REASON_CLIENT_DISCONNECTED,"client republish":p.STREAM_REMOVE_REASON_REPUBLISH};function Lj(){return function(e,t,n){if("function"==typeof n.value){var r=n.value;n.value=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return eD.rtcSdkApiCall(t,0,JSON.stringify(e)),r.apply(this,e)}}}}function jj(e,t,n){void 0===n&&(n=0),eD.rtcSdkCallback(e,n,JSON.stringify(t))}var Vj=function(){var e;try{var t=null===(e=null===navigator||void 0===navigator?void 0:navigator.userAgent)||void 0===e?void 0:e.toLowerCase();if(t.indexOf("ucbrowser")>-1&&t.indexOf("iphone"))return!1}catch(e){return!1}return!(!window.RTCPeerConnection||!window.RTCPeerConnection.prototype.addTransceiver)},Bj=new Yy("VERTC",0),Fj=function(e){return Bj.print("createEngine","Invoke VERTC.createEngine"),Dy(e,"appId"),$N.setStats({rtc_app_id:e,rtc_sdk_version:qj(),product_line:Hk.RTC,report_version:Gk.W_5,os:Wk.WEB,device_id:ID.getDeviceId()}),eD.sdkInitEngine(Date.now(),SN.BEGIN),new xj(e)},zj=function(e){if(Bj.print("destroyEngine","Invoke VERTC.destroyEngine"),!(e instanceof xj))throw new Ny(Kg,"Invalid engine object");e.destroy(),eD.sdkInitEngine(Date.now(),SN.END)},Hj=function(){return y(void 0,void 0,void 0,(function(){return S(this,(function(e){return[2,kM.getDevices()]}))}))},Gj=function(e){return void 0===e&&(e={video:!0,audio:!0}),y(void 0,void 0,void 0,(function(){var t,n,r,i,o;return S(this,(function(a){switch(a.label){case 0:if(t=e.video,n=e.audio,r={video:!1,audio:!1},!t)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),i=r,[4,kM.getVideoPermission()];case 2:return i.video=a.sent(),[3,4];case 3:return a.sent(),[3,4];case 4:if(!n)return[3,8];a.label=5;case 5:return a.trys.push([5,7,,8]),o=r,[4,kM.getAudioPermission()];case 6:return o.audio=a.sent(),[3,8];case 7:return a.sent(),[3,8];case 8:return[2,r]}}))}))},Wj=function(){return y(void 0,void 0,void 0,(function(){return S(this,(function(e){return[2,kM.getMicrophones()]}))}))},Yj=function(){return y(void 0,void 0,void 0,(function(){return S(this,(function(e){return[2,kM.getCameras()]}))}))},Kj=function(){return y(void 0,void 0,void 0,(function(){return S(this,(function(e){return[2,kM.getAudioPlayback()]}))}))},qj=function(){return Db.VERSION},Jj=new function(){this.getSdkVersion=qj,this.createEngine=Fj,this.destroyEngine=zj,this.getDevices=Hj,this.enableDevices=Gj,this.getMicrophones=Wj,this.getCameras=Yj,this.getAudioPlayback=Kj,this.getParameter=Mb,this.setParameter=Pb,this.isSupported=Vj,this.events=C};return m(m(m({},Jj),R),{events:C})}));
//# sourceMappingURL=index.min.js.map
